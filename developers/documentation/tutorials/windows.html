<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr" >
<head>
	<link rel="stylesheet" href="/templates/diskohq/css/template.css" type="text/css" />


	  <base href="/developers/documentation/tutorials/windows.html" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="robots" content="index, follow" />
  <meta name="keywords" content="Disko, Disko framework, documentation, tutorials, windows" />
  <meta name="description" content="Disko a linux application framework for embedded devices" />
  <meta name="generator" content="Joomla! 1.5 - Open Source Content Management" />
  <title>Disko Framework - Documentation - Window Tutorial</title>
  <link href="/templates/diskohq/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <link rel="stylesheet" href="/templates/diskohq/css/documentation.css" type="text/css" />
  <style type="text/css">
    <!--

	@import url(http://www.google.com/cse/api/overlay.css);
	.cse-overlay {
		position: absolute;
		z-index:99;
	}
	body > .cse-overlay {
		display: none;
	}
	body > .cse-overlay:first-child {
		display: block;
	}
	.cse-overlay-bg {
		z-index: 98;
		opacity: 0.5;
	}
	.cse-resultsContainer a:hover {
		color: #000;
	}
	.cse-resultsContainer .gs-snippet {
		color: #777;
	}
	.cse-resultsContainer  .gs-visibleUrl {
		font-size: 80%;
	}
    -->
  </style>

	
	<script type="text/javascript" src="/includes/js/jQuery/jquery-1.4.1.min.js"></script>
	

    <script type="text/javascript" src="/includes/js/wz_tooltip/wz_tooltip.js"></script>
    <script type="text/javascript">
    <!--
    jQuery(function() {
      tt_Init(); // init wz_tooltips. Has to be called in this function due to a bug in IE7
    });
    -->
    </script>


	<script type="text/javascript">
		<!--
		
		jQuery.noConflict();
		
		/* IE 6 detection */
		function redirectIE6() {
			if(typeof(navigator) != "undefined") {
				if(navigator.appName == 'Microsoft Internet Explorer') {
					if(navigator.appVersion.indexOf('MSIE 6') > -1) {
						window.location = '/ie6.html';
					}
				}
			}
		}
		redirectIE6();

		function repositionMenu() {
			var menuDiv = document.getElementById('mainmenu');
			var ul0 = menuDiv.getElementsByTagName('ul')[0];
	
			if(ul0) {
				var div  = document.createElement('div');
				var divA = document.createElement('div');
				var divB = document.createElement('div');
	
				var id   = document.createAttribute('id');
				var idA  = document.createAttribute('id');
				var idB  = document.createAttribute('id');
	
				var ul1    = ul0.getElementsByTagName('ul')[0];
	
				id.nodeValue  = 'subMenuDiv';
				idA.nodeValue = 'subMenuDiv-lvl1';
				idB.nodeValue = 'subMenuDiv-lvl2';
	
				div.setAttributeNode(id);
				divA.setAttributeNode(idA);
				divB.setAttributeNode(idB);
	
				if(ul1) {
					divA.appendChild(ul1);
					var ul2 = ul1.getElementsByTagName('ul')[0];
					if(ul2) {
						divB.appendChild(ul2);
					}
				}
	
				div.appendChild(divA);
				div.appendChild(divB);
				
				menuDiv.appendChild(div);
			}
		}


		function redrawHeadline() {
						var headlines = jQuery('#documentationContent h2');
						for(i = 0; i < headlines.length; ++i) {
								headlines[i].firstChild.insertData(0, '– ');
							}
		}
		function showFull(id) {
			var l = document.getElementById('system-readmore-position' + id);

			

			jQuery('#fullContent' + id).slideToggle('slow', function () {
				l.firstChild.nodeValue = jQuery('#fullContent' + id + ':visible').length ? 'hide' : 'more';
			});
		}

		-->
	</script>
</head>
<body>
	<div id="all">
		<div id="header">
				<div class="speakBubble" style="position: absolute; left: 760px; top: 20px; padding: 12px 0 0 0;">
					<a target="_blank" href="https://github.com/fpv-wtf/disko">This is a <br/> mirror!</a>
				</div>
			<div id="logo">
				<a href="/"><img id="disko-logo" src="/templates/diskohq/images/disko-logo.png" alt="disko"/></a>
			</div>
			<div id="topmenu">

				<ul class="menu"><li class="item3"><a href="/contact"><span>Contact</span></a></li><li class="item6"><span class="separator"><span>  |  </span></span></li><li class="item4"><a href="/impressum"><span>Impressum</span></a></li></ul><br/>
				<a target="twitter.com" href="http://twitter.com/diskoFramework"><img style="margin-top: 2px;float: right" src="/templates/diskohq/images/twitter-c.png" alt="Twitter"/></a>
			</div>
		</div><!-- end header -->
		<div id="mainmenu">
			<ul class="menu"><li class="item1"><a href="/"><span>Home</span></a></li><li class="parent item7"><a href="/products/disko-framework/overview"><span>Products</span></a></li><li class="parent active item8"><a href="/developers/documentation/installation/ubuntu.html"><span>Developers</span></a><ul><li id="current" class="active item15"><a href="/developers/documentation/installation/ubuntu.html"><span>Documentation</span></a></li><li class="parent item16"><a href="/developers/downloads/disko"><span>Downloads</span></a></li></ul></li><li class="item24"><a href="/forum"><span>Forum</span></a></li><li class="item25"><a href="http://www.youtube.com/user/DiskoFramework" target="_blank"><span>Gallery</span></a></li></ul>
		</div>
		<div id="contentarea">
			<!--<div id="left">
				
			</div>--><!-- left -->
			<!--<div id="wrapper">-->
				<div id="main">
										

<script type="text/javascript">
	<!--
	function showToc() {
		var toc = document.getElementById('documentationToc');
		var con = document.getElementById('documentationContent');
		var tab = document.getElementById('documentationTable');
		var lnk = document.getElementById('documentationTocLink');
		if(toc) {
			if(toc.style.visibility != 'collapse') {
				toc.style.visibility     = 'collapse';
				toc.style.display        = 'none';
				con.style.width          = '100%';
				tab.style.marginLeft     = '0';
				tab.style.width          = '805px';
				lnk.firstChild.nodeValue = 'show';
			} else {
				toc.style.visibility     = 'visible';
				toc.style.display        = '';
				con.style.width          = '642px';
				tab.style.marginLeft     = '0';
				tab.style.width          = '865px';
				lnk.firstChild.nodeValue = 'hide';
			}
		}
	}
-->
</script>

<!--<a href="javascript:showToc()" id="documentationTocLink">hide</a>-->
<table style="width: 100%; margin-left:0;" id="documentationTable">
	<tr>
		<td style="vertical-align: top; width: 153px; padding-right: 10px;" id="documentationToc">
			<div style="margin-bottom: 35px;">

<h1>
	<img class="headlinePrefix" src="/templates/diskohq/images/arrow_bg.png" alt=""/>
	Contents
</h1>
<ul class="table-of-contents-bullets">
	<li>Getting started
		<ul>
			<li><a href="/developers/documentation/installation/ubuntu.html">Ubuntu packages</a></li>
			<li><a href="/developers/documentation/installation/sources.html">Build from sources</a></li>
			<li><a href="/developers/documentation/tutorials/helloworld.html">Hello World</a></li>
			<!--<li><a  href="/developers/documentation/first-steps.html">Using Eclipse</a></li>-->
			<li><a  href="/developers/documentation/reference-platforms.html">Platforms</a></li>
			<li><a  href="/developers/documentation/roadmap.html">Roadmap</a></li>
			<li><a  href="/developers/documentation/api-reference/index.html" target="disko-api">API</a></li>
			<li><a  href="/developers/documentation/further-reading.html">Further reading</a></li>
		</ul>
	</li>
	<li style="margin-top:8px;">GUI programming
		<ul>

			<!--<li><a href="/developers/documentation/gui-reference/index.html">Introduction</a></li>
			<li><a href="/developers/documentation/gui-reference/description.html">Description</a></li>
			<li><a href="/developers/documentation/gui-reference/elements.html">Elements</a></li>
			<li><a href="/developers/documentation/gui-reference/gui-examples.html">XML Examples</a></li>
			<li><a href="/developers/documentation/gui-reference/mmsdialog.html">Dialogs</a></li>
			<li><a href="/developers/documentation/gui-reference/mmstheme.html">Themes</a></li>
			<li><a href="/developers/documentation/gui-reference/template.html">Templates</a></li>
			<li><a href="/developers/documentation/gui-reference/theme-processing.html">Theme processing</a></li>
			<li><a href="/developers/documentation/gui-reference/windows/general.html">Windows</a></li>
			<li><a href="/developers/documentation/gui-reference/widgets/general.html">Widgets</a></li>
			<li> </li>-->
			<li><a href="/developers/documentation/gui-reference/index.html">Introduction</a></li>
			<li><a href="/developers/documentation/gui-reference/windows/general.html">Windows</a></li>
			<li><a href="/developers/documentation/gui-reference/widgets/general.html">Widgets</a></li>
			<li><a href="/developers/documentation/gui-reference/mmstheme.html">Themes</a></li>
			<li><a href="/developers/documentation/gui-reference/template.html">Templates</a></li>
			<li><a href="/developers/documentation/gui-reference/gui-examples.html">XML Examples</a></li>
		</ul>
	</li>
	<li style="margin-top:8px;">Receipts &amp; Articles
		<ul>
			<li><a href="/developers/documentation/tutorials/helloworld.html">Hello World</a></li>
			<li><a href="/developers/documentation/tutorials/dialogs.html">Using dialog files</a></li>
			<li><a href="/developers/documentation/tutorials/themes.html">Using themes</a></li>
			<li><a href="/developers/documentation/tutorials/windows.html" class="active">Using windows</a></li>
			<li><a href="/developers/documentation/tutorials/inputs.html">Using inputs</a></li>
			<li><a href="/developers/documentation/tutorials/plugins.html">Using plugins</a></li>
			<li><a href="/developers/documentation/howtos/tcpservice.html">Disko IPC</a></li>
			<li><a href="/developers/documentation/howtos/translations.html">Multilanguage</a></li>
			<li><a href="/developers/documentation/howtos/usingframebuffer.html">Framebuffer setup</a></li>
			<li><a href="/developers/documentation/howtos/layersandwindows.html">Layers &amp; Windows</a></li>
			<li><a href="/developers/documentation/benchmarks/index.html">Benchmarks</a></li>
			<li><a href="/developers/documentation/omap/beagleboard.html">Beagleboard</a></li>
			<li><a href="/developers/documentation/howtos/utilizing_dragging_and_gestures.html">Drag &amp; gestures</a></li>
			<li><a href="/developers/documentation/omap/archos5.html">Archos 5 IT</a></li>
		</ul>
	</li>
</ul>
			</div>
						<script type="text/javascript">
						<!--
						
							jQuery(function() {
								jQuery('form.blGoogleSearch').find('input[type=text]').css('width', '135px');
								jQuery('form.blGoogleSearch').find('input[type=submit]').css({
									"background" : "url(/templates/diskohq/images/search.png) no-repeat",
									"border" : "0",
									"width" : "49px"
								});
								jQuery('form.blGoogleSearch').find('input[type=submit]').val("");
								
								jQuery('form.blGoogleSearch').parent().show();
							});							
							
							function blPostGSearch(i) {
								if (!i) {
									i = 0;
								}
								
								var el = jQuery('div.cse-overlay');
								el.css({'left' : '150px', 'top' : '50px'});
								
								if (jQuery('.cse-resultsContainer').length == 0 || i < 5) {
									window.setTimeout("blPostGSearch("+(i+1)+")", 0);
								}
								else {
									jQuery('body').prepend(jQuery('.cse-overlay'));
									jQuery('div.cse-overlay-bg').css('height', screen.height);
									jQuery('div.cse-overlay .cse-closeResults').unbind('click');
									jQuery('div.cse-overlay .cse-closeResults').click(function() {
										jQuery('body').append(jQuery('.cse-overlay'));
									});
								}
							}
						-->
						</script>

<!-- Google CSE code begins -->

<div style="display: none;">
	<form id="searchbox_011888066618628073463:roszvssi9we" class="blGoogleSearch" onsubmit="return false;" action="">
		<input type="text" class="g-q" name="q" size="20" style="color:black; width:135px;"/>
		<input type="submit" value="Search" onclick="blPostGSearch()"/>
		<input type="hidden" name="newwindow" value="0" /> 
	</form>
</div>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_011888066618628073463:roszvssi9we"></script>
<script type="text/javascript" src="http://www.google.com/uds/api?file=uds.js&amp;v=1.0&amp;key=ABQIAAAAXhSh6dmfUTHjt7qAeufe2xQp2L91IAR1FgV0nETxn0m0APFJwBTgXMmeVmxm7Dc-oCcaqo8U_yPhsg"></script>
<script type="text/javascript" src="http://www.google.com/cse/api/overlay.js"></script>
<div id="results_011888066618628073463:roszvssi9we">
	<div class="cse-closeResults">
		<a>&times; close</a>
	</div>
	<div class="cse-resultsContainer" style="z-index:99;"></div>
</div>
<script type="text/javascript">
	function OnLoad() {
		cseo = new CSEOverlay("011888066618628073463:roszvssi9we",
							document.getElementById("searchbox_011888066618628073463:roszvssi9we"),
							document.getElementById("results_011888066618628073463:roszvssi9we"));
		cseo.searchControl.setSearchStartingCallback(null, blPostGSearch, null); 
	}
	GSearch.setOnLoadCallback(OnLoad);
</script>
<!-- Google CSE Code ends -->
		</td>
		<td style="vertical-align: top;" id="documentationContent">
			

<h1 id="tutorials-windows">Using windows</h1>
<p>
	Disko comes with its own idea of window management, to keep it simple
	in aproach and to generate usage constraints that seem feasible to us. 
	This section deals with the different window types and how they
	should be used properly.
</p>

<div class="group">
	<p>
		To download the code for this tutorial, fetch it from the git-repository
		by issuing:
	</p>
	<pre class="codelisting">
git clone git://www.diskohq.org/disko-tutorials.git</pre>
</div>

<p>
	Then you can follow this part by having a look at the tutorials
	<em>firststeps/04</em> folder.
</p>

<h2>Window stack</h2>
<p>
	Disko knows three types of Windows. <span class="inline-code">RootWindow</span>,
	<span class="inline-code">MainWindow</span> and <span class="inline-code">PopupWindow</span>.
	Each type is treated differently within disko. These window types have a
	fixed Z-order. The management and placement is automatically dealt with
	by the window manager.
	<img src="/documentation/tutorials/pics/windowstack.png" class="block" alt="window stack"/>
</p>

<p>
	The <span class="inline-code">RootWindow</span> ist the lowest type of
	window. On top of this window can reside a <span class="inline-code">MainWindow</span>.
	The <span class="inline-code">PopupWindow</span> can reside above a
	<span class="inline-code">RootWindow</span> and/or a <span class="inline-code">MainWindow</span>.
	Only one <span class="inline-code">RootWindow</span> and
	<span class="inline-code">MainWindow</span> can be shown on the screen
	at the same time. If another <span class="inline-code">RootWindow</span>
	is to be shown, the current one is removed by the window manager. 
	The same goes for the <span class="inline-code">MainWindow</span> type.
	<span class="inline-code">PopupWindows</span> do not displace each other,
	but they have only a short lifetime, as they are removed automatically
	from the screen after a certain timeout is reached.
</p>
<p>
	The <span class="inline-code">RootWindow</span> should be used for one
	of the applications main functions. In a mediacenter application there
	are some functions that make very little sense to be used together. 
	Watching TV and listening to some music at the same time would not go
	very well together. Using <span class="inline-code">RootWindows</span>
	would at least ensure that you can't see both functions at the same time.
	The playback though has to be "manually" stopped on window removal.
</p>
<p>
	The <span class="inline-code">MainWindow</span> is used when a main
	function could be safely combined with some extra functionality. 
	Looking at the mediacenter application again, this could be reading the
	weather report during a commercial while watching TV. You would expect,
	that this could be done while TV is running. The <span class="inline-code">MainWindow</span>
	would be placed above the "TV" - <span class="inline-code">Rootwindow</span>,
	and would be removed on users demand, or when another "extra" function is
	called, like the stock market news.
</p>
<p>
	The <span class="inline-code">PopupWindow</span> is used when information
	is presented to the user. That could be the notification that a new email
	arrived, or an alert that a specific TV-show or whatever occured.
	The information-lifetime is bound to the <span class="inline-code">PopupWindow</span>.
	It will close on users demand, or when its defined timeout is reached.
</p>
<div class="group">
	<p>
		Disko supports a special <span class="inline-code">RootWindow</span>.
		This is the background window which will be displayed if no other RootWindow
		is shown. To configure the background window you have to insert a class
		with <span class="inline-code">name="background_rootwindow"</span> and
		<span class="inline-code">type="rootwindow"</span> into your <em>theme.xml</em>
		file like this:
	</p>

	<pre class="codelisting">
&lt;mmstheme name="default"&gt;
    &lt;class
           name      = "background_rootwindow"
           type      = "rootwindow"
           alignment = "center"
           w         = "100%"
           h         = "100%"
           bgcolor   = "#ff0000ff"
           opacity   = "255"
    /&gt;
&lt;/mmstheme&gt;</pre>
	<p>This defines a red background window.</p>
</div>

<p>
	To see the window management in action, you can have a look at 
	<a target="_new" href="http://www.morphine.tv">Morphine.TV</a>, which is
	a mediacenter application built on top of the disko framework.
</p>


<h2>Child windows</h2>
<p>
	<span class="inline-code">ChildWindows</span> are windows that reside
	within other windows. They could be a part of a <span class="inline-code">RootWindow</span>,
	a <span class="inline-code">MainWindow</span> or a <span class="inline-code">PopupWindow</span>.
	This window type offers a free placement and movement unlike the relative
	fixed widget structures. For example when there is a need of replacing a
	widget on the screen by another one. Another example could be a playlist
	that is replaced by a visualization during music playback.
	<img src="/documentation/tutorials/pics/childwindows.png" class="block" alt="child windows"/>
</p>
<p>
	The window placement is normally definend in a dialog XML-file, but could
	be set at runtime as well. Each window can be individually shown/hidden
	by the program, to decide which window should be shown in case that they
	should be used at the same spot.
</p>


<h2>An example</h2>
<p>
	In this example we will load and show four windows. Two of them are 
	<span class="inline-code">RootWindows</span>, which will displace each
	other when they are shown. The other two windows (<span class="inline-code">window2</span>
	and <span class="inline-code">window4</span>) are <span class="inline-code">MainWindows</span>.
	The last one (<span class="inline-code">window4</span>) displays several
	child windows in an show/hide sequence.
</p>
<div class="group">
	<p>
		As we do not use some of the other disko facilities <span class="inline-code">mmsInit()</span>
		is still be used to just initialize the window manager and the input manager
		so we can correctly stop our application.
	</p>

	<pre class="codelisting">
mmsInit(MMSINIT_WINDOWS, argc, argv, "./diskorc.xml",
        "Disko Tutorial: firststeps/04", "DT: firststeps/04");</pre>
</div>

<div class="group">
	<p>
		We are using four <span class="inline-code">DialogManager</span> objects
		to handle the different windows.
	</p>
	<pre class="codelisting">
// one dialog manager for each window loaded from xml
MMSDialogManager dm;
MMSDialogManager dm2;
MMSDialogManager dm3;
MMSDialogManager dm4;

// load the windows
MMSWindow *window  = dm.loadDialog("./root.xml");
MMSWindow *window2 = dm2.loadDialog("./main.xml");
MMSWindow *window3 = dm3.loadDialog("./root2.xml");
MMSWindow *window4 = dm4.loadDialog("./main2.xml");

// start show sequence of the main/root windows
window->show();
sleep(2);
window2->show();
sleep(2);
window3->show();
sleep(2);</pre>
</div>

<p>
	If everything went well, you will see a gray picture (<span class="inline-code">window</span>).
	After 2 seconds a window (<span class="inline-code">window2</span>) should
	fade in. Another 2 seconds later the gray picture should be replaced by
	a blue one (<span class="inline-code">window</span> will be hidden
	and <span class="inline-code">window3</span> will be shown).
	<img src="/documentation/tutorials/pics/screen04.png" class="block" alt="screenshot"/>
</p>

<div class="group">
	<p>
		At last the program shows the <span class="inline-code">window4</span> which
		includes four child windows. With a show/hide sequence different show/hide
		actions will be presented.
	</p>
	<pre class="codelisting">
window4-&gt;show();
sleep(2);

// now we get access to the child windows of the window4
MMSChildWindow *childwin1 = dynamic_cast&lt;MMSChildWindow*&gt;(
		window4-&gt;searchForWindow("childwin1"));
MMSChildWindow *childwin2 = dynamic_cast&lt;MMSChildWindow*&gt;(
		window4-&gt;searchForWindow("childwin2"));
MMSChildWindow *childwin3 = dynamic_cast&lt;MMSChildWindow*&gt;(
		window4-&gt;searchForWindow("childwin3"));
MMSChildWindow *childwin4 = dynamic_cast&lt;MMSChildWindow*&gt;(
		window4-&gt;searchForWindow("childwin4"));

// until user press &lt;ctrl+c&gt; or &lt;power&gt; button on the remote control
while (1) {
    childwin1-&gt;hide();
    sleep(2);
    childwin1-&gt;show();
    sleep(2);
    childwin2-&gt;hide();
    sleep(2);
    childwin2-&gt;show();
    sleep(2);
    childwin3-&gt;hide();
    sleep(2);
    childwin3-&gt;show();
    sleep(2);
    childwin4-&gt;show();
    sleep(2);
    childwin4-&gt;hide();
    sleep(2);
}

return 0;</pre>
</div>

		</td>
	</tr>
</table>
<div style="clear:both;">&nbsp;</div>

				</div>


				<!-- <div id="right">
					
				</div>--><!-- right -->
				<!--<div class="wrap"></div>
			</div>--><!-- wrapper -->
			<div class="wrap">&nbsp;</div>
		</div><!-- contentarea -->

		<!--<div id="footer">
			<p class="syndicate">
				
			</p>
			<div class="wrap"></div>
		</div>--><!-- footer -->

	</div><!-- all -->
	
	<script type="text/javascript">
		<!--
		redrawHeadline();
		repositionMenu();
		//fixPre();

		function msgHiding() {
			var msgs = document.getElementById('messages');
		
			if(msgs) {
				msgs.style.visibility = 'hidden';
				msgs.style.display    = 'none';
			}
		}
		window.setTimeout("msgHiding()", 5000);
 		
//	slideToggle('slow', function () {
// 				jQuery('#messages:visible');
// 		});
		

		-->
	</script>

	<!-- Google Analytics -->
	<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
	var pageTracker = _gat._getTracker("UA-1675780-3");
	pageTracker._trackPageview();
</script>
</body>
</html>
 
