<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Disko API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);' >
<div id="top">
<div id="titlearea" style="background:#262929;">
  <div id="projectlogo">
    <img alt="Logo" src="./disko-logo.png" style="float:left;"/>
    <br clear="all"/>
  </div>
</div>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
<h1>mmsprogressbarwidget.cpp</h1><a href="mmsprogressbarwidget_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> *   Copyright (C) 2005-2007 Stefan Schwarzer, Jens Schneider,             *</span>
<a name="l00003"></a>00003 <span class="comment"> *                           Matthias Hardt, Guido Madaus                  *</span>
<a name="l00004"></a>00004 <span class="comment"> *                                                                         *</span>
<a name="l00005"></a>00005 <span class="comment"> *   Copyright (C) 2007-2008 BerLinux Solutions GbR                        *</span>
<a name="l00006"></a>00006 <span class="comment"> *                           Stefan Schwarzer &amp; Guido Madaus               *</span>
<a name="l00007"></a>00007 <span class="comment"> *                                                                         *</span>
<a name="l00008"></a>00008 <span class="comment"> *   Copyright (C) 2009-2013 BerLinux Solutions GmbH                       *</span>
<a name="l00009"></a>00009 <span class="comment"> *                                                                         *</span>
<a name="l00010"></a>00010 <span class="comment"> *   Authors:                                                              *</span>
<a name="l00011"></a>00011 <span class="comment"> *      Stefan Schwarzer   &lt;stefan.schwarzer@diskohq.org&gt;,                 *</span>
<a name="l00012"></a>00012 <span class="comment"> *      Matthias Hardt     &lt;matthias.hardt@diskohq.org&gt;,                   *</span>
<a name="l00013"></a>00013 <span class="comment"> *      Jens Schneider     &lt;jens.schneider@diskohq.org&gt;,                   *</span>
<a name="l00014"></a>00014 <span class="comment"> *      Guido Madaus       &lt;guido.madaus@diskohq.org&gt;,                     *</span>
<a name="l00015"></a>00015 <span class="comment"> *      Patrick Helterhoff &lt;patrick.helterhoff@diskohq.org&gt;,               *</span>
<a name="l00016"></a>00016 <span class="comment"> *      René Bählkow       &lt;rene.baehlkow@diskohq.org&gt;                     *</span>
<a name="l00017"></a>00017 <span class="comment"> *                                                                         *</span>
<a name="l00018"></a>00018 <span class="comment"> *   This library is free software; you can redistribute it and/or         *</span>
<a name="l00019"></a>00019 <span class="comment"> *   modify it under the terms of the GNU Lesser General Public            *</span>
<a name="l00020"></a>00020 <span class="comment"> *   License version 2.1 as published by the Free Software Foundation.     *</span>
<a name="l00021"></a>00021 <span class="comment"> *                                                                         *</span>
<a name="l00022"></a>00022 <span class="comment"> *   This library is distributed in the hope that it will be useful,       *</span>
<a name="l00023"></a>00023 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
<a name="l00024"></a>00024 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU     *</span>
<a name="l00025"></a>00025 <span class="comment"> *   Lesser General Public License for more details.                       *</span>
<a name="l00026"></a>00026 <span class="comment"> *                                                                         *</span>
<a name="l00027"></a>00027 <span class="comment"> *   You should have received a copy of the GNU Lesser General Public      *</span>
<a name="l00028"></a>00028 <span class="comment"> *   License along with this library; if not, write to the                 *</span>
<a name="l00029"></a>00029 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
<a name="l00030"></a>00030 <span class="comment"> *   51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA            *</span>
<a name="l00031"></a>00031 <span class="comment"> **************************************************************************/</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="mmsprogressbarwidget_8h.html">mmsgui/mmsprogressbarwidget.h</a>"</span>
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="classMMSProgressBarWidget.html#95c668cbb4e2df896a152c5751a851b1">00035</a> <a class="code" href="classMMSProgressBarWidget.html#95c668cbb4e2df896a152c5751a851b1">MMSProgressBarWidget::MMSProgressBarWidget</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *root, <span class="keywordtype">string</span> className, <a class="code" href="classMMSTheme.html">MMSTheme</a> *theme) : <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a>() {
<a name="l00036"></a>00036     <a class="code" href="classMMSProgressBarWidget.html#5bdd48e1ff5fe55bf5f9207b3608a179">create</a>(root, className, theme);
<a name="l00037"></a>00037 }
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="classMMSProgressBarWidget.html#40c84b8b793d828b3e11be7d4104c407">00039</a> <a class="code" href="classMMSProgressBarWidget.html#40c84b8b793d828b3e11be7d4104c407">MMSProgressBarWidget::~MMSProgressBarWidget</a>() {
<a name="l00040"></a>00040 }
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="classMMSProgressBarWidget.html#5bdd48e1ff5fe55bf5f9207b3608a179">00042</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSProgressBarWidget.html#5bdd48e1ff5fe55bf5f9207b3608a179">MMSProgressBarWidget::create</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *root, <span class="keywordtype">string</span> <a class="code" href="classMMSProgressBarWidget.html#c1975059b62f6498331b34aa2ff04bdf">className</a>, <a class="code" href="classMMSTheme.html">MMSTheme</a> *theme) {
<a name="l00043"></a>00043     this-&gt;<a class="code" href="classMMSWidget.html#25e9ff86956690aa381d34257524a756" title="type of the widget">type</a> = <a class="code" href="mmswidget_8h.html#6d0eddde5cdc2617bf86158bed71e4a4cf2f7016048eae78604da19bf77223dd" title="A MMSProgressBarWidget cannot get the focus but can be selected.">MMSWIDGETTYPE_PROGRESSBAR</a>;
<a name="l00044"></a>00044     this-&gt;className = className;
<a name="l00045"></a>00045 
<a name="l00046"></a>00046     <span class="comment">// init attributes for drawable widgets</span>
<a name="l00047"></a>00047     this-&gt;<a class="code" href="classMMSWidget.html#5b742204bcbbffef6ac23152326ecef8" title="save attributes for drawable widgets">da</a> = <span class="keyword">new</span> <a class="code" href="structMMSWidget_1_1MMSWIDGET__DRAWABLE__ATTRIBUTES.html" title="describes attributes for drawable widgets">MMSWIDGET_DRAWABLE_ATTRIBUTES</a>;
<a name="l00048"></a>00048     <span class="keywordflow">if</span> (theme) this-&gt;<a class="code" href="classMMSWidget.html#5b742204bcbbffef6ac23152326ecef8" title="save attributes for drawable widgets">da</a>-&gt;<a class="code" href="structMMSWidget_1_1MMSWIDGET__DRAWABLE__ATTRIBUTES.html#325af99a726e154aaf106bc53bed8d81" title="access to the theme which is used">theme</a> = theme; <span class="keywordflow">else</span> this-&gt;<a class="code" href="classMMSWidget.html#5b742204bcbbffef6ac23152326ecef8" title="save attributes for drawable widgets">da</a>-&gt;<a class="code" href="structMMSWidget_1_1MMSWIDGET__DRAWABLE__ATTRIBUTES.html#325af99a726e154aaf106bc53bed8d81" title="access to the theme which is used">theme</a> = <a class="code" href="mmstheme_8h.html#4a07f6bf7ba11424ca5ef9243ef24482">globalTheme</a>;
<a name="l00049"></a>00049     this-&gt;<a class="code" href="classMMSProgressBarWidget.html#15b1ceb79c2597d1e64c29696cff4ce7">progressBarWidgetClass</a> = this-&gt;<a class="code" href="classMMSWidget.html#5b742204bcbbffef6ac23152326ecef8" title="save attributes for drawable widgets">da</a>-&gt;<a class="code" href="structMMSWidget_1_1MMSWIDGET__DRAWABLE__ATTRIBUTES.html#325af99a726e154aaf106bc53bed8d81" title="access to the theme which is used">theme</a>-&gt;<a class="code" href="classMMSTheme.html#67d7355ec888243e0884fe33a5e4a722">getProgressBarWidgetClass</a>(className);
<a name="l00050"></a>00050     this-&gt;<a class="code" href="classMMSWidget.html#5b742204bcbbffef6ac23152326ecef8" title="save attributes for drawable widgets">da</a>-&gt;<a class="code" href="structMMSWidget_1_1MMSWIDGET__DRAWABLE__ATTRIBUTES.html#d80f9d174ddbae9bfa9c14947220f276" title="defaults from code">baseWidgetClass</a> = &amp;(this-&gt;<a class="code" href="classMMSWidget.html#5b742204bcbbffef6ac23152326ecef8" title="save attributes for drawable widgets">da</a>-&gt;<a class="code" href="structMMSWidget_1_1MMSWIDGET__DRAWABLE__ATTRIBUTES.html#325af99a726e154aaf106bc53bed8d81" title="access to the theme which is used">theme</a>-&gt;<a class="code" href="classMMSTheme.html#23d82e6221422459f0e60562b787726c">progressBarWidgetClass</a>.<a class="code" href="classMMSProgressBarWidgetClass.html#8ce138e63cf3e23750f945ac57ad192d" title="stores base widget attributes">widgetClass</a>);
<a name="l00051"></a>00051     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSProgressBarWidget.html#15b1ceb79c2597d1e64c29696cff4ce7">progressBarWidgetClass</a>) this-&gt;<a class="code" href="classMMSWidget.html#5b742204bcbbffef6ac23152326ecef8" title="save attributes for drawable widgets">da</a>-&gt;<a class="code" href="structMMSWidget_1_1MMSWIDGET__DRAWABLE__ATTRIBUTES.html#1c0f816fdda72145cb8fe7c7c8c956f4" title="settings from theme which overides defaults from code">widgetClass</a> = &amp;(this-&gt;<a class="code" href="classMMSProgressBarWidget.html#15b1ceb79c2597d1e64c29696cff4ce7">progressBarWidgetClass</a>-&gt;<a class="code" href="classMMSProgressBarWidgetClass.html#8ce138e63cf3e23750f945ac57ad192d" title="stores base widget attributes">widgetClass</a>); <span class="keywordflow">else</span> this-&gt;<a class="code" href="classMMSWidget.html#5b742204bcbbffef6ac23152326ecef8" title="save attributes for drawable widgets">da</a>-&gt;<a class="code" href="structMMSWidget_1_1MMSWIDGET__DRAWABLE__ATTRIBUTES.html#1c0f816fdda72145cb8fe7c7c8c956f4" title="settings from theme which overides defaults from code">widgetClass</a> = NULL;
<a name="l00052"></a>00052 
<a name="l00053"></a>00053     this-&gt;<a class="code" href="classMMSProgressBarWidget.html#db3aecd33267da3dfb15c2e8d7456af4" title="current foreground values set?">current_fgset</a> = <span class="keyword">false</span>;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055     <span class="keywordflow">return</span> <a class="code" href="classMMSWidget.html#06c252db90de6d0bda93de1bd7aa70b6">MMSWidget::create</a>(root, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);
<a name="l00056"></a>00056 }
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="classMMSProgressBarWidget.html#1b21896a85c269a4923fdc3c836abdd8">00058</a> <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *<a class="code" href="classMMSProgressBarWidget.html#1b21896a85c269a4923fdc3c836abdd8">MMSProgressBarWidget::copyWidget</a>() {
<a name="l00059"></a>00059     <span class="comment">// create widget</span>
<a name="l00060"></a>00060     <a class="code" href="classMMSProgressBarWidget.html" title="With this class you can display a progress bar.">MMSProgressBarWidget</a> *newWidget = <span class="keyword">new</span> <a class="code" href="classMMSProgressBarWidget.html#95c668cbb4e2df896a152c5751a851b1">MMSProgressBarWidget</a>(this-&gt;<a class="code" href="classMMSWidget.html#dc592302f3a6719258dc766f3b6d7e16" title="window to which the widget is connected">rootwindow</a>, <a class="code" href="classMMSProgressBarWidget.html#c1975059b62f6498331b34aa2ff04bdf">className</a>);
<a name="l00061"></a>00061 
<a name="l00062"></a>00062     newWidget-&gt;<a class="code" href="classMMSProgressBarWidget.html#c1975059b62f6498331b34aa2ff04bdf">className</a> = this-&gt;<a class="code" href="classMMSProgressBarWidget.html#c1975059b62f6498331b34aa2ff04bdf">className</a>;
<a name="l00063"></a>00063     newWidget-&gt;<a class="code" href="classMMSProgressBarWidget.html#15b1ceb79c2597d1e64c29696cff4ce7">progressBarWidgetClass</a> = this-&gt;<a class="code" href="classMMSProgressBarWidget.html#15b1ceb79c2597d1e64c29696cff4ce7">progressBarWidgetClass</a>;
<a name="l00064"></a>00064     newWidget-&gt;<a class="code" href="classMMSProgressBarWidget.html#f1ae8cb131fe1563e37986eb3ed86343">myProgressBarWidgetClass</a> = this-&gt;<a class="code" href="classMMSProgressBarWidget.html#f1ae8cb131fe1563e37986eb3ed86343">myProgressBarWidgetClass</a>;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066     newWidget-&gt;<a class="code" href="classMMSProgressBarWidget.html#e2d12e62a2f5594a329ba7a24d345938" title="current foreground color">current_fgcolor</a> = this-&gt;<a class="code" href="classMMSProgressBarWidget.html#e2d12e62a2f5594a329ba7a24d345938" title="current foreground color">current_fgcolor</a>;
<a name="l00067"></a>00067     newWidget-&gt;<a class="code" href="classMMSProgressBarWidget.html#db3aecd33267da3dfb15c2e8d7456af4" title="current foreground values set?">current_fgset</a> = this-&gt;<a class="code" href="classMMSProgressBarWidget.html#db3aecd33267da3dfb15c2e8d7456af4" title="current foreground values set?">current_fgset</a>;
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     <span class="comment">// copy base widget</span>
<a name="l00070"></a>00070     <a class="code" href="classMMSWidget.html#89edafe96fd4042d32e67833df89826b">MMSWidget::copyWidget</a>((<a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a>*)newWidget);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <span class="keywordflow">return</span> newWidget;
<a name="l00073"></a>00073 }
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 
<a name="l00076"></a><a class="code" href="classMMSProgressBarWidget.html#015d5b0c266cad37699776efebad7e8d">00076</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSProgressBarWidget.html#015d5b0c266cad37699776efebad7e8d">MMSProgressBarWidget::init</a>() {
<a name="l00077"></a>00077     <span class="comment">// init widget basics</span>
<a name="l00078"></a>00078     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWidget.html#69dd9213fd6f50b88572ebcd26a850bf">MMSWidget::init</a>())
<a name="l00079"></a>00079         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="classMMSProgressBarWidget.html#9a04b333c0d260c32475671546e55a99">00084</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSProgressBarWidget.html#9a04b333c0d260c32475671546e55a99">MMSProgressBarWidget::release</a>() {
<a name="l00085"></a>00085     <span class="comment">// release widget basics</span>
<a name="l00086"></a>00086     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWidget.html#129111da1730ade1d0a9406a2b3fd624">MMSWidget::release</a>())
<a name="l00087"></a>00087         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00090"></a>00090 }
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="classMMSProgressBarWidget.html#df609cc33d57ccf3add1cdde7a12c476">00092</a> <span class="keywordtype">void</span> <a class="code" href="classMMSProgressBarWidget.html#df609cc33d57ccf3add1cdde7a12c476">MMSProgressBarWidget::getForeground</a>(<a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> *color) {
<a name="l00093"></a>00093     color-&gt;<a class="code" href="classMMSFBColor.html#90a3b42f72b33de18b8fc70f1e72e640" title="alphachannel">a</a> = 0;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     <span class="keywordflow">if</span> (<a class="code" href="classMMSWidget.html#86fc4e0e9490c7d81f33ca7f4ba7b2dd">isSelected</a>()) {
<a name="l00096"></a>00096         *color = <a class="code" href="classMMSProgressBarWidget.html#7858ad29ca67b378fe6ff6299a400998">getSelColor</a>();
<a name="l00097"></a>00097     }
<a name="l00098"></a>00098     <span class="keywordflow">else</span> {
<a name="l00099"></a>00099         *color = <a class="code" href="classMMSProgressBarWidget.html#56eda92b94a4eddcd21eaed36853e043">getColor</a>();
<a name="l00100"></a>00100     }
<a name="l00101"></a>00101 }
<a name="l00102"></a>00102 
<a name="l00103"></a><a class="code" href="classMMSProgressBarWidget.html#e69b1b0877c67d0a6ca7d5a71dfab600">00103</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSProgressBarWidget.html#e69b1b0877c67d0a6ca7d5a71dfab600" title="Internal method: (re-)enable refresh status.">MMSProgressBarWidget::enableRefresh</a>(<span class="keywordtype">bool</span> enable) {
<a name="l00104"></a>00104     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWidget.html#b3fcb2758df553a34c500447c5d994de" title="Internal method: (re-)enable refresh status.">MMSWidget::enableRefresh</a>(enable)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     <span class="comment">// mark foreground as not set</span>
<a name="l00107"></a>00107     this-&gt;<a class="code" href="classMMSProgressBarWidget.html#db3aecd33267da3dfb15c2e8d7456af4" title="current foreground values set?">current_fgset</a> = <span class="keyword">false</span>;
<a name="l00108"></a>00108 
<a name="l00109"></a>00109     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00110"></a>00110 }
<a name="l00111"></a>00111 
<a name="l00112"></a><a class="code" href="classMMSProgressBarWidget.html#aa24b1d0f2ffd5abf6cbeac0c099e82c">00112</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSProgressBarWidget.html#aa24b1d0f2ffd5abf6cbeac0c099e82c" title="Internal method: check drawn background against new background and (re-)enable refresh...">MMSProgressBarWidget::checkRefreshStatus</a>() {
<a name="l00113"></a>00113     <span class="keywordflow">if</span> (<a class="code" href="classMMSWidget.html#e4ffe2f399ccde80b647396e421d10fa" title="Internal method: check drawn background against new background and (re-)enable refresh...">MMSWidget::checkRefreshStatus</a>()) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSProgressBarWidget.html#db3aecd33267da3dfb15c2e8d7456af4" title="current foreground values set?">current_fgset</a>) {
<a name="l00116"></a>00116         <span class="comment">// current foreground initialized</span>
<a name="l00117"></a>00117         <a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> color;
<a name="l00118"></a>00118         <a class="code" href="classMMSProgressBarWidget.html#df609cc33d57ccf3add1cdde7a12c476">getForeground</a>(&amp;color);
<a name="l00119"></a>00119 
<a name="l00120"></a>00120         <span class="keywordflow">if</span> (color == this-&gt;<a class="code" href="classMMSProgressBarWidget.html#e2d12e62a2f5594a329ba7a24d345938" title="current foreground color">current_fgcolor</a>) {
<a name="l00121"></a>00121             <span class="comment">// foreground color not changed, so we do not enable refreshing</span>
<a name="l00122"></a>00122             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00123"></a>00123         }
<a name="l00124"></a>00124     }
<a name="l00125"></a>00125 
<a name="l00126"></a>00126     <span class="comment">// (re-)enable refreshing</span>
<a name="l00127"></a>00127     <a class="code" href="classMMSProgressBarWidget.html#e69b1b0877c67d0a6ca7d5a71dfab600" title="Internal method: (re-)enable refresh status.">enableRefresh</a>();
<a name="l00128"></a>00128 
<a name="l00129"></a>00129     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00130"></a>00130 }
<a name="l00131"></a>00131 
<a name="l00132"></a><a class="code" href="classMMSProgressBarWidget.html#245894c58294d1ebff51ff9ec58fb45d">00132</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSProgressBarWidget.html#245894c58294d1ebff51ff9ec58fb45d">MMSProgressBarWidget::draw</a>(<span class="keywordtype">bool</span> *backgroundFilled) {
<a name="l00133"></a>00133     <span class="keywordtype">bool</span> myBackgroundFilled = <span class="keyword">false</span>;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="keywordflow">if</span>(!<a class="code" href="classMMSWidget.html#945a4a48943d03799e4e64fda8c1f643">surface</a>)
<a name="l00136"></a>00136         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <span class="keywordflow">if</span> (backgroundFilled) {
<a name="l00139"></a>00139         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWidget.html#4af75b8fa1002f8053c5b4767dc13a15" title="widget is using a subsurface or has an own surface?">has_own_surface</a>)
<a name="l00140"></a>00140             *backgroundFilled = <span class="keyword">false</span>;
<a name="l00141"></a>00141     }
<a name="l00142"></a>00142     <span class="keywordflow">else</span>
<a name="l00143"></a>00143         backgroundFilled = &amp;myBackgroundFilled;
<a name="l00144"></a>00144 
<a name="l00145"></a>00145     <span class="comment">// draw widget basics</span>
<a name="l00146"></a>00146     <span class="keywordflow">if</span> (<a class="code" href="classMMSWidget.html#aa00908d8d9b2029e8a1b24387b0a830">MMSWidget::draw</a>(backgroundFilled)) {
<a name="l00147"></a>00147         <span class="comment">/* if progress is 0, fillRectangle uses the whole surface, however nothing more is needed */</span>
<a name="l00148"></a>00148         <span class="keywordflow">if</span>(<a class="code" href="classMMSProgressBarWidget.html#e33480dcc7a9f39a2e6b2cdce7088e12">getProgress</a>() &gt; 0) {
<a name="l00149"></a>00149             <span class="comment">// lock</span>
<a name="l00150"></a>00150             this-&gt;<a class="code" href="classMMSWidget.html#945a4a48943d03799e4e64fda8c1f643">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l00151"></a>00151 
<a name="l00152"></a>00152             <span class="comment">// draw my things</span>
<a name="l00153"></a>00153             <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> <a class="code" href="classMMSWidget.html#053ecf9fa18ad8a59592411cd372fb2a">surfaceGeom</a> = <a class="code" href="classMMSWidget.html#7fe0ba6e76373040843e8c3c82e49bed">getSurfaceGeometry</a>();
<a name="l00154"></a>00154 
<a name="l00155"></a>00155             <span class="comment">// get color</span>
<a name="l00156"></a>00156             <a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> color;
<a name="l00157"></a>00157             <a class="code" href="classMMSProgressBarWidget.html#df609cc33d57ccf3add1cdde7a12c476">getForeground</a>(&amp;color);
<a name="l00158"></a>00158             this-&gt;<a class="code" href="classMMSProgressBarWidget.html#e2d12e62a2f5594a329ba7a24d345938" title="current foreground color">current_fgcolor</a>   = color;
<a name="l00159"></a>00159             this-&gt;<a class="code" href="classMMSProgressBarWidget.html#db3aecd33267da3dfb15c2e8d7456af4" title="current foreground values set?">current_fgset</a>     = <span class="keyword">true</span>;
<a name="l00160"></a>00160 
<a name="l00161"></a>00161             <span class="keywordflow">if</span> (color.<a class="code" href="classMMSFBColor.html#90a3b42f72b33de18b8fc70f1e72e640" title="alphachannel">a</a>) {
<a name="l00162"></a>00162                 <span class="comment">// prepare for drawing</span>
<a name="l00163"></a>00163                 this-&gt;<a class="code" href="classMMSWidget.html#945a4a48943d03799e4e64fda8c1f643">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#fc71cf9ed136d5825bda7e9e61ed78cb">setDrawingColorAndFlagsByBrightnessAndOpacity</a>(color, <a class="code" href="classMMSWidget.html#cef75491d582e3b065567ba1ca2d3c52">getBrightness</a>(), <a class="code" href="classMMSWidget.html#8cf6bff40c7ef7ea30ffa165e668f9f1">getOpacity</a>());
<a name="l00164"></a>00164 
<a name="l00165"></a>00165                 <span class="comment">// fill the rectangle</span>
<a name="l00166"></a>00166                 this-&gt;<a class="code" href="classMMSWidget.html#945a4a48943d03799e4e64fda8c1f643">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#f158efc1e35bc99b10659a65069b6baa">fillRectangle</a>(surfaceGeom.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, surfaceGeom.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>,
<a name="l00167"></a>00167                                             (<span class="keywordtype">int</span>)((<span class="keywordtype">double</span>)<a class="code" href="classMMSProgressBarWidget.html#e33480dcc7a9f39a2e6b2cdce7088e12">getProgress</a>() / (<span class="keywordtype">double</span>)100 * (<span class="keywordtype">double</span>)surfaceGeom.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>), surfaceGeom.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>);
<a name="l00168"></a>00168             }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170             <span class="comment">// unlock</span>
<a name="l00171"></a>00171             this-&gt;<a class="code" href="classMMSWidget.html#945a4a48943d03799e4e64fda8c1f643">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l00172"></a>00172         }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         <span class="comment">// update window surface with an area of surface</span>
<a name="l00175"></a>00175         <a class="code" href="classMMSWidget.html#7838a1740781345f4fc6e57b61f0d04d">updateWindowSurfaceWithSurface</a>(!*backgroundFilled);
<a name="l00176"></a>00176     }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     <span class="comment">// draw widgets debug frame</span>
<a name="l00179"></a>00179     <span class="keywordflow">return</span> <a class="code" href="classMMSWidget.html#2bddb3b0a15879549a7beeddfe9d0b19">MMSWidget::drawDebug</a>();
<a name="l00180"></a>00180 }
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="comment">/***********************************************/</span>
<a name="l00183"></a>00183 <span class="comment">/* begin of theme access methods (get methods) */</span>
<a name="l00184"></a>00184 <span class="comment">/***********************************************/</span>
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="mmsprogressbarwidget_8cpp.html#2773d07c3e66628ab9869b035a16935d">00186</a> <span class="preprocessor">#define GETPBAR(x) \</span>
<a name="l00187"></a>00187 <span class="preprocessor">    if (this-&gt;myProgressBarWidgetClass.is##x()) return myProgressBarWidgetClass.get##x(); \</span>
<a name="l00188"></a>00188 <span class="preprocessor">    else if ((progressBarWidgetClass)&amp;&amp;(progressBarWidgetClass-&gt;is##x())) return progressBarWidgetClass-&gt;get##x(); \</span>
<a name="l00189"></a>00189 <span class="preprocessor">    else return this-&gt;da-&gt;theme-&gt;progressBarWidgetClass.get##x();</span>
<a name="l00190"></a>00190 <span class="preprocessor"></span>
<a name="l00191"></a><a class="code" href="classMMSProgressBarWidget.html#56eda92b94a4eddcd21eaed36853e043">00191</a> <a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> <a class="code" href="classMMSProgressBarWidget.html#56eda92b94a4eddcd21eaed36853e043">MMSProgressBarWidget::getColor</a>() {
<a name="l00192"></a>00192     <a class="code" href="mmsprogressbarwidget_8cpp.html#2773d07c3e66628ab9869b035a16935d">GETPBAR</a>(Color);
<a name="l00193"></a>00193 }
<a name="l00194"></a>00194 
<a name="l00195"></a><a class="code" href="classMMSProgressBarWidget.html#7858ad29ca67b378fe6ff6299a400998">00195</a> <a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> <a class="code" href="classMMSProgressBarWidget.html#7858ad29ca67b378fe6ff6299a400998">MMSProgressBarWidget::getSelColor</a>() {
<a name="l00196"></a>00196     <a class="code" href="mmsprogressbarwidget_8cpp.html#2773d07c3e66628ab9869b035a16935d">GETPBAR</a>(SelColor);
<a name="l00197"></a>00197 }
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="classMMSProgressBarWidget.html#e33480dcc7a9f39a2e6b2cdce7088e12">00199</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classMMSProgressBarWidget.html#e33480dcc7a9f39a2e6b2cdce7088e12">MMSProgressBarWidget::getProgress</a>() {
<a name="l00200"></a>00200     <a class="code" href="mmsprogressbarwidget_8cpp.html#2773d07c3e66628ab9869b035a16935d">GETPBAR</a>(Progress);
<a name="l00201"></a>00201 }
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 <span class="comment">/***********************************************/</span>
<a name="l00204"></a>00204 <span class="comment">/* begin of theme access methods (set methods) */</span>
<a name="l00205"></a>00205 <span class="comment">/***********************************************/</span>
<a name="l00206"></a><a class="code" href="classMMSProgressBarWidget.html#cf509f0edd1b0a1179ffad91fd05e3f9">00206</a> <span class="keywordtype">void</span> <a class="code" href="classMMSProgressBarWidget.html#cf509f0edd1b0a1179ffad91fd05e3f9">MMSProgressBarWidget::setColor</a>(<a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> color, <span class="keywordtype">bool</span> <a class="code" href="classMMSWidget.html#e014584215d2e3dd3c7e3e7ab15d9c2f">refresh</a>) {
<a name="l00207"></a>00207     <a class="code" href="classMMSProgressBarWidget.html#f1ae8cb131fe1563e37986eb3ed86343">myProgressBarWidgetClass</a>.<a class="code" href="classMMSProgressBarWidgetClass.html#69b2513e4c4215982069eba29e498985" title="Set the color which is used to draw the unselected progress bar.">setColor</a>(color);
<a name="l00208"></a>00208 
<a name="l00209"></a>00209     <span class="comment">// refresh required?</span>
<a name="l00210"></a>00210     <a class="code" href="classMMSProgressBarWidget.html#e69b1b0877c67d0a6ca7d5a71dfab600" title="Internal method: (re-)enable refresh status.">enableRefresh</a>((color != this-&gt;<a class="code" href="classMMSProgressBarWidget.html#e2d12e62a2f5594a329ba7a24d345938" title="current foreground color">current_fgcolor</a>));
<a name="l00211"></a>00211 
<a name="l00212"></a>00212     this-&gt;<a class="code" href="classMMSWidget.html#e014584215d2e3dd3c7e3e7ab15d9c2f">refresh</a>(refresh);
<a name="l00213"></a>00213 }
<a name="l00214"></a>00214 
<a name="l00215"></a><a class="code" href="classMMSProgressBarWidget.html#cb368ad6f8eb2e6e560d3c655ee8625a">00215</a> <span class="keywordtype">void</span> <a class="code" href="classMMSProgressBarWidget.html#cb368ad6f8eb2e6e560d3c655ee8625a">MMSProgressBarWidget::setSelColor</a>(<a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> selcolor, <span class="keywordtype">bool</span> <a class="code" href="classMMSWidget.html#e014584215d2e3dd3c7e3e7ab15d9c2f">refresh</a>) {
<a name="l00216"></a>00216     <a class="code" href="classMMSProgressBarWidget.html#f1ae8cb131fe1563e37986eb3ed86343">myProgressBarWidgetClass</a>.<a class="code" href="classMMSProgressBarWidgetClass.html#7126d555e4791146579e1b6b4a485ce5" title="Set the color which is used to draw the selected progress bar.">setSelColor</a>(selcolor);
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     <span class="comment">// refresh required?</span>
<a name="l00219"></a>00219     <a class="code" href="classMMSProgressBarWidget.html#e69b1b0877c67d0a6ca7d5a71dfab600" title="Internal method: (re-)enable refresh status.">enableRefresh</a>((selcolor != this-&gt;<a class="code" href="classMMSProgressBarWidget.html#e2d12e62a2f5594a329ba7a24d345938" title="current foreground color">current_fgcolor</a>));
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     this-&gt;<a class="code" href="classMMSWidget.html#e014584215d2e3dd3c7e3e7ab15d9c2f">refresh</a>(refresh);
<a name="l00222"></a>00222 }
<a name="l00223"></a>00223 
<a name="l00224"></a><a class="code" href="classMMSProgressBarWidget.html#6658a32c8600f457891d10289033239a">00224</a> <span class="keywordtype">void</span> <a class="code" href="classMMSProgressBarWidget.html#6658a32c8600f457891d10289033239a">MMSProgressBarWidget::setProgress</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> progress, <span class="keywordtype">bool</span> <a class="code" href="classMMSWidget.html#e014584215d2e3dd3c7e3e7ab15d9c2f">refresh</a>) {
<a name="l00225"></a>00225     <span class="keywordflow">if</span>(progress&gt;100)
<a name="l00226"></a>00226         progress = 100;
<a name="l00227"></a>00227     <a class="code" href="classMMSProgressBarWidget.html#f1ae8cb131fe1563e37986eb3ed86343">myProgressBarWidgetClass</a>.<a class="code" href="classMMSProgressBarWidgetClass.html#9ad9dd35d7f82aefea5f0a6b3a6afb1a" title="Set the progress.">setProgress</a>(progress);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229     <span class="comment">// refresh is required</span>
<a name="l00230"></a>00230     <a class="code" href="classMMSProgressBarWidget.html#e69b1b0877c67d0a6ca7d5a71dfab600" title="Internal method: (re-)enable refresh status.">enableRefresh</a>();
<a name="l00231"></a>00231 
<a name="l00232"></a>00232     this-&gt;<a class="code" href="classMMSWidget.html#e014584215d2e3dd3c7e3e7ab15d9c2f">refresh</a>(refresh);
<a name="l00233"></a>00233 }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235 
<a name="l00236"></a><a class="code" href="classMMSProgressBarWidget.html#5eac5f3788d33b9e1d1f0647bf3522e7">00236</a> <span class="keywordtype">void</span> <a class="code" href="classMMSProgressBarWidget.html#5eac5f3788d33b9e1d1f0647bf3522e7">MMSProgressBarWidget::updateFromThemeClass</a>(<a class="code" href="classMMSProgressBarWidgetClass.html" title="A data access class for the progressbar widget.">MMSProgressBarWidgetClass</a> *themeClass) {
<a name="l00237"></a>00237     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSProgressBarWidgetClass.html#3ac2dfb9cf3befc95eed68ddedb28d5f" title="Check if the color is set. This color will be used to draw the unselected progress...">isColor</a>())
<a name="l00238"></a>00238         <a class="code" href="classMMSProgressBarWidget.html#cf509f0edd1b0a1179ffad91fd05e3f9">setColor</a>(themeClass-&gt;<a class="code" href="classMMSProgressBarWidgetClass.html#c077ffa0f2aa22b93e9119b11e859ba7" title="Get the color which is used to draw the unselected progress bar.">getColor</a>());
<a name="l00239"></a>00239     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSProgressBarWidgetClass.html#0de86fa6598aaaaeb19ee59e81c570ba" title="Check if the color is set. This color will be used for the selected progress bar...">isSelColor</a>())
<a name="l00240"></a>00240         <a class="code" href="classMMSProgressBarWidget.html#cb368ad6f8eb2e6e560d3c655ee8625a">setSelColor</a>(themeClass-&gt;<a class="code" href="classMMSProgressBarWidgetClass.html#73036ecc1efe455497673d72c3972126" title="Get the color which is used to draw the selected progress bar.">getSelColor</a>());
<a name="l00241"></a>00241     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSProgressBarWidgetClass.html#2d0ca3259466229d7d6827c468ca92be" title="Check if the progress value is set.">isProgress</a>())
<a name="l00242"></a>00242         <a class="code" href="classMMSProgressBarWidget.html#6658a32c8600f457891d10289033239a">setProgress</a>(themeClass-&gt;<a class="code" href="classMMSProgressBarWidgetClass.html#1b2df7e75d1f8e2e51837bb5f70f41d3" title="Get the progress.">getProgress</a>());
<a name="l00243"></a>00243 
<a name="l00244"></a>00244     <a class="code" href="classMMSWidget.html#fb2299140a1bb83e3d41cb7fbce6e9e5">MMSWidget::updateFromThemeClass</a>(&amp;(themeClass-&gt;<a class="code" href="classMMSProgressBarWidgetClass.html#8ce138e63cf3e23750f945ac57ad192d" title="stores base widget attributes">widgetClass</a>));
<a name="l00245"></a>00245 }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="comment">/***********************************************/</span>
<a name="l00248"></a>00248 <span class="comment">/* end of theme access methods                 */</span>
<a name="l00249"></a>00249 <span class="comment">/***********************************************/</span>
</pre></div></div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1675780-3");
pageTracker._trackPageview();
</script>

<hr class="footer"/><address class="footer" style="text-align:right;"><small>Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a></small></address>
</body>
</html>
