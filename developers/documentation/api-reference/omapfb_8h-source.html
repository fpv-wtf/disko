<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Disko API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);' >
<div id="top">
<div id="titlearea" style="background:#262929;">
  <div id="projectlogo">
    <img alt="Logo" src="./disko-logo.png" style="float:left;"/>
    <br clear="all"/>
  </div>
</div>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
<h1>omapfb.h</h1><a href="omapfb_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * File: arch/arm/plat-omap/include/mach/omapfb.h</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Framebuffer driver for TI OMAP boards</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Copyright (C) 2004 Nokia Corporation</span>
<a name="l00007"></a>00007 <span class="comment"> * Author: Imre Deak &lt;imre.deak@nokia.com&gt;</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * This program is free software; you can redistribute it and/or modify it</span>
<a name="l00010"></a>00010 <span class="comment"> * under the terms of the GNU General Public License as published by the</span>
<a name="l00011"></a>00011 <span class="comment"> * Free Software Foundation; either version 2 of the License, or (at your</span>
<a name="l00012"></a>00012 <span class="comment"> * option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is distributed in the hope that it will be useful, but</span>
<a name="l00015"></a>00015 <span class="comment"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00017"></a>00017 <span class="comment"> * General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> * You should have received a copy of the GNU General Public License along</span>
<a name="l00020"></a>00020 <span class="comment"> * with this program; if not, write to the Free Software Foundation, Inc.,</span>
<a name="l00021"></a>00021 <span class="comment"> * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<a name="l00022"></a>00022 <span class="comment"> */</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#ifndef __OMAPFB_H</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#define __OMAPFB_H</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;asm/ioctl.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;asm/types.h&gt;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="comment">/* IOCTL commands. */</span>
<a name="l00031"></a>00031 
<a name="l00032"></a><a class="code" href="omapfb_8h.html#885c0fa91153597c5c9d7dea1e8c0c6a">00032</a> <span class="preprocessor">#define OMAP_IOW(num, dtype)    _IOW('O', num, dtype)</span>
<a name="l00033"></a><a class="code" href="omapfb_8h.html#48d48ae303ef7d01fd2b3a6a9054655b">00033</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAP_IOR(num, dtype)    _IOR('O', num, dtype)</span>
<a name="l00034"></a><a class="code" href="omapfb_8h.html#38d89274fe1ef61307203664e6ecbf9e">00034</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAP_IOWR(num, dtype)   _IOWR('O', num, dtype)</span>
<a name="l00035"></a><a class="code" href="omapfb_8h.html#63760d28fae03b7228e4646da4bea156">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAP_IO(num)        _IO('O', num)</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a><a class="code" href="omapfb_8h.html#bb37acb4ed80d405090097ef8edcc5e8">00037</a> <span class="preprocessor">#define OMAPFB_MIRROR       OMAP_IOW(31, int)</span>
<a name="l00038"></a><a class="code" href="omapfb_8h.html#c617ec8553cc8aa7dc6798a928388aac">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_SYNC_GFX     OMAP_IO(37)</span>
<a name="l00039"></a><a class="code" href="omapfb_8h.html#20eeb5253fef78c6d9a616710140cb75">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_VSYNC        OMAP_IO(38)</span>
<a name="l00040"></a><a class="code" href="omapfb_8h.html#fcd1780b8b4113e5cba8047f8f160375">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_SET_UPDATE_MODE  OMAP_IOW(40, int)</span>
<a name="l00041"></a><a class="code" href="omapfb_8h.html#51f22a59218638e8ffa6263f751256ad">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_GET_CAPS     OMAP_IOR(42, struct omapfb_caps)</span>
<a name="l00042"></a><a class="code" href="omapfb_8h.html#cf30695f1ed540ee0acb888cb4b80272">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_GET_UPDATE_MODE  OMAP_IOW(43, int)</span>
<a name="l00043"></a><a class="code" href="omapfb_8h.html#ddfe70bd5648bd608236e3ad9ca7b7c9">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_LCD_TEST     OMAP_IOW(45, int)</span>
<a name="l00044"></a><a class="code" href="omapfb_8h.html#9433fa8e0efff9781194ac3e634bb14a">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CTRL_TEST    OMAP_IOW(46, int)</span>
<a name="l00045"></a><a class="code" href="omapfb_8h.html#f915f9d9c8f869ec75ed587bdab6498d">00045</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_UPDATE_WINDOW_OLD OMAP_IOW(47, struct omapfb_update_window_old)</span>
<a name="l00046"></a><a class="code" href="omapfb_8h.html#407476b249103b28b87b4ceff9a23cd4">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_SET_COLOR_KEY    OMAP_IOW(50, struct omapfb_color_key)</span>
<a name="l00047"></a><a class="code" href="omapfb_8h.html#e1ad3770bd71ca60e4e87dfa186625c0">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_GET_COLOR_KEY    OMAP_IOW(51, struct omapfb_color_key)</span>
<a name="l00048"></a><a class="code" href="omapfb_8h.html#49c03be197d9ac662e9f27ad7c7b3a97">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_SETUP_PLANE  OMAP_IOW(52, struct omapfb_plane_info)</span>
<a name="l00049"></a><a class="code" href="omapfb_8h.html#65bd809c507d8111756679c8c3b245b8">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_QUERY_PLANE  OMAP_IOW(53, struct omapfb_plane_info)</span>
<a name="l00050"></a><a class="code" href="omapfb_8h.html#adc91636b7d7eb4aad84c3f4c4faa6a5">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_UPDATE_WINDOW    OMAP_IOW(54, struct omapfb_update_window)</span>
<a name="l00051"></a><a class="code" href="omapfb_8h.html#260c146cb4717e3bddc9755afec2d61b">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_SETUP_MEM    OMAP_IOW(55, struct omapfb_mem_info)</span>
<a name="l00052"></a><a class="code" href="omapfb_8h.html#244e4d4a08bbaaafa8341235ceffa9b2">00052</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_QUERY_MEM    OMAP_IOW(56, struct omapfb_mem_info)</span>
<a name="l00053"></a><a class="code" href="omapfb_8h.html#6e7221d8796f43d93b5937f8fc363d8b">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_WAITFORVSYNC OMAP_IO(57)</span>
<a name="l00054"></a><a class="code" href="omapfb_8h.html#651209b5449e6bc08db28485a0d8cbb9">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_MEMORY_READ  OMAP_IOR(58, struct omapfb_memory_read)</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span>
<a name="l00056"></a><a class="code" href="omapfb_8h.html#1cb3a1a3ea673bf746b7e34308b682ec">00056</a> <span class="preprocessor">#define OMAPFB_CAPS_GENERIC_MASK    0x00000fff</span>
<a name="l00057"></a><a class="code" href="omapfb_8h.html#71cbc541c214b6c0c4e02143b940ed38">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_LCDC_MASK       0x00fff000</span>
<a name="l00058"></a><a class="code" href="omapfb_8h.html#f471ddc4bb79ddd9649a5d07ace0b409">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_PANEL_MASK      0xff000000</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00060"></a><a class="code" href="omapfb_8h.html#e78e9433742a491c907fef92307ba80b">00060</a> <span class="preprocessor">#define OMAPFB_CAPS_MANUAL_UPDATE   0x00001000</span>
<a name="l00061"></a><a class="code" href="omapfb_8h.html#c3d57aefb19561bedf2b768e86e92bb3">00061</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_TEARSYNC        0x00002000</span>
<a name="l00062"></a><a class="code" href="omapfb_8h.html#e2e58ff1daff0e5437572d9b8320c816">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_PLANE_RELOCATE_MEM  0x00004000</span>
<a name="l00063"></a><a class="code" href="omapfb_8h.html#d63aaad4f8551e6173bcbf7108cba117">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_PLANE_SCALE     0x00008000</span>
<a name="l00064"></a><a class="code" href="omapfb_8h.html#e0a94471ba67869b5c49f05fb3065910">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_WINDOW_PIXEL_DOUBLE 0x00010000</span>
<a name="l00065"></a><a class="code" href="omapfb_8h.html#521dbcfc2017b604d82d3486ff0f5eff">00065</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_WINDOW_SCALE    0x00020000</span>
<a name="l00066"></a><a class="code" href="omapfb_8h.html#e22f236ddefee865c19d91ad694b6542">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_WINDOW_OVERLAY  0x00040000</span>
<a name="l00067"></a><a class="code" href="omapfb_8h.html#3f4604e21f86e6b6effab3ba4772d20d">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_WINDOW_ROTATE   0x00080000</span>
<a name="l00068"></a><a class="code" href="omapfb_8h.html#2bed15ea04e1faebe0f08899f0d0ece9">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_CAPS_SET_BACKLIGHT   0x01000000</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00070"></a>00070 <span class="comment">/* Values from DSP must map to lower 16-bits */</span>
<a name="l00071"></a><a class="code" href="omapfb_8h.html#8b4add9607f125e59ebfe3421368034a">00071</a> <span class="preprocessor">#define OMAPFB_FORMAT_MASK      0x00ff</span>
<a name="l00072"></a><a class="code" href="omapfb_8h.html#d735caf06f0e14110976567f355993cd">00072</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_FORMAT_FLAG_DOUBLE   0x0100</span>
<a name="l00073"></a><a class="code" href="omapfb_8h.html#df0740771760171f33ae3dda1f67b87c">00073</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_FORMAT_FLAG_TEARSYNC 0x0200</span>
<a name="l00074"></a><a class="code" href="omapfb_8h.html#c6a6db88962de2cc21bb31ac56677347">00074</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_FORMAT_FLAG_FORCE_VSYNC  0x0400</span>
<a name="l00075"></a><a class="code" href="omapfb_8h.html#81524ff6155cabbeedd5c87ebc103593">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_FORMAT_FLAG_ENABLE_OVERLAY   0x0800</span>
<a name="l00076"></a><a class="code" href="omapfb_8h.html#b8dac4231eebdbac9727491103acc0b3">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_FORMAT_FLAG_DISABLE_OVERLAY  0x1000</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="omapfb_8h.html#78c79edf246350aea72367837a6d9b2a">00078</a> <span class="preprocessor">#define OMAPFB_EVENT_READY  1</span>
<a name="l00079"></a><a class="code" href="omapfb_8h.html#d56709bc94b17616eba5de21741df4b8">00079</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_EVENT_DISABLED   2</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>
<a name="l00081"></a><a class="code" href="omapfb_8h.html#2dac072a480f175562e6e61912601258">00081</a> <span class="preprocessor">#define OMAPFB_MEMTYPE_SDRAM        0</span>
<a name="l00082"></a><a class="code" href="omapfb_8h.html#dde1cd3d593b1357b06a4f945195f0c6">00082</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_MEMTYPE_SRAM     1</span>
<a name="l00083"></a><a class="code" href="omapfb_8h.html#c02e8a74e0a6bf820486ede08e27bcdc">00083</a> <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_MEMTYPE_MAX      1</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span>
<a name="l00085"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662">00085</a> <span class="keyword">enum</span> <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662">omapfb_color_format</a> {
<a name="l00086"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d966623ebbfce0093c932fb5b27ae6ea87f17c">00086</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d966623ebbfce0093c932fb5b27ae6ea87f17c">OMAPFB_COLOR_RGB565</a> = 0,
<a name="l00087"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662252da229eb365a18fd224e37d200af2c">00087</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662252da229eb365a18fd224e37d200af2c">OMAPFB_COLOR_YUV422</a>,
<a name="l00088"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662e4c7215dd0d7edc4da5a1025b662e618">00088</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662e4c7215dd0d7edc4da5a1025b662e618">OMAPFB_COLOR_YUV420</a>,
<a name="l00089"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662cf9eebc2e1fa3cfc4cbf9d6e2a11dafd">00089</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662cf9eebc2e1fa3cfc4cbf9d6e2a11dafd">OMAPFB_COLOR_CLUT_8BPP</a>,
<a name="l00090"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d966629581408845a56f75d135e1506725edd3">00090</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d966629581408845a56f75d135e1506725edd3">OMAPFB_COLOR_CLUT_4BPP</a>,
<a name="l00091"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662f537353e6ab5ba1b46a0faca5e1ebe54">00091</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662f537353e6ab5ba1b46a0faca5e1ebe54">OMAPFB_COLOR_CLUT_2BPP</a>,
<a name="l00092"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d9666295610d2356891888661e61fc8dec8528">00092</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d9666295610d2356891888661e61fc8dec8528">OMAPFB_COLOR_CLUT_1BPP</a>,
<a name="l00093"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662d063ba9a9634cfb584d54e739da950da">00093</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662d063ba9a9634cfb584d54e739da950da">OMAPFB_COLOR_RGB444</a>,
<a name="l00094"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662940fc0a8f89750a5ef547f4b9e055aba">00094</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662940fc0a8f89750a5ef547f4b9e055aba">OMAPFB_COLOR_YUY422</a>,
<a name="l00095"></a>00095 
<a name="l00096"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d9666272352bcbb0ee06369680574595ce81d1">00096</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d9666272352bcbb0ee06369680574595ce81d1">OMAPFB_COLOR_ARGB16</a>,
<a name="l00097"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d966628f7a958cf8783e6ffa2a1dd6d446df3a">00097</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d966628f7a958cf8783e6ffa2a1dd6d446df3a">OMAPFB_COLOR_RGB24U</a>,    <span class="comment">/* RGB24, 32-bit container */</span>
<a name="l00098"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662ca50503baa410f61893630e19792132c">00098</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662ca50503baa410f61893630e19792132c">OMAPFB_COLOR_RGB24P</a>,    <span class="comment">/* RGB24, 24-bit container */</span>
<a name="l00099"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662ffb2afbe4296be8cbf370459f6882c2d">00099</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662ffb2afbe4296be8cbf370459f6882c2d">OMAPFB_COLOR_ARGB32</a>,
<a name="l00100"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d966626f701de76f5f9f17e793987321feb5a5">00100</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d966626f701de76f5f9f17e793987321feb5a5">OMAPFB_COLOR_RGBA32</a>,
<a name="l00101"></a><a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662d9b059762917b224f2c957bcde837a89">00101</a>     <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662d9b059762917b224f2c957bcde837a89">OMAPFB_COLOR_RGBX32</a>,
<a name="l00102"></a>00102 };
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="structomapfb__update__window.html">00104</a> <span class="keyword">struct </span><a class="code" href="structomapfb__update__window.html">omapfb_update_window</a> {
<a name="l00105"></a><a class="code" href="structomapfb__update__window.html#faa09cf68adca119e5815a7796ce930a">00105</a>     __u32 <a class="code" href="structomapfb__update__window.html#55e7a7d7d5f4570a032b47a4e3f10a9b">x</a>, <a class="code" href="structomapfb__update__window.html#faa09cf68adca119e5815a7796ce930a">y</a>;
<a name="l00106"></a><a class="code" href="structomapfb__update__window.html#3ca1490baa72fefc32fd3fe38651a35a">00106</a>     __u32 <a class="code" href="structomapfb__update__window.html#3ca1490baa72fefc32fd3fe38651a35a">width</a>, <a class="code" href="structomapfb__update__window.html#a8dff8149f92fac1d51d02cdc5880d67">height</a>;
<a name="l00107"></a><a class="code" href="structomapfb__update__window.html#1e8afa6ab79b4575785d4fa9cea00fc0">00107</a>     __u32 <a class="code" href="structomapfb__update__window.html#1e8afa6ab79b4575785d4fa9cea00fc0">format</a>;
<a name="l00108"></a><a class="code" href="structomapfb__update__window.html#9c3734e12f3fbdc270ea12bd71d4d239">00108</a>     __u32 <a class="code" href="structomapfb__update__window.html#93e422274a18a85549c26fd4182492a6">out_x</a>, <a class="code" href="structomapfb__update__window.html#9c3734e12f3fbdc270ea12bd71d4d239">out_y</a>;
<a name="l00109"></a><a class="code" href="structomapfb__update__window.html#8f94a66696781433d9649c2661981673">00109</a>     __u32 <a class="code" href="structomapfb__update__window.html#8f94a66696781433d9649c2661981673">out_width</a>, <a class="code" href="structomapfb__update__window.html#625ef0e90109af1700e2478239c872f0">out_height</a>;
<a name="l00110"></a><a class="code" href="structomapfb__update__window.html#b61af709d6aa62010ae2a0dc28b2d55e">00110</a>     __u32 <a class="code" href="structomapfb__update__window.html#b61af709d6aa62010ae2a0dc28b2d55e">reserved</a>[8];
<a name="l00111"></a>00111 };
<a name="l00112"></a>00112 
<a name="l00113"></a><a class="code" href="structomapfb__update__window__old.html">00113</a> <span class="keyword">struct </span><a class="code" href="structomapfb__update__window__old.html">omapfb_update_window_old</a> {
<a name="l00114"></a><a class="code" href="structomapfb__update__window__old.html#bd7adfad04b2e6928e6de2d558c7317c">00114</a>     __u32 <a class="code" href="structomapfb__update__window__old.html#6a0da182dbd2d08319d0ab60120dffb4">x</a>, <a class="code" href="structomapfb__update__window__old.html#bd7adfad04b2e6928e6de2d558c7317c">y</a>;
<a name="l00115"></a><a class="code" href="structomapfb__update__window__old.html#405f8a54a219368f3d4e1fd8158480d4">00115</a>     __u32 <a class="code" href="structomapfb__update__window__old.html#405f8a54a219368f3d4e1fd8158480d4">width</a>, <a class="code" href="structomapfb__update__window__old.html#840f02fa3e92041a617807a2c599b0d1">height</a>;
<a name="l00116"></a><a class="code" href="structomapfb__update__window__old.html#be492998412367408e0a480128881dcc">00116</a>     __u32 <a class="code" href="structomapfb__update__window__old.html#be492998412367408e0a480128881dcc">format</a>;
<a name="l00117"></a>00117 };
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="omapfb_8h.html#7864bf92ab0dec521f1dfdc4a096ab3e">00119</a> <span class="keyword">enum</span> <a class="code" href="omapfb_8h.html#7864bf92ab0dec521f1dfdc4a096ab3e">omapfb_plane</a> {
<a name="l00120"></a><a class="code" href="omapfb_8h.html#7864bf92ab0dec521f1dfdc4a096ab3ef87634cb1d6058512302da83276434fa">00120</a>     <a class="code" href="omapfb_8h.html#7864bf92ab0dec521f1dfdc4a096ab3ef87634cb1d6058512302da83276434fa">OMAPFB_PLANE_GFX</a> = 0,
<a name="l00121"></a><a class="code" href="omapfb_8h.html#7864bf92ab0dec521f1dfdc4a096ab3ed5171d92847d2760decafcc7f9593b0c">00121</a>     <a class="code" href="omapfb_8h.html#7864bf92ab0dec521f1dfdc4a096ab3ed5171d92847d2760decafcc7f9593b0c">OMAPFB_PLANE_VID1</a>,
<a name="l00122"></a><a class="code" href="omapfb_8h.html#7864bf92ab0dec521f1dfdc4a096ab3ed5f153bf4ec72359ceccf6204e2afefc">00122</a>     <a class="code" href="omapfb_8h.html#7864bf92ab0dec521f1dfdc4a096ab3ed5f153bf4ec72359ceccf6204e2afefc">OMAPFB_PLANE_VID2</a>,
<a name="l00123"></a>00123 };
<a name="l00124"></a>00124 
<a name="l00125"></a><a class="code" href="omapfb_8h.html#cf5be14a7de2eb1f211f3cb1aa5fac62">00125</a> <span class="keyword">enum</span> <a class="code" href="omapfb_8h.html#cf5be14a7de2eb1f211f3cb1aa5fac62">omapfb_channel_out</a> {
<a name="l00126"></a><a class="code" href="omapfb_8h.html#cf5be14a7de2eb1f211f3cb1aa5fac6273fe73d5006fa54bd7c934ffd3c4c473">00126</a>     <a class="code" href="omapfb_8h.html#cf5be14a7de2eb1f211f3cb1aa5fac6273fe73d5006fa54bd7c934ffd3c4c473">OMAPFB_CHANNEL_OUT_LCD</a> = 0,
<a name="l00127"></a><a class="code" href="omapfb_8h.html#cf5be14a7de2eb1f211f3cb1aa5fac625c47fc139ef52cc4112a9f9f4c299161">00127</a>     <a class="code" href="omapfb_8h.html#cf5be14a7de2eb1f211f3cb1aa5fac625c47fc139ef52cc4112a9f9f4c299161">OMAPFB_CHANNEL_OUT_DIGIT</a>,
<a name="l00128"></a>00128 };
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="structomapfb__plane__info.html">00130</a> <span class="keyword">struct </span><a class="code" href="structomapfb__plane__info.html">omapfb_plane_info</a> {
<a name="l00131"></a><a class="code" href="structomapfb__plane__info.html#1aabded20f807a1edcbce7685be5360e">00131</a>     __u32 <a class="code" href="structomapfb__plane__info.html#1aabded20f807a1edcbce7685be5360e">pos_x</a>;
<a name="l00132"></a><a class="code" href="structomapfb__plane__info.html#e01867412b1d2603f9a0d60fa83ee0ca">00132</a>     __u32 <a class="code" href="structomapfb__plane__info.html#e01867412b1d2603f9a0d60fa83ee0ca">pos_y</a>;
<a name="l00133"></a><a class="code" href="structomapfb__plane__info.html#7536fc23e1e7d7761e5bcc140b675448">00133</a>     __u8  <a class="code" href="structomapfb__plane__info.html#7536fc23e1e7d7761e5bcc140b675448">enabled</a>;
<a name="l00134"></a><a class="code" href="structomapfb__plane__info.html#888a386c128636ec7d3442a0164f8295">00134</a>     __u8  <a class="code" href="structomapfb__plane__info.html#888a386c128636ec7d3442a0164f8295">channel_out</a>;
<a name="l00135"></a><a class="code" href="structomapfb__plane__info.html#257d3f20a024959c22f74b0a9384f15e">00135</a>     __u8  <a class="code" href="structomapfb__plane__info.html#257d3f20a024959c22f74b0a9384f15e">mirror</a>;
<a name="l00136"></a><a class="code" href="structomapfb__plane__info.html#53b252f9043159467ee652472d66543a">00136</a>     __u8  <a class="code" href="structomapfb__plane__info.html#53b252f9043159467ee652472d66543a">reserved1</a>;
<a name="l00137"></a><a class="code" href="structomapfb__plane__info.html#b844e97154290c7060d2a46101ae500b">00137</a>     __u32 <a class="code" href="structomapfb__plane__info.html#b844e97154290c7060d2a46101ae500b">out_width</a>;
<a name="l00138"></a><a class="code" href="structomapfb__plane__info.html#4ce99152f16eab9fb44f0d8484a82a0c">00138</a>     __u32 <a class="code" href="structomapfb__plane__info.html#4ce99152f16eab9fb44f0d8484a82a0c">out_height</a>;
<a name="l00139"></a><a class="code" href="structomapfb__plane__info.html#82ca600b19f09b72cbd2f786cf738b6a">00139</a>     __u32 <a class="code" href="structomapfb__plane__info.html#82ca600b19f09b72cbd2f786cf738b6a">reserved2</a>[12];
<a name="l00140"></a>00140 };
<a name="l00141"></a>00141 
<a name="l00142"></a><a class="code" href="structomapfb__mem__info.html">00142</a> <span class="keyword">struct </span><a class="code" href="structomapfb__mem__info.html">omapfb_mem_info</a> {
<a name="l00143"></a><a class="code" href="structomapfb__mem__info.html#481109fd3a8f79d8a9f5c08824167845">00143</a>     __u32 <a class="code" href="structomapfb__mem__info.html#481109fd3a8f79d8a9f5c08824167845">size</a>;
<a name="l00144"></a><a class="code" href="structomapfb__mem__info.html#db386ea02a5666e236a6bc272d648116">00144</a>     __u8  <a class="code" href="structomapfb__mem__info.html#db386ea02a5666e236a6bc272d648116">type</a>;
<a name="l00145"></a><a class="code" href="structomapfb__mem__info.html#e78aa2579003cd04bb5a5f698c80dc8d">00145</a>     __u8  <a class="code" href="structomapfb__mem__info.html#e78aa2579003cd04bb5a5f698c80dc8d">reserved</a>[3];
<a name="l00146"></a>00146 };
<a name="l00147"></a>00147 
<a name="l00148"></a><a class="code" href="structomapfb__caps.html">00148</a> <span class="keyword">struct </span><a class="code" href="structomapfb__caps.html">omapfb_caps</a> {
<a name="l00149"></a><a class="code" href="structomapfb__caps.html#393b8c7c861666abf0493f900c815e76">00149</a>     __u32 <a class="code" href="structomapfb__caps.html#393b8c7c861666abf0493f900c815e76">ctrl</a>;
<a name="l00150"></a><a class="code" href="structomapfb__caps.html#2382c212394ec7c9ab469accb1ce96be">00150</a>     __u32 <a class="code" href="structomapfb__caps.html#2382c212394ec7c9ab469accb1ce96be">plane_color</a>;
<a name="l00151"></a><a class="code" href="structomapfb__caps.html#80894d5dc516c37b6c1d8902577bbf1e">00151</a>     __u32 <a class="code" href="structomapfb__caps.html#80894d5dc516c37b6c1d8902577bbf1e">wnd_color</a>;
<a name="l00152"></a>00152 };
<a name="l00153"></a>00153 
<a name="l00154"></a><a class="code" href="omapfb_8h.html#1b788d2ab98d8726cba4013725dd4a3a">00154</a> <span class="keyword">enum</span> <a class="code" href="omapfb_8h.html#1b788d2ab98d8726cba4013725dd4a3a">omapfb_color_key_type</a> {
<a name="l00155"></a><a class="code" href="omapfb_8h.html#1b788d2ab98d8726cba4013725dd4a3a13286c9b12d91a3c3b02ddaf158fa0d5">00155</a>     <a class="code" href="omapfb_8h.html#1b788d2ab98d8726cba4013725dd4a3a13286c9b12d91a3c3b02ddaf158fa0d5">OMAPFB_COLOR_KEY_DISABLED</a> = 0,
<a name="l00156"></a><a class="code" href="omapfb_8h.html#1b788d2ab98d8726cba4013725dd4a3abb207aa85f4cf5b2a8fb10289e790da6">00156</a>     <a class="code" href="omapfb_8h.html#1b788d2ab98d8726cba4013725dd4a3abb207aa85f4cf5b2a8fb10289e790da6">OMAPFB_COLOR_KEY_GFX_DST</a>,
<a name="l00157"></a><a class="code" href="omapfb_8h.html#1b788d2ab98d8726cba4013725dd4a3ad454ad79bf79efacfec9853fb1429e34">00157</a>     <a class="code" href="omapfb_8h.html#1b788d2ab98d8726cba4013725dd4a3ad454ad79bf79efacfec9853fb1429e34">OMAPFB_COLOR_KEY_VID_SRC</a>,
<a name="l00158"></a>00158 };
<a name="l00159"></a>00159 
<a name="l00160"></a><a class="code" href="structomapfb__color__key.html">00160</a> <span class="keyword">struct </span><a class="code" href="structomapfb__color__key.html">omapfb_color_key</a> {
<a name="l00161"></a><a class="code" href="structomapfb__color__key.html#d489b609400731ffd202f9157aae12b0">00161</a>     __u8  <a class="code" href="structomapfb__color__key.html#d489b609400731ffd202f9157aae12b0">channel_out</a>;
<a name="l00162"></a><a class="code" href="structomapfb__color__key.html#194dfc9451fbd05249e93c10aa500bee">00162</a>     __u32 <a class="code" href="structomapfb__color__key.html#194dfc9451fbd05249e93c10aa500bee">background</a>;
<a name="l00163"></a><a class="code" href="structomapfb__color__key.html#60a2994992a39ba3e54944e9c204ee7d">00163</a>     __u32 <a class="code" href="structomapfb__color__key.html#60a2994992a39ba3e54944e9c204ee7d">trans_key</a>;
<a name="l00164"></a><a class="code" href="structomapfb__color__key.html#c45c68d466da0d77996ffef92c5a1722">00164</a>     __u8  <a class="code" href="structomapfb__color__key.html#c45c68d466da0d77996ffef92c5a1722">key_type</a>;
<a name="l00165"></a>00165 };
<a name="l00166"></a>00166 
<a name="l00167"></a><a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a4">00167</a> <span class="keyword">enum</span> <a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a4">omapfb_update_mode</a> {
<a name="l00168"></a><a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a4664433f81f0def3c95819d24b71cb5a3">00168</a>     <a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a4664433f81f0def3c95819d24b71cb5a3">OMAPFB_UPDATE_DISABLED</a> = 0,
<a name="l00169"></a><a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a417d88599a4c83d33d108ac7366230684">00169</a>     <a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a417d88599a4c83d33d108ac7366230684">OMAPFB_AUTO_UPDATE</a>,
<a name="l00170"></a><a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a4f4f527e46a19cc1b1fd84e2aef01bcea">00170</a>     <a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a4f4f527e46a19cc1b1fd84e2aef01bcea">OMAPFB_MANUAL_UPDATE</a>
<a name="l00171"></a>00171 };
<a name="l00172"></a>00172 
<a name="l00173"></a><a class="code" href="structomapfb__memory__read.html">00173</a> <span class="keyword">struct </span><a class="code" href="structomapfb__memory__read.html">omapfb_memory_read</a> {
<a name="l00174"></a><a class="code" href="structomapfb__memory__read.html#12e1dfdce076312e3813e57182c5eec3">00174</a>     __u16 <a class="code" href="structomapfb__memory__read.html#12e1dfdce076312e3813e57182c5eec3">x</a>;
<a name="l00175"></a><a class="code" href="structomapfb__memory__read.html#109bc2e5b9b9cf93d3eca533fb022c72">00175</a>     __u16 <a class="code" href="structomapfb__memory__read.html#109bc2e5b9b9cf93d3eca533fb022c72">y</a>;
<a name="l00176"></a><a class="code" href="structomapfb__memory__read.html#d024af25684435f6e447dda7ebb400cc">00176</a>     __u16 <a class="code" href="structomapfb__memory__read.html#d024af25684435f6e447dda7ebb400cc">w</a>;
<a name="l00177"></a><a class="code" href="structomapfb__memory__read.html#2ebfd98c65e1d9ce503c8c61c354f609">00177</a>     __u16 <a class="code" href="structomapfb__memory__read.html#2ebfd98c65e1d9ce503c8c61c354f609">h</a>;
<a name="l00178"></a><a class="code" href="structomapfb__memory__read.html#9749129c837b789b77c5efaeb4350fec">00178</a>     <span class="keywordtype">size_t</span> <a class="code" href="structomapfb__memory__read.html#9749129c837b789b77c5efaeb4350fec">buffer_size</a>;
<a name="l00179"></a><a class="code" href="structomapfb__memory__read.html#51fc1401f196cbce858cd0a1af8a5fb3">00179</a>     <span class="keywordtype">void</span>  *<a class="code" href="structomapfb__memory__read.html#51fc1401f196cbce858cd0a1af8a5fb3">buffer</a>;
<a name="l00180"></a>00180 };
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="preprocessor">#ifdef __KERNEL__</span>
<a name="l00183"></a>00183 <span class="preprocessor"></span>
<a name="l00184"></a>00184 <span class="preprocessor">#include &lt;linux/completion.h&gt;</span>
<a name="l00185"></a>00185 <span class="preprocessor">#include &lt;linux/interrupt.h&gt;</span>
<a name="l00186"></a>00186 <span class="preprocessor">#include &lt;linux/fb.h&gt;</span>
<a name="l00187"></a>00187 <span class="preprocessor">#include &lt;linux/mutex.h&gt;</span>
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 <span class="preprocessor">#include &lt;mach/board.h&gt;</span>
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="preprocessor">#define OMAP_LCDC_INV_VSYNC             0x0001</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span><span class="preprocessor">#define OMAP_LCDC_INV_HSYNC             0x0002</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span><span class="preprocessor">#define OMAP_LCDC_INV_PIX_CLOCK         0x0004</span>
<a name="l00194"></a>00194 <span class="preprocessor"></span><span class="preprocessor">#define OMAP_LCDC_INV_OUTPUT_EN         0x0008</span>
<a name="l00195"></a>00195 <span class="preprocessor"></span><span class="preprocessor">#define OMAP_LCDC_HSVS_RISING_EDGE      0x0010</span>
<a name="l00196"></a>00196 <span class="preprocessor"></span><span class="preprocessor">#define OMAP_LCDC_HSVS_OPPOSITE         0x0020</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>
<a name="l00198"></a>00198 <span class="preprocessor">#define OMAP_LCDC_SIGNAL_MASK       0x003f</span>
<a name="l00199"></a>00199 <span class="preprocessor"></span>
<a name="l00200"></a>00200 <span class="preprocessor">#define OMAP_LCDC_PANEL_TFT     0x0100</span>
<a name="l00201"></a>00201 <span class="preprocessor"></span>
<a name="l00202"></a>00202 <span class="preprocessor">#define OMAPFB_PLANE_XRES_MIN       8</span>
<a name="l00203"></a>00203 <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_PLANE_YRES_MIN       8</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span>
<a name="l00205"></a>00205 <span class="preprocessor">#ifdef CONFIG_ARCH_OMAP1</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_PLANE_NUM        1</span>
<a name="l00207"></a>00207 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span><span class="preprocessor">#define OMAPFB_PLANE_NUM        3</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00210"></a>00210 <span class="preprocessor"></span>
<a name="l00211"></a>00211 <span class="keyword">struct </span>omapfb_device;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 <span class="keyword">struct </span>lcd_panel {
<a name="l00214"></a>00214     <span class="keyword">const</span> <span class="keywordtype">char</span>  *name;
<a name="l00215"></a>00215     <span class="keywordtype">int</span>     <a class="code" href="mmsinit_8cpp.html#da726ac74e5e2240429c4c905c6680be">config</a>;     <span class="comment">/* TFT/STN, signal inversion */</span>
<a name="l00216"></a>00216     <span class="keywordtype">int</span>     bpp;        <span class="comment">/* Pixel format in fb mem */</span>
<a name="l00217"></a>00217     <span class="keywordtype">int</span>     data_lines; <span class="comment">/* Lines on LCD HW interface */</span>
<a name="l00218"></a>00218 
<a name="l00219"></a>00219     <span class="keywordtype">int</span>     x_res, y_res;
<a name="l00220"></a>00220     <span class="keywordtype">int</span>     pixel_clock;    <span class="comment">/* In kHz */</span>
<a name="l00221"></a>00221     <span class="keywordtype">int</span>     hsw;        <span class="comment">/* Horizontal synchronization</span>
<a name="l00222"></a>00222 <span class="comment">                       pulse width */</span>
<a name="l00223"></a>00223     <span class="keywordtype">int</span>     hfp;        <span class="comment">/* Horizontal front porch */</span>
<a name="l00224"></a>00224     <span class="keywordtype">int</span>     hbp;        <span class="comment">/* Horizontal back porch */</span>
<a name="l00225"></a>00225     <span class="keywordtype">int</span>     vsw;        <span class="comment">/* Vertical synchronization</span>
<a name="l00226"></a>00226 <span class="comment">                       pulse width */</span>
<a name="l00227"></a>00227     <span class="keywordtype">int</span>     vfp;        <span class="comment">/* Vertical front porch */</span>
<a name="l00228"></a>00228     <span class="keywordtype">int</span>     vbp;        <span class="comment">/* Vertical back porch */</span>
<a name="l00229"></a>00229     <span class="keywordtype">int</span>     acb;        <span class="comment">/* ac-bias pin frequency */</span>
<a name="l00230"></a>00230     <span class="keywordtype">int</span>     pcd;        <span class="comment">/* pixel clock divider.</span>
<a name="l00231"></a>00231 <span class="comment">                       Obsolete use pixel_clock instead */</span>
<a name="l00232"></a>00232 
<a name="l00233"></a>00233     int     (*init)     (<span class="keyword">struct </span>lcd_panel *panel,
<a name="l00234"></a>00234                      <span class="keyword">struct </span>omapfb_device *fbdev);
<a name="l00235"></a>00235     void        (*cleanup)  (<span class="keyword">struct </span>lcd_panel *panel);
<a name="l00236"></a>00236     int     (*enable)   (<span class="keyword">struct </span>lcd_panel *panel);
<a name="l00237"></a>00237     void        (*disable)  (<span class="keyword">struct </span>lcd_panel *panel);
<a name="l00238"></a>00238     <span class="keywordtype">unsigned</span> long   (*get_caps) (<span class="keyword">struct </span>lcd_panel *panel);
<a name="l00239"></a>00239     int     (*set_bklight_level)(<span class="keyword">struct </span>lcd_panel *panel,
<a name="l00240"></a>00240                          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> level);
<a name="l00241"></a>00241     <span class="keywordtype">unsigned</span> int    (*get_bklight_level)(<span class="keyword">struct </span>lcd_panel *panel);
<a name="l00242"></a>00242     <span class="keywordtype">unsigned</span> int    (*get_bklight_max)  (<span class="keyword">struct </span>lcd_panel *panel);
<a name="l00243"></a>00243     int     (*run_test) (<span class="keyword">struct </span>lcd_panel *panel, <span class="keywordtype">int</span> test_num);
<a name="l00244"></a>00244 };
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="keyword">struct </span>extif_timings {
<a name="l00247"></a>00247     <span class="keywordtype">int</span> cs_on_time;
<a name="l00248"></a>00248     <span class="keywordtype">int</span> cs_off_time;
<a name="l00249"></a>00249     <span class="keywordtype">int</span> we_on_time;
<a name="l00250"></a>00250     <span class="keywordtype">int</span> we_off_time;
<a name="l00251"></a>00251     <span class="keywordtype">int</span> re_on_time;
<a name="l00252"></a>00252     <span class="keywordtype">int</span> re_off_time;
<a name="l00253"></a>00253     <span class="keywordtype">int</span> we_cycle_time;
<a name="l00254"></a>00254     <span class="keywordtype">int</span> re_cycle_time;
<a name="l00255"></a>00255     <span class="keywordtype">int</span> cs_pulse_width;
<a name="l00256"></a>00256     <span class="keywordtype">int</span> access_time;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258     <span class="keywordtype">int</span> clk_div;
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     u32 tim[5];     <span class="comment">/* set by extif-&gt;convert_timings */</span>
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     <span class="keywordtype">int</span> converted;
<a name="l00263"></a>00263 };
<a name="l00264"></a>00264 
<a name="l00265"></a>00265 <span class="keyword">struct </span>lcd_ctrl_extif {
<a name="l00266"></a>00266     int  (*init)        (<span class="keyword">struct </span>omapfb_device *fbdev);
<a name="l00267"></a>00267     void (*cleanup)     (void);
<a name="l00268"></a>00268     void (*get_clk_info)    (u32 *clk_period, u32 *max_clk_div);
<a name="l00269"></a>00269     <span class="keywordtype">unsigned</span> long (*get_max_tx_rate)(void);
<a name="l00270"></a>00270     int  (*convert_timings) (<span class="keyword">struct </span>extif_timings *timings);
<a name="l00271"></a>00271     void (*set_timings) (<span class="keyword">const</span> <span class="keyword">struct </span>extif_timings *timings);
<a name="l00272"></a>00272     void (*set_bits_per_cycle)(<span class="keywordtype">int</span> bpc);
<a name="l00273"></a>00273     void (*write_command)   (<span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len);
<a name="l00274"></a>00274     void (*read_data)   (<span class="keywordtype">void</span> *buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len);
<a name="l00275"></a>00275     void (*write_data)  (<span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len);
<a name="l00276"></a>00276     void (*transfer_area)   (<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height,
<a name="l00277"></a>00277                  void (callback)(<span class="keywordtype">void</span> * data), <span class="keywordtype">void</span> *data);
<a name="l00278"></a>00278     int  (*setup_tearsync)  (<span class="keywordtype">unsigned</span> pin_cnt,
<a name="l00279"></a>00279                  <span class="keywordtype">unsigned</span> hs_pulse_time, <span class="keywordtype">unsigned</span> vs_pulse_time,
<a name="l00280"></a>00280                  <span class="keywordtype">int</span> hs_pol_inv, <span class="keywordtype">int</span> vs_pol_inv, <span class="keywordtype">int</span> div);
<a name="l00281"></a>00281     int  (*enable_tearsync) (<span class="keywordtype">int</span> enable, <span class="keywordtype">unsigned</span> line);
<a name="l00282"></a>00282 
<a name="l00283"></a>00283     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       max_transmit_size;
<a name="l00284"></a>00284 };
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 <span class="keyword">struct </span>omapfb_notifier_block {
<a name="l00287"></a>00287     <span class="keyword">struct </span>notifier_block   nb;
<a name="l00288"></a>00288     <span class="keywordtype">void</span>            *data;
<a name="l00289"></a>00289     <span class="keywordtype">int</span>         plane_idx;
<a name="l00290"></a>00290 };
<a name="l00291"></a>00291 
<a name="l00292"></a>00292 <span class="keyword">typedef</span> int (*omapfb_notifier_callback_t)(<span class="keyword">struct </span>notifier_block *,
<a name="l00293"></a>00293                       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> event,
<a name="l00294"></a>00294                       <span class="keywordtype">void</span> *fbi);
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 <span class="keyword">struct </span>omapfb_mem_region {
<a name="l00297"></a>00297     u32     paddr;
<a name="l00298"></a>00298     <span class="keywordtype">void</span> __iomem    *vaddr;
<a name="l00299"></a>00299     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>   size;
<a name="l00300"></a>00300     u8      type;       <span class="comment">/* OMAPFB_PLANE_MEM_* */</span>
<a name="l00301"></a>00301     <span class="keyword">enum</span> <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662">omapfb_color_format</a> format;<span class="comment">/* OMAPFB_COLOR_* */</span>
<a name="l00302"></a>00302     <span class="keywordtype">unsigned</span>    format_used:1;  <span class="comment">/* Must be set when format is set.</span>
<a name="l00303"></a>00303 <span class="comment">                     * Needed b/c of the badly chosen 0</span>
<a name="l00304"></a>00304 <span class="comment">                     * base for OMAPFB_COLOR_* values</span>
<a name="l00305"></a>00305 <span class="comment">                     */</span>
<a name="l00306"></a>00306     <span class="keywordtype">unsigned</span>    alloc:1;    <span class="comment">/* allocated by the driver */</span>
<a name="l00307"></a>00307     <span class="keywordtype">unsigned</span>    map:1;      <span class="comment">/* kernel mapped by the driver */</span>
<a name="l00308"></a>00308 };
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="keyword">struct </span>omapfb_mem_desc {
<a name="l00311"></a>00311     <span class="keywordtype">int</span>             region_cnt;
<a name="l00312"></a>00312     <span class="keyword">struct </span>omapfb_mem_region    region[OMAPFB_PLANE_NUM];
<a name="l00313"></a>00313 };
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 <span class="keyword">struct </span>lcd_ctrl {
<a name="l00316"></a>00316     <span class="keyword">const</span> <span class="keywordtype">char</span>  *name;
<a name="l00317"></a>00317     <span class="keywordtype">void</span>        *data;
<a name="l00318"></a>00318 
<a name="l00319"></a>00319     int     (*init)       (<span class="keyword">struct </span>omapfb_device *fbdev,
<a name="l00320"></a>00320                        <span class="keywordtype">int</span> ext_mode,
<a name="l00321"></a>00321                        <span class="keyword">struct </span>omapfb_mem_desc *req_md);
<a name="l00322"></a>00322     void        (*cleanup)    (void);
<a name="l00323"></a>00323     void        (*bind_client)    (<span class="keyword">struct </span>omapfb_notifier_block *nb);
<a name="l00324"></a>00324     void        (*get_caps)   (<span class="keywordtype">int</span> plane, <span class="keyword">struct </span><a class="code" href="structomapfb__caps.html">omapfb_caps</a> *caps);
<a name="l00325"></a>00325     int     (*set_update_mode)(<span class="keyword">enum</span> <a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a4">omapfb_update_mode</a> mode);
<a name="l00326"></a>00326     <span class="keyword">enum</span> <a class="code" href="omapfb_8h.html#519d9ef623d8a046d740b55c5795a2a4">omapfb_update_mode</a> (*get_update_mode)(void);
<a name="l00327"></a>00327     int     (*setup_plane)    (<span class="keywordtype">int</span> plane, <span class="keywordtype">int</span> channel_out,
<a name="l00328"></a>00328                        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> offset,
<a name="l00329"></a>00329                        <span class="keywordtype">int</span> screen_width,
<a name="l00330"></a>00330                        <span class="keywordtype">int</span> pos_x, <span class="keywordtype">int</span> pos_y, <span class="keywordtype">int</span> width,
<a name="l00331"></a>00331                        <span class="keywordtype">int</span> height, <span class="keywordtype">int</span> color_mode);
<a name="l00332"></a>00332     int     (*set_rotate)     (<span class="keywordtype">int</span> angle);
<a name="l00333"></a>00333     int     (*setup_mem)      (<span class="keywordtype">int</span> plane, <span class="keywordtype">size_t</span> size,
<a name="l00334"></a>00334                        <span class="keywordtype">int</span> mem_type, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *paddr);
<a name="l00335"></a>00335     int     (*mmap)       (<span class="keyword">struct </span>fb_info *info,
<a name="l00336"></a>00336                        <span class="keyword">struct </span>vm_area_struct *vma);
<a name="l00337"></a>00337     int     (*set_scale)      (<span class="keywordtype">int</span> plane,
<a name="l00338"></a>00338                        <span class="keywordtype">int</span> orig_width, <span class="keywordtype">int</span> orig_height,
<a name="l00339"></a>00339                        <span class="keywordtype">int</span> out_width, <span class="keywordtype">int</span> out_height);
<a name="l00340"></a>00340     int     (*enable_plane)   (<span class="keywordtype">int</span> plane, <span class="keywordtype">int</span> enable);
<a name="l00341"></a>00341     int     (*update_window)  (<span class="keyword">struct </span>fb_info *fbi,
<a name="l00342"></a>00342                        <span class="keyword">struct </span><a class="code" href="structomapfb__update__window.html">omapfb_update_window</a> *win,
<a name="l00343"></a>00343                        void (*callback)(<span class="keywordtype">void</span> *),
<a name="l00344"></a>00344                        <span class="keywordtype">void</span> *callback_data);
<a name="l00345"></a>00345     void        (*sync)       (void);
<a name="l00346"></a>00346     void        (*suspend)    (void);
<a name="l00347"></a>00347     void        (*resume)     (void);
<a name="l00348"></a>00348     int     (*run_test)   (<span class="keywordtype">int</span> test_num);
<a name="l00349"></a>00349     int     (*setcolreg)      (u_int regno, u16 red, u16 green,
<a name="l00350"></a>00350                        u16 blue, u16 transp,
<a name="l00351"></a>00351                        <span class="keywordtype">int</span> update_hw_mem);
<a name="l00352"></a>00352     int     (*set_color_key)  (<span class="keyword">struct </span><a class="code" href="structomapfb__color__key.html">omapfb_color_key</a> *ck);
<a name="l00353"></a>00353     int     (*get_color_key)  (<span class="keyword">struct </span><a class="code" href="structomapfb__color__key.html">omapfb_color_key</a> *ck);
<a name="l00354"></a>00354 };
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <span class="keyword">enum</span> omapfb_state {
<a name="l00357"></a>00357     OMAPFB_DISABLED = 0,
<a name="l00358"></a>00358     OMAPFB_SUSPENDED= 99,
<a name="l00359"></a>00359     OMAPFB_ACTIVE   = 100
<a name="l00360"></a>00360 };
<a name="l00361"></a>00361 
<a name="l00362"></a>00362 <span class="keyword">struct </span>omapfb_plane_struct {
<a name="l00363"></a>00363     <span class="keywordtype">int</span>             idx;
<a name="l00364"></a>00364     <span class="keyword">struct </span><a class="code" href="structomapfb__plane__info.html">omapfb_plane_info</a>    info;
<a name="l00365"></a>00365     <span class="keyword">enum</span> <a class="code" href="omapfb_8h.html#3ae64e7b4b9ba01795a5fc91d1d96662">omapfb_color_format</a>    color_mode;
<a name="l00366"></a>00366     <span class="keyword">struct </span>omapfb_device        *fbdev;
<a name="l00367"></a>00367 };
<a name="l00368"></a>00368 
<a name="l00369"></a>00369 <span class="keyword">struct </span>omapfb_device {
<a name="l00370"></a>00370     <span class="keywordtype">int</span>         state;
<a name="l00371"></a>00371     <span class="keywordtype">int</span>                     ext_lcdc;               <span class="comment">/* Using external</span>
<a name="l00372"></a>00372 <span class="comment">                                                           LCD controller */</span>
<a name="l00373"></a>00373     <span class="keyword">struct </span>mutex        rqueue_mutex;
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="keywordtype">int</span>         palette_size;
<a name="l00376"></a>00376     u32         pseudo_palette[17];
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     <span class="keyword">struct </span>lcd_panel    *panel;         <span class="comment">/* LCD panel */</span>
<a name="l00379"></a>00379     <span class="keyword">const</span> <span class="keyword">struct </span>lcd_ctrl   *ctrl;          <span class="comment">/* LCD controller */</span>
<a name="l00380"></a>00380     <span class="keyword">const</span> <span class="keyword">struct </span>lcd_ctrl   *int_ctrl;      <span class="comment">/* internal LCD ctrl */</span>
<a name="l00381"></a>00381     <span class="keyword">struct </span>lcd_ctrl_extif   *ext_if;        <span class="comment">/* LCD ctrl external</span>
<a name="l00382"></a>00382 <span class="comment">                               interface */</span>
<a name="l00383"></a>00383     <span class="keyword">struct </span>device       *dev;
<a name="l00384"></a>00384     <span class="keyword">struct </span><a class="code" href="structfb__var__screeninfo.html">fb_var_screeninfo</a>    new_var;    <span class="comment">/* for mode changes */</span>
<a name="l00385"></a>00385 
<a name="l00386"></a>00386     <span class="keyword">struct </span>omapfb_mem_desc      mem_desc;
<a name="l00387"></a>00387     <span class="keyword">struct </span>fb_info          *fb_info[OMAPFB_PLANE_NUM];
<a name="l00388"></a>00388 };
<a name="l00389"></a>00389 
<a name="l00390"></a>00390 <span class="keyword">struct </span>omapfb_platform_data {
<a name="l00391"></a>00391     <span class="keyword">struct </span>omap_lcd_config      lcd;
<a name="l00392"></a>00392     <span class="keyword">struct </span>omapfb_mem_desc      mem_desc;
<a name="l00393"></a>00393     <span class="keywordtype">void</span>                *ctrl_platform_data;
<a name="l00394"></a>00394 };
<a name="l00395"></a>00395 
<a name="l00396"></a>00396 <span class="preprocessor">#ifdef CONFIG_ARCH_OMAP1</span>
<a name="l00397"></a>00397 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">struct </span>lcd_ctrl omap1_lcd_ctrl;
<a name="l00398"></a>00398 <span class="preprocessor">#else</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">struct </span>lcd_ctrl omap2_disp_ctrl;
<a name="l00400"></a>00400 <span class="preprocessor">#endif</span>
<a name="l00401"></a>00401 <span class="preprocessor"></span>
<a name="l00402"></a>00402 <span class="keyword">extern</span> <span class="keywordtype">void</span> omapfb_set_platform_data(<span class="keyword">struct</span> omapfb_platform_data *data);
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 <span class="keyword">extern</span> <span class="keywordtype">void</span> omapfb_reserve_sdram(<span class="keywordtype">void</span>);
<a name="l00405"></a>00405 <span class="keyword">extern</span> <span class="keywordtype">void</span> omapfb_register_panel(<span class="keyword">struct</span> lcd_panel *panel);
<a name="l00406"></a>00406 <span class="keyword">extern</span> <span class="keywordtype">void</span> omapfb_write_first_pixel(<span class="keyword">struct</span> omapfb_device *fbdev, u16 pixval);
<a name="l00407"></a>00407 <span class="keyword">extern</span> <span class="keywordtype">void</span> omapfb_notify_clients(<span class="keyword">struct</span> omapfb_device *fbdev,
<a name="l00408"></a>00408                   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> event);
<a name="l00409"></a>00409 <span class="keyword">extern</span> <span class="keywordtype">int</span>  omapfb_register_client(<span class="keyword">struct</span> omapfb_notifier_block *nb,
<a name="l00410"></a>00410                    omapfb_notifier_callback_t callback,
<a name="l00411"></a>00411                    <span class="keywordtype">void</span> *callback_data);
<a name="l00412"></a>00412 <span class="keyword">extern</span> <span class="keywordtype">int</span>  omapfb_unregister_client(<span class="keyword">struct</span> omapfb_notifier_block *nb);
<a name="l00413"></a>00413 <span class="keyword">extern</span> <span class="keywordtype">int</span>  omapfb_update_window_async(<span class="keyword">struct</span> fb_info *fbi,
<a name="l00414"></a>00414                        <span class="keyword">struct</span> <a class="code" href="structomapfb__update__window.html">omapfb_update_window</a> *win,
<a name="l00415"></a>00415                        <span class="keywordtype">void</span> (*callback)(<span class="keywordtype">void</span> *),
<a name="l00416"></a>00416                        <span class="keywordtype">void</span> *callback_data);
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 <span class="comment">/* in arch/arm/plat-omap/fb.c */</span>
<a name="l00419"></a>00419 <span class="keyword">extern</span> <span class="keywordtype">void</span> omapfb_set_ctrl_platform_data(<span class="keywordtype">void</span> *pdata);
<a name="l00420"></a>00420 
<a name="l00421"></a>00421 <span class="preprocessor">#endif </span><span class="comment">/* __KERNEL__ */</span>
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 <span class="preprocessor">#endif </span><span class="comment">/* __OMAPFB_H */</span>
</pre></div></div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1675780-3");
pageTracker._trackPageview();
</script>

<hr class="footer"/><address class="footer" style="text-align:right;"><small>Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a></small></address>
</body>
</html>
