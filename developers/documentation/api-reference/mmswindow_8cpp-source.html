<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Disko API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);' >
<div id="top">
<div id="titlearea" style="background:#262929;">
  <div id="projectlogo">
    <img alt="Logo" src="./disko-logo.png" style="float:left;"/>
    <br clear="all"/>
  </div>
</div>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
<h1>mmswindow.cpp</h1><a href="mmswindow_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> *   Copyright (C) 2005-2007 Stefan Schwarzer, Jens Schneider,             *</span>
<a name="l00003"></a>00003 <span class="comment"> *                           Matthias Hardt, Guido Madaus                  *</span>
<a name="l00004"></a>00004 <span class="comment"> *                                                                         *</span>
<a name="l00005"></a>00005 <span class="comment"> *   Copyright (C) 2007-2008 BerLinux Solutions GbR                        *</span>
<a name="l00006"></a>00006 <span class="comment"> *                           Stefan Schwarzer &amp; Guido Madaus               *</span>
<a name="l00007"></a>00007 <span class="comment"> *                                                                         *</span>
<a name="l00008"></a>00008 <span class="comment"> *   Copyright (C) 2009-2013 BerLinux Solutions GmbH                       *</span>
<a name="l00009"></a>00009 <span class="comment"> *                                                                         *</span>
<a name="l00010"></a>00010 <span class="comment"> *   Authors:                                                              *</span>
<a name="l00011"></a>00011 <span class="comment"> *      Stefan Schwarzer   &lt;stefan.schwarzer@diskohq.org&gt;,                 *</span>
<a name="l00012"></a>00012 <span class="comment"> *      Matthias Hardt     &lt;matthias.hardt@diskohq.org&gt;,                   *</span>
<a name="l00013"></a>00013 <span class="comment"> *      Jens Schneider     &lt;jens.schneider@diskohq.org&gt;,                   *</span>
<a name="l00014"></a>00014 <span class="comment"> *      Guido Madaus       &lt;guido.madaus@diskohq.org&gt;,                     *</span>
<a name="l00015"></a>00015 <span class="comment"> *      Patrick Helterhoff &lt;patrick.helterhoff@diskohq.org&gt;,               *</span>
<a name="l00016"></a>00016 <span class="comment"> *      René Bählkow       &lt;rene.baehlkow@diskohq.org&gt;                     *</span>
<a name="l00017"></a>00017 <span class="comment"> *                                                                         *</span>
<a name="l00018"></a>00018 <span class="comment"> *   This library is free software; you can redistribute it and/or         *</span>
<a name="l00019"></a>00019 <span class="comment"> *   modify it under the terms of the GNU Lesser General Public            *</span>
<a name="l00020"></a>00020 <span class="comment"> *   License version 2.1 as published by the Free Software Foundation.     *</span>
<a name="l00021"></a>00021 <span class="comment"> *                                                                         *</span>
<a name="l00022"></a>00022 <span class="comment"> *   This library is distributed in the hope that it will be useful,       *</span>
<a name="l00023"></a>00023 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
<a name="l00024"></a>00024 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU     *</span>
<a name="l00025"></a>00025 <span class="comment"> *   Lesser General Public License for more details.                       *</span>
<a name="l00026"></a>00026 <span class="comment"> *                                                                         *</span>
<a name="l00027"></a>00027 <span class="comment"> *   You should have received a copy of the GNU Lesser General Public      *</span>
<a name="l00028"></a>00028 <span class="comment"> *   License along with this library; if not, write to the                 *</span>
<a name="l00029"></a>00029 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
<a name="l00030"></a>00030 <span class="comment"> *   51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA            *</span>
<a name="l00031"></a>00031 <span class="comment"> **************************************************************************/</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="mmswindow_8h.html">mmsgui/mmswindow.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include "<a class="code" href="mmschildwindow_8h.html">mmsgui/mmschildwindow.h</a>"</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include "<a class="code" href="mmswidgets_8h.html">mmsgui/mmswidgets.h</a>"</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include "<a class="code" href="mmsborder_8h.html">mmsgui/mmsborder.h</a>"</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="comment">//#define DEBUG_LOCK_OUTPUT</span>
<a name="l00043"></a>00043 <span class="preprocessor">#ifdef DEBUG_LOCK_OUTPUT</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#include &lt;sys/syscall.h&gt;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#define PRINT_LOCK(msg...) printf("%s %s - %d (%lu)\n", ((string)(msg)).c_str(),__FUNCTION__,__LINE__,(pid_t) syscall (SYS_gettid))</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00047"></a><a class="code" href="mmswindow_8cpp.html#0a52413067b838c7e79ca4207f834d95">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define PRINT_LOCK(msg...)</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#include "<a class="code" href="mmsinit_8h.html">mmscore/mmsinit.h</a>"</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">/* static variables */</span>
<a name="l00055"></a>00055 <a class="code" href="classIMMSWindowManager.html">IMMSWindowManager</a>   *<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">MMSWindow::windowmanager</a> = NULL;
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <a class="code" href="classMMSImageManager.html">MMSImageManager</a>     *<a class="code" href="classMMSWindow.html#b7730f339e9de3ab726ab7417f385d5b" title="image manager for the window (layer 1)">MMSWindow::im1</a> = NULL;
<a name="l00058"></a>00058 <a class="code" href="classMMSFBLayer.html" title="This class describes a display layer.">MMSFBLayer</a>          *<a class="code" href="classMMSWindow.html#59935481d608e06386dd7ef260573fe2" title="layer for im1">MMSWindow::im1_layer</a> = NULL;
<a name="l00059"></a>00059 <a class="code" href="classMMSImageManager.html">MMSImageManager</a>     *<a class="code" href="classMMSWindow.html#721c39e6c30edad58ccf9dd182cb27c2" title="image manager for the window (layer 2)">MMSWindow::im2</a> = NULL;
<a name="l00060"></a>00060 <a class="code" href="classMMSFBLayer.html" title="This class describes a display layer.">MMSFBLayer</a>          *<a class="code" href="classMMSWindow.html#ac7fe88b941c93b4052f52c8b8e4b057" title="layer for im2">MMSWindow::im2_layer</a> = NULL;
<a name="l00061"></a>00061 <a class="code" href="classMMSFontManager.html">MMSFontManager</a>      *<a class="code" href="classMMSWindow.html#56a800a2d08829ec14f3161b3126bc84" title="font manager for the window">MMSWindow::fm</a> = NULL;
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <a class="code" href="classMMSFBWindow.html" title="This class describes a window on a specific layer.">MMSFBWindow</a> *<a class="code" href="classMMSWindow.html#273f17e194f56cee22df853e1d7a091f" title="a full screen MMSFBWindow as buffer for all MMSRootWindow objects with own_surface=false...">MMSWindow::fullscreen_root_window</a>          = NULL;
<a name="l00064"></a>00064 <span class="keywordtype">int</span>         <a class="code" href="classMMSWindow.html#5ac87ec86d181c0f1d8abcc51076947b" title="use count for fullscreen_root_window">MMSWindow::fullscreen_root_window_use_count</a> = 0;
<a name="l00065"></a>00065 <a class="code" href="classMMSFBWindow.html" title="This class describes a window on a specific layer.">MMSFBWindow</a> *<a class="code" href="classMMSWindow.html#80362c874c43047f7da8f38ae526930e" title="a full screen MMSFBWindow as buffer for all MMSMainWindow objects with own_surface=false...">MMSWindow::fullscreen_main_window</a>          = NULL;
<a name="l00066"></a>00066 <span class="keywordtype">int</span>         <a class="code" href="classMMSWindow.html#c73f385f77ff857c2a5b46fcaa42e093" title="use count for fullscreen_main_window">MMSWindow::fullscreen_main_window_use_count</a> = 0;
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="comment">// helper macros for horizontal stretchmode</span>
<a name="l00069"></a><a class="code" href="mmswindow_8cpp.html#d8d02e442fe86251075ae389f38e4fd2">00069</a> <span class="preprocessor">#define MMSFBWINDOW_CALC_STRETCH_W(w)               ((w-&gt;stretchLeft-25600)+(w-&gt;stretchRight-25600)+25600)</span>
<a name="l00070"></a><a class="code" href="mmswindow_8cpp.html#6af592eae9a3eaa756a3601dcc90c5af">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define MMSFBWINDOW_CALC_STRETCH_LEFT(x,w)          ((w-&gt;stretchLeft!=25600)?((((x)*w-&gt;stretchLeft*100+12800)/2560000)&amp;~0x01):(x))</span>
<a name="l00071"></a><a class="code" href="mmswindow_8cpp.html#b5f5315b2eb953328dc242c063acfa86">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define MMSFBWINDOW_CALC_STRETCH_WIDTH(x,w)         ((MMSFBWINDOW_CALC_STRETCH_W(w)!=25600)?((((x)*MMSFBWINDOW_CALC_STRETCH_W(w)*100+12800)/2560000)&amp;~0x01):(x))</span>
<a name="l00072"></a><a class="code" href="mmswindow_8cpp.html#5212136ed17b7dbc5e0278dc00710455">00072</a> <span class="preprocessor"></span><span class="preprocessor">#define MMSFBWINDOW_CALC_STRETCH_WIDTH_REV(x,w)     ((MMSFBWINDOW_CALC_STRETCH_W(w)!=25600)?((((x)*25600+12800)/MMSFBWINDOW_CALC_STRETCH_W(w))&amp;~0x01):(x))</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00074"></a>00074 <span class="comment">// helper macros for vertical stretchmode</span>
<a name="l00075"></a><a class="code" href="mmswindow_8cpp.html#7629ceb949cb62ce3cc00e0918c56ba4">00075</a> <span class="preprocessor">#define MMSFBWINDOW_CALC_STRETCH_H(w)               ((w-&gt;stretchUp-25600)+(w-&gt;stretchDown-25600)+25600)</span>
<a name="l00076"></a><a class="code" href="mmswindow_8cpp.html#b47f3f2894b4a3c62802158022d8ba05">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define MMSFBWINDOW_CALC_STRETCH_UP(x,w)            ((w-&gt;stretchUp!=25600)?((((x)*w-&gt;stretchUp*100+12800)/2560000)&amp;~0x01):(x))</span>
<a name="l00077"></a><a class="code" href="mmswindow_8cpp.html#cdc59a738aeb7a0e1cc153ad4b34084b">00077</a> <span class="preprocessor"></span><span class="preprocessor">#define MMSFBWINDOW_CALC_STRETCH_HEIGHT(x,w)        ((MMSFBWINDOW_CALC_STRETCH_H(w)!=25600)?((((x)*MMSFBWINDOW_CALC_STRETCH_H(w)*100+12800)/2560000)&amp;~0x01):(x))</span>
<a name="l00078"></a><a class="code" href="mmswindow_8cpp.html#66789bb044a6f09f7bd0d1eaf9791d35">00078</a> <span class="preprocessor"></span><span class="preprocessor">#define MMSFBWINDOW_CALC_STRETCH_HEIGHT_REV(x,w)    ((MMSFBWINDOW_CALC_STRETCH_H(w)!=25600)?((((x)*25600+12800)/MMSFBWINDOW_CALC_STRETCH_H(w))&amp;~0x01):(x))</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">00081</a> <span class="preprocessor">#define MMSWINDOW_ANIM_MAX_OFFSET   30</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a><a class="code" href="classMMSWindow.html#1b34a5fdcd0684275bdef778f79eaa0c">00083</a> <a class="code" href="classMMSWindow.html#1b34a5fdcd0684275bdef778f79eaa0c" title="The base constructor for all window types.">MMSWindow::MMSWindow</a>() {
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     this-&gt;<a class="code" href="classMMSWindow.html#a09873cde8a088d9dfd37547fb36bb32" title="save the id of the thread which has locked the window">TID</a> = 0;
<a name="l00086"></a>00086     this-&gt;<a class="code" href="classMMSWindow.html#50fc72581b4a858a9972ee2f37af91e4" title="count the number of times the thread has call lock() because it is not a problem...">Lock_cnt</a> = 0;
<a name="l00087"></a>00087 
<a name="l00088"></a>00088     this-&gt;<a class="code" href="classMMSWindow.html#03e55bfcb4ea2b095aa4ce678825c07e" title="base attributes of the window">baseWindowClass</a> = NULL;
<a name="l00089"></a>00089     this-&gt;<a class="code" href="classMMSWindow.html#c2a925451662bc0325c3513fb778922e" title="attributes set by &amp;lt;class/&amp;gt; tag in theme.xml">windowClass</a> = NULL;
<a name="l00090"></a>00090     this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a> = <span class="keyword">false</span>;
<a name="l00091"></a>00091     this-&gt;<a class="code" href="classMMSWindow.html#4e0f72750f2252e32189ba5ef65e8fa1" title="pre-calc navigation done?">precalcnav</a> = <span class="keyword">false</span>;
<a name="l00092"></a>00092     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a> = NULL;
<a name="l00093"></a>00093     this-&gt;<a class="code" href="classMMSWindow.html#a3c04b84ccee933184fd681b52a71b21" title="toplevel parent window (if window is a child window) or NULL">toplevel_parent</a> = NULL;
<a name="l00094"></a>00094 <span class="comment">//this-&gt;im = NULL;</span>
<a name="l00095"></a>00095 <span class="comment">//    this-&gt;fm = NULL;</span>
<a name="l00096"></a>00096     this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a> = NULL;
<a name="l00097"></a>00097     this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a> = NULL;
<a name="l00098"></a>00098     this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a> = NULL;
<a name="l00099"></a>00099     this-&gt;<a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a> = <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7a4e1d39ccd2838f5824aa6ced7eab8db" title="none">MMSW_NONE</a>;
<a name="l00100"></a>00100     this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a> = NULL;
<a name="l00101"></a>00101     this-&gt;<a class="code" href="classMMSWindow.html#45aabc8f5a3c7aeccbbf00577fb5aae6" title="background image set by application">bgimage_from_external</a> = <span class="keyword">false</span>;
<a name="l00102"></a>00102     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="mmsborderclass_8h.html#e5ee0e929c7ede8483739e98dff1efc9" title="8 possible border images">MMSBORDER_IMAGE_NUM_SIZE</a>;i++)
<a name="l00103"></a>00103         this-&gt;<a class="code" href="classMMSWindow.html#93487be366c499483d76e249be9de23a" title="border images">borderimages</a>[i] = NULL;
<a name="l00104"></a>00104     <a class="code" href="classMMSWindow.html#2ab7d06ee8447a57ea877f315da20c04" title="border geometry set?">bordergeomset</a> = <span class="keyword">false</span>;
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     this-&gt;<a class="code" href="classMMSWindow.html#60602e2b9750b19b22441f95219b1222" title="check and recalc the geometry of the widgets during the next draw()?">draw_setgeom</a> = <span class="keyword">true</span>;
<a name="l00107"></a>00107 
<a name="l00108"></a>00108     this-&gt;<a class="code" href="classMMSWindow.html#eb1592626842e8f7a07e16bdb800cf6a" title="x-movement of the window based on the alignment attribute">dxpix</a> = 0;
<a name="l00109"></a>00109     this-&gt;<a class="code" href="classMMSWindow.html#6ab3465fae4f0a763bc2b5705983a6b5" title="y-movement of the window based on the alignment attribute">dypix</a> = 0;
<a name="l00110"></a>00110     this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = 0;
<a name="l00111"></a>00111     this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = 0;
<a name="l00112"></a>00112     this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = 0;
<a name="l00113"></a>00113     this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = 0;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = 0;
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     this-&gt;<a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a>    = NULL;
<a name="l00118"></a>00118     this-&gt;<a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a>  = NULL;
<a name="l00119"></a>00119     this-&gt;<a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a>  = NULL;
<a name="l00120"></a>00120     this-&gt;<a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a> = NULL;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     this-&gt;<a class="code" href="classMMSWindow.html#2819d67f1d1eb65b752e57428844c02a" title="up/down/left/right arrow widgets updated the first time?">initialArrowsDrawn</a> = <span class="keyword">false</span>;
<a name="l00123"></a>00123 
<a name="l00124"></a>00124     <span class="comment">// init stretch mode, per default the windows will not be stretched by the window manager</span>
<a name="l00125"></a>00125     this-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a> = <span class="keyword">false</span>;
<a name="l00126"></a>00126     this-&gt;<a class="code" href="classMMSWindow.html#0345a3eaba6914e061e08f37100033f3" title="stretch the window to X percent of the window WIDTH to the left side the value is...">stretchLeft</a> = 0;
<a name="l00127"></a>00127     this-&gt;<a class="code" href="classMMSWindow.html#4e60f5435ade4abed8cdf224274693b6" title="stretch the window to X percent of the window HEIGHT to the up side the value is...">stretchUp</a> = 0;
<a name="l00128"></a>00128     this-&gt;<a class="code" href="classMMSWindow.html#b3e1a2e480b728ee1fdfa5cb95bf6c3b" title="stretch the window to X percent of the window WIDTH to the right side the value is...">stretchRight</a> = 0;
<a name="l00129"></a>00129     this-&gt;<a class="code" href="classMMSWindow.html#16a4acf8f803ac505f2db966dde0722f" title="stretch the window to X percent of the window HEIGHT to the down side the value is...">stretchDown</a> = 0;
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     this-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a> = 0;
<a name="l00132"></a>00132 
<a name="l00133"></a>00133     this-&gt;<a class="code" href="classMMSWindow.html#d1df2097f4b63b77cec9fbad988060b3">need_redraw</a> = <span class="keyword">false</span>;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     this-&gt;<a class="code" href="classMMSWindow.html#c99543fa4c8290455dbcf61ff2c7d7dd">zbaselevel</a> = 0;
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <span class="comment">// initialize the callbacks</span>
<a name="l00139"></a>00139     <a class="code" href="classMMSWindow.html#ba322273af774dd227a34140417809ee" title="Set one or more callbacks for the onBeforeShow event.">onBeforeShow</a>        = <span class="keyword">new</span> sigc::signal&lt;bool, MMSWindow*&gt;::accumulated&lt;<a class="code" href="structbool__accumulator.html" title="bool accumulator">bool_accumulator</a>&gt;;
<a name="l00140"></a>00140     <a class="code" href="classMMSWindow.html#f87731da3a4643db8646d609906614ad" title="Set one or more callbacks for the onAfterShow event.">onAfterShow</a>         = <span class="keyword">new</span> sigc::signal&lt;void, MMSWindow*, bool&gt;;
<a name="l00141"></a>00141     <a class="code" href="classMMSWindow.html#51c6c73061f202d9c7e04bfc52e90106" title="Set one or more callbacks for the onBeforeHide event.">onBeforeHide</a>        = <span class="keyword">new</span> sigc::signal&lt;bool, MMSWindow*, bool&gt;::accumulated&lt;bool_accumulator&gt;;
<a name="l00142"></a>00142     <a class="code" href="classMMSWindow.html#14303c25b0fd68a051cd616c1992faaa" title="Set one or more callbacks for the onHide event.">onHide</a>              = <span class="keyword">new</span> sigc::signal&lt;void, MMSWindow*, bool&gt;;
<a name="l00143"></a>00143     <a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>       = <span class="keyword">new</span> sigc::signal&lt;bool, MMSWindow*, MMSInputEvent*&gt;::accumulated&lt;<a class="code" href="structneg__bool__accumulator.html" title="bool accumulator (not)">neg_bool_accumulator</a>&gt;;
<a name="l00144"></a>00144     <a class="code" href="classMMSWindow.html#bb5e0d540eb48eb0a97565db75f17eba" title="Set one or more callbacks for the onBeforeHandleInput event.">onBeforeHandleInput</a> = <span class="keyword">new</span> sigc::signal&lt;bool, MMSWindow*, MMSInputEvent*&gt;::accumulated&lt;neg_bool_accumulator&gt;;
<a name="l00145"></a>00145     <a class="code" href="classMMSWindow.html#3ba16a2e49ebca140948b00b23acf1a9" title="Set one or more callbacks for the onDraw event.">onDraw</a>              = <span class="keyword">new</span> sigc::signal&lt;bool, MMSFBSurface*, bool&gt;::accumulated&lt;neg_bool_accumulator&gt;;
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     <span class="comment">// initialize the animation callbacks</span>
<a name="l00148"></a>00148     this-&gt;<a class="code" href="classMMSWindow.html#84813b3946d37cee2ce172401c6c7721" title="connection object for MMSPulser::onBeforeAnimation callback">onBeforeAnimation_connection</a>  = this-&gt;<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>.<a class="code" href="classMMSPulser.html#95d6b0bbb7d8cebedde2c4e6e3cc3b82" title="Set one or more callbacks for the onBeforeAnimation event.">onBeforeAnimation</a>.connect(sigc::mem_fun(<span class="keyword">this</span>, &amp;<a class="code" href="classMMSWindow.html#b6c5081e209468c869d569d46f6b473f">MMSWindow::onBeforeAnimation</a>));
<a name="l00149"></a>00149     this-&gt;<a class="code" href="classMMSWindow.html#3c7d820d427cc4931ac0c4e0e7f3e2a5" title="connection object for MMSPulser::onAnimation callback">onAnimation_connection</a>        = this-&gt;<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>.<a class="code" href="classMMSPulser.html#d21d71beb87c50b0119db4334a77177d" title="Set one or more callbacks for the onAnimation event.">onAnimation</a>.connect(sigc::mem_fun(<span class="keyword">this</span>, &amp;<a class="code" href="classMMSWindow.html#6e65c2f623a600bfadb0e7db73332a65">MMSWindow::onAnimation</a>));
<a name="l00150"></a>00150     this-&gt;<a class="code" href="classMMSWindow.html#d778708dfc4df2ef4e9f2ad5718b7731" title="connection object for MMSPulser::onAfterAnimation callback">onAfterAnimation_connection</a>   = this-&gt;<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>.<a class="code" href="classMMSPulser.html#56a04a6777af001e3282601641db2efa" title="Set one or more callbacks for the onAfterAnimation event.">onAfterAnimation</a>.connect(sigc::mem_fun(<span class="keyword">this</span>, &amp;<a class="code" href="classMMSWindow.html#3e334a6505d912696104cdefc12fa286">MMSWindow::onAfterAnimation</a>));
<a name="l00151"></a>00151 }
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="classMMSWindow.html#5808ee800d761875fc7891be1a1fc338">00153</a> <a class="code" href="classMMSWindow.html#5808ee800d761875fc7891be1a1fc338" title="The base destructor for this class.">MMSWindow::~MMSWindow</a>() {
<a name="l00154"></a>00154     <span class="comment">// wait until show/hide actions are finished</span>
<a name="l00155"></a>00155     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l00156"></a>00156     <span class="keywordtype">bool</span> rc = <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l00157"></a>00157 
<a name="l00158"></a>00158     <span class="keywordflow">while</span>(this-&gt;<a class="code" href="classMMSWindow.html#2fb822ca292224f2c2e853b7a7f2e256" title="window action thread (used for animations)">action</a>-&gt;<a class="code" href="classMMSWindowAction.html#e257f5ab19065f54d1d1cd21024b07f7">getAction</a>() != <a class="code" href="mmswindowaction_8h.html#8fad75305f5f4373364408cf1827a99e56452be0e0480c2d914358b7c797904f">MMSWACTION_NONE</a>)
<a name="l00159"></a>00159         <a class="code" href="tools_8h.html#214c8ed7283af52160d5b12e1e0752b4">msleep</a>(100);
<a name="l00160"></a>00160 
<a name="l00161"></a>00161     <span class="keywordflow">if</span>(rc)
<a name="l00162"></a>00162         <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#e68f3442c1054c4413815662cb274bf1">lock</a>();
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="comment">// hide the window if shown</span>
<a name="l00165"></a>00165     <a class="code" href="classMMSWindow.html#381cb20ccfd15b89072f379ec6498f3c" title="Internal method: Hide the window without animation.">instantHide</a>();
<a name="l00166"></a>00166 
<a name="l00167"></a>00167     <span class="comment">// delete the callbacks</span>
<a name="l00168"></a>00168     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#ba322273af774dd227a34140417809ee" title="Set one or more callbacks for the onBeforeShow event.">onBeforeShow</a>) <span class="keyword">delete</span> <a class="code" href="classMMSWindow.html#ba322273af774dd227a34140417809ee" title="Set one or more callbacks for the onBeforeShow event.">onBeforeShow</a>;
<a name="l00169"></a>00169     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#f87731da3a4643db8646d609906614ad" title="Set one or more callbacks for the onAfterShow event.">onAfterShow</a>) <span class="keyword">delete</span> <a class="code" href="classMMSWindow.html#f87731da3a4643db8646d609906614ad" title="Set one or more callbacks for the onAfterShow event.">onAfterShow</a>;
<a name="l00170"></a>00170     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#51c6c73061f202d9c7e04bfc52e90106" title="Set one or more callbacks for the onBeforeHide event.">onBeforeHide</a>) <span class="keyword">delete</span> <a class="code" href="classMMSWindow.html#51c6c73061f202d9c7e04bfc52e90106" title="Set one or more callbacks for the onBeforeHide event.">onBeforeHide</a>;
<a name="l00171"></a>00171     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#14303c25b0fd68a051cd616c1992faaa" title="Set one or more callbacks for the onHide event.">onHide</a>) <span class="keyword">delete</span> <a class="code" href="classMMSWindow.html#14303c25b0fd68a051cd616c1992faaa" title="Set one or more callbacks for the onHide event.">onHide</a>;
<a name="l00172"></a>00172     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>) <span class="keyword">delete</span> <a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>;
<a name="l00173"></a>00173     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#bb5e0d540eb48eb0a97565db75f17eba" title="Set one or more callbacks for the onBeforeHandleInput event.">onBeforeHandleInput</a>) <span class="keyword">delete</span> <a class="code" href="classMMSWindow.html#bb5e0d540eb48eb0a97565db75f17eba" title="Set one or more callbacks for the onBeforeHandleInput event.">onBeforeHandleInput</a>;
<a name="l00174"></a>00174     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#3ba16a2e49ebca140948b00b23acf1a9" title="Set one or more callbacks for the onDraw event.">onDraw</a>) <span class="keyword">delete</span> <a class="code" href="classMMSWindow.html#3ba16a2e49ebca140948b00b23acf1a9" title="Set one or more callbacks for the onDraw event.">onDraw</a>;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <span class="comment">// disconnect callbacks from pulser</span>
<a name="l00177"></a>00177     this-&gt;<a class="code" href="classMMSWindow.html#84813b3946d37cee2ce172401c6c7721" title="connection object for MMSPulser::onBeforeAnimation callback">onBeforeAnimation_connection</a>.disconnect();
<a name="l00178"></a>00178     this-&gt;<a class="code" href="classMMSWindow.html#3c7d820d427cc4931ac0c4e0e7f3e2a5" title="connection object for MMSPulser::onAnimation callback">onAnimation_connection</a>.disconnect();
<a name="l00179"></a>00179     this-&gt;<a class="code" href="classMMSWindow.html#d778708dfc4df2ef4e9f2ad5718b7731" title="connection object for MMSPulser::onAfterAnimation callback">onAfterAnimation_connection</a>.disconnect();
<a name="l00180"></a>00180 
<a name="l00181"></a>00181     <span class="comment">// delete images, ...</span>
<a name="l00182"></a>00182     <a class="code" href="classMMSWindow.html#dfa219bc6b4989434270629e9c57f52c" title="Internal method: Release images and other things.">release</a>();
<a name="l00183"></a>00183 
<a name="l00184"></a>00184     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> != <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>) {
<a name="l00185"></a>00185         <span class="comment">// remove normal window</span>
<a name="l00186"></a>00186         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>)
<a name="l00187"></a>00187             this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#471d8f59f386eecd797dc08d3260f064">removeWindow</a>(<span class="keyword">this</span>);
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189     <span class="keywordflow">else</span> {
<a name="l00190"></a>00190         <span class="comment">// remove child window from parent</span>
<a name="l00191"></a>00191         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l00192"></a>00192             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#be09d0d2e648134769bcec253de4f90c" title="Internal method: Remove a child window.">removeChildWindow</a>(<span class="keyword">this</span>);
<a name="l00193"></a>00193     }
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     <span class="comment">// delete children</span>
<a name="l00196"></a>00196     <span class="comment">// i have to delete only the first widget because all others are children from it and will be implicitly deleted</span>
<a name="l00197"></a>00197     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size()&gt;0)
<a name="l00198"></a>00198         <span class="keyword">delete</span> <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(0);
<a name="l00199"></a>00199 
<a name="l00200"></a>00200     <span class="comment">// delete childwins</span>
<a name="l00201"></a>00201     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++)
<a name="l00202"></a>00202         <span class="keyword">delete</span> <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="comment">// delete the rest :)</span>
<a name="l00205"></a>00205     <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSWindow.html#2fb822ca292224f2c2e853b7a7f2e256" title="window action thread (used for animations)">action</a>;
<a name="l00206"></a>00206 <span class="comment">//delete this-&gt;im;</span>
<a name="l00207"></a>00207 <span class="comment">//delete this-&gt;fm;</span>
<a name="l00208"></a>00208 
<a name="l00209"></a>00209     <span class="keywordflow">if</span> (!((this-&gt;<a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a> &amp; <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7040730406261b9ffb4d38ce2cd3429cc" title="The window displays a video stream and should be on the video layer if it exists...">MMSW_VIDEO</a>)&amp;&amp;(!(this-&gt;<a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a> &amp; <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7e2702d3b20b98cb072beb5099f81ba00" title="The window should use the graphics layer.">MMSW_USEGRAPHICSLAYER</a>)))) {
<a name="l00210"></a>00210         <span class="comment">// surface is NOT the video layer surface</span>
<a name="l00211"></a>00211         <span class="comment">// so delete the window/surface memory</span>
<a name="l00212"></a>00212         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>) {
<a name="l00213"></a>00213             <span class="comment">// delete the mmsfbwindow/surface</span>
<a name="l00214"></a>00214             <span class="keywordtype">bool</span> os;
<a name="l00215"></a>00215             <a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l00216"></a>00216             <span class="keywordflow">if</span> (os) {
<a name="l00217"></a>00217                 <span class="comment">// own surface, so delete complete window</span>
<a name="l00218"></a>00218                 <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>;
<a name="l00219"></a>00219             }
<a name="l00220"></a>00220             <span class="keywordflow">else</span> {
<a name="l00221"></a>00221                 <span class="comment">// delete sub-surface and decrease use counter</span>
<a name="l00222"></a>00222                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>)
<a name="l00223"></a>00223                     <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>;
<a name="l00224"></a>00224                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380f0bcc3227155e1b4aac8eed09a5416f5" title="Root windows will be displayed in the background.">MMSWINDOWTYPE_ROOTWINDOW</a>) {
<a name="l00225"></a>00225                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5ac87ec86d181c0f1d8abcc51076947b" title="use count for fullscreen_root_window">fullscreen_root_window_use_count</a> &gt; 0)
<a name="l00226"></a>00226                         this-&gt;<a class="code" href="classMMSWindow.html#5ac87ec86d181c0f1d8abcc51076947b" title="use count for fullscreen_root_window">fullscreen_root_window_use_count</a>--;
<a name="l00227"></a>00227                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5ac87ec86d181c0f1d8abcc51076947b" title="use count for fullscreen_root_window">fullscreen_root_window_use_count</a> == 0)
<a name="l00228"></a>00228                         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#273f17e194f56cee22df853e1d7a091f" title="a full screen MMSFBWindow as buffer for all MMSRootWindow objects with own_surface=false...">fullscreen_root_window</a>) {
<a name="l00229"></a>00229                             <span class="comment">// delete the fullscreen window for root window type because not used anymore</span>
<a name="l00230"></a>00230                             <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSWindow.html#273f17e194f56cee22df853e1d7a091f" title="a full screen MMSFBWindow as buffer for all MMSRootWindow objects with own_surface=false...">fullscreen_root_window</a>;
<a name="l00231"></a>00231                             this-&gt;<a class="code" href="classMMSWindow.html#273f17e194f56cee22df853e1d7a091f" title="a full screen MMSFBWindow as buffer for all MMSRootWindow objects with own_surface=false...">fullscreen_root_window</a> = NULL;
<a name="l00232"></a>00232                         }
<a name="l00233"></a>00233                 }
<a name="l00234"></a>00234                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380b8cb8eaf607b06b3078855e77515d98f" title="Main windows will be displayed over the root window.">MMSWINDOWTYPE_MAINWINDOW</a>) {
<a name="l00235"></a>00235                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#c73f385f77ff857c2a5b46fcaa42e093" title="use count for fullscreen_main_window">fullscreen_main_window_use_count</a> &gt; 0)
<a name="l00236"></a>00236                         this-&gt;<a class="code" href="classMMSWindow.html#c73f385f77ff857c2a5b46fcaa42e093" title="use count for fullscreen_main_window">fullscreen_main_window_use_count</a>--;
<a name="l00237"></a>00237                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#c73f385f77ff857c2a5b46fcaa42e093" title="use count for fullscreen_main_window">fullscreen_main_window_use_count</a> == 0)
<a name="l00238"></a>00238                         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#80362c874c43047f7da8f38ae526930e" title="a full screen MMSFBWindow as buffer for all MMSMainWindow objects with own_surface=false...">fullscreen_main_window</a>) {
<a name="l00239"></a>00239                             <span class="comment">// delete the fullscreen window for main window type because not used anymore</span>
<a name="l00240"></a>00240                             <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSWindow.html#80362c874c43047f7da8f38ae526930e" title="a full screen MMSFBWindow as buffer for all MMSMainWindow objects with own_surface=false...">fullscreen_main_window</a>;
<a name="l00241"></a>00241                             this-&gt;<a class="code" href="classMMSWindow.html#80362c874c43047f7da8f38ae526930e" title="a full screen MMSFBWindow as buffer for all MMSMainWindow objects with own_surface=false...">fullscreen_main_window</a> = NULL;
<a name="l00242"></a>00242                         }
<a name="l00243"></a>00243                 }
<a name="l00244"></a>00244             }
<a name="l00245"></a>00245         }
<a name="l00246"></a>00246         <span class="keywordflow">else</span> {
<a name="l00247"></a>00247             <span class="comment">// delete surface (e.g. child window surface)</span>
<a name="l00248"></a>00248             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>)
<a name="l00249"></a>00249                 <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>;
<a name="l00250"></a>00250         }
<a name="l00251"></a>00251     }
<a name="l00252"></a>00252 }
<a name="l00253"></a>00253 
<a name="l00254"></a><a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b">00254</a> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380" title="The available types of windows.">MMSWINDOWTYPE</a> <a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">MMSWindow::getType</a>() {
<a name="l00255"></a>00255     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a>;
<a name="l00256"></a>00256 }
<a name="l00257"></a>00257 
<a name="l00258"></a><a class="code" href="classMMSWindow.html#cd07db049db8d6edd8538a97a028e84e">00258</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#cd07db049db8d6edd8538a97a028e84e" title="Internal method: Creates the window.">MMSWindow::create</a>(<span class="keywordtype">string</span> dx, <span class="keywordtype">string</span> dy, <span class="keywordtype">string</span> w, <span class="keywordtype">string</span> h, <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9" title="alignment type, used e.g. for positioning of windows, text in labels or textboxes...">MMSALIGNMENT</a> alignment, <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7" title="The available window flags.">MMSWINDOW_FLAGS</a> <a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a>,
<a name="l00259"></a>00259                        <span class="keywordtype">bool</span> *own_surface, <span class="keywordtype">bool</span> *backbuffer) {
<a name="l00260"></a>00260     <span class="comment">/* save flags */</span>
<a name="l00261"></a>00261     this-&gt;flags = flags;
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <span class="comment">/* set theme values */</span>
<a name="l00264"></a>00264     <span class="keywordflow">if</span> (dx != <span class="stringliteral">""</span>)
<a name="l00265"></a>00265         <a class="code" href="classMMSWindow.html#93c3c6c71e793dfda90d6afcddd75ff1" title="Set the x-movement of the window.">setDx</a>(dx, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l00266"></a>00266     <span class="keywordflow">if</span> (dy != <span class="stringliteral">""</span>)
<a name="l00267"></a>00267         <a class="code" href="classMMSWindow.html#4ae82fe64a75660a80691548e43d633f" title="Set the y-movement of the window.">setDy</a>(dy, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l00268"></a>00268     <span class="keywordflow">if</span> (w != <span class="stringliteral">""</span>)
<a name="l00269"></a>00269         <a class="code" href="classMMSWindow.html#186768c58ccdd4a1685f6fcec7ca08e7" title="Set the width of the window.">setWidth</a>(w, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l00270"></a>00270     <span class="keywordflow">if</span> (h != <span class="stringliteral">""</span>)
<a name="l00271"></a>00271         <a class="code" href="classMMSWindow.html#c5e330e38d186786da66ad8bb5fe9eee" title="Set the height of the window.">setHeight</a>(h, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l00272"></a>00272     <span class="keywordflow">if</span> (alignment != <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9128f808be66bd74aa4c30bc8b70903b4" title="not set">MMSALIGNMENT_NOTSET</a>)
<a name="l00273"></a>00273         <a class="code" href="classMMSWindow.html#30858e7c11f711a1b9d9707b1f18dc05" title="Set the alignment of the window.">setAlignment</a>(alignment, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l00274"></a>00274     <span class="keywordflow">if</span> (own_surface)
<a name="l00275"></a>00275         <a class="code" href="classMMSWindow.html#f7a2a91f20b6cd0ade6679bb223f018a" title="Should the window working with an own surface?">setOwnSurface</a>(*own_surface);
<a name="l00276"></a>00276     <span class="keywordflow">if</span> (backbuffer)
<a name="l00277"></a>00277         <a class="code" href="classMMSWindow.html#afc9b050ad2f4785349aa0117f257fb4" title="Set the backbuffer flag of the window.">setBackBuffer</a>(*backbuffer);
<a name="l00278"></a>00278 
<a name="l00279"></a>00279     this-&gt;<a class="code" href="classMMSWindow.html#2fb822ca292224f2c2e853b7a7f2e256" title="window action thread (used for animations)">action</a> = <span class="keyword">new</span> <a class="code" href="classMMSWindow.html#101d503a224383af41a37346f62c4720">MMSWindowAction</a>(<span class="keyword">this</span>);
<a name="l00280"></a>00280     this-&gt;<a class="code" href="classMMSWindow.html#b548a400de35cee8007957ffee61d10e" title="focus set the first time?">firstfocusset</a> = <span class="keyword">false</span>;
<a name="l00281"></a>00281     this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>=NULL;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283     this-&gt;<a class="code" href="classMMSWindow.html#446470a75ad31f794c05f11e478c5ccf" title="child window which is to be focused if user navigates up">navigateUpWindow</a>    = NULL;
<a name="l00284"></a>00284     this-&gt;<a class="code" href="classMMSWindow.html#fc9d9ea5d133caae51b933c2979c63a4" title="child window which is to be focused if user navigates down">navigateDownWindow</a>  = NULL;
<a name="l00285"></a>00285     this-&gt;<a class="code" href="classMMSWindow.html#8d9b31f8bfc5532fced383e009a81dbc" title="child window which is to be focused if user navigates left">navigateLeftWindow</a>  = NULL;
<a name="l00286"></a>00286     this-&gt;<a class="code" href="classMMSWindow.html#83e103344725791142f96f1800e461b4" title="child window which is to be focused if user navigates right">navigateRightWindow</a> = NULL;
<a name="l00287"></a>00287 
<a name="l00288"></a>00288     this-&gt;<a class="code" href="classMMSWindow.html#8c2678c96fa118a43934d65bd3f04692" title="widget on which the user has pressed the (mouse) button">buttonpress_widget</a> = NULL;
<a name="l00289"></a>00289     this-&gt;<a class="code" href="classMMSWindow.html#f7872aacbf2900d923018bf56e18d920" title="child window on which the user has pressed the (mouse) button">buttonpress_childwin</a> = NULL;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l00292"></a>00292         <span class="comment">/* normal parent window, check the flags and get the right layer */</span>
<a name="l00293"></a>00293         <span class="keywordflow">if</span> ((<a class="code" href="mmsfbmanager_8h.html#f877077f9a7834955ae76f161e6471ef">mmsfbmanager</a>.<a class="code" href="classMMSFBManager.html#f6fd2e32f098eb8d598717943d746984">getLayerCount</a>()&lt;2)&amp;&amp;(this-&gt;flags &amp; <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7040730406261b9ffb4d38ce2cd3429cc" title="The window displays a video stream and should be on the video layer if it exists...">MMSW_VIDEO</a>)) {
<a name="l00294"></a>00294             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"use video window on graphics layer"</span>);
<a name="l00295"></a>00295             this-&gt;flags = (<a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7" title="The available window flags.">MMSWINDOW_FLAGS</a>)(this-&gt;flags | <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7e2702d3b20b98cb072beb5099f81ba00" title="The window should use the graphics layer.">MMSW_USEGRAPHICSLAYER</a>);
<a name="l00296"></a>00296         }
<a name="l00297"></a>00297 
<a name="l00298"></a>00298         <span class="keywordflow">if</span> ((this-&gt;flags &amp; MMSW_VIDEO)&amp;&amp;(!(this-&gt;flags &amp; <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7e2702d3b20b98cb072beb5099f81ba00" title="The window should use the graphics layer.">MMSW_USEGRAPHICSLAYER</a>))) {
<a name="l00299"></a>00299             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"get the video layer"</span>);
<a name="l00300"></a>00300             this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a> = <a class="code" href="mmsfbmanager_8h.html#f877077f9a7834955ae76f161e6471ef">mmsfbmanager</a>.<a class="code" href="classMMSFBManager.html#a14ee62238e0077aa337a8e1baa2648b">getVideoLayer</a>();
<a name="l00301"></a>00301         } <span class="keywordflow">else</span> {
<a name="l00302"></a>00302             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"get the grapics layer"</span>);
<a name="l00303"></a>00303             this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a> = <a class="code" href="mmsfbmanager_8h.html#f877077f9a7834955ae76f161e6471ef">mmsfbmanager</a>.<a class="code" href="classMMSFBManager.html#f4b3d5214cb61bc8cd9f7b8fa4751825">getGraphicsLayer</a>();
<a name="l00304"></a>00304         }
<a name="l00305"></a>00305     }
<a name="l00306"></a>00306     <span class="keywordflow">else</span> {
<a name="l00307"></a>00307         <span class="comment">/* child window, use the flags and the layer from my parent */</span>
<a name="l00308"></a>00308         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"use layer from parent window"</span>);
<a name="l00309"></a>00309         this-&gt;flags = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a>;
<a name="l00310"></a>00310         this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>;
<a name="l00311"></a>00311 
<a name="l00312"></a>00312         <span class="comment">// searching the right toplevel parent</span>
<a name="l00313"></a>00313         this-&gt;<a class="code" href="classMMSWindow.html#a3c04b84ccee933184fd681b52a71b21" title="toplevel parent window (if window is a child window) or NULL">toplevel_parent</a> = this-&gt;<a class="code" href="classMMSWindow.html#8f3e1058e38a27a2f7aa9e6fb2b049ca" title="Get the parent window.">getParent</a>(<span class="keyword">true</span>);
<a name="l00314"></a>00314     }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"got flags: "</span>);
<a name="l00317"></a>00317     <span class="keywordflow">if</span> (this-&gt;flags) {
<a name="l00318"></a>00318         <span class="keywordflow">if</span> (this-&gt;flags &amp; <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7040730406261b9ffb4d38ce2cd3429cc" title="The window displays a video stream and should be on the video layer if it exists...">MMSW_VIDEO</a>)
<a name="l00319"></a>00319             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">" MMSW_VIDEO"</span>);
<a name="l00320"></a>00320         <span class="keywordflow">if</span>(this-&gt;flags &amp; <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7e2702d3b20b98cb072beb5099f81ba00" title="The window should use the graphics layer.">MMSW_USEGRAPHICSLAYER</a>)
<a name="l00321"></a>00321             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">" MMSW_USEGRAPHICSLAYER"</span>);
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323     <span class="keywordflow">else</span>
<a name="l00324"></a>00324         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">" MMSW_NONE"</span>);
<a name="l00325"></a>00325 
<a name="l00326"></a>00326     <span class="comment">// create static image manager</span>
<a name="l00327"></a>00327     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#59935481d608e06386dd7ef260573fe2" title="layer for im1">im1_layer</a>) {
<a name="l00328"></a>00328         this-&gt;<a class="code" href="classMMSWindow.html#b7730f339e9de3ab726ab7417f385d5b" title="image manager for the window (layer 1)">im1</a> = <span class="keyword">new</span> <a class="code" href="classMMSImageManager.html">MMSImageManager</a>(this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>);
<a name="l00329"></a>00329         this-&gt;<a class="code" href="classMMSWindow.html#59935481d608e06386dd7ef260573fe2" title="layer for im1">im1_layer</a> = this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>;
<a name="l00330"></a>00330         this-&gt;<a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a> = this-&gt;<a class="code" href="classMMSWindow.html#b7730f339e9de3ab726ab7417f385d5b" title="image manager for the window (layer 1)">im1</a>;
<a name="l00331"></a>00331     }
<a name="l00332"></a>00332     <span class="keywordflow">else</span> {
<a name="l00333"></a>00333         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#59935481d608e06386dd7ef260573fe2" title="layer for im1">im1_layer</a> == this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>) {
<a name="l00334"></a>00334             this-&gt;<a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a> = this-&gt;<a class="code" href="classMMSWindow.html#b7730f339e9de3ab726ab7417f385d5b" title="image manager for the window (layer 1)">im1</a>;
<a name="l00335"></a>00335         }
<a name="l00336"></a>00336         <span class="keywordflow">else</span> {
<a name="l00337"></a>00337             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#ac7fe88b941c93b4052f52c8b8e4b057" title="layer for im2">im2_layer</a> == this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>) {
<a name="l00338"></a>00338                 this-&gt;<a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a> = this-&gt;<a class="code" href="classMMSWindow.html#721c39e6c30edad58ccf9dd182cb27c2" title="image manager for the window (layer 2)">im2</a>;
<a name="l00339"></a>00339             }
<a name="l00340"></a>00340             <span class="keywordflow">else</span> {
<a name="l00341"></a>00341                 this-&gt;<a class="code" href="classMMSWindow.html#721c39e6c30edad58ccf9dd182cb27c2" title="image manager for the window (layer 2)">im2</a> = <span class="keyword">new</span> <a class="code" href="classMMSImageManager.html">MMSImageManager</a>(this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>);
<a name="l00342"></a>00342                 this-&gt;<a class="code" href="classMMSWindow.html#ac7fe88b941c93b4052f52c8b8e4b057" title="layer for im2">im2_layer</a> = this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>;
<a name="l00343"></a>00343                 this-&gt;<a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a> = this-&gt;<a class="code" href="classMMSWindow.html#721c39e6c30edad58ccf9dd182cb27c2" title="image manager for the window (layer 2)">im2</a>;
<a name="l00344"></a>00344             }
<a name="l00345"></a>00345         }
<a name="l00346"></a>00346     }
<a name="l00347"></a>00347 
<a name="l00348"></a>00348     <span class="comment">// create static font manager</span>
<a name="l00349"></a>00349     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#56a800a2d08829ec14f3161b3126bc84" title="font manager for the window">fm</a>)
<a name="l00350"></a>00350         this-&gt;<a class="code" href="classMMSWindow.html#56a800a2d08829ec14f3161b3126bc84" title="font manager for the window">fm</a> = <span class="keyword">new</span> <a class="code" href="classMMSFontManager.html">MMSFontManager</a>();
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <span class="comment">// set some attributes</span>
<a name="l00353"></a>00353     this-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>=<span class="keyword">false</span>;
<a name="l00354"></a>00354     this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a>=<span class="keyword">false</span>;
<a name="l00355"></a>00355     this-&gt;<a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a>=<span class="keyword">false</span>;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357     <a class="code" href="classMMSWindow.html#ed6f19f5da43298231027816c1b6e6eb" title="tbd">buffered_shown</a> = <span class="keyword">false</span>;
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     <span class="comment">// set zbaselevel dependent on window type</span>
<a name="l00360"></a>00360     <span class="keywordflow">switch</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()) {
<a name="l00361"></a>00361     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b93802f923b27f7012799b6a746bbd9f252c0" title="Popup windows will be displayed over root and main windows.">MMSWINDOWTYPE_POPUPWINDOW</a>:
<a name="l00362"></a>00362         this-&gt;<a class="code" href="classMMSWindow.html#c99543fa4c8290455dbcf61ff2c7d7dd">zbaselevel</a> = 100;
<a name="l00363"></a>00363         <span class="keywordflow">break</span>;
<a name="l00364"></a>00364     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380b8cb8eaf607b06b3078855e77515d98f" title="Main windows will be displayed over the root window.">MMSWINDOWTYPE_MAINWINDOW</a>:
<a name="l00365"></a>00365         this-&gt;<a class="code" href="classMMSWindow.html#c99543fa4c8290455dbcf61ff2c7d7dd">zbaselevel</a> = 200;
<a name="l00366"></a>00366         <span class="keywordflow">break</span>;
<a name="l00367"></a>00367     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380f0bcc3227155e1b4aac8eed09a5416f5" title="Root windows will be displayed in the background.">MMSWINDOWTYPE_ROOTWINDOW</a>:
<a name="l00368"></a>00368         this-&gt;<a class="code" href="classMMSWindow.html#c99543fa4c8290455dbcf61ff2c7d7dd">zbaselevel</a> = 300;
<a name="l00369"></a>00369         <span class="keywordflow">break</span>;
<a name="l00370"></a>00370     <span class="keywordflow">default</span>:
<a name="l00371"></a>00371         this-&gt;<a class="code" href="classMMSWindow.html#c99543fa4c8290455dbcf61ff2c7d7dd">zbaselevel</a> = 0;
<a name="l00372"></a>00372         <span class="keywordflow">break</span>;
<a name="l00373"></a>00373     }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="comment">// resize/create the window</span>
<a name="l00376"></a>00376     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>)
<a name="l00377"></a>00377         <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l00378"></a>00378 
<a name="l00379"></a>00379     <span class="keywordtype">bool</span> initial_load = <span class="keyword">false</span>;
<a name="l00380"></a>00380     <a class="code" href="classMMSWindow.html#e92d4c1e03261542ae0df2fe85e4003e" title="Detect if the window is loading images, fonts etc. during initialization.">getInitialLoad</a>(initial_load);
<a name="l00381"></a>00381     <span class="keywordflow">if</span> (initial_load) {
<a name="l00382"></a>00382         <span class="comment">// init window (e.g. load images, fonts, ...)</span>
<a name="l00383"></a>00383         <a class="code" href="classMMSWindow.html#83a9731076de20925b384d3f5174e02d" title="Internal method: Load images and setup other things.">init</a>();
<a name="l00384"></a>00384     }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00387"></a>00387 }
<a name="l00388"></a>00388 
<a name="l00389"></a><a class="code" href="classMMSWindow.html#6b4f7113fbfb0cdaf7f3005b11a410a0">00389</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#cd07db049db8d6edd8538a97a028e84e" title="Internal method: Creates the window.">MMSWindow::create</a>(<span class="keywordtype">string</span> w, <span class="keywordtype">string</span> h, <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9" title="alignment type, used e.g. for positioning of windows, text in labels or textboxes...">MMSALIGNMENT</a> alignment, <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7" title="The available window flags.">MMSWINDOW_FLAGS</a> <a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a>, <span class="keywordtype">bool</span> *own_surface,
<a name="l00390"></a>00390                        <span class="keywordtype">bool</span> *backbuffer) {
<a name="l00391"></a>00391     <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#cd07db049db8d6edd8538a97a028e84e" title="Internal method: Creates the window.">create</a>(<span class="stringliteral">""</span>, <span class="stringliteral">""</span>, w, h, alignment, flags, own_surface, backbuffer);
<a name="l00392"></a>00392 }
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 
<a name="l00396"></a><a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46">00396</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">MMSWindow::resize</a>(<span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l00397"></a>00397     <span class="keywordtype">int</span> wdesc_posx, wdesc_posy, wdesc_width, wdesc_height;
<a name="l00398"></a>00398     <span class="keywordtype">string</span> dx, dy, width, height;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 
<a name="l00401"></a>00401     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"resize... flags: "</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a>));
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a> == NULL) {
<a name="l00404"></a>00404         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"have no layer... returning"</span>);
<a name="l00405"></a>00405         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l00409"></a>00409         <span class="comment">/* normal parent window */</span>
<a name="l00410"></a>00410 
<a name="l00411"></a>00411         <span class="comment">/* check if we have a video window and should use the video layer */</span>
<a name="l00412"></a>00412         <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a> &amp; <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7040730406261b9ffb4d38ce2cd3429cc" title="The window displays a video stream and should be on the video layer if it exists...">MMSW_VIDEO</a>)&amp;&amp;(!(this-&gt;<a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a> &amp; <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7e2702d3b20b98cb072beb5099f81ba00" title="The window should use the graphics layer.">MMSW_USEGRAPHICSLAYER</a>))) {
<a name="l00413"></a>00413             <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>) {
<a name="l00414"></a>00414                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"have a video window, use the layer surface"</span>);
<a name="l00415"></a>00415                 this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#8470ea56c159ba867da70f5b864a2511">getSurface</a>(&amp;this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>);
<a name="l00416"></a>00416                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"after layer-&gt;getSurface() (surface = 0x%x)"</span>, this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>);
<a name="l00417"></a>00417                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>)
<a name="l00418"></a>00418                     this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#2ad88d80b58e4143d3d68ac6b7300f55">addWindow</a>(<span class="keyword">this</span>);
<a name="l00419"></a>00419 
<a name="l00420"></a>00420                 this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = 0;
<a name="l00421"></a>00421                 this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = 0;
<a name="l00422"></a>00422                 this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#234c55c57f7f038fb40da22e06de6e78">getResolution</a>(&amp;this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, &amp;this-&gt;geom.h);
<a name="l00423"></a>00423                 this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a> = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>;
<a name="l00424"></a>00424                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"resolution: %d x %d"</span>, this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, this-&gt;geom.h);
<a name="l00425"></a>00425             }
<a name="l00426"></a>00426             <span class="keywordflow">else</span>
<a name="l00427"></a>00427                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"cannot resize the layer surface"</span>);
<a name="l00428"></a>00428 
<a name="l00429"></a>00429             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00430"></a>00430         }
<a name="l00431"></a>00431 
<a name="l00432"></a>00432         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>) {
<a name="l00433"></a>00433             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"have no windowmanager... returning"</span>);
<a name="l00434"></a>00434             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00435"></a>00435         }
<a name="l00436"></a>00436 
<a name="l00437"></a>00437         <span class="comment">/* get the screen width and height */</span>
<a name="l00438"></a>00438         this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#234c55c57f7f038fb40da22e06de6e78">getResolution</a>(&amp;this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, &amp;this-&gt;vrect.h);
<a name="l00439"></a>00439         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"got screen %dx%d"</span>, this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, this-&gt;vrect.h);
<a name="l00440"></a>00440 
<a name="l00441"></a>00441         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a> &amp; MMSW_VIDEO) {
<a name="l00442"></a>00442             <span class="comment">/* for video windows use full screen */</span>
<a name="l00443"></a>00443             this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = 0;
<a name="l00444"></a>00444             this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = 0;
<a name="l00445"></a>00445         }
<a name="l00446"></a>00446         <span class="keywordflow">else</span>
<a name="l00447"></a>00447             <span class="comment">/* other windows uses visible rectangle settings from windowmanager */</span>
<a name="l00448"></a>00448             this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a> = this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#11272a9fe92d303d2653b2ffe7d5a933">getVRect</a>();
<a name="l00449"></a>00449 
<a name="l00450"></a>00450         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"use screen area %d, %d, %d, %d"</span>, this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, this-&gt;vrect.x, this-&gt;vrect.w, this-&gt;vrect.h);
<a name="l00451"></a>00451     }
<a name="l00452"></a>00452     <span class="keywordflow">else</span> {
<a name="l00453"></a>00453         <span class="comment">/* child window */</span>
<a name="l00454"></a>00454 
<a name="l00455"></a>00455         <span class="comment">/* get the parent width and height */</span>
<a name="l00456"></a>00456         this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) / 2;
<a name="l00457"></a>00457         this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) / 2;
<a name="l00458"></a>00458         this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>;
<a name="l00459"></a>00459         this-&gt;<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>;
<a name="l00460"></a>00460 <span class="comment">//        logger.writeLog("got inner size from parent " + iToStr(vrect.w) + "x" + iToStr(vrect.h));</span>
<a name="l00461"></a>00461     }
<a name="l00462"></a>00462 
<a name="l00463"></a>00463     <span class="comment">/* calculate the window position */</span>
<a name="l00464"></a>00464     <span class="comment">/* first try with xpos */</span>
<a name="l00465"></a>00465     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#589576d693f44b3e8fba2d4abe4d1906" title="Get the x-movement of the window.">getDx</a>(dx)) dx = <span class="stringliteral">""</span>;
<a name="l00466"></a>00466     <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_posx, dx, <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, 0) == <span class="keyword">false</span>) {
<a name="l00467"></a>00467         <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_posx, dx, 10000, 0) == <span class="keyword">false</span>) {
<a name="l00468"></a>00468             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window dx %s is wrong, using 0px"</span>, dx.c_str());
<a name="l00469"></a>00469             <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#298faa51e457deaf4c030d9548bd56f8">setDx</a>(<span class="stringliteral">"0px"</span>);
<a name="l00470"></a>00470             wdesc_posx = 0;
<a name="l00471"></a>00471         }
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473     <span class="comment">/* ypos */</span>
<a name="l00474"></a>00474     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#9db600968d1db1df46618d105aafc57e" title="Get the y-movement of the window.">getDy</a>(dy)) dy = <span class="stringliteral">""</span>;
<a name="l00475"></a>00475     <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_posy, dy, <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, wdesc_posx) == <span class="keyword">false</span>) {
<a name="l00476"></a>00476         <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_posy, dy, 10000, wdesc_posx) == <span class="keyword">false</span>) {
<a name="l00477"></a>00477             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window dy %s is wrong, using 0px"</span>, dy.c_str());
<a name="l00478"></a>00478             <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#a5a15cbd94494878ccf56e230f8a27ed">setDy</a>(<span class="stringliteral">"0px"</span>);
<a name="l00479"></a>00479             wdesc_posy = 0;
<a name="l00480"></a>00480         }
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482     <span class="comment">/* second try with xpos (because of "&lt;factor&gt;$") */</span>
<a name="l00483"></a>00483     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#589576d693f44b3e8fba2d4abe4d1906" title="Get the x-movement of the window.">getDx</a>(dx)) dx = <span class="stringliteral">""</span>;
<a name="l00484"></a>00484     <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_posx, dx, <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, wdesc_posy) == <span class="keyword">false</span>) {
<a name="l00485"></a>00485         <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_posx, dx, 10000, wdesc_posy) == <span class="keyword">false</span>) {
<a name="l00486"></a>00486             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window dx %s is wrong, using 0px"</span>, dx.c_str());
<a name="l00487"></a>00487             <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#298faa51e457deaf4c030d9548bd56f8">setDx</a>(<span class="stringliteral">"0px"</span>);
<a name="l00488"></a>00488             wdesc_posx = 0;
<a name="l00489"></a>00489         }
<a name="l00490"></a>00490     }
<a name="l00491"></a>00491 
<a name="l00492"></a>00492     <span class="comment">/* save the real dx / dy */</span>
<a name="l00493"></a>00493     this-&gt;<a class="code" href="classMMSWindow.html#eb1592626842e8f7a07e16bdb800cf6a" title="x-movement of the window based on the alignment attribute">dxpix</a> = wdesc_posx;
<a name="l00494"></a>00494     this-&gt;<a class="code" href="classMMSWindow.html#6ab3465fae4f0a763bc2b5705983a6b5" title="y-movement of the window based on the alignment attribute">dypix</a> = wdesc_posy;
<a name="l00495"></a>00495 
<a name="l00496"></a>00496     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"dx: %d, dy: %d"</span>, this-&gt;<a class="code" href="classMMSWindow.html#eb1592626842e8f7a07e16bdb800cf6a" title="x-movement of the window based on the alignment attribute">dxpix</a>, this-&gt;<a class="code" href="classMMSWindow.html#6ab3465fae4f0a763bc2b5705983a6b5" title="y-movement of the window based on the alignment attribute">dypix</a>);
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     <span class="comment">/* calculate the window size */</span>
<a name="l00499"></a>00499     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#ad7b5cddb3e22b21e33f9d6f32529dce" title="Get the width of the window.">getWidth</a>(width)) width = <span class="stringliteral">""</span>;
<a name="l00500"></a>00500     <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_width, width, <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, 0) == <span class="keyword">false</span>) {
<a name="l00501"></a>00501         <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_width, width, 10000, 0) == <span class="keyword">false</span>) {
<a name="l00502"></a>00502             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window width %s is wrong, using %d px"</span>, width.c_str(), <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>);
<a name="l00503"></a>00503             <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#b7ace0f513039d4e5bd9d09d5e1c9506">setWidth</a>(<a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) + <span class="stringliteral">"px"</span>);
<a name="l00504"></a>00504             wdesc_width = <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>;
<a name="l00505"></a>00505         }
<a name="l00506"></a>00506     }
<a name="l00507"></a>00507     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#9e81d03a1c5dae51c5390ca82ad7aca8" title="Get the height of the window.">getHeight</a>(height)) height = <span class="stringliteral">""</span>;
<a name="l00508"></a>00508     <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_height, height, <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, 0) == <span class="keyword">false</span>) {
<a name="l00509"></a>00509         <span class="keywordflow">if</span> (<a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_height, height, 10000, 0) == <span class="keyword">false</span>) {
<a name="l00510"></a>00510             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window height %s is wrong, using %d px"</span>, height.c_str(), <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>);
<a name="l00511"></a>00511             <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#16e19b0058c87e506a7a8aa3e1992fab">setHeight</a>(<a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) + <span class="stringliteral">"px"</span>);
<a name="l00512"></a>00512             wdesc_height = <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>;
<a name="l00513"></a>00513         }
<a name="l00514"></a>00514     }
<a name="l00515"></a>00515 
<a name="l00516"></a>00516     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window resolution: %d x %d"</span>, wdesc_width, wdesc_height);
<a name="l00517"></a>00517 
<a name="l00518"></a>00518     <span class="keywordflow">if</span> ((wdesc_width == 0)&amp;&amp;(wdesc_height == 0)) {
<a name="l00519"></a>00519         <span class="comment">/* bad values */</span>
<a name="l00520"></a>00520         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window width "</span> + width + <span class="stringliteral">" is wrong, using "</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) + <span class="stringliteral">"px"</span>);
<a name="l00521"></a>00521         <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#b7ace0f513039d4e5bd9d09d5e1c9506">setWidth</a>(<a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) + <span class="stringliteral">"px"</span>);
<a name="l00522"></a>00522         wdesc_width = <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>;
<a name="l00523"></a>00523         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window height "</span> + height + <span class="stringliteral">" is wrong, using "</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) + <span class="stringliteral">"px"</span>);
<a name="l00524"></a>00524         <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#16e19b0058c87e506a7a8aa3e1992fab">setHeight</a>(<a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) + <span class="stringliteral">"px"</span>);
<a name="l00525"></a>00525         wdesc_height = <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>;
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527     <span class="keywordflow">else</span> {
<a name="l00528"></a>00528         <span class="keywordflow">if</span> (wdesc_width == 0) {
<a name="l00529"></a>00529             <span class="comment">/* it seems that width should be a factor of height */</span>
<a name="l00530"></a>00530             <a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_width, width, <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, wdesc_height);
<a name="l00531"></a>00531         }
<a name="l00532"></a>00532         <span class="keywordflow">else</span> {
<a name="l00533"></a>00533             <span class="comment">/* it seems that height should be a factor of width */</span>
<a name="l00534"></a>00534             <a class="code" href="mmsguitools_8h.html#f214ff447fc94afd2a496c2cc8348095" title="Translate the size given in hint into pixel value.">getPixelFromSizeHint</a>(&amp;wdesc_height, height, <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, wdesc_width);
<a name="l00535"></a>00535         }
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538     <span class="comment">/* adjust a little bit */</span>
<a name="l00539"></a>00539     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> margin;
<a name="l00540"></a>00540     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#9fb44c1976f272ac071f4a0957a32bb9" title="Get the margin of the window.">getMargin</a>(margin))
<a name="l00541"></a>00541         margin = 0;
<a name="l00542"></a>00542     wdesc_posx+= <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l00543"></a>00543     wdesc_posy+= <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l00544"></a>00544     wdesc_width-= margin*2;
<a name="l00545"></a>00545     wdesc_height-= margin*2;
<a name="l00546"></a>00546 
<a name="l00547"></a>00547     <span class="comment">/* work with alignment */</span>
<a name="l00548"></a>00548     <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9" title="alignment type, used e.g. for positioning of windows, text in labels or textboxes...">MMSALIGNMENT</a> alignment;
<a name="l00549"></a>00549     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#c3aa82151b4ce3b80a6866f9b7478de1" title="Get the alignment of the window.">getAlignment</a>(alignment)) alignment = <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b96be14e180de7a7ede3a8c14c2c75da8c" title="centered, horizontal and vertical">MMSALIGNMENT_CENTER</a>;
<a name="l00550"></a>00550     <span class="keywordflow">switch</span> (alignment) {
<a name="l00551"></a>00551         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b96be14e180de7a7ede3a8c14c2c75da8c" title="centered, horizontal and vertical">MMSALIGNMENT_CENTER</a>:
<a name="l00552"></a>00552             wdesc_posx+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - wdesc_width) / 2;
<a name="l00553"></a>00553             wdesc_posy+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - wdesc_height) / 2;
<a name="l00554"></a>00554             <span class="keywordflow">break</span>;
<a name="l00555"></a>00555         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b98e78b383ea91328b09f529733b32641d" title="left aligned, vertical centered">MMSALIGNMENT_LEFT</a>:
<a name="l00556"></a>00556             wdesc_posy+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - wdesc_height) / 2;
<a name="l00557"></a>00557             <span class="keywordflow">break</span>;
<a name="l00558"></a>00558         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b915518b941014ca9b9936ee6aea4c4604" title="right aligned, vertical centered">MMSALIGNMENT_RIGHT</a>:
<a name="l00559"></a>00559             wdesc_posx+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - wdesc_width);
<a name="l00560"></a>00560             wdesc_posy+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - wdesc_height) / 2;
<a name="l00561"></a>00561             <span class="keywordflow">break</span>;
<a name="l00562"></a>00562         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b953522eecca7f2c7d306e7577745cc10b" title="horizontal centered, top aligned">MMSALIGNMENT_TOP_CENTER</a>:
<a name="l00563"></a>00563             wdesc_posx+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - wdesc_width) / 2;
<a name="l00564"></a>00564             <span class="keywordflow">break</span>;
<a name="l00565"></a>00565         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9a5df1c4384e51e2b636f662d6f2cd096" title="left and top aligned">MMSALIGNMENT_TOP_LEFT</a>:
<a name="l00566"></a>00566             <span class="keywordflow">break</span>;
<a name="l00567"></a>00567         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9f8b3106ccceb40be6cab5b35a0475ce5" title="right and top aligned">MMSALIGNMENT_TOP_RIGHT</a>:
<a name="l00568"></a>00568             wdesc_posx+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - wdesc_width);
<a name="l00569"></a>00569             <span class="keywordflow">break</span>;
<a name="l00570"></a>00570         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b93dec0a0f3851126938f54cedcd293a5d" title="horizontal centered, bottom aligned">MMSALIGNMENT_BOTTOM_CENTER</a>:
<a name="l00571"></a>00571             wdesc_posx+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - wdesc_width) / 2;
<a name="l00572"></a>00572             wdesc_posy+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - wdesc_height);
<a name="l00573"></a>00573             <span class="keywordflow">break</span>;
<a name="l00574"></a>00574         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9d9c86fa8bd05906b0670d32bb6a47357" title="left and bottom aligned">MMSALIGNMENT_BOTTOM_LEFT</a>:
<a name="l00575"></a>00575             wdesc_posy+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - wdesc_height);
<a name="l00576"></a>00576             <span class="keywordflow">break</span>;
<a name="l00577"></a>00577         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9e2c86aacba04665bfe17118abb6aa92d" title="right and bottom aligned">MMSALIGNMENT_BOTTOM_RIGHT</a>:
<a name="l00578"></a>00578             wdesc_posx+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - wdesc_width);
<a name="l00579"></a>00579             wdesc_posy+= (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - wdesc_height);
<a name="l00580"></a>00580             <span class="keywordflow">break</span>;
<a name="l00581"></a>00581         <span class="keywordflow">default</span>:
<a name="l00582"></a>00582             <span class="keywordflow">break</span>;
<a name="l00583"></a>00583     }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     <span class="comment">// use even pos/size because of pixelformats like YV12</span>
<a name="l00586"></a>00586     wdesc_posx   &amp;= 0xfffffffe;
<a name="l00587"></a>00587     wdesc_posy   &amp;= 0xfffffffe;
<a name="l00588"></a>00588     wdesc_width  &amp;= 0xfffffffe;
<a name="l00589"></a>00589     wdesc_height &amp;= 0xfffffffe;
<a name="l00590"></a>00590 
<a name="l00591"></a>00591     <span class="keywordtype">int</span> oldx = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l00592"></a>00592     <span class="keywordtype">int</span> oldy = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l00593"></a>00593     this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = wdesc_posx;
<a name="l00594"></a>00594     this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = wdesc_posy;
<a name="l00595"></a>00595     <span class="keywordtype">int</span> oldw = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>;
<a name="l00596"></a>00596     <span class="keywordtype">int</span> oldh = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>;
<a name="l00597"></a>00597     this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = wdesc_width;
<a name="l00598"></a>00598     this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = wdesc_height;
<a name="l00599"></a>00599     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> borderMargin;
<a name="l00600"></a>00600     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#0f3ab0e81e863df0b60e153420f4f63d" title="Get the border margin.">getBorderMargin</a>(borderMargin))
<a name="l00601"></a>00601         borderMargin = 0;
<a name="l00602"></a>00602     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> borderThickness;
<a name="l00603"></a>00603     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#3a62537a4491595c94d5b6092d18e7a8" title="Get the border thickness.">getBorderThickness</a>(borderThickness))
<a name="l00604"></a>00604         borderThickness = 0;
<a name="l00605"></a>00605     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dz = borderMargin + borderThickness;
<a name="l00606"></a>00606     <a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = dz;
<a name="l00607"></a>00607     <a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = dz;
<a name="l00608"></a>00608     <a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 2*dz;
<a name="l00609"></a>00609     <a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 2*dz;
<a name="l00610"></a>00610 
<a name="l00611"></a>00611 
<a name="l00612"></a>00612     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l00613"></a>00613         <span class="comment">// normal parent window</span>
<a name="l00614"></a>00614         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>) {
<a name="l00615"></a>00615             <span class="comment">// create window</span>
<a name="l00616"></a>00616 
<a name="l00617"></a>00617             <span class="comment">// own surface?</span>
<a name="l00618"></a>00618             <span class="keywordtype">bool</span> os;
<a name="l00619"></a>00619             <a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l00620"></a>00620 
<a name="l00621"></a>00621             <span class="keywordflow">if</span> (!(this-&gt;<a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a> &amp; <a class="code" href="mmswindow_8h.html#18a8b2e6de22203b390a3fdbe487b4b7040730406261b9ffb4d38ce2cd3429cc" title="The window displays a video stream and should be on the video layer if it exists...">MMSW_VIDEO</a>)) {
<a name="l00622"></a>00622                 <span class="comment">// no video window, use alpha</span>
<a name="l00623"></a>00623                 <span class="keywordflow">if</span> ((os) || ((this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380f0bcc3227155e1b4aac8eed09a5416f5" title="Root windows will be displayed in the background.">MMSWINDOWTYPE_ROOTWINDOW</a>) &amp;&amp; (!this-&gt;<a class="code" href="classMMSWindow.html#273f17e194f56cee22df853e1d7a091f" title="a full screen MMSFBWindow as buffer for all MMSRootWindow objects with own_surface=false...">fullscreen_root_window</a>))
<a name="l00624"></a>00624                          || ((this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380b8cb8eaf607b06b3078855e77515d98f" title="Main windows will be displayed over the root window.">MMSWINDOWTYPE_MAINWINDOW</a>) &amp;&amp; (!this-&gt;<a class="code" href="classMMSWindow.html#80362c874c43047f7da8f38ae526930e" title="a full screen MMSFBWindow as buffer for all MMSMainWindow objects with own_surface=false...">fullscreen_main_window</a>))) {
<a name="l00625"></a>00625 
<a name="l00626"></a>00626                     <span class="keywordflow">if</span> ((!os) &amp;&amp; ((this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380f0bcc3227155e1b4aac8eed09a5416f5" title="Root windows will be displayed in the background.">MMSWINDOWTYPE_ROOTWINDOW</a>) || (this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380b8cb8eaf607b06b3078855e77515d98f" title="Main windows will be displayed over the root window.">MMSWINDOWTYPE_MAINWINDOW</a>))) {
<a name="l00627"></a>00627                         <span class="comment">// create full screen window</span>
<a name="l00628"></a>00628                         wdesc_posx = 0;
<a name="l00629"></a>00629                         wdesc_posy = 0;
<a name="l00630"></a>00630                         this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#234c55c57f7f038fb40da22e06de6e78">getResolution</a>(&amp;wdesc_width, &amp;wdesc_height);
<a name="l00631"></a>00631                     }
<a name="l00632"></a>00632 
<a name="l00633"></a>00633                     <span class="comment">// window should have own surface, backbuffer requested?</span>
<a name="l00634"></a>00634                     <span class="keywordtype">bool</span> backbuffer = <span class="keyword">false</span>;
<a name="l00635"></a>00635                     <a class="code" href="classMMSWindow.html#eee09a44e3b647b804ba30b1b7336a04" title="Detect if the window has an backbuffer.">getBackBuffer</a>(backbuffer);
<a name="l00636"></a>00636                     <span class="keywordflow">if</span> (backbuffer) {
<a name="l00637"></a>00637                         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"creating window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posx) + <span class="stringliteral">","</span>
<a name="l00638"></a>00638                                                             + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posy) + <span class="stringliteral">","</span>
<a name="l00639"></a>00639                                                             + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_width) + <span class="stringliteral">","</span>
<a name="l00640"></a>00640                                                             + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_height)
<a name="l00641"></a>00641                                                             + <span class="stringliteral">") with alphachannel and backbuffer"</span>);
<a name="l00642"></a>00642                         this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#c78bfdd6ee968ec5e9b99a53ac35d233">createWindow</a>(&amp;(this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>),
<a name="l00643"></a>00643                                                   wdesc_posx, wdesc_posy, wdesc_width, wdesc_height,
<a name="l00644"></a>00644                                                   <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bb74b6cc9edc897476f6dd3326596be82e" title="none">MMSFB_PF_NONE</a>, <span class="keyword">true</span>, 1);
<a name="l00645"></a>00645                     }
<a name="l00646"></a>00646                     <span class="keywordflow">else</span> {
<a name="l00647"></a>00647                         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"creating window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posx) + <span class="stringliteral">","</span>
<a name="l00648"></a>00648                                                             + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posy) + <span class="stringliteral">","</span>
<a name="l00649"></a>00649                                                             + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_width) + <span class="stringliteral">","</span>
<a name="l00650"></a>00650                                                             + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_height)
<a name="l00651"></a>00651                                                             + <span class="stringliteral">") with alphachannel, no backbuffer"</span>);
<a name="l00652"></a>00652                         this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#c78bfdd6ee968ec5e9b99a53ac35d233">createWindow</a>(&amp;(this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>),
<a name="l00653"></a>00653                                                   wdesc_posx, wdesc_posy, wdesc_width, wdesc_height,
<a name="l00654"></a>00654                                                   <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bb74b6cc9edc897476f6dd3326596be82e" title="none">MMSFB_PF_NONE</a>, <span class="keyword">true</span>, 0);
<a name="l00655"></a>00655                     }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window created (0x%x)"</span>, this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>);
<a name="l00658"></a>00658 
<a name="l00659"></a>00659                     <span class="comment">// window should not be visible at this time</span>
<a name="l00660"></a>00660                     this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(0);
<a name="l00661"></a>00661                 }
<a name="l00662"></a>00662 
<a name="l00663"></a>00663                 <span class="keywordflow">if</span> (!os) {
<a name="l00664"></a>00664                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380f0bcc3227155e1b4aac8eed09a5416f5" title="Root windows will be displayed in the background.">MMSWINDOWTYPE_ROOTWINDOW</a>) {
<a name="l00665"></a>00665                         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#273f17e194f56cee22df853e1d7a091f" title="a full screen MMSFBWindow as buffer for all MMSRootWindow objects with own_surface=false...">fullscreen_root_window</a>)
<a name="l00666"></a>00666                             this-&gt;<a class="code" href="classMMSWindow.html#273f17e194f56cee22df853e1d7a091f" title="a full screen MMSFBWindow as buffer for all MMSRootWindow objects with own_surface=false...">fullscreen_root_window</a> = this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>;
<a name="l00667"></a>00667                         <span class="keywordflow">else</span>
<a name="l00668"></a>00668                             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a> = this-&gt;<a class="code" href="classMMSWindow.html#273f17e194f56cee22df853e1d7a091f" title="a full screen MMSFBWindow as buffer for all MMSRootWindow objects with own_surface=false...">fullscreen_root_window</a>;
<a name="l00669"></a>00669                         this-&gt;<a class="code" href="classMMSWindow.html#5ac87ec86d181c0f1d8abcc51076947b" title="use count for fullscreen_root_window">fullscreen_root_window_use_count</a>++;
<a name="l00670"></a>00670                     }
<a name="l00671"></a>00671                     <span class="keywordflow">else</span>
<a name="l00672"></a>00672                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380b8cb8eaf607b06b3078855e77515d98f" title="Main windows will be displayed over the root window.">MMSWINDOWTYPE_MAINWINDOW</a>) {
<a name="l00673"></a>00673                         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#80362c874c43047f7da8f38ae526930e" title="a full screen MMSFBWindow as buffer for all MMSMainWindow objects with own_surface=false...">fullscreen_main_window</a>)
<a name="l00674"></a>00674                             this-&gt;<a class="code" href="classMMSWindow.html#80362c874c43047f7da8f38ae526930e" title="a full screen MMSFBWindow as buffer for all MMSMainWindow objects with own_surface=false...">fullscreen_main_window</a> = this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>;
<a name="l00675"></a>00675                         <span class="keywordflow">else</span>
<a name="l00676"></a>00676                             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a> = this-&gt;<a class="code" href="classMMSWindow.html#80362c874c43047f7da8f38ae526930e" title="a full screen MMSFBWindow as buffer for all MMSMainWindow objects with own_surface=false...">fullscreen_main_window</a>;
<a name="l00677"></a>00677                         this-&gt;<a class="code" href="classMMSWindow.html#c73f385f77ff857c2a5b46fcaa42e093" title="use count for fullscreen_main_window">fullscreen_main_window_use_count</a>++;
<a name="l00678"></a>00678                     }
<a name="l00679"></a>00679                 }
<a name="l00680"></a>00680             }
<a name="l00681"></a>00681             <span class="keywordflow">else</span> {
<a name="l00682"></a>00682                 <span class="comment">// video window, do not use alpha</span>
<a name="l00683"></a>00683                 <span class="keywordtype">bool</span> backbuffer = <span class="keyword">false</span>;
<a name="l00684"></a>00684                 <a class="code" href="classMMSWindow.html#eee09a44e3b647b804ba30b1b7336a04" title="Detect if the window has an backbuffer.">getBackBuffer</a>(backbuffer);
<a name="l00685"></a>00685                 <span class="keywordflow">if</span> (backbuffer) {
<a name="l00686"></a>00686                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"creating video window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posx) + <span class="stringliteral">","</span>
<a name="l00687"></a>00687                                                               + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posy) + <span class="stringliteral">","</span>
<a name="l00688"></a>00688                                                               + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_width) + <span class="stringliteral">","</span>
<a name="l00689"></a>00689                                                               + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_height)
<a name="l00690"></a>00690                                                               + <span class="stringliteral">") with backbuffer, no alphachannel"</span>);
<a name="l00691"></a>00691                     this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#c78bfdd6ee968ec5e9b99a53ac35d233">createWindow</a>(&amp;(this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>),
<a name="l00692"></a>00692                                               wdesc_posx, wdesc_posy, wdesc_width, wdesc_height,
<a name="l00693"></a>00693                                               <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bb74b6cc9edc897476f6dd3326596be82e" title="none">MMSFB_PF_NONE</a>, <span class="keyword">false</span>, 1);
<a name="l00694"></a>00694                 }
<a name="l00695"></a>00695                 <span class="keywordflow">else</span> {
<a name="l00696"></a>00696                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"creating video window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posx) + <span class="stringliteral">","</span>
<a name="l00697"></a>00697                                                               + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posy) + <span class="stringliteral">","</span>
<a name="l00698"></a>00698                                                               + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_width) + <span class="stringliteral">","</span>
<a name="l00699"></a>00699                                                               + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_height)
<a name="l00700"></a>00700                                                               + <span class="stringliteral">"), no alphachannel, no backbuffer"</span>);
<a name="l00701"></a>00701                     this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#c78bfdd6ee968ec5e9b99a53ac35d233">createWindow</a>(&amp;(this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>),
<a name="l00702"></a>00702                                               wdesc_posx, wdesc_posy, wdesc_width, wdesc_height,
<a name="l00703"></a>00703                                               <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bb74b6cc9edc897476f6dd3326596be82e" title="none">MMSFB_PF_NONE</a>, <span class="keyword">false</span>, 0);
<a name="l00704"></a>00704                 }
<a name="l00705"></a>00705 
<a name="l00706"></a>00706                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"video window created (0x%x)"</span>, this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>);
<a name="l00707"></a>00707 
<a name="l00708"></a>00708                 <span class="comment">// window should not be visible at this time</span>
<a name="l00709"></a>00709                 this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(0);
<a name="l00710"></a>00710 
<a name="l00711"></a>00711                 <span class="comment">// video windows should have own surfaces</span>
<a name="l00712"></a>00712                 <a class="code" href="classMMSWindow.html#f7a2a91f20b6cd0ade6679bb223f018a" title="Should the window working with an own surface?">setOwnSurface</a>(<span class="keyword">true</span>);
<a name="l00713"></a>00713             }
<a name="l00714"></a>00714 
<a name="l00715"></a>00715             <span class="comment">// get window surface</span>
<a name="l00716"></a>00716             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#6c9e1417d145c4994709bd3ecbe8485b">getSurface</a>(&amp;(this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>));
<a name="l00717"></a>00717 
<a name="l00718"></a>00718             <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a> == this-&gt;<a class="code" href="classMMSWindow.html#273f17e194f56cee22df853e1d7a091f" title="a full screen MMSFBWindow as buffer for all MMSRootWindow objects with own_surface=false...">fullscreen_root_window</a>) || (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a> == this-&gt;<a class="code" href="classMMSWindow.html#80362c874c43047f7da8f38ae526930e" title="a full screen MMSFBWindow as buffer for all MMSMainWindow objects with own_surface=false...">fullscreen_main_window</a>)) {
<a name="l00719"></a>00719                 <span class="comment">// get subsurface</span>
<a name="l00720"></a>00720                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"window has no own surface, get subsurface of shared full screen window"</span>);
<a name="l00721"></a>00721                 this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a> = this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#d5152cf7d4e8fc93e06edbbe393f2233">getSubSurface</a>(&amp;this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>);
<a name="l00722"></a>00722             }
<a name="l00723"></a>00723 
<a name="l00724"></a>00724 
<a name="l00725"></a>00725             <span class="comment">// normal window</span>
<a name="l00726"></a>00726             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"setting blitting flags for window"</span>);
<a name="l00727"></a>00727             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l00728"></a>00728             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>(<a class="code" href="mmsfbbase_8h.html#8a6166f8d7ba6e59b009f21c1f46d107" title="surface blitting flag: use alphachannel from source">MMSFB_BLIT_BLEND_ALPHACHANNEL</a>);
<a name="l00729"></a>00729             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l00730"></a>00730 
<a name="l00731"></a>00731             <span class="comment">/* set the window to bottom */</span>
<a name="l00732"></a>00732 <span class="comment">//            this-&gt;window-&gt;lowerToBottom();</span>
<a name="l00733"></a>00733 
<a name="l00734"></a>00734             <span class="comment">// add window to managers list</span>
<a name="l00735"></a>00735             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>) {
<a name="l00736"></a>00736                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"adding window to window manager"</span>);
<a name="l00737"></a>00737                 this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#2ad88d80b58e4143d3d68ac6b7300f55">addWindow</a>(<span class="keyword">this</span>);
<a name="l00738"></a>00738             }
<a name="l00739"></a>00739         }
<a name="l00740"></a>00740         <span class="keywordflow">else</span> {
<a name="l00741"></a>00741             <span class="comment">// change the window (new size/pos)</span>
<a name="l00742"></a>00742             <span class="keywordtype">bool</span> os;
<a name="l00743"></a>00743             <a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l00744"></a>00744             <span class="keywordflow">if</span> (os) {
<a name="l00745"></a>00745                 <span class="comment">// own surface</span>
<a name="l00746"></a>00746                 <span class="keywordtype">int</span> px,py;
<a name="l00747"></a>00747                 this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#6a46ded88b931052f4d447f87723c4c2">getPosition</a>(&amp;px, &amp;py);
<a name="l00748"></a>00748                 <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> != px)||(this-&gt;geom.y != py)) {
<a name="l00749"></a>00749                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"repositioning window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>) + <span class="stringliteral">","</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>) + <span class="stringliteral">")"</span>);
<a name="l00750"></a>00750                     this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#df9a458679b5322c77d267c48a165333">moveTo</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, this-&gt;geom.y);
<a name="l00751"></a>00751                 }
<a name="l00752"></a>00752                 <span class="keywordtype">int</span> w,h;
<a name="l00753"></a>00753                 this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#48bf4f734bbaaa743b7b934853879d90">getSize</a>(&amp;w, &amp;h);
<a name="l00754"></a>00754                 <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> != w)||(this-&gt;geom.h != h)) {
<a name="l00755"></a>00755                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"resizing window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) + <span class="stringliteral">"x"</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) + <span class="stringliteral">")"</span>);
<a name="l00756"></a>00756                     this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#6e3f17d897e5f7be332d418192bf32a1">resize</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, this-&gt;geom.h);
<a name="l00757"></a>00757                 }
<a name="l00758"></a>00758             }
<a name="l00759"></a>00759             <span class="keywordflow">else</span> {
<a name="l00760"></a>00760                 <span class="comment">// working with subsurface</span>
<a name="l00761"></a>00761                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"re-positioning/-sizing window subsurface ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>) + <span class="stringliteral">","</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>) + <span class="stringliteral">","</span>
<a name="l00762"></a>00762                                                                         + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) + <span class="stringliteral">","</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) + <span class="stringliteral">")"</span>);
<a name="l00763"></a>00763                 this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l00764"></a>00764                 this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#9b1dfc2b91fefbc251bb06571155c96b">setSubSurface</a>(&amp;this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>);
<a name="l00765"></a>00765                 this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l00766"></a>00766             }
<a name="l00767"></a>00767         }
<a name="l00768"></a>00768     }
<a name="l00769"></a>00769     <span class="keywordflow">else</span> {
<a name="l00770"></a>00770         <span class="comment">/* child window */</span>
<a name="l00771"></a>00771         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>) {
<a name="l00772"></a>00772             <span class="comment">/* create surface for child window */</span>
<a name="l00773"></a>00773             <span class="comment">/* get layers pixelformat */</span>
<a name="l00774"></a>00774             <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bb" title="supported pixel formats">MMSFBSurfacePixelFormat</a> pixelformat;
<a name="l00775"></a>00775             this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#137984450c043777e8be81ef5c30d63c">getPixelFormat</a>(&amp;pixelformat);
<a name="l00776"></a>00776 
<a name="l00777"></a>00777             <span class="keywordtype">bool</span> os;
<a name="l00778"></a>00778             <a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l00779"></a>00779             <span class="keywordflow">if</span> (os) {
<a name="l00780"></a>00780                 <span class="keywordtype">bool</span> backbuffer = <span class="keyword">false</span>;
<a name="l00781"></a>00781                 <a class="code" href="classMMSWindow.html#eee09a44e3b647b804ba30b1b7336a04" title="Detect if the window has an backbuffer.">getBackBuffer</a>(backbuffer);
<a name="l00782"></a>00782                 <span class="keywordflow">if</span> (backbuffer) {
<a name="l00783"></a>00783                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"creating surface for child window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posx) + <span class="stringliteral">","</span>
<a name="l00784"></a>00784                                                                           + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posy) + <span class="stringliteral">","</span>
<a name="l00785"></a>00785                                                                           + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_width) + <span class="stringliteral">","</span>
<a name="l00786"></a>00786                                                                           + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_height)
<a name="l00787"></a>00787                                                                           + <span class="stringliteral">") with pixelformat "</span> + <a class="code" href="mmstypes_8h.html#6727c4c364ac2d2ff384ac40cea47b17">getMMSFBPixelFormatString</a>(pixelformat)
<a name="l00788"></a>00788                                                                           + <span class="stringliteral">" (alphachannel and backbuffer)"</span>);
<a name="l00789"></a>00789 
<a name="l00790"></a>00790                     this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#55baef001ae82908f76cefba0c20857a">createSurface</a>(&amp;(this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>),
<a name="l00791"></a>00791                                               wdesc_width, wdesc_height, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bb74b6cc9edc897476f6dd3326596be82e" title="none">MMSFB_PF_NONE</a>, 1);
<a name="l00792"></a>00792                 }
<a name="l00793"></a>00793                 <span class="keywordflow">else</span> {
<a name="l00794"></a>00794                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"creating surface for child window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posx) + <span class="stringliteral">","</span>
<a name="l00795"></a>00795                                                                           + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posy) + <span class="stringliteral">","</span>
<a name="l00796"></a>00796                                                                           + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_width) + <span class="stringliteral">","</span>
<a name="l00797"></a>00797                                                                           + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_height)
<a name="l00798"></a>00798                                                                           + <span class="stringliteral">") with pixelformat "</span> + <a class="code" href="mmstypes_8h.html#6727c4c364ac2d2ff384ac40cea47b17">getMMSFBPixelFormatString</a>(pixelformat)
<a name="l00799"></a>00799                                                                           + <span class="stringliteral">" (alphachannel, no backbuffer)"</span>);
<a name="l00800"></a>00800 
<a name="l00801"></a>00801                     this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>-&gt;<a class="code" href="classMMSFBLayer.html#55baef001ae82908f76cefba0c20857a">createSurface</a>(&amp;(this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>),
<a name="l00802"></a>00802                                               wdesc_width, wdesc_height, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bb74b6cc9edc897476f6dd3326596be82e" title="none">MMSFB_PF_NONE</a>, 0);
<a name="l00803"></a>00803                 }
<a name="l00804"></a>00804             }
<a name="l00805"></a>00805             <span class="keywordflow">else</span> {
<a name="l00806"></a>00806                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"creating sub surface for child window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posx) + <span class="stringliteral">","</span>
<a name="l00807"></a>00807                                                                           + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_posy) + <span class="stringliteral">","</span>
<a name="l00808"></a>00808                                                                           + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_width) + <span class="stringliteral">","</span>
<a name="l00809"></a>00809                                                                           + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(wdesc_height)
<a name="l00810"></a>00810                                                                           + <span class="stringliteral">") with pixelformat "</span> + <a class="code" href="mmstypes_8h.html#6727c4c364ac2d2ff384ac40cea47b17">getMMSFBPixelFormatString</a>(pixelformat)
<a name="l00811"></a>00811                                                                           + <span class="stringliteral">" (use alpha)"</span>);
<a name="l00812"></a>00812 
<a name="l00813"></a>00813                 <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> rect;
<a name="l00814"></a>00814 
<a name="l00815"></a>00815                 rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = wdesc_posx;
<a name="l00816"></a>00816                 rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = wdesc_posy;
<a name="l00817"></a>00817                 rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = wdesc_width;
<a name="l00818"></a>00818                 rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = wdesc_height;
<a name="l00819"></a>00819                 this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#d5152cf7d4e8fc93e06edbbe393f2233">getSubSurface</a>(&amp;rect);
<a name="l00820"></a>00820             }
<a name="l00821"></a>00821 
<a name="l00822"></a>00822             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l00823"></a>00823             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>(<a class="code" href="mmsfbbase_8h.html#8a6166f8d7ba6e59b009f21c1f46d107" title="surface blitting flag: use alphachannel from source">MMSFB_BLIT_BLEND_ALPHACHANNEL</a>);
<a name="l00824"></a>00824             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l00825"></a>00825 
<a name="l00826"></a>00826             <span class="comment">/* set the window to bottom */</span>
<a name="l00827"></a>00827 <span class="comment">//            this-&gt;window-&gt;lowerToBottom();</span>
<a name="l00828"></a>00828 
<a name="l00829"></a>00829             <span class="comment">/* add window to parents childwins list */</span>
<a name="l00830"></a>00830 <span class="comment">//printf("%x-&gt;resize(), this-&gt;%x-&gt;addChildwindow(%x)\n", this, this-&gt;parent, this);</span>
<a name="l00831"></a>00831             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#0f299ed447f103759fbec77a8f0798ae" title="Internal method: Add a child window.">addChildWindow</a>(<span class="keyword">this</span>);
<a name="l00832"></a>00832         }
<a name="l00833"></a>00833         <span class="keywordflow">else</span> {
<a name="l00834"></a>00834             <span class="comment">/* change the surface (new size/pos) */</span>
<a name="l00835"></a>00835             <span class="keywordflow">if</span>   ((this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> != oldx)||(this-&gt;geom.y != oldy)
<a name="l00836"></a>00836                 ||(this-&gt;geom.w != oldw)||(this-&gt;geom.h != oldh)) {
<a name="l00837"></a>00837                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"re-positioning/-sizing child window ("</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>) + <span class="stringliteral">","</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>) + <span class="stringliteral">","</span>
<a name="l00838"></a>00838                                                                         + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) + <span class="stringliteral">","</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) + <span class="stringliteral">")"</span>);
<a name="l00839"></a>00839                 this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#106e175356c714cf63981f39c41f1fac" title="Internal method: Set the region of a child window.">setChildWindowRegion</a>(<span class="keyword">this</span>, refresh);
<a name="l00840"></a>00840             }
<a name="l00841"></a>00841         }
<a name="l00842"></a>00842     }
<a name="l00843"></a>00843 
<a name="l00844"></a>00844     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"resizing done"</span>);
<a name="l00845"></a>00845 
<a name="l00846"></a>00846     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00847"></a>00847 }
<a name="l00848"></a>00848 
<a name="l00849"></a>00849 
<a name="l00850"></a><a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86">00850</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">MMSWindow::lock</a>() {
<a name="l00851"></a>00851     <span class="comment">// which window is to lock?</span>
<a name="l00852"></a>00852     <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *tolock = <span class="keyword">this</span>;
<a name="l00853"></a>00853     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a3c04b84ccee933184fd681b52a71b21" title="toplevel parent window (if window is a child window) or NULL">toplevel_parent</a>)
<a name="l00854"></a>00854         tolock = this-&gt;<a class="code" href="classMMSWindow.html#a3c04b84ccee933184fd681b52a71b21" title="toplevel parent window (if window is a child window) or NULL">toplevel_parent</a>;
<a name="l00855"></a>00855     <span class="keywordflow">else</span>
<a name="l00856"></a>00856     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l00857"></a>00857         tolock = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>;
<a name="l00858"></a>00858 
<a name="l00859"></a>00859     <span class="keywordflow">if</span> (tolock-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>)
<a name="l00860"></a>00860         tolock-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l00861"></a>00861 
<a name="l00862"></a>00862 <span class="comment">/*    if (tolock-&gt;Lock.trylock() == 0) {</span>
<a name="l00863"></a>00863 <span class="comment">        // I have got the lock the first time</span>
<a name="l00864"></a>00864 <span class="comment">        tolock-&gt;TID = pthread_self();</span>
<a name="l00865"></a>00865 <span class="comment">        tolock-&gt;Lock_cnt = 1;</span>
<a name="l00866"></a>00866 <span class="comment">    }</span>
<a name="l00867"></a>00867 <span class="comment">    else {</span>
<a name="l00868"></a>00868 <span class="comment">        if ((tolock-&gt;TID == pthread_self())&amp;&amp;(tolock-&gt;Lock_cnt &gt; 0)) {</span>
<a name="l00869"></a>00869 <span class="comment">            // I am the thread which has already locked this window</span>
<a name="l00870"></a>00870 <span class="comment">            tolock-&gt;Lock_cnt++;</span>
<a name="l00871"></a>00871 <span class="comment">        }</span>
<a name="l00872"></a>00872 <span class="comment">        else {</span>
<a name="l00873"></a>00873 <span class="comment">            // another thread has already locked this window, waiting for...</span>
<a name="l00874"></a>00874 <span class="comment">            tolock-&gt;Lock.lock();</span>
<a name="l00875"></a>00875 <span class="comment">            tolock-&gt;TID = pthread_self();</span>
<a name="l00876"></a>00876 <span class="comment">            tolock-&gt;Lock_cnt = 1;</span>
<a name="l00877"></a>00877 <span class="comment">        }</span>
<a name="l00878"></a>00878 <span class="comment">    }</span>
<a name="l00879"></a>00879 <span class="comment">    */</span>
<a name="l00880"></a>00880 
<a name="l00881"></a>00881 <span class="comment">/*</span>
<a name="l00882"></a>00882 <span class="comment">    if (this-&gt;Lock.trylock() == 0) {</span>
<a name="l00883"></a>00883 <span class="comment">        // I have got the lock the first time</span>
<a name="l00884"></a>00884 <span class="comment">        this-&gt;TID = pthread_self();</span>
<a name="l00885"></a>00885 <span class="comment">        this-&gt;Lock_cnt = 1;</span>
<a name="l00886"></a>00886 <span class="comment">    }</span>
<a name="l00887"></a>00887 <span class="comment">    else {</span>
<a name="l00888"></a>00888 <span class="comment">        if ((this-&gt;TID == pthread_self())&amp;&amp;(this-&gt;Lock_cnt &gt; 0)) {</span>
<a name="l00889"></a>00889 <span class="comment">            // I am the thread which has already locked this window</span>
<a name="l00890"></a>00890 <span class="comment">            this-&gt;Lock_cnt++;</span>
<a name="l00891"></a>00891 <span class="comment">        }</span>
<a name="l00892"></a>00892 <span class="comment">        else {</span>
<a name="l00893"></a>00893 <span class="comment">            // another thread has already locked this window, waiting for...</span>
<a name="l00894"></a>00894 <span class="comment">            this-&gt;Lock.lock();</span>
<a name="l00895"></a>00895 <span class="comment">            this-&gt;TID = pthread_self();</span>
<a name="l00896"></a>00896 <span class="comment">            this-&gt;Lock_cnt = 1;</span>
<a name="l00897"></a>00897 <span class="comment">        }</span>
<a name="l00898"></a>00898 <span class="comment">    }</span>
<a name="l00899"></a>00899 <span class="comment">    */</span>
<a name="l00900"></a>00900 }
<a name="l00901"></a>00901 
<a name="l00902"></a><a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3">00902</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">MMSWindow::unlock</a>() {
<a name="l00903"></a>00903     <span class="comment">// which window is to lock?</span>
<a name="l00904"></a>00904     <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *tolock = <span class="keyword">this</span>;
<a name="l00905"></a>00905     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a3c04b84ccee933184fd681b52a71b21" title="toplevel parent window (if window is a child window) or NULL">toplevel_parent</a>)
<a name="l00906"></a>00906         tolock = this-&gt;<a class="code" href="classMMSWindow.html#a3c04b84ccee933184fd681b52a71b21" title="toplevel parent window (if window is a child window) or NULL">toplevel_parent</a>;
<a name="l00907"></a>00907     <span class="keywordflow">else</span>
<a name="l00908"></a>00908     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l00909"></a>00909         tolock = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>;
<a name="l00910"></a>00910 
<a name="l00911"></a>00911     <span class="keywordflow">if</span> (tolock-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>)
<a name="l00912"></a>00912         tolock-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l00913"></a>00913 
<a name="l00914"></a>00914 <span class="comment">/*  if (tolock-&gt;TID != pthread_self())</span>
<a name="l00915"></a>00915 <span class="comment">        return;</span>
<a name="l00916"></a>00916 <span class="comment">    if(tolock-&gt;Lock_cnt==0)</span>
<a name="l00917"></a>00917 <span class="comment">        return;</span>
<a name="l00918"></a>00918 <span class="comment">    tolock-&gt;Lock_cnt--;</span>
<a name="l00919"></a>00919 <span class="comment">    if (tolock-&gt;Lock_cnt == 0)</span>
<a name="l00920"></a>00920 <span class="comment">        tolock-&gt;Lock.unlock();</span>
<a name="l00921"></a>00921 <span class="comment">*/</span>
<a name="l00922"></a>00922 
<a name="l00923"></a>00923 <span class="comment">/*</span>
<a name="l00924"></a>00924 <span class="comment">    if (this-&gt;TID != pthread_self())</span>
<a name="l00925"></a>00925 <span class="comment">        return;</span>
<a name="l00926"></a>00926 <span class="comment">    if(this-&gt;Lock_cnt==0)</span>
<a name="l00927"></a>00927 <span class="comment">        return;</span>
<a name="l00928"></a>00928 <span class="comment">    this-&gt;Lock_cnt--;</span>
<a name="l00929"></a>00929 <span class="comment">    if (this-&gt;Lock_cnt == 0)</span>
<a name="l00930"></a>00930 <span class="comment">        this-&gt;Lock.unlock();</span>
<a name="l00931"></a>00931 <span class="comment">*/</span>
<a name="l00932"></a>00932 }
<a name="l00933"></a>00933 
<a name="l00934"></a>00934 
<a name="l00935"></a><a class="code" href="classMMSWindow.html#3f4ea5bd7db27133a43752662ccd388e">00935</a> <span class="keywordtype">string</span> <a class="code" href="classMMSWindow.html#3f4ea5bd7db27133a43752662ccd388e" title="Get the name of the window.">MMSWindow::getName</a>() {
<a name="l00936"></a>00936     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>;
<a name="l00937"></a>00937 }
<a name="l00938"></a>00938 
<a name="l00939"></a><a class="code" href="classMMSWindow.html#1b6eb4a5d9dfadf39ec960400228d50c">00939</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#1b6eb4a5d9dfadf39ec960400228d50c" title="Set the name of the window.">MMSWindow::setName</a>(<span class="keywordtype">string</span> <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>) {
<a name="l00940"></a>00940     this-&gt;name = name;
<a name="l00941"></a>00941 }
<a name="l00942"></a>00942 
<a name="l00943"></a><a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912">00943</a> <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a>* <a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912" title="Find a window over its name.">MMSWindow::findWindow</a>(<span class="keywordtype">string</span> <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>) {
<a name="l00944"></a>00944     <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>;
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     <span class="keywordflow">if</span> (name == <span class="stringliteral">""</span>) {
<a name="l00947"></a>00947         <span class="comment">// empty name</span>
<a name="l00948"></a>00948         <span class="keywordflow">return</span> NULL;
<a name="l00949"></a>00949     }
<a name="l00950"></a>00950 
<a name="l00951"></a>00951     <span class="keywordflow">if</span> (name == this-&gt;name) {
<a name="l00952"></a>00952         <span class="comment">// it's me</span>
<a name="l00953"></a>00953         <span class="keywordflow">return</span> <span class="keyword">this</span>;
<a name="l00954"></a>00954     }
<a name="l00955"></a>00955 
<a name="l00956"></a>00956     <span class="comment">// first, my own childwins</span>
<a name="l00957"></a>00957     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++)
<a name="l00958"></a>00958         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;getName() == name)
<a name="l00959"></a>00959             <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window;
<a name="l00960"></a>00960 
<a name="l00961"></a>00961     <span class="comment">// second, call search method of my childwins</span>
<a name="l00962"></a>00962     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++)
<a name="l00963"></a>00963         <span class="keywordflow">if</span> ((window = <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;findWindow(name)))
<a name="l00964"></a>00964             <span class="keywordflow">return</span> window;
<a name="l00965"></a>00965 
<a name="l00966"></a>00966     <span class="keywordflow">return</span> NULL;
<a name="l00967"></a>00967 }
<a name="l00968"></a>00968 
<a name="l00969"></a><a class="code" href="classMMSWindow.html#674a83859bae06d0b0bfaddf9a7688a5">00969</a> <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a>* <a class="code" href="classMMSWindow.html#674a83859bae06d0b0bfaddf9a7688a5" title="Return last window in the stack.">MMSWindow::getLastWindow</a>() {
<a name="l00970"></a>00970     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() &gt; 0)
<a name="l00971"></a>00971         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;childwins.size()-1).<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>;
<a name="l00972"></a>00972     <span class="keywordflow">return</span> NULL;
<a name="l00973"></a>00973 }
<a name="l00974"></a>00974 
<a name="l00975"></a><a class="code" href="classMMSWindow.html#0f299ed447f103759fbec77a8f0798ae">00975</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#0f299ed447f103759fbec77a8f0798ae" title="Internal method: Add a child window.">MMSWindow::addChildWindow</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *childwin) {
<a name="l00976"></a>00976     <span class="keywordflow">if</span> (childwin-&gt;<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()!=<a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>)
<a name="l00977"></a>00977         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00978"></a>00978 
<a name="l00979"></a>00979     <span class="comment">// per default childwins are not focused</span>
<a name="l00980"></a>00980     <a class="code" href="structMMSWindow_1_1CHILDWINS.html" title="describes a child window">CHILDWINS</a> cw;
<a name="l00981"></a>00981     cw.<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a> = childwin;
<a name="l00982"></a>00982     cw.<a class="code" href="structMMSWindow_1_1CHILDWINS.html#5ac4285486b8f66269e9eac5a3d8255b" title="region of the window within parent window">region</a>.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l00983"></a>00983     cw.<a class="code" href="structMMSWindow_1_1CHILDWINS.html#5ac4285486b8f66269e9eac5a3d8255b" title="region of the window within parent window">region</a>.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l00984"></a>00984     cw.<a class="code" href="structMMSWindow_1_1CHILDWINS.html#5ac4285486b8f66269e9eac5a3d8255b" title="region of the window within parent window">region</a>.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1         ;<span class="comment">//+20;</span>
<a name="l00985"></a>00985     cw.<a class="code" href="structMMSWindow_1_1CHILDWINS.html#5ac4285486b8f66269e9eac5a3d8255b" title="region of the window within parent window">region</a>.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1         ;<span class="comment">//+20;</span>
<a name="l00986"></a>00986     cw.<a class="code" href="structMMSWindow_1_1CHILDWINS.html#418930c11f3a5c48c1357a9d382332ff" title="opacity of the window">opacity</a> = 0;
<a name="l00987"></a>00987     cw.<a class="code" href="structMMSWindow_1_1CHILDWINS.html#5a408745df8d3f8ae0819038e8f58465" title="old opacity of the window">oldopacity</a> = 0;
<a name="l00988"></a>00988     cw.<a class="code" href="structMMSWindow_1_1CHILDWINS.html#f465a9f066010d5a5d6248ba71f65532" title="save the last focused widget here">focusedWidget</a> = 0;
<a name="l00989"></a>00989     cw.<a class="code" href="structMMSWindow_1_1CHILDWINS.html#9d5849fa1a788d50ac24d50195a0a9e1" title="special blit done">special_blit</a> = <span class="keyword">false</span>;
<a name="l00990"></a>00990 
<a name="l00991"></a>00991     <span class="comment">// insert child window into stack</span>
<a name="l00992"></a>00992     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l00993"></a>00993     <span class="keywordtype">bool</span> aot = <span class="keyword">false</span>;
<a name="l00994"></a>00994     childwin-&gt;<a class="code" href="classMMSWindow.html#aae984f71f967f92da6f33e1d8a468d4" title="Detect if the window will be permanently displayed at the top of the window stack...">getAlwaysOnTop</a>(aot);
<a name="l00995"></a>00995     <span class="keywordflow">if</span> (!aot) {
<a name="l00996"></a>00996         <span class="comment">// normal stack position, insert window before windows with "always on top" flag</span>
<a name="l00997"></a>00997         this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.insert(this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.begin() + this-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a>, cw);
<a name="l00998"></a>00998         this-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a>++;
<a name="l00999"></a>00999     }
<a name="l01000"></a>01000     <span class="keywordflow">else</span> {
<a name="l01001"></a>01001         <span class="comment">// window with "always on top" flag, add it to the end of list</span>
<a name="l01002"></a>01002         this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.push_back(cw);
<a name="l01003"></a>01003     }
<a name="l01004"></a>01004     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01005"></a>01005 
<a name="l01006"></a>01006     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01007"></a>01007 }
<a name="l01008"></a>01008 
<a name="l01009"></a>01009 
<a name="l01010"></a>01010 
<a name="l01011"></a><a class="code" href="classMMSWindow.html#be09d0d2e648134769bcec253de4f90c">01011</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#be09d0d2e648134769bcec253de4f90c" title="Internal method: Remove a child window.">MMSWindow::removeChildWindow</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *childwin) {
<a name="l01012"></a>01012     <span class="keywordflow">if</span> (childwin-&gt;<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()!=<a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>)
<a name="l01013"></a>01013         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01014"></a>01014 
<a name="l01015"></a>01015     <span class="comment">// remove child window from stack</span>
<a name="l01016"></a>01016     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l01017"></a>01017     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l01018"></a>01018         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window == childwin) {
<a name="l01019"></a>01019             <span class="comment">// remove window from stack</span>
<a name="l01020"></a>01020             this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.erase(this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.begin()+i);
<a name="l01021"></a>01021             <span class="keywordtype">bool</span> aot = <span class="keyword">false</span>;
<a name="l01022"></a>01022             childwin-&gt;<a class="code" href="classMMSWindow.html#aae984f71f967f92da6f33e1d8a468d4" title="Detect if the window will be permanently displayed at the top of the window stack...">getAlwaysOnTop</a>(aot);
<a name="l01023"></a>01023             <span class="keywordflow">if</span> (!aot) {
<a name="l01024"></a>01024                 <span class="comment">// normal stack position, decrease the index for "always on top" windows</span>
<a name="l01025"></a>01025                 this-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a>--;
<a name="l01026"></a>01026             }
<a name="l01027"></a>01027 
<a name="l01028"></a>01028             <span class="keywordtype">int</span> childwinsize = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size()-1;
<a name="l01029"></a>01029             <span class="keywordflow">if</span> (((<span class="keywordtype">int</span>)this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &gt; childwinsize) &amp;&amp; (childwinsize &gt;= 0))
<a name="l01030"></a>01030                 this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = childwinsize;
<a name="l01031"></a>01031 
<a name="l01032"></a>01032             <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01033"></a>01033             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01034"></a>01034         }
<a name="l01035"></a>01035     }
<a name="l01036"></a>01036     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01037"></a>01037 
<a name="l01038"></a>01038     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01039"></a>01039 }
<a name="l01040"></a>01040 
<a name="l01041"></a>01041 
<a name="l01042"></a><a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55">01042</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">MMSWindow::setChildWindowOpacity</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *childwin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> opacity, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l01043"></a>01043     <span class="keywordflow">if</span> (childwin-&gt;<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()!=<a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>)
<a name="l01044"></a>01044         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01045"></a>01045 
<a name="l01046"></a>01046     <span class="comment">// find child window and set the opacity</span>
<a name="l01047"></a>01047     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l01048"></a>01048     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l01049"></a>01049         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window == childwin) {
<a name="l01050"></a>01050             this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).oldopacity = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).opacity;
<a name="l01051"></a>01051             this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).opacity = opacity;
<a name="l01052"></a>01052             <span class="keywordflow">if</span> (refresh) {
<a name="l01053"></a>01053                 <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l01054"></a>01054                 <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(childwin, NULL, <a class="code" href="mmsfbbase_8h.html#76feb4832a89c2a24b3007135ba509fd" title="surface flip flag: none">MMSFB_FLIP_NONE</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);
<a name="l01055"></a>01055                 <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l01056"></a>01056             }
<a name="l01057"></a>01057             <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01058"></a>01058             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01059"></a>01059         }
<a name="l01060"></a>01060     }
<a name="l01061"></a>01061     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01062"></a>01062     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01063"></a>01063 }
<a name="l01064"></a>01064 
<a name="l01065"></a><a class="code" href="classMMSWindow.html#106e175356c714cf63981f39c41f1fac">01065</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#106e175356c714cf63981f39c41f1fac" title="Internal method: Set the region of a child window.">MMSWindow::setChildWindowRegion</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *childwin, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l01066"></a>01066 
<a name="l01067"></a>01067     <span class="keywordflow">if</span> (childwin-&gt;<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()!=<a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>)
<a name="l01068"></a>01068         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01069"></a>01069 
<a name="l01070"></a>01070     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l01071"></a>01071     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l01072"></a>01072         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window == childwin) {
<a name="l01073"></a>01073             <span class="comment">// get old region</span>
<a name="l01074"></a>01074             <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> *currregion = &amp;this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).region;
<a name="l01075"></a>01075             <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> oldregion = *currregion;
<a name="l01076"></a>01076 
<a name="l01077"></a>01077             <span class="keywordflow">if</span>   ((oldregion.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> != childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>)
<a name="l01078"></a>01078                 ||(oldregion.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> != childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>)
<a name="l01079"></a>01079                 ||(oldregion.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> - oldregion.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> + 1 != childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>)
<a name="l01080"></a>01080                 ||(oldregion.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> - oldregion.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> + 1 != childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>)
<a name="l01081"></a>01081                 ||(childwin-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a>)) {
<a name="l01082"></a>01082 
<a name="l01083"></a>01083                 <span class="comment">// calc new pos</span>
<a name="l01084"></a>01084                 currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l01085"></a>01085                 currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l01086"></a>01086                 currregion-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;
<a name="l01087"></a>01087                 currregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;
<a name="l01088"></a>01088 
<a name="l01089"></a>01089                 <span class="keywordflow">if</span> (childwin-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a>) {
<a name="l01090"></a>01090                     currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> - (<a class="code" href="mmswindow_8cpp.html#6af592eae9a3eaa756a3601dcc90c5af">MMSFBWINDOW_CALC_STRETCH_LEFT</a>(childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, childwin) - childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>);
<a name="l01091"></a>01091                     currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> - (<a class="code" href="mmswindow_8cpp.html#b47f3f2894b4a3c62802158022d8ba05">MMSFBWINDOW_CALC_STRETCH_UP</a>(childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, childwin) - childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>);
<a name="l01092"></a>01092                     currregion-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> + <a class="code" href="mmswindow_8cpp.html#b5f5315b2eb953328dc242c063acfa86">MMSFBWINDOW_CALC_STRETCH_WIDTH</a>(childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, childwin) - 1;
<a name="l01093"></a>01093                     currregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> + <a class="code" href="mmswindow_8cpp.html#cdc59a738aeb7a0e1cc153ad4b34084b">MMSFBWINDOW_CALC_STRETCH_HEIGHT</a>(childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, childwin) - 1;
<a name="l01094"></a>01094                 }
<a name="l01095"></a>01095 
<a name="l01096"></a>01096                 <span class="keywordtype">bool</span> os;
<a name="l01097"></a>01097                 childwin-&gt;<a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l01098"></a>01098                 <span class="keywordflow">if</span> (os) {
<a name="l01099"></a>01099                     <span class="keywordflow">if</span>   ((oldregion.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> - oldregion.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> + 1 != childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>)
<a name="l01100"></a>01100                         ||(oldregion.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> - oldregion.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> + 1 != childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>)) {
<a name="l01101"></a>01101                         <span class="comment">// resize surface</span>
<a name="l01102"></a>01102                         childwin-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l01103"></a>01103                         childwin-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#118605bf7db3fa50cea60f3939c71730">resize</a>(childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>);
<a name="l01104"></a>01104                         childwin-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l01105"></a>01105 
<a name="l01106"></a>01106                         <span class="comment">// call resize recursive for new regions of my child windows</span>
<a name="l01107"></a>01107                         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; childwin-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); j++) {
<a name="l01108"></a>01108                             childwin-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(j).window-&gt;resize(<span class="keyword">false</span>);
<a name="l01109"></a>01109                         }
<a name="l01110"></a>01110                     }
<a name="l01111"></a>01111                 }
<a name="l01112"></a>01112                 <span class="keywordflow">else</span> {
<a name="l01113"></a>01113                     <span class="comment">// working with sub surface</span>
<a name="l01114"></a>01114                     childwin-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l01115"></a>01115                     childwin-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#9b1dfc2b91fefbc251bb06571155c96b">setSubSurface</a>(&amp;(childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>));
<a name="l01116"></a>01116                     childwin-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l01117"></a>01117 
<a name="l01118"></a>01118                     <span class="comment">// call resize recursive for new regions of my child windows</span>
<a name="l01119"></a>01119                     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; childwin-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); j++) {
<a name="l01120"></a>01120                         childwin-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(j).window-&gt;resize(<span class="keyword">false</span>);
<a name="l01121"></a>01121                     }
<a name="l01122"></a>01122                 }
<a name="l01123"></a>01123 
<a name="l01124"></a>01124                 <span class="comment">// recursive calls should stop here</span>
<a name="l01125"></a>01125                 <span class="keywordflow">if</span> (!refresh) {
<a name="l01126"></a>01126                     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01127"></a>01127                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01128"></a>01128                 }
<a name="l01129"></a>01129 
<a name="l01130"></a>01130                 <span class="comment">// draw at new pos</span>
<a name="l01131"></a>01131                 <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l01132"></a>01132                 <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(childwin, NULL, <a class="code" href="mmsfbbase_8h.html#76feb4832a89c2a24b3007135ba509fd" title="surface flip flag: none">MMSFB_FLIP_NONE</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l01133"></a>01133                 <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l01134"></a>01134 
<a name="l01135"></a>01135                 <span class="comment">// redraw the old rects</span>
<a name="l01136"></a>01136                 <span class="keywordflow">if</span> (oldregion.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> &lt; currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>) {
<a name="l01137"></a>01137                     <span class="comment">// redraw above</span>
<a name="l01138"></a>01138                     <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> region;
<a name="l01139"></a>01139                     region = oldregion;
<a name="l01140"></a>01140                     <span class="keywordflow">if</span> (region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> &gt;= currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>)
<a name="l01141"></a>01141                         region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> - 1;
<a name="l01142"></a>01142 
<a name="l01143"></a>01143                     region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>-= currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01144"></a>01144                     region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>-= currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01145"></a>01145                     region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>-=currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01146"></a>01146                     region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>-=currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01147"></a>01147                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l01148"></a>01148                     <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(childwin, &amp;region, <a class="code" href="mmsfbbase_8h.html#76feb4832a89c2a24b3007135ba509fd" title="surface flip flag: none">MMSFB_FLIP_NONE</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l01149"></a>01149                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l01150"></a>01150                 }
<a name="l01151"></a>01151                 <span class="keywordflow">if</span> (oldregion.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> &gt; currregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>) {
<a name="l01152"></a>01152                     <span class="comment">// redraw below</span>
<a name="l01153"></a>01153                     <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> region;
<a name="l01154"></a>01154                     region = oldregion;
<a name="l01155"></a>01155                     <span class="keywordflow">if</span> (region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> &lt;= currregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>)
<a name="l01156"></a>01156                         region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = currregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> + 1;
<a name="l01157"></a>01157 
<a name="l01158"></a>01158                     region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>-= currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01159"></a>01159                     region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>-= currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01160"></a>01160                     region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>-=currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01161"></a>01161                     region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>-=currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01162"></a>01162                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l01163"></a>01163                     <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(childwin, &amp;region, <a class="code" href="mmsfbbase_8h.html#76feb4832a89c2a24b3007135ba509fd" title="surface flip flag: none">MMSFB_FLIP_NONE</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l01164"></a>01164                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l01165"></a>01165                 }
<a name="l01166"></a>01166                 <span class="keywordflow">if</span> (oldregion.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> &lt; currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>) {
<a name="l01167"></a>01167                     <span class="comment">// redraw left side</span>
<a name="l01168"></a>01168                     <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> region;
<a name="l01169"></a>01169                     region = oldregion;
<a name="l01170"></a>01170                     <span class="keywordflow">if</span>  ((region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> &gt;= currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>)
<a name="l01171"></a>01171                        &amp;&amp;(region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> &lt;= currregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>)) {
<a name="l01172"></a>01172                         <span class="keywordflow">if</span> (region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> &gt;= currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>)
<a name="l01173"></a>01173                             region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> - 1;
<a name="l01174"></a>01174 
<a name="l01175"></a>01175                         region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = 0;
<a name="l01176"></a>01176                         region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = currregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> - currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01177"></a>01177                         region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>-=currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01178"></a>01178                         region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>-=currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01179"></a>01179                         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l01180"></a>01180                         <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(childwin, &amp;region, <a class="code" href="mmsfbbase_8h.html#76feb4832a89c2a24b3007135ba509fd" title="surface flip flag: none">MMSFB_FLIP_NONE</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l01181"></a>01181                         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l01182"></a>01182                     }
<a name="l01183"></a>01183                 }
<a name="l01184"></a>01184                 <span class="keywordflow">if</span> (oldregion.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> &gt; currregion-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>) {
<a name="l01185"></a>01185                     <span class="comment">// redraw right side</span>
<a name="l01186"></a>01186                     <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> region;
<a name="l01187"></a>01187                     region = oldregion;
<a name="l01188"></a>01188                     <span class="keywordflow">if</span>  ((region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> &gt;= currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>)
<a name="l01189"></a>01189                        &amp;&amp;(region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> &lt;= currregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>)) {
<a name="l01190"></a>01190                         <span class="keywordflow">if</span> (region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> &lt;= currregion-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>)
<a name="l01191"></a>01191                             region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = currregion-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> + 1;
<a name="l01192"></a>01192 
<a name="l01193"></a>01193                         region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = 0;
<a name="l01194"></a>01194                         region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = currregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> - currregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01195"></a>01195                         region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>-=currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01196"></a>01196                         region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>-=currregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01197"></a>01197                         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l01198"></a>01198                         <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(childwin, &amp;region, <a class="code" href="mmsfbbase_8h.html#76feb4832a89c2a24b3007135ba509fd" title="surface flip flag: none">MMSFB_FLIP_NONE</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l01199"></a>01199                         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l01200"></a>01200                     }
<a name="l01201"></a>01201                 }
<a name="l01202"></a>01202             }
<a name="l01203"></a>01203 
<a name="l01204"></a>01204             <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01205"></a>01205             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01206"></a>01206         }
<a name="l01207"></a>01207     }
<a name="l01208"></a>01208 
<a name="l01209"></a>01209     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01210"></a>01210     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01211"></a>01211 }
<a name="l01212"></a>01212 
<a name="l01213"></a><a class="code" href="classMMSWindow.html#682d7bf1ee02410ff253629b206c542f">01213</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#682d7bf1ee02410ff253629b206c542f" title="Internal method: Move a child window.">MMSWindow::moveChildWindow</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *childwin, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l01214"></a>01214 
<a name="l01215"></a>01215     <span class="keywordflow">if</span> (childwin-&gt;<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()!=<a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>)
<a name="l01216"></a>01216         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01217"></a>01217 
<a name="l01218"></a>01218     childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = x;
<a name="l01219"></a>01219     childwin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = y;
<a name="l01220"></a>01220 
<a name="l01221"></a>01221     <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#106e175356c714cf63981f39c41f1fac" title="Internal method: Set the region of a child window.">setChildWindowRegion</a>(childwin, refresh);
<a name="l01222"></a>01222 }
<a name="l01223"></a>01223 
<a name="l01224"></a><a class="code" href="classMMSWindow.html#43cfc3e4ef93d129ae52017672fa8866">01224</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#43cfc3e4ef93d129ae52017672fa8866" title="Internal method: Draw a child window.">MMSWindow::drawChildWindows</a>(<a class="code" href="classMMSFBSurface.html" title="This class describes a surface.">MMSFBSurface</a> *dst_surface, <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> *region, <span class="keywordtype">int</span> offsX, <span class="keywordtype">int</span> offsY) {
<a name="l01225"></a>01225     <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a>       pw_region;
<a name="l01226"></a>01226 
<a name="l01227"></a>01227     <span class="keywordflow">if</span> (region == NULL) {
<a name="l01228"></a>01228         <span class="comment">// complete surface</span>
<a name="l01229"></a>01229         pw_region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = 0;
<a name="l01230"></a>01230         pw_region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = 0;
<a name="l01231"></a>01231         pw_region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;
<a name="l01232"></a>01232         pw_region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;
<a name="l01233"></a>01233     }
<a name="l01234"></a>01234     <span class="keywordflow">else</span> {
<a name="l01235"></a>01235         <span class="comment">// only a region</span>
<a name="l01236"></a>01236         pw_region = *region;
<a name="l01237"></a>01237     }
<a name="l01238"></a>01238 
<a name="l01239"></a>01239 <span class="comment">//printf("   *MMSWindow::drawChildWindows() - %s, %d,%d,%d,%d\n", name.c_str(),pw_region.x1,pw_region.y1,pw_region.x2,pw_region.y2);</span>
<a name="l01240"></a>01240 
<a name="l01241"></a>01241     <span class="comment">// draw all affected child windows</span>
<a name="l01242"></a>01242     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l01243"></a>01243         <a class="code" href="structMMSWindow_1_1CHILDWINS.html" title="describes a child window">CHILDWINS</a> *cw = &amp;(this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i));
<a name="l01244"></a>01244         <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> *myregion = &amp;(cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#5ac4285486b8f66269e9eac5a3d8255b" title="region of the window within parent window">region</a>);
<a name="l01245"></a>01245 
<a name="l01246"></a>01246         <span class="comment">// window pointer set?</span>
<a name="l01247"></a>01247         <span class="keywordflow">if</span> (!cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>)
<a name="l01248"></a>01248             <span class="keywordflow">continue</span>;
<a name="l01249"></a>01249 
<a name="l01250"></a>01250         <span class="comment">// if the window has no opacity then continue</span>
<a name="l01251"></a>01251         <span class="keywordflow">if</span> (!cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#418930c11f3a5c48c1357a9d382332ff" title="opacity of the window">opacity</a>)
<a name="l01252"></a>01252             <span class="keywordflow">continue</span>;
<a name="l01253"></a>01253 
<a name="l01254"></a>01254         <span class="keywordflow">if</span> (!((myregion-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> &lt; pw_region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>)||(myregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> &lt; pw_region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>)
<a name="l01255"></a>01255             ||(myregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> &gt; pw_region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>)||(myregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> &gt; pw_region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>))) {
<a name="l01256"></a>01256 
<a name="l01257"></a>01257             <span class="comment">// the window is affected</span>
<a name="l01258"></a>01258             <span class="comment">// calc source and destination</span>
<a name="l01259"></a>01259             <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> src_rect;
<a name="l01260"></a>01260             <span class="keywordtype">int</span> dst_x = pw_region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01261"></a>01261             <span class="keywordtype">int</span> dst_y = pw_region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01262"></a>01262 
<a name="l01263"></a>01263             src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = pw_region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> - myregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01264"></a>01264             <span class="keywordflow">if</span> (src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> &lt; 0) {
<a name="l01265"></a>01265                 dst_x-= src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l01266"></a>01266                 src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = 0;
<a name="l01267"></a>01267             }
<a name="l01268"></a>01268 
<a name="l01269"></a>01269             src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = pw_region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> - myregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01270"></a>01270             <span class="keywordflow">if</span> (src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> &lt; 0) {
<a name="l01271"></a>01271                 dst_y-= src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l01272"></a>01272                 src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = 0;
<a name="l01273"></a>01273             }
<a name="l01274"></a>01274 
<a name="l01275"></a>01275             src_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = myregion-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> - myregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> + 1 - src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l01276"></a>01276             <span class="keywordflow">if</span> (myregion-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> &gt; pw_region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>)
<a name="l01277"></a>01277                 src_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>-= myregion-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> - pw_region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>;
<a name="l01278"></a>01278 
<a name="l01279"></a>01279             src_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = myregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> - myregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> + 1 - src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l01280"></a>01280             <span class="keywordflow">if</span> (myregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> &gt; pw_region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>)
<a name="l01281"></a>01281                 src_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>-= myregion-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> - pw_region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>;
<a name="l01282"></a>01282 
<a name="l01283"></a>01283             <span class="keywordflow">if</span> (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a>) {
<a name="l01284"></a>01284                 src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = <a class="code" href="mmswindow_8cpp.html#5212136ed17b7dbc5e0278dc00710455">MMSFBWINDOW_CALC_STRETCH_WIDTH_REV</a>(src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>);
<a name="l01285"></a>01285                 src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = <a class="code" href="mmswindow_8cpp.html#66789bb044a6f09f7bd0d1eaf9791d35">MMSFBWINDOW_CALC_STRETCH_HEIGHT_REV</a>(src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>);
<a name="l01286"></a>01286                 src_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = <a class="code" href="mmswindow_8cpp.html#5212136ed17b7dbc5e0278dc00710455">MMSFBWINDOW_CALC_STRETCH_WIDTH_REV</a>(src_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> , cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>);
<a name="l01287"></a>01287                 src_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = <a class="code" href="mmswindow_8cpp.html#66789bb044a6f09f7bd0d1eaf9791d35">MMSFBWINDOW_CALC_STRETCH_HEIGHT_REV</a>(src_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>);
<a name="l01288"></a>01288             }
<a name="l01289"></a>01289 
<a name="l01290"></a>01290             <span class="comment">// own surface?</span>
<a name="l01291"></a>01291             <span class="keywordtype">bool</span> os = <span class="keyword">true</span>;
<a name="l01292"></a>01292             cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l01293"></a>01293 
<a name="l01294"></a>01294             <span class="keywordflow">if</span> (os) {
<a name="l01295"></a>01295                 <span class="comment">// own surface</span>
<a name="l01296"></a>01296                 <span class="comment">// for this we support the opacity attribute and the stretch feature</span>
<a name="l01297"></a>01297 
<a name="l01298"></a>01298                 <span class="comment">// check if we have to do the "special blit"</span>
<a name="l01299"></a>01299                 <span class="comment">// "special blit" means that we have to call draw() for the window and it's childwindows</span>
<a name="l01300"></a>01300                 <span class="comment">// origin is the need_redraw flag which is set for example by targetLangChanged()</span>
<a name="l01301"></a>01301                 <span class="keywordtype">bool</span> special_blit = cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#d1df2097f4b63b77cec9fbad988060b3">need_redraw</a>;
<a name="l01302"></a>01302 
<a name="l01303"></a>01303                 <span class="keywordflow">if</span> (!special_blit) {
<a name="l01304"></a>01304                     <span class="keywordflow">if</span> (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#418930c11f3a5c48c1357a9d382332ff" title="opacity of the window">opacity</a> &lt; 255) {
<a name="l01305"></a>01305                         <span class="comment">// opacity calculation requested</span>
<a name="l01306"></a>01306                         <span class="comment">// check if at least one child window with opacity &gt; 0 does exists</span>
<a name="l01307"></a>01307                         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); c++) {
<a name="l01308"></a>01308                             <span class="keywordflow">if</span> (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(c).opacity) {
<a name="l01309"></a>01309                                 <span class="comment">// childwindow is shown</span>
<a name="l01310"></a>01310                                 special_blit = <span class="keyword">true</span>;
<a name="l01311"></a>01311                                 <span class="keywordflow">break</span>;
<a name="l01312"></a>01312                             }
<a name="l01313"></a>01313                         }
<a name="l01314"></a>01314                     }
<a name="l01315"></a>01315                     <span class="keywordflow">else</span>
<a name="l01316"></a>01316                     <span class="keywordflow">if</span> (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a>) {
<a name="l01317"></a>01317                         <span class="comment">// should be stretched</span>
<a name="l01318"></a>01318                         <span class="comment">// check if at least one child window with opacity &gt; 0 does exists</span>
<a name="l01319"></a>01319                         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); c++) {
<a name="l01320"></a>01320                             <span class="keywordflow">if</span> (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(c).opacity) {
<a name="l01321"></a>01321                                 <span class="comment">// childwindow is shown</span>
<a name="l01322"></a>01322                                 special_blit = <span class="keyword">true</span>;
<a name="l01323"></a>01323                                 <span class="keywordflow">break</span>;
<a name="l01324"></a>01324                             }
<a name="l01325"></a>01325                         }
<a name="l01326"></a>01326                     }
<a name="l01327"></a>01327                 }
<a name="l01328"></a>01328 
<a name="l01329"></a>01329                 <span class="keywordflow">if</span> (!special_blit) {
<a name="l01330"></a>01330                     <span class="comment">// now we have to find childwindows with own_surface="false"</span>
<a name="l01331"></a>01331                     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); c++) {
<a name="l01332"></a>01332                         <span class="keywordflow">if</span> (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(c).opacity) {
<a name="l01333"></a>01333                             <span class="comment">// childwindow is shown</span>
<a name="l01334"></a>01334                             <span class="keywordtype">bool</span> os = <span class="keyword">true</span>;
<a name="l01335"></a>01335                             cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(c).window-&gt;getOwnSurface(os);
<a name="l01336"></a>01336                             <span class="keywordflow">if</span> (!os) {
<a name="l01337"></a>01337                                 <span class="comment">// childwindow has no own surface</span>
<a name="l01338"></a>01338                                 special_blit = <span class="keyword">true</span>;
<a name="l01339"></a>01339                                 <span class="keywordflow">break</span>;
<a name="l01340"></a>01340                             }
<a name="l01341"></a>01341                         }
<a name="l01342"></a>01342                     }
<a name="l01343"></a>01343                 }
<a name="l01344"></a>01344 
<a name="l01345"></a>01345                 <span class="keywordflow">if</span> ((!special_blit) &amp;&amp; (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#9d5849fa1a788d50ac24d50195a0a9e1" title="special blit done">special_blit</a>)) {
<a name="l01346"></a>01346                     <span class="comment">// currently special blit is not requested</span>
<a name="l01347"></a>01347                     <span class="comment">// but the blit beforehand has "destroy" the window surface</span>
<a name="l01348"></a>01348                     <span class="comment">// so we have to redraw the window</span>
<a name="l01349"></a>01349                     <span class="comment">// note: drawing proceeds on the surface of parent window</span>
<a name="l01350"></a>01350                     <span class="comment">// note: draw() has to clear the window surface!</span>
<a name="l01351"></a>01351                     cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>(<span class="keyword">false</span>, &amp;src_rect, <span class="keyword">true</span>);
<a name="l01352"></a>01352                 }
<a name="l01353"></a>01353                 cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#9d5849fa1a788d50ac24d50195a0a9e1" title="special blit done">special_blit</a> = special_blit;
<a name="l01354"></a>01354 
<a name="l01355"></a>01355                 dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l01356"></a>01356                 cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l01357"></a>01357 
<a name="l01358"></a>01358                 <span class="keywordflow">if</span> (special_blit) {
<a name="l01359"></a>01359                     <span class="comment">// special mode</span>
<a name="l01360"></a>01360                     <span class="comment">// we MUST draw (the background) to the surface of this window</span>
<a name="l01361"></a>01361                     <span class="comment">// then we MUST draw the window stack if the child windows to the surface of this window</span>
<a name="l01362"></a>01362                     <span class="comment">// afterwards we MUST blit/stretch the result to the dst_surface</span>
<a name="l01363"></a>01363 
<a name="l01364"></a>01364                     <span class="comment">// direct draw</span>
<a name="l01365"></a>01365                     <span class="comment">// note: drawing proceeds on the surface of parent window</span>
<a name="l01366"></a>01366                     <span class="comment">// note: draw() has to clear the window surface!</span>
<a name="l01367"></a>01367                     cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>(<span class="keyword">false</span>, &amp;src_rect, <span class="keyword">true</span>);
<a name="l01368"></a>01368 
<a name="l01369"></a>01369                     <span class="comment">// draw the children of this child, let child windows draw to my surface</span>
<a name="l01370"></a>01370                     <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> reg;
<a name="l01371"></a>01371                     reg.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l01372"></a>01372                     reg.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l01373"></a>01373                     reg.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + src_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;
<a name="l01374"></a>01374                     reg.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + src_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;
<a name="l01375"></a>01375                     <span class="keywordflow">if</span>(cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>) {
<a name="l01376"></a>01376                         cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#43cfc3e4ef93d129ae52017672fa8866" title="Internal method: Draw a child window.">drawChildWindows</a>(cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>, &amp;reg,
<a name="l01377"></a>01377                                                      reg.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>, reg.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>);
<a name="l01378"></a>01378                     }
<a name="l01379"></a>01379 
<a name="l01380"></a>01380                     <span class="keywordflow">if</span> (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#418930c11f3a5c48c1357a9d382332ff" title="opacity of the window">opacity</a> &lt; 255) {
<a name="l01381"></a>01381                         <span class="comment">// set the blitting flags and color</span>
<a name="l01382"></a>01382                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>((<a class="code" href="mmsfbbase_8h.html#a9f425fccc767e2727282376f0169e1b" title="surface blitting flags">MMSFBBlittingFlags</a>) (<a class="code" href="mmsfbbase_8h.html#8a6166f8d7ba6e59b009f21c1f46d107" title="surface blitting flag: use alphachannel from source">MMSFB_BLIT_BLEND_ALPHACHANNEL</a>|<a class="code" href="mmsfbbase_8h.html#0b14231df20846c0ca7a2f750e8fb285" title="surface blitting flag: use alphachannel from color">MMSFB_BLIT_BLEND_COLORALPHA</a>));
<a name="l01383"></a>01383                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#acc585366267b25ca51898ebf2944eeb">setColor</a>(0, 0, 0, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#418930c11f3a5c48c1357a9d382332ff" title="opacity of the window">opacity</a>);
<a name="l01384"></a>01384                     }
<a name="l01385"></a>01385                     <span class="keywordflow">else</span> {
<a name="l01386"></a>01386                         <span class="comment">// set the blitting flags</span>
<a name="l01387"></a>01387                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>((<a class="code" href="mmsfbbase_8h.html#a9f425fccc767e2727282376f0169e1b" title="surface blitting flags">MMSFBBlittingFlags</a>) <a class="code" href="mmsfbbase_8h.html#8a6166f8d7ba6e59b009f21c1f46d107" title="surface blitting flag: use alphachannel from source">MMSFB_BLIT_BLEND_ALPHACHANNEL</a>);
<a name="l01388"></a>01388                     }
<a name="l01389"></a>01389 
<a name="l01390"></a>01390                     <span class="comment">// blit window front buffer to destination surface</span>
<a name="l01391"></a>01391                     <span class="keywordflow">if</span> (!cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a>) {
<a name="l01392"></a>01392                         <span class="comment">// normal blit if stretch mode is off</span>
<a name="l01393"></a>01393 <span class="comment">//DO WE NEED THE OFFSET???</span>
<a name="l01394"></a>01394 <span class="comment">//                      dst_surface-&gt;blit(cw-&gt;window-&gt;surface, &amp;src_rect, dst_x + offsX, dst_y + offsY);</span>
<a name="l01395"></a>01395 
<a name="l01396"></a>01396                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#ff470bc36b849405ccfbd746843f8726">blit</a>(cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>, &amp;src_rect, dst_x, dst_y);
<a name="l01397"></a>01397                     }
<a name="l01398"></a>01398                     <span class="keywordflow">else</span> {
<a name="l01399"></a>01399                         <span class="comment">// stretch the window to the parent surface</span>
<a name="l01400"></a>01400 <span class="comment">//DO WE NEED THE OFFSET???</span>
<a name="l01401"></a>01401 <span class="comment">/*                      MMSFBRectangle dr = MMSFBRectangle(</span>
<a name="l01402"></a>01402 <span class="comment">                                                dst_x + offsX,</span>
<a name="l01403"></a>01403 <span class="comment">                                                dst_y + offsY,</span>
<a name="l01404"></a>01404 <span class="comment">                                                MMSFBWINDOW_CALC_STRETCH_WIDTH(src_rect.w, cw-&gt;window),</span>
<a name="l01405"></a>01405 <span class="comment">                                                MMSFBWINDOW_CALC_STRETCH_HEIGHT(src_rect.h, cw-&gt;window));*/</span>
<a name="l01406"></a>01406                         <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> dr = <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a>(
<a name="l01407"></a>01407                                                 dst_x,
<a name="l01408"></a>01408                                                 dst_y,
<a name="l01409"></a>01409                                                 <a class="code" href="mmswindow_8cpp.html#b5f5315b2eb953328dc242c063acfa86">MMSFBWINDOW_CALC_STRETCH_WIDTH</a>(src_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>),
<a name="l01410"></a>01410                                                 <a class="code" href="mmswindow_8cpp.html#cdc59a738aeb7a0e1cc153ad4b34084b">MMSFBWINDOW_CALC_STRETCH_HEIGHT</a>(src_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>));
<a name="l01411"></a>01411                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#e90ff2f4b7a8f8f692dfdc0b35fac53c">stretchBlit</a>(cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>, &amp;src_rect, &amp;dr);
<a name="l01412"></a>01412                     }
<a name="l01413"></a>01413                 }
<a name="l01414"></a>01414                 <span class="keywordflow">else</span> {
<a name="l01415"></a>01415                     <span class="comment">// we can blit the surface of this window directly to the dst_surface</span>
<a name="l01416"></a>01416                     <span class="keywordflow">if</span> (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#418930c11f3a5c48c1357a9d382332ff" title="opacity of the window">opacity</a> &lt; 255) {
<a name="l01417"></a>01417                         <span class="comment">// set the blitting flags and color</span>
<a name="l01418"></a>01418                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>((<a class="code" href="mmsfbbase_8h.html#a9f425fccc767e2727282376f0169e1b" title="surface blitting flags">MMSFBBlittingFlags</a>) (<a class="code" href="mmsfbbase_8h.html#8a6166f8d7ba6e59b009f21c1f46d107" title="surface blitting flag: use alphachannel from source">MMSFB_BLIT_BLEND_ALPHACHANNEL</a>|<a class="code" href="mmsfbbase_8h.html#0b14231df20846c0ca7a2f750e8fb285" title="surface blitting flag: use alphachannel from color">MMSFB_BLIT_BLEND_COLORALPHA</a>));
<a name="l01419"></a>01419                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#acc585366267b25ca51898ebf2944eeb">setColor</a>(0, 0, 0, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#418930c11f3a5c48c1357a9d382332ff" title="opacity of the window">opacity</a>);
<a name="l01420"></a>01420                     }
<a name="l01421"></a>01421                     <span class="keywordflow">else</span> {
<a name="l01422"></a>01422                         <span class="comment">// set the blitting flags</span>
<a name="l01423"></a>01423                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>((<a class="code" href="mmsfbbase_8h.html#a9f425fccc767e2727282376f0169e1b" title="surface blitting flags">MMSFBBlittingFlags</a>) <a class="code" href="mmsfbbase_8h.html#8a6166f8d7ba6e59b009f21c1f46d107" title="surface blitting flag: use alphachannel from source">MMSFB_BLIT_BLEND_ALPHACHANNEL</a>);
<a name="l01424"></a>01424                     }
<a name="l01425"></a>01425 
<a name="l01426"></a>01426                     <span class="comment">// blit window front buffer to destination surface</span>
<a name="l01427"></a>01427                     <span class="keywordflow">if</span> (!cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a>) {
<a name="l01428"></a>01428                         <span class="comment">// normal blit if stretch mode is off</span>
<a name="l01429"></a>01429                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#ff470bc36b849405ccfbd746843f8726">blit</a>(cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>, &amp;src_rect, dst_x + offsX, dst_y + offsY);
<a name="l01430"></a>01430                     }
<a name="l01431"></a>01431                     <span class="keywordflow">else</span> {
<a name="l01432"></a>01432                         <span class="comment">// stretch the window to the parent surface</span>
<a name="l01433"></a>01433                         <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> dr = <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a>(
<a name="l01434"></a>01434                                                 dst_x + offsX,
<a name="l01435"></a>01435                                                 dst_y + offsY,
<a name="l01436"></a>01436                                                 <a class="code" href="mmswindow_8cpp.html#b5f5315b2eb953328dc242c063acfa86">MMSFBWINDOW_CALC_STRETCH_WIDTH</a>(src_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>),
<a name="l01437"></a>01437                                                 <a class="code" href="mmswindow_8cpp.html#cdc59a738aeb7a0e1cc153ad4b34084b">MMSFBWINDOW_CALC_STRETCH_HEIGHT</a>(src_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>));
<a name="l01438"></a>01438                         dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#e90ff2f4b7a8f8f692dfdc0b35fac53c">stretchBlit</a>(cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>, &amp;src_rect, &amp;dr);
<a name="l01439"></a>01439                     }
<a name="l01440"></a>01440 
<a name="l01441"></a>01441                     <span class="comment">// draw the children of this child, let child windows draw to the surface of my parent</span>
<a name="l01442"></a>01442                     <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> reg;
<a name="l01443"></a>01443                     reg.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l01444"></a>01444                     reg.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l01445"></a>01445                     reg.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + src_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;
<a name="l01446"></a>01446                     reg.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + src_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;
<a name="l01447"></a>01447                     <span class="keywordflow">if</span>(cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>) {
<a name="l01448"></a>01448                         cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#43cfc3e4ef93d129ae52017672fa8866" title="Internal method: Draw a child window.">drawChildWindows</a>(dst_surface, &amp;reg,
<a name="l01449"></a>01449                                                      dst_x + offsX - reg.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>, dst_y + offsY - reg.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>);
<a name="l01450"></a>01450                     }
<a name="l01451"></a>01451                 }
<a name="l01452"></a>01452 
<a name="l01453"></a>01453                 cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l01454"></a>01454                 dst_surface-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l01455"></a>01455             }
<a name="l01456"></a>01456             <span class="keywordflow">else</span> {
<a name="l01457"></a>01457                 <span class="comment">// no own surface</span>
<a name="l01458"></a>01458                 <span class="comment">// for this we DO NOT support the stretch feature!!!</span>
<a name="l01459"></a>01459                 <span class="keywordflow">if</span> (cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a>) {
<a name="l01460"></a>01460                     printf(<span class="stringliteral">"DISKO: Cannot stretch the window '%s' which has no own surface!\n"</span>,
<a name="l01461"></a>01461                             cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>.c_str());
<a name="l01462"></a>01462                 }
<a name="l01463"></a>01463 
<a name="l01464"></a>01464                 <span class="comment">// direct draw</span>
<a name="l01465"></a>01465                 <span class="comment">// note: drawing proceeds on the surface of parent window</span>
<a name="l01466"></a>01466                 cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>(<span class="keyword">false</span>, &amp;src_rect, <span class="keyword">false</span>, cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#418930c11f3a5c48c1357a9d382332ff" title="opacity of the window">opacity</a>);
<a name="l01467"></a>01467 
<a name="l01468"></a>01468                 <span class="comment">// draw the children of this child, let child windows draw to the surface of my parent</span>
<a name="l01469"></a>01469                 <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> reg;
<a name="l01470"></a>01470                 reg.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l01471"></a>01471                 reg.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l01472"></a>01472                 reg.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + src_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;
<a name="l01473"></a>01473                 reg.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = src_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + src_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;
<a name="l01474"></a>01474                 <span class="keywordflow">if</span>(cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>) {
<a name="l01475"></a>01475                     cw-&gt;<a class="code" href="structMMSWindow_1_1CHILDWINS.html#7653964eeabb8e8b9b657493d267c4cf" title="points to the child window">window</a>-&gt;<a class="code" href="classMMSWindow.html#43cfc3e4ef93d129ae52017672fa8866" title="Internal method: Draw a child window.">drawChildWindows</a>(dst_surface, &amp;reg,
<a name="l01476"></a>01476                                                  dst_x + offsX - reg.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>, dst_y + offsY - reg.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>);
<a name="l01477"></a>01477                 }
<a name="l01478"></a>01478             }
<a name="l01479"></a>01479         }
<a name="l01480"></a>01480     }
<a name="l01481"></a>01481 }
<a name="l01482"></a>01482 
<a name="l01483"></a>01483 
<a name="l01484"></a>01484 
<a name="l01485"></a><a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405">01485</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">MMSWindow::flipWindow</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *win, <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> *region, <a class="code" href="mmsfbbase_8h.html#6bb33a322e19e609aba416420dfa1c67" title="surface flip flags">MMSFBFlipFlags</a> <a class="code" href="classMMSWindow.html#4e2667b77c6bad535dc71a2c4a292204" title="window creation flags">flags</a>,
<a name="l01486"></a>01486                            <span class="keywordtype">bool</span> flipChildSurface, <span class="keywordtype">bool</span> locked) {
<a name="l01487"></a>01487     <a class="code" href="classMMSFBSurface.html" title="This class describes a surface.">MMSFBSurface</a>    *pw_surface;
<a name="l01488"></a>01488     <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a>       pw_region;
<a name="l01489"></a>01489 
<a name="l01490"></a>01490     <span class="comment">// stop parallel processing</span>
<a name="l01491"></a>01491     <span class="keywordflow">if</span> (!locked)
<a name="l01492"></a>01492 <span class="comment">//PUP        flipLock.lock();</span>
<a name="l01493"></a>01493         <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l01494"></a>01494 
<a name="l01495"></a>01495     <span class="keywordflow">if</span> (!win) win = <span class="keyword">this</span>;
<a name="l01496"></a>01496     <span class="keywordflow">if</span> (win-&gt;<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()!=<a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>) {
<a name="l01497"></a>01497         <span class="comment">// normal parent window</span>
<a name="l01498"></a>01498         pw_surface = win-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>;
<a name="l01499"></a>01499         <span class="keywordflow">if</span> (region == NULL) {
<a name="l01500"></a>01500             <span class="comment">// complete surface</span>
<a name="l01501"></a>01501             pw_region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = 0;
<a name="l01502"></a>01502             pw_region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = 0;
<a name="l01503"></a>01503             pw_region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = win-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;
<a name="l01504"></a>01504             pw_region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = win-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;
<a name="l01505"></a>01505         }
<a name="l01506"></a>01506         <span class="keywordflow">else</span> {
<a name="l01507"></a>01507             <span class="comment">// only a region</span>
<a name="l01508"></a>01508             pw_region = *region;
<a name="l01509"></a>01509         }
<a name="l01510"></a>01510     }
<a name="l01511"></a>01511     <span class="keywordflow">else</span> {
<a name="l01512"></a>01512         <span class="comment">// child window</span>
<a name="l01513"></a>01513         <span class="keywordtype">int</span> z = -1;
<a name="l01514"></a>01514         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l01515"></a>01515             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window == win) {
<a name="l01516"></a>01516                 <span class="comment">// child window found, flip it</span>
<a name="l01517"></a>01517                 <span class="keywordflow">if</span> (flipChildSurface) {
<a name="l01518"></a>01518                     <span class="keywordtype">bool</span> os;
<a name="l01519"></a>01519                     win-&gt;<a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l01520"></a>01520                     <span class="keywordflow">if</span> (os) {
<a name="l01521"></a>01521                         <span class="comment">// the child window has an own surface which we have to flip</span>
<a name="l01522"></a>01522                         <span class="comment">// if the child window has NO own surface, the window will be redrawed by the parent automatically</span>
<a name="l01523"></a>01523                         win-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l01524"></a>01524                         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flip"</span>);
<a name="l01525"></a>01525                         win-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>(region);
<a name="l01526"></a>01526                         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flip"</span>);
<a name="l01527"></a>01527                         win-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l01528"></a>01528                     }
<a name="l01529"></a>01529                 }
<a name="l01530"></a>01530 
<a name="l01531"></a>01531                 <span class="comment">// return if parent window is not shown</span>
<a name="l01532"></a>01532                 <span class="keywordflow">if</span> ((win-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>()==<span class="keyword">false</span>)&amp;&amp;(win-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a>==<span class="keyword">false</span>)) {
<a name="l01533"></a>01533                     <span class="comment">// unlock</span>
<a name="l01534"></a>01534                     <span class="keywordflow">if</span> (!locked)
<a name="l01535"></a>01535 <span class="comment">//PUP                        flipLock.unlock();</span>
<a name="l01536"></a>01536                         <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01537"></a>01537                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01538"></a>01538                 }
<a name="l01539"></a>01539 
<a name="l01540"></a>01540                 <span class="comment">// return if opacity is zero</span>
<a name="l01541"></a>01541                 <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).opacity==0)&amp;&amp;(this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).oldopacity==0)) {
<a name="l01542"></a>01542                     <span class="comment">// unlock</span>
<a name="l01543"></a>01543                     <span class="keywordflow">if</span> (!locked)
<a name="l01544"></a>01544 <span class="comment">//PUP                        flipLock.unlock();</span>
<a name="l01545"></a>01545                         <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01546"></a>01546                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01547"></a>01547                 }
<a name="l01548"></a>01548 
<a name="l01549"></a>01549                 <span class="comment">// return if the child window is out of the visible parent region</span>
<a name="l01550"></a>01550                 <span class="keywordflow">if</span>   ((win-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> &gt;= win-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) || (win-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> &gt;= win-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>)
<a name="l01551"></a>01551                     ||(win-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + win-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> &lt;= 0) || (win-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + win-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> &lt;= 0)) {
<a name="l01552"></a>01552                     <span class="comment">// unlock</span>
<a name="l01553"></a>01553                     <span class="keywordflow">if</span> (!locked)
<a name="l01554"></a>01554 <span class="comment">//PUP                        flipLock.unlock();</span>
<a name="l01555"></a>01555                         <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01556"></a>01556                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01557"></a>01557                 }
<a name="l01558"></a>01558 
<a name="l01559"></a>01559                 this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).oldopacity = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).opacity;
<a name="l01560"></a>01560 
<a name="l01561"></a>01561                 <span class="comment">// get parents surface and break loop</span>
<a name="l01562"></a>01562                 pw_surface = win-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>;
<a name="l01563"></a>01563                 z = i;
<a name="l01564"></a>01564                 <span class="keywordflow">break</span>;
<a name="l01565"></a>01565             }
<a name="l01566"></a>01566         }
<a name="l01567"></a>01567 
<a name="l01568"></a>01568         <span class="comment">// window found?</span>
<a name="l01569"></a>01569         <span class="keywordflow">if</span> (z &lt; 0) {
<a name="l01570"></a>01570             <span class="comment">// not found</span>
<a name="l01571"></a>01571             <span class="keywordflow">if</span> (!locked)
<a name="l01572"></a>01572 <span class="comment">//PUP                flipLock.unlock();</span>
<a name="l01573"></a>01573                 <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01574"></a>01574 
<a name="l01575"></a>01575             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01576"></a>01576         }
<a name="l01577"></a>01577 
<a name="l01578"></a>01578         <span class="comment">// calculate the affected region on the parent surface</span>
<a name="l01579"></a>01579         <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> *myregion = &amp;(this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(z).region);
<a name="l01580"></a>01580         <span class="keywordflow">if</span> (region == NULL) {
<a name="l01581"></a>01581             <span class="comment">// complete surface</span>
<a name="l01582"></a>01582             pw_region = *myregion;
<a name="l01583"></a>01583         }
<a name="l01584"></a>01584         <span class="keywordflow">else</span> {
<a name="l01585"></a>01585             <span class="comment">// only a region</span>
<a name="l01586"></a>01586             pw_region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = myregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> + region-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01587"></a>01587             pw_region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = myregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> + region-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01588"></a>01588             pw_region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = myregion-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> + region-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>;
<a name="l01589"></a>01589             pw_region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = myregion-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> + region-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>;
<a name="l01590"></a>01590         }
<a name="l01591"></a>01591 
<a name="l01592"></a>01592         <span class="comment">// redraw the region within parent window</span>
<a name="l01593"></a>01593         <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> rect;
<a name="l01594"></a>01594         rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = pw_region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l01595"></a>01595         rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = pw_region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l01596"></a>01596         rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = pw_region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> - pw_region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> + 1;
<a name="l01597"></a>01597         rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = pw_region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> - pw_region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> + 1;
<a name="l01598"></a>01598 
<a name="l01599"></a>01599 
<a name="l01600"></a>01600         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a> == NULL) {
<a name="l01601"></a>01601             <span class="comment">// i am the top level parent</span>
<a name="l01602"></a>01602             this-&gt;<a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>(<span class="keyword">true</span>, &amp;rect);
<a name="l01603"></a>01603         } <span class="keywordflow">else</span> {
<a name="l01604"></a>01604             <span class="comment">// i am also a child, call recursive to the top level parent</span>
<a name="l01605"></a>01605             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l01606"></a>01606             <span class="keywordtype">bool</span> ret = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(win-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>, &amp;pw_region, flags, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l01607"></a>01607             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l01608"></a>01608 
<a name="l01609"></a>01609             <span class="comment">// unlock</span>
<a name="l01610"></a>01610             <span class="keywordflow">if</span> (!locked)
<a name="l01611"></a>01611 <span class="comment">//PUP                flipLock.unlock();</span>
<a name="l01612"></a>01612                 <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01613"></a>01613 
<a name="l01614"></a>01614             <span class="comment">// stop here, because the drawing of child windows is initiated by the top level parent window</span>
<a name="l01615"></a>01615             <span class="keywordflow">return</span> ret;
<a name="l01616"></a>01616         }
<a name="l01617"></a>01617 
<a name="l01618"></a>01618     }
<a name="l01619"></a>01619 
<a name="l01620"></a>01620     <span class="comment">// here we are a top level parent window</span>
<a name="l01621"></a>01621     <span class="comment">// child windows are not allowed here!!!</span>
<a name="l01622"></a>01622 
<a name="l01623"></a>01623     <span class="comment">// lock</span>
<a name="l01624"></a>01624 <span class="comment">//PUP    pw_surface-&gt;lock();</span>
<a name="l01625"></a>01625 <span class="comment">//    lock();</span>
<a name="l01626"></a>01626 
<a name="l01627"></a>01627 
<a name="l01628"></a>01628     <span class="comment">// draw all affected child windows</span>
<a name="l01629"></a>01629     <a class="code" href="classMMSWindow.html#43cfc3e4ef93d129ae52017672fa8866" title="Internal method: Draw a child window.">drawChildWindows</a>(pw_surface, &amp;pw_region);
<a name="l01630"></a>01630 
<a name="l01631"></a>01631     <span class="comment">// do the flip</span>
<a name="l01632"></a>01632     pw_surface-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l01633"></a>01633     pw_surface-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>(&amp;pw_region);
<a name="l01634"></a>01634     pw_surface-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l01635"></a>01635 
<a name="l01636"></a>01636     <span class="comment">// unlock</span>
<a name="l01637"></a>01637 <span class="comment">//PUP    pw_surface-&gt;unlock();</span>
<a name="l01638"></a>01638 <span class="comment">//    unlock();</span>
<a name="l01639"></a>01639 
<a name="l01640"></a>01640     <span class="comment">// unlock</span>
<a name="l01641"></a>01641     <span class="keywordflow">if</span> (!locked)
<a name="l01642"></a>01642 <span class="comment">//PUP        flipLock.unlock();</span>
<a name="l01643"></a>01643         <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l01644"></a>01644 
<a name="l01645"></a>01645     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01646"></a>01646 }
<a name="l01647"></a>01647 
<a name="l01648"></a>01648 
<a name="l01649"></a><a class="code" href="classMMSWindow.html#cfe40cb6b19703782fed6b5577437294">01649</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#cfe40cb6b19703782fed6b5577437294" title="Internal method: Remove the focus from a child window.">MMSWindow::removeFocusFromChildWindow</a>() {
<a name="l01650"></a>01650     <span class="comment">/* check something */</span>
<a name="l01651"></a>01651     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) <span class="keywordflow">return</span>;
<a name="l01652"></a>01652     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &gt;= this-&gt;parent-&gt;childwins.size()) <span class="keywordflow">return</span>;
<a name="l01653"></a>01653     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;parent-&gt;focusedChildWin).window != <span class="keyword">this</span>) <span class="keywordflow">return</span>;
<a name="l01654"></a>01654 
<a name="l01655"></a>01655     <span class="comment">// searching for other childwin to get the focus</span>
<a name="l01656"></a>01656     <span class="comment">// first we are searching for focusable widgets</span>
<a name="l01657"></a>01657     <span class="comment">// if nothing found, we use a shown window and set the input focus to it</span>
<a name="l01658"></a>01658     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> retry = 0; retry &lt;= 1; retry++) {
<a name="l01659"></a>01659         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = (<span class="keywordtype">int</span>)this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size()-1; i &gt;= 0; i--) {
<a name="l01660"></a>01660             <span class="keywordflow">if</span> (i == (<span class="keywordtype">int</span>)this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>) <span class="keywordflow">continue</span>;
<a name="l01661"></a>01661             <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *w = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window;
<a name="l01662"></a>01662             <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>()) <span class="keywordflow">continue</span>;
<a name="l01663"></a>01663 
<a name="l01664"></a>01664             <span class="keywordflow">if</span> (!retry) {
<a name="l01665"></a>01665                 <span class="comment">// first time: check if there are focusable widgets</span>
<a name="l01666"></a>01666                 <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#7aaf738d72d7f9932d9852606b217e9f" title="Get the number of focusable widgets.">getNumberOfFocusableWidgets</a>())
<a name="l01667"></a>01667                     <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#0aeecf9b8419e796faac96ce4b1ad380" title="Get the number of focusable child windows.">getNumberOfFocusableChildWins</a>())
<a name="l01668"></a>01668                         <span class="keywordflow">continue</span>;
<a name="l01669"></a>01669             }
<a name="l01670"></a>01670 
<a name="l01671"></a>01671             <span class="comment">// okay, i have the focus, remove it</span>
<a name="l01672"></a>01672             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#c6a8392f3cf09937275df9fcb998a731" title="Internal method: Remove the focus from the currently focused child window. Goal:...">removeChildWinFocus</a>();
<a name="l01673"></a>01673 
<a name="l01674"></a>01674             <span class="comment">// set the new focused childwin</span>
<a name="l01675"></a>01675             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = i;
<a name="l01676"></a>01676             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#38bb167e0f7d90acf1e62d0ce3e77a9c" title="Internal method: Restore the focus to the currently focused child window. Goal: Change...">restoreChildWinFocus</a>();
<a name="l01677"></a>01677             <span class="keywordflow">return</span>;
<a name="l01678"></a>01678         }
<a name="l01679"></a>01679     }
<a name="l01680"></a>01680 
<a name="l01681"></a>01681 <span class="comment">//TODO: it must be possible, that there is no focused childwin (-1)</span>
<a name="l01682"></a>01682 }
<a name="l01683"></a>01683 
<a name="l01684"></a>01684 
<a name="l01685"></a><a class="code" href="classMMSWindow.html#2cf6f44be95ef82e1f08c3c2c19d3973">01685</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#2cf6f44be95ef82e1f08c3c2c19d3973" title="Internal method: Load widgets for up/down/left/right arrows.">MMSWindow::loadArrowWidgets</a>() {
<a name="l01686"></a>01686     <span class="comment">/* searching root parent */</span>
<a name="l01687"></a>01687     <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *tmp = <span class="keyword">this</span>;
<a name="l01688"></a>01688     <span class="keywordflow">while</span> (tmp-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) tmp = tmp-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>;
<a name="l01689"></a>01689 
<a name="l01690"></a>01690     <span class="keywordtype">bool</span>    b;
<a name="l01691"></a>01691     <span class="keywordtype">string</span>  s;
<a name="l01692"></a>01692 
<a name="l01693"></a>01693     <span class="comment">/* connect arrow widgets */</span>
<a name="l01694"></a>01694     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a>)
<a name="l01695"></a>01695         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#f4d50157005ee39bbcee369ac48a7f27" title="Get the name of the uparrow widget.">getUpArrow</a>(s))
<a name="l01696"></a>01696             <span class="keywordflow">if</span> (s != <span class="stringliteral">""</span>)
<a name="l01697"></a>01697                 <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a> = tmp-&gt;<a class="code" href="classMMSWindow.html#33df330d64bfa1338dfd6dd1cddbf248" title="Find a widget with a given name.">findWidget</a>(s))) {
<a name="l01698"></a>01698                     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#c71dc1631f993e88ffe283dc00deacfb">getSelectable</a>(b))
<a name="l01699"></a>01699                         this-&gt;<a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a> = NULL;
<a name="l01700"></a>01700                     <span class="keywordflow">else</span>
<a name="l01701"></a>01701                         <span class="keywordflow">if</span> (!b)
<a name="l01702"></a>01702                             this-&gt;<a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a> = NULL;
<a name="l01703"></a>01703                 }
<a name="l01704"></a>01704 
<a name="l01705"></a>01705     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a>)
<a name="l01706"></a>01706         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#9492b545cb27ab555e123e3891f158b0" title="Get the name of the downarrow widget.">getDownArrow</a>(s))
<a name="l01707"></a>01707             <span class="keywordflow">if</span> (s != <span class="stringliteral">""</span>)
<a name="l01708"></a>01708                 <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a> = tmp-&gt;<a class="code" href="classMMSWindow.html#33df330d64bfa1338dfd6dd1cddbf248" title="Find a widget with a given name.">findWidget</a>(s))) {
<a name="l01709"></a>01709                     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#c71dc1631f993e88ffe283dc00deacfb">getSelectable</a>(b))
<a name="l01710"></a>01710                         this-&gt;<a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a> = NULL;
<a name="l01711"></a>01711                     <span class="keywordflow">else</span>
<a name="l01712"></a>01712                         <span class="keywordflow">if</span> (!b)
<a name="l01713"></a>01713                             this-&gt;<a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a> = NULL;
<a name="l01714"></a>01714                 }
<a name="l01715"></a>01715 
<a name="l01716"></a>01716     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a>)
<a name="l01717"></a>01717         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#be9b8c674ba91db46da35c8706b6c7b8" title="Get the name of the leftarrow widget.">getLeftArrow</a>(s))
<a name="l01718"></a>01718             <span class="keywordflow">if</span> (s != <span class="stringliteral">""</span>)
<a name="l01719"></a>01719                 <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a> = tmp-&gt;<a class="code" href="classMMSWindow.html#33df330d64bfa1338dfd6dd1cddbf248" title="Find a widget with a given name.">findWidget</a>(s))) {
<a name="l01720"></a>01720                     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#c71dc1631f993e88ffe283dc00deacfb">getSelectable</a>(b))
<a name="l01721"></a>01721                         this-&gt;<a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a> = NULL;
<a name="l01722"></a>01722                     <span class="keywordflow">else</span>
<a name="l01723"></a>01723                         <span class="keywordflow">if</span> (!b)
<a name="l01724"></a>01724                             this-&gt;<a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a> = NULL;
<a name="l01725"></a>01725                 }
<a name="l01726"></a>01726 
<a name="l01727"></a>01727     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a>)
<a name="l01728"></a>01728         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#b98746612a88bf3ea014e13da484a16a" title="Get the name of the rightarrow widget.">getRightArrow</a>(s))
<a name="l01729"></a>01729             <span class="keywordflow">if</span> (s != <span class="stringliteral">""</span>)
<a name="l01730"></a>01730                 <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a> = tmp-&gt;<a class="code" href="classMMSWindow.html#33df330d64bfa1338dfd6dd1cddbf248" title="Find a widget with a given name.">findWidget</a>(s))) {
<a name="l01731"></a>01731                     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#c71dc1631f993e88ffe283dc00deacfb">getSelectable</a>(b))
<a name="l01732"></a>01732                         this-&gt;<a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a> = NULL;
<a name="l01733"></a>01733                     <span class="keywordflow">else</span>
<a name="l01734"></a>01734                         <span class="keywordflow">if</span> (!b)
<a name="l01735"></a>01735                             this-&gt;<a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a> = NULL;
<a name="l01736"></a>01736                 }
<a name="l01737"></a>01737 }
<a name="l01738"></a>01738 
<a name="l01739"></a>01739 
<a name="l01740"></a><a class="code" href="classMMSWindow.html#6c01342513fc2690414b4d572b7ac49d">01740</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#6c01342513fc2690414b4d572b7ac49d" title="Internal method: Get the navigation status. With this infos we can select/unselect...">MMSWindow::getArrowWidgetStatus</a>(<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html" title="status area for the arrow widgets">ARROW_WIDGET_STATUS</a> *setarrows) {
<a name="l01741"></a>01741 
<a name="l01742"></a>01742     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>) {
<a name="l01743"></a>01743         <span class="comment">/* for my widgets */</span>
<a name="l01744"></a>01744         setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#35714870053d9ce04b0b8dae6bf61fc6" title="currently navigate up is possible?">up</a>=(this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#d8b9f679688582706374c8210e7a1ae9">canNavigateUp</a>());
<a name="l01745"></a>01745         setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#d4ee75af7bfdf7a64e9be629e0626b11" title="currently navigate down is possible?">down</a>=(this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#d8724d200de60d61aa6dfcee0948cca4">canNavigateDown</a>());
<a name="l01746"></a>01746         setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#f0915886078965bb03a098b71e448919" title="currently navigate left is possible?">left</a>=(this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#54b7b0e37c3d63f6b5228788f684b4b5">canNavigateLeft</a>());
<a name="l01747"></a>01747         setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#723a1631802957acbeb998113e1defb9" title="currently navigate right is possible?">right</a>=(this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#4317b18217c7c69c0eb4f7c712e4555c">canNavigateRight</a>());
<a name="l01748"></a>01748 
<a name="l01749"></a>01749         <span class="comment">/* check my window navigation */</span>
<a name="l01750"></a>01750         <span class="keywordflow">if</span> (!setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#35714870053d9ce04b0b8dae6bf61fc6" title="currently navigate up is possible?">up</a>)
<a name="l01751"></a>01751             setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#35714870053d9ce04b0b8dae6bf61fc6" title="currently navigate up is possible?">up</a>=(<a class="code" href="classMMSWindow.html#4f0cf8a6de042d4266a90d195227fef7" title="Get the window to which the GUI navigates if the user press up.">getNavigateUpWindow</a>());
<a name="l01752"></a>01752         <span class="keywordflow">if</span> (!setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#d4ee75af7bfdf7a64e9be629e0626b11" title="currently navigate down is possible?">down</a>)
<a name="l01753"></a>01753             setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#d4ee75af7bfdf7a64e9be629e0626b11" title="currently navigate down is possible?">down</a>=(<a class="code" href="classMMSWindow.html#5212ef060e299456185a170ab1645003" title="Get the window to which the GUI navigates if the user press down.">getNavigateDownWindow</a>());
<a name="l01754"></a>01754         <span class="keywordflow">if</span> (!setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#f0915886078965bb03a098b71e448919" title="currently navigate left is possible?">left</a>)
<a name="l01755"></a>01755             setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#f0915886078965bb03a098b71e448919" title="currently navigate left is possible?">left</a>=(<a class="code" href="classMMSWindow.html#43f3330e7592eb67da0a4a18c6bff581" title="Get the window to which the GUI navigates if the user press left.">getNavigateLeftWindow</a>());
<a name="l01756"></a>01756         <span class="keywordflow">if</span> (!setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#723a1631802957acbeb998113e1defb9" title="currently navigate right is possible?">right</a>)
<a name="l01757"></a>01757             setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#723a1631802957acbeb998113e1defb9" title="currently navigate right is possible?">right</a>=(<a class="code" href="classMMSWindow.html#70d5330b8f30abb43d66689d83912ddb" title="Get the window to which the GUI navigates if the user press right.">getNavigateRightWindow</a>());
<a name="l01758"></a>01758     }
<a name="l01759"></a>01759     <span class="keywordflow">else</span> {
<a name="l01760"></a>01760         <span class="comment">/* for my focused child window */</span>
<a name="l01761"></a>01761         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.empty()) {
<a name="l01762"></a>01762             <span class="keywordflow">try</span> {
<a name="l01763"></a>01763                 <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *fWin = <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).window;
<a name="l01764"></a>01764 
<a name="l01765"></a>01765                 <span class="comment">/* get all the states (my own and all children) */</span>
<a name="l01766"></a>01766                 fWin-&gt;<a class="code" href="classMMSWindow.html#6c01342513fc2690414b4d572b7ac49d" title="Internal method: Get the navigation status. With this infos we can select/unselect...">getArrowWidgetStatus</a>(setarrows);
<a name="l01767"></a>01767             } <span class="keywordflow">catch</span> (std::exception&amp;) {
<a name="l01768"></a>01768                 <span class="keywordflow">return</span>;
<a name="l01769"></a>01769             }
<a name="l01770"></a>01770 
<a name="l01771"></a>01771             <span class="comment">/* check my window navigation */</span>
<a name="l01772"></a>01772             <span class="keywordflow">if</span> (!setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#35714870053d9ce04b0b8dae6bf61fc6" title="currently navigate up is possible?">up</a>)
<a name="l01773"></a>01773                 setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#35714870053d9ce04b0b8dae6bf61fc6" title="currently navigate up is possible?">up</a>=(<a class="code" href="classMMSWindow.html#4f0cf8a6de042d4266a90d195227fef7" title="Get the window to which the GUI navigates if the user press up.">getNavigateUpWindow</a>());
<a name="l01774"></a>01774             <span class="keywordflow">if</span> (!setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#d4ee75af7bfdf7a64e9be629e0626b11" title="currently navigate down is possible?">down</a>)
<a name="l01775"></a>01775                 setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#d4ee75af7bfdf7a64e9be629e0626b11" title="currently navigate down is possible?">down</a>=(<a class="code" href="classMMSWindow.html#5212ef060e299456185a170ab1645003" title="Get the window to which the GUI navigates if the user press down.">getNavigateDownWindow</a>());
<a name="l01776"></a>01776             <span class="keywordflow">if</span> (!setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#f0915886078965bb03a098b71e448919" title="currently navigate left is possible?">left</a>)
<a name="l01777"></a>01777                 setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#f0915886078965bb03a098b71e448919" title="currently navigate left is possible?">left</a>=(<a class="code" href="classMMSWindow.html#43f3330e7592eb67da0a4a18c6bff581" title="Get the window to which the GUI navigates if the user press left.">getNavigateLeftWindow</a>());
<a name="l01778"></a>01778             <span class="keywordflow">if</span> (!setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#723a1631802957acbeb998113e1defb9" title="currently navigate right is possible?">right</a>)
<a name="l01779"></a>01779                 setarrows-&gt;<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#723a1631802957acbeb998113e1defb9" title="currently navigate right is possible?">right</a>=(<a class="code" href="classMMSWindow.html#70d5330b8f30abb43d66689d83912ddb" title="Get the window to which the GUI navigates if the user press right.">getNavigateRightWindow</a>());
<a name="l01780"></a>01780 
<a name="l01781"></a>01781         }
<a name="l01782"></a>01782     }
<a name="l01783"></a>01783 }
<a name="l01784"></a>01784 
<a name="l01785"></a><a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44">01785</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">MMSWindow::switchArrowWidgets</a>() {
<a name="l01786"></a>01786     <a class="code" href="classMMSWindow.html#f47a547f3bae106e1daaa99664614bfa" title="lock the pre-calculation of the navigation">preCalcNaviLock</a>.<a class="code" href="classMMSMutex.html#3e92cd5170706c0d1a0f5c87a0719494">lock</a>();
<a name="l01787"></a>01787 
<a name="l01788"></a>01788     <span class="comment">/* connect arrow widgets */</span>
<a name="l01789"></a>01789     <a class="code" href="classMMSWindow.html#2cf6f44be95ef82e1f08c3c2c19d3973" title="Internal method: Load widgets for up/down/left/right arrows.">loadArrowWidgets</a>();
<a name="l01790"></a>01790 
<a name="l01791"></a>01791     <span class="comment">/* get the new state of the arrows */</span>
<a name="l01792"></a>01792     <a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html" title="status area for the arrow widgets">ARROW_WIDGET_STATUS</a> setarrows;
<a name="l01793"></a>01793     memset(&amp;setarrows, 0, <span class="keyword">sizeof</span>(<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html" title="status area for the arrow widgets">ARROW_WIDGET_STATUS</a>));
<a name="l01794"></a>01794 
<a name="l01795"></a>01795     <span class="comment">/* get all the states (my own and all children) */</span>
<a name="l01796"></a>01796     <a class="code" href="classMMSWindow.html#6c01342513fc2690414b4d572b7ac49d" title="Internal method: Get the navigation status. With this infos we can select/unselect...">getArrowWidgetStatus</a>(&amp;setarrows);
<a name="l01797"></a>01797 
<a name="l01798"></a>01798     <span class="comment">/* switch arrow widgets */</span>
<a name="l01799"></a>01799     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a>) {
<a name="l01800"></a>01800         <span class="keywordflow">if</span> (setarrows.<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#35714870053d9ce04b0b8dae6bf61fc6" title="currently navigate up is possible?">up</a>)
<a name="l01801"></a>01801             this-&gt;<a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#40c27f819e6346415b4507c114e86b9b">setSelected</a>(<span class="keyword">true</span>);
<a name="l01802"></a>01802         <span class="keywordflow">else</span>
<a name="l01803"></a>01803             this-&gt;<a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#40c27f819e6346415b4507c114e86b9b">setSelected</a>(<span class="keyword">false</span>);
<a name="l01804"></a>01804     }
<a name="l01805"></a>01805 
<a name="l01806"></a>01806     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a>) {
<a name="l01807"></a>01807         <span class="keywordflow">if</span> (setarrows.<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#d4ee75af7bfdf7a64e9be629e0626b11" title="currently navigate down is possible?">down</a>)
<a name="l01808"></a>01808             this-&gt;<a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#40c27f819e6346415b4507c114e86b9b">setSelected</a>(<span class="keyword">true</span>);
<a name="l01809"></a>01809         <span class="keywordflow">else</span>
<a name="l01810"></a>01810             this-&gt;<a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#40c27f819e6346415b4507c114e86b9b">setSelected</a>(<span class="keyword">false</span>);
<a name="l01811"></a>01811     }
<a name="l01812"></a>01812 
<a name="l01813"></a>01813     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a>) {
<a name="l01814"></a>01814         <span class="keywordflow">if</span> (setarrows.<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#f0915886078965bb03a098b71e448919" title="currently navigate left is possible?">left</a>)
<a name="l01815"></a>01815             this-&gt;<a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#40c27f819e6346415b4507c114e86b9b">setSelected</a>(<span class="keyword">true</span>);
<a name="l01816"></a>01816         <span class="keywordflow">else</span>
<a name="l01817"></a>01817             this-&gt;<a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#40c27f819e6346415b4507c114e86b9b">setSelected</a>(<span class="keyword">false</span>);
<a name="l01818"></a>01818     }
<a name="l01819"></a>01819 
<a name="l01820"></a>01820     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a>) {
<a name="l01821"></a>01821         <span class="keywordflow">if</span> (setarrows.<a class="code" href="structMMSWindow_1_1ARROW__WIDGET__STATUS.html#723a1631802957acbeb998113e1defb9" title="currently navigate right is possible?">right</a>)
<a name="l01822"></a>01822             this-&gt;<a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#40c27f819e6346415b4507c114e86b9b">setSelected</a>(<span class="keyword">true</span>);
<a name="l01823"></a>01823         <span class="keywordflow">else</span>
<a name="l01824"></a>01824             this-&gt;<a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a>-&gt;<a class="code" href="classMMSWidget.html#40c27f819e6346415b4507c114e86b9b">setSelected</a>(<span class="keyword">false</span>);
<a name="l01825"></a>01825     }
<a name="l01826"></a>01826 
<a name="l01827"></a>01827     <span class="comment">/* recursive to my parents */</span>
<a name="l01828"></a>01828     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l01829"></a>01829         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l01830"></a>01830 
<a name="l01831"></a>01831     <a class="code" href="classMMSWindow.html#f47a547f3bae106e1daaa99664614bfa" title="lock the pre-calculation of the navigation">preCalcNaviLock</a>.<a class="code" href="classMMSMutex.html#4d74a213cf809b3b62671e19026b4219">unlock</a>();
<a name="l01832"></a>01832 }
<a name="l01833"></a>01833 
<a name="l01834"></a>01834 
<a name="l01835"></a><a class="code" href="classMMSWindow.html#12d9da7b747e979ace26dc6546168bb4">01835</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#12d9da7b747e979ace26dc6546168bb4" title="Flip the surface of the window to make changes visible.">MMSWindow::flip</a>(<span class="keywordtype">void</span>) {
<a name="l01836"></a>01836     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()==<a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>) {
<a name="l01837"></a>01837         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l01838"></a>01838         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(<span class="keyword">this</span>);
<a name="l01839"></a>01839         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l01840"></a>01840     }
<a name="l01841"></a>01841     <span class="keywordflow">else</span> {
<a name="l01842"></a>01842         this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l01843"></a>01843         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flip"</span>);
<a name="l01844"></a>01844         this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>();
<a name="l01845"></a>01845         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flip"</span>);
<a name="l01846"></a>01846         this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l01847"></a>01847     }
<a name="l01848"></a>01848     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01849"></a>01849 }
<a name="l01850"></a>01850 
<a name="l01851"></a><a class="code" href="classMMSWindow.html#062870dee3339970d3a5dcb3863baf13">01851</a> <a class="code" href="classMMSFBLayer.html" title="This class describes a display layer.">MMSFBLayer</a> *<a class="code" href="classMMSWindow.html#062870dee3339970d3a5dcb3863baf13" title="Get access to the layer of the window.">MMSWindow::getLayer</a>() {
<a name="l01852"></a>01852     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#d39d2e73d1022643e40b188a293437c3" title="access to the MMSFBLayer on which the window has to be displayed">layer</a>;
<a name="l01853"></a>01853 }
<a name="l01854"></a>01854 
<a name="l01855"></a><a class="code" href="classMMSWindow.html#871979eb7faf0654d948c49d118d32db">01855</a> <a class="code" href="classMMSFBSurface.html" title="This class describes a surface.">MMSFBSurface</a> *<a class="code" href="classMMSWindow.html#871979eb7faf0654d948c49d118d32db" title="Get access to the surface of the window needed to display video streams.">MMSWindow::getSurface</a>() {
<a name="l01856"></a>01856     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>;
<a name="l01857"></a>01857 }
<a name="l01858"></a>01858 
<a name="l01859"></a><a class="code" href="classMMSWindow.html#8f3e1058e38a27a2f7aa9e6fb2b049ca">01859</a> <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSWindow.html#8f3e1058e38a27a2f7aa9e6fb2b049ca" title="Get the parent window.">MMSWindow::getParent</a>(<span class="keywordtype">bool</span> toplevel) {
<a name="l01860"></a>01860     <span class="keywordflow">if</span> (!toplevel)
<a name="l01861"></a>01861         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>;
<a name="l01862"></a>01862     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l01863"></a>01863         <span class="keywordflow">return</span> NULL;
<a name="l01864"></a>01864     <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *pw = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#8f3e1058e38a27a2f7aa9e6fb2b049ca" title="Get the parent window.">getParent</a>(toplevel);
<a name="l01865"></a>01865     <span class="keywordflow">if</span> (pw)
<a name="l01866"></a>01866         <span class="keywordflow">return</span> pw;
<a name="l01867"></a>01867     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>;
<a name="l01868"></a>01868 }
<a name="l01869"></a>01869 
<a name="l01870"></a>01870 
<a name="l01871"></a><a class="code" href="classMMSWindow.html#b57d5e936c4188d7c58d91b77d1566e1">01871</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#b57d5e936c4188d7c58d91b77d1566e1" title="Internal method: (Re-)calculate the position and size of all widgets.">MMSWindow::recalculateChildren</a>() {
<a name="l01872"></a>01872     <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.empty()) {
<a name="l01873"></a>01873         this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(0)-&gt;setGeometry(this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>);
<a name="l01874"></a>01874     }
<a name="l01875"></a>01875 
<a name="l01876"></a>01876     <span class="comment">/* pre-calculate the navigation */</span>
<a name="l01877"></a>01877     <a class="code" href="classMMSWindow.html#4e21c34dbb01f2b87df13d9c29d6f533" title="Internal method: Do the pre-calculation of the navigation routes.">preCalcNavigation</a>();
<a name="l01878"></a>01878 }
<a name="l01879"></a>01879 
<a name="l01880"></a>01880 
<a name="l01881"></a>01881 
<a name="l01882"></a><a class="code" href="classMMSWindow.html#2147b5680f26016b850c06ebab8deb4d">01882</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2147b5680f26016b850c06ebab8deb4d" title="Internal method: Init navigation.">MMSWindow::initnav</a>() {
<a name="l01883"></a>01883 
<a name="l01884"></a>01884     <span class="comment">// get my four windows to which I have to navigate</span>
<a name="l01885"></a>01885     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l01886"></a>01886         <span class="keywordtype">string</span> s;
<a name="l01887"></a>01887         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#a4e8f39ada4cbbf55d8b9a0c81b3a93e" title="Get the name of the navigateup window.">getNavigateUp</a>(s))
<a name="l01888"></a>01888             this-&gt;<a class="code" href="classMMSWindow.html#446470a75ad31f794c05f11e478c5ccf" title="child window which is to be focused if user navigates up">navigateUpWindow</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912" title="Find a window over its name.">findWindow</a>(s);
<a name="l01889"></a>01889         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#c9c2e57cae8564ad96c8b0c474620b8c" title="Get the name of the navigatedown window.">getNavigateDown</a>(s))
<a name="l01890"></a>01890             this-&gt;<a class="code" href="classMMSWindow.html#fc9d9ea5d133caae51b933c2979c63a4" title="child window which is to be focused if user navigates down">navigateDownWindow</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912" title="Find a window over its name.">findWindow</a>(s);
<a name="l01891"></a>01891         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#c8101d2c3719ee8568bf4fc339e0b8da" title="Get the name of the navigateright window.">getNavigateRight</a>(s))
<a name="l01892"></a>01892             this-&gt;<a class="code" href="classMMSWindow.html#83e103344725791142f96f1800e461b4" title="child window which is to be focused if user navigates right">navigateRightWindow</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912" title="Find a window over its name.">findWindow</a>(s);
<a name="l01893"></a>01893         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#40b9531df602501e2949b464a8f1ebf1" title="Get the name of the navigateleft window.">getNavigateLeft</a>(s))
<a name="l01894"></a>01894             this-&gt;<a class="code" href="classMMSWindow.html#8d9b31f8bfc5532fced383e009a81dbc" title="child window which is to be focused if user navigates left">navigateLeftWindow</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912" title="Find a window over its name.">findWindow</a>(s);
<a name="l01895"></a>01895     }
<a name="l01896"></a>01896 
<a name="l01897"></a>01897     <span class="comment">// pre-calculate the navigation</span>
<a name="l01898"></a>01898     <a class="code" href="classMMSWindow.html#4e21c34dbb01f2b87df13d9c29d6f533" title="Internal method: Do the pre-calculation of the navigation routes.">preCalcNavigation</a>();
<a name="l01899"></a>01899 
<a name="l01900"></a>01900     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01901"></a>01901 }
<a name="l01902"></a>01902 
<a name="l01903"></a><a class="code" href="classMMSWindow.html#83a9731076de20925b384d3f5174e02d">01903</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#83a9731076de20925b384d3f5174e02d" title="Internal method: Load images and setup other things.">MMSWindow::init</a>() {
<a name="l01904"></a>01904 
<a name="l01905"></a>01905     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a>) {
<a name="l01906"></a>01906         <span class="comment">// already initialized</span>
<a name="l01907"></a>01907         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01908"></a>01908     }
<a name="l01909"></a>01909 
<a name="l01910"></a>01910     <span class="comment">// load images</span>
<a name="l01911"></a>01911     <span class="keywordtype">string</span> path, <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>;
<a name="l01912"></a>01912 
<a name="l01913"></a>01913     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#45aabc8f5a3c7aeccbbf00577fb5aae6" title="background image set by application">bgimage_from_external</a>) {
<a name="l01914"></a>01914         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#604c354e267046639c6bf69ad3730a97" title="Get the path to the background image of the window.">getBgImagePath</a>(path)) path = <span class="stringliteral">""</span>;
<a name="l01915"></a>01915         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#af6ba7b657c29b3b77bb9682850151e8" title="Get the name of the background image.">getBgImageName</a>(name)) name = <span class="stringliteral">""</span>;
<a name="l01916"></a>01916         this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a> = this-&gt;<a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#4d2f832f28b7a5028fadbdc6522035a8">getImage</a>(path, name);
<a name="l01917"></a>01917     }
<a name="l01918"></a>01918 
<a name="l01919"></a>01919     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#73045a650d5c78466206e3b159f2d8dd" title="Get the path to the window border images.">getBorderImagePath</a>(path)) path = <span class="stringliteral">""</span>;
<a name="l01920"></a>01920     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="mmsborderclass_8h.html#e5ee0e929c7ede8483739e98dff1efc9" title="8 possible border images">MMSBORDER_IMAGE_NUM_SIZE</a>;i++) {
<a name="l01921"></a>01921         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#eca4461fd3efe6252eaa0255bf612ff6" title="Get the name of a border image.">getBorderImageNames</a>((<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2d" title="describes the 8 possible border images">MMSBORDER_IMAGE_NUM</a>)i, name)) name = <span class="stringliteral">""</span>;
<a name="l01922"></a>01922         this-&gt;<a class="code" href="classMMSWindow.html#93487be366c499483d76e249be9de23a" title="border images">borderimages</a>[i] = this-&gt;<a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#4d2f832f28b7a5028fadbdc6522035a8">getImage</a>(path, name);
<a name="l01923"></a>01923     }
<a name="l01924"></a>01924 
<a name="l01925"></a>01925     this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a> = <span class="keyword">true</span>;
<a name="l01926"></a>01926     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01927"></a>01927 }
<a name="l01928"></a>01928 
<a name="l01929"></a><a class="code" href="classMMSWindow.html#dfa219bc6b4989434270629e9c57f52c">01929</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#dfa219bc6b4989434270629e9c57f52c" title="Internal method: Release images and other things.">MMSWindow::release</a>() {
<a name="l01930"></a>01930 
<a name="l01931"></a>01931     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a>) {
<a name="l01932"></a>01932         <span class="comment">// not initialized</span>
<a name="l01933"></a>01933         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01934"></a>01934     }
<a name="l01935"></a>01935 
<a name="l01936"></a>01936     <span class="comment">// release all images</span>
<a name="l01937"></a>01937     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#45aabc8f5a3c7aeccbbf00577fb5aae6" title="background image set by application">bgimage_from_external</a>) {
<a name="l01938"></a>01938         this-&gt;<a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#c4645fc54381ead21da4428b56fa6152">releaseImage</a>(this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a>);
<a name="l01939"></a>01939         this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a> = NULL;
<a name="l01940"></a>01940     }
<a name="l01941"></a>01941 
<a name="l01942"></a>01942     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="mmsborderclass_8h.html#e5ee0e929c7ede8483739e98dff1efc9" title="8 possible border images">MMSBORDER_IMAGE_NUM_SIZE</a>;i++) {
<a name="l01943"></a>01943         this-&gt;<a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#c4645fc54381ead21da4428b56fa6152">releaseImage</a>(this-&gt;<a class="code" href="classMMSWindow.html#93487be366c499483d76e249be9de23a" title="border images">borderimages</a>[i]);
<a name="l01944"></a>01944         this-&gt;<a class="code" href="classMMSWindow.html#93487be366c499483d76e249be9de23a" title="border images">borderimages</a>[i] = NULL;
<a name="l01945"></a>01945     }
<a name="l01946"></a>01946 
<a name="l01947"></a>01947     this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a> = <span class="keyword">false</span>;
<a name="l01948"></a>01948     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01949"></a>01949 }
<a name="l01950"></a>01950 
<a name="l01951"></a>01951 
<a name="l01952"></a><a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88">01952</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">MMSWindow::draw</a>(<span class="keywordtype">bool</span> toRedrawOnly, <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> *rect2update, <span class="keywordtype">bool</span> clear, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> opacity) {
<a name="l01953"></a>01953 
<a name="l01954"></a>01954     <span class="comment">// reset "need redraw" flag</span>
<a name="l01955"></a>01955     this-&gt;<a class="code" href="classMMSWindow.html#d1df2097f4b63b77cec9fbad988060b3">need_redraw</a> = <span class="keyword">false</span>;
<a name="l01956"></a>01956 
<a name="l01957"></a>01957     <span class="comment">// init window (e.g. load images, fonts, ...)</span>
<a name="l01958"></a>01958     <a class="code" href="classMMSWindow.html#83a9731076de20925b384d3f5174e02d" title="Internal method: Load images and setup other things.">init</a>();
<a name="l01959"></a>01959 
<a name="l01960"></a>01960     <span class="comment">// lock</span>
<a name="l01961"></a>01961     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l01962"></a>01962     this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l01963"></a>01963 
<a name="l01964"></a>01964     <span class="keywordflow">if</span> (rect2update) {
<a name="l01965"></a>01965         <span class="comment">/* use a small rectangle */</span>
<a name="l01966"></a>01966         <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> clip;
<a name="l01967"></a>01967         clip.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = rect2update-&gt;<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l01968"></a>01968         clip.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = rect2update-&gt;<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l01969"></a>01969         clip.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = rect2update-&gt;<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + rect2update-&gt;<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;
<a name="l01970"></a>01970         clip.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = rect2update-&gt;<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + rect2update-&gt;<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;
<a name="l01971"></a>01971         this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#2d577dfe2d83fc39592f5221f8de4a44">setClip</a>(&amp;clip);
<a name="l01972"></a>01972     }
<a name="l01973"></a>01973 
<a name="l01974"></a>01974     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#3ba16a2e49ebca140948b00b23acf1a9" title="Set one or more callbacks for the onDraw event.">onDraw</a>-&gt;emit(this-&gt;surface, clear)) {
<a name="l01975"></a>01975         <span class="comment">// nothing drawn by callback(s), so we have to do it</span>
<a name="l01976"></a>01976 
<a name="l01977"></a>01977         <span class="comment">// draw background</span>
<a name="l01978"></a>01978         <a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> bgcolor;
<a name="l01979"></a>01979         <a class="code" href="classMMSWindow.html#154f02edcd2242056c52786361ca79b4" title="Get the background color of the window.">getBgColor</a>(bgcolor);
<a name="l01980"></a>01980         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a>) {
<a name="l01981"></a>01981             this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l01982"></a>01982             <span class="comment">// clear all or a part of the surface</span>
<a name="l01983"></a>01983             <span class="keywordflow">if</span> (clear) {
<a name="l01984"></a>01984                 <span class="keywordflow">if</span> ((bgcolor.<a class="code" href="classMMSFBColor.html#90a3b42f72b33de18b8fc70f1e72e640" title="alphachannel">a</a> &amp;&amp; bgcolor.<a class="code" href="classMMSFBColor.html#90a3b42f72b33de18b8fc70f1e72e640" title="alphachannel">a</a> != 255) || opacity != 255 || !this-&gt;bgimage-&gt;isOpaque()) {
<a name="l01985"></a>01985                     this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>();
<a name="l01986"></a>01986                 }
<a name="l01987"></a>01987             }
<a name="l01988"></a>01988 
<a name="l01989"></a>01989             <span class="comment">// prepare for blitting</span>
<a name="l01990"></a>01990             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#2cc1d2503fae878c7aab113f54261079">setBlittingFlagsByBrightnessAlphaAndOpacityAndSource</a>(
<a name="l01991"></a>01991                                     255, (bgcolor.<a class="code" href="classMMSFBColor.html#90a3b42f72b33de18b8fc70f1e72e640" title="alphachannel">a</a>)?bgcolor.<a class="code" href="classMMSFBColor.html#90a3b42f72b33de18b8fc70f1e72e640" title="alphachannel">a</a>:255, opacity, this-&gt;bgimage);
<a name="l01992"></a>01992 
<a name="l01993"></a>01993             <span class="comment">// draw background with bgimage</span>
<a name="l01994"></a>01994             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#e90ff2f4b7a8f8f692dfdc0b35fac53c">stretchBlit</a>(this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a>, NULL, &amp;(this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>));
<a name="l01995"></a>01995             this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l01996"></a>01996         }
<a name="l01997"></a>01997         <span class="keywordflow">else</span>
<a name="l01998"></a>01998         <span class="keywordflow">if</span> (bgcolor.<a class="code" href="classMMSFBColor.html#90a3b42f72b33de18b8fc70f1e72e640" title="alphachannel">a</a>) {
<a name="l01999"></a>01999             <span class="comment">// clear all or a part of the surface</span>
<a name="l02000"></a>02000             <span class="keywordflow">if</span> (clear) {
<a name="l02001"></a>02001                 <span class="keywordflow">if</span> (bgcolor.<a class="code" href="classMMSFBColor.html#90a3b42f72b33de18b8fc70f1e72e640" title="alphachannel">a</a> != 255 || opacity != 255) {
<a name="l02002"></a>02002                     this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>();
<a name="l02003"></a>02003                 }
<a name="l02004"></a>02004             }
<a name="l02005"></a>02005 
<a name="l02006"></a>02006             <span class="comment">// prepare for drawing</span>
<a name="l02007"></a>02007             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#fc71cf9ed136d5825bda7e9e61ed78cb">setDrawingColorAndFlagsByBrightnessAndOpacity</a>(bgcolor, 255, opacity);
<a name="l02008"></a>02008 
<a name="l02009"></a>02009             <span class="comment">// draw window background</span>
<a name="l02010"></a>02010             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#f158efc1e35bc99b10659a65069b6baa">fillRectangle</a>(this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, this-&gt;innerGeom.y, this-&gt;innerGeom.w, this-&gt;innerGeom.h);
<a name="l02011"></a>02011         }
<a name="l02012"></a>02012         <span class="keywordflow">else</span> {
<a name="l02013"></a>02013             <span class="comment">// clear all or a part of the surface</span>
<a name="l02014"></a>02014             <span class="keywordflow">if</span> (clear) {
<a name="l02015"></a>02015                 this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>();
<a name="l02016"></a>02016             }
<a name="l02017"></a>02017         }
<a name="l02018"></a>02018 
<a name="l02019"></a>02019         <span class="comment">// draw children</span>
<a name="l02020"></a>02020         <span class="keywordtype">bool</span> backgroundFilled = <span class="keyword">true</span>;
<a name="l02021"></a>02021         <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.empty()) {
<a name="l02022"></a>02022             <span class="keywordflow">if</span> (opacity != 255) {
<a name="l02023"></a>02023                 printf(<span class="stringliteral">"DISKO: Window %s drawn with opacity %d, but widgets will be drawn with full opacity!\n"</span>,
<a name="l02024"></a>02024                         <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>.c_str(), opacity);
<a name="l02025"></a>02025             }
<a name="l02026"></a>02026 
<a name="l02027"></a>02027             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#60602e2b9750b19b22441f95219b1222" title="check and recalc the geometry of the widgets during the next draw()?">draw_setgeom</a>) {
<a name="l02028"></a>02028 <span class="comment">//printf("&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;AAAAAAAAAAAAAA&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n");</span>
<a name="l02029"></a>02029 
<a name="l02030"></a>02030                 <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(0)-&gt;content_size_initialized) {
<a name="l02031"></a>02031                     <span class="comment">// first time, init content size an geometry</span>
<a name="l02032"></a>02032                     this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(0)-&gt;setGeometry(this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>);
<a name="l02033"></a>02033                     this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(0)-&gt;initContentSize();
<a name="l02034"></a>02034                 }
<a name="l02035"></a>02035 
<a name="l02036"></a>02036                 this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(0)-&gt;setGeometry(this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>);
<a name="l02037"></a>02037 
<a name="l02038"></a>02038 <span class="comment">//printf("&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;AAAAAAAAAAAAAA&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n");</span>
<a name="l02039"></a>02039                 this-&gt;<a class="code" href="classMMSWindow.html#60602e2b9750b19b22441f95219b1222" title="check and recalc the geometry of the widgets during the next draw()?">draw_setgeom</a> = <span class="keyword">false</span>;
<a name="l02040"></a>02040             }
<a name="l02041"></a>02041             this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(0)-&gt;drawchildren(toRedrawOnly, &amp;backgroundFilled, rect2update);
<a name="l02042"></a>02042         }
<a name="l02043"></a>02043     }
<a name="l02044"></a>02044 
<a name="l02045"></a>02045     <span class="comment">// reset the clip</span>
<a name="l02046"></a>02046     this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#2d577dfe2d83fc39592f5221f8de4a44">setClip</a>(NULL);
<a name="l02047"></a>02047 
<a name="l02048"></a>02048     this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l02049"></a>02049     <span class="comment">// unlock</span>
<a name="l02050"></a>02050 <span class="comment">//PUP    this-&gt;surface-&gt;unlock();</span>
<a name="l02051"></a>02051     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l02052"></a>02052 
<a name="l02053"></a>02053     <span class="comment">// draw border</span>
<a name="l02054"></a>02054     <span class="keywordflow">if</span> (!toRedrawOnly)
<a name="l02055"></a>02055         <a class="code" href="classMMSWindow.html#206223ca7ad4380d724dba80a9a804ae" title="Internal method: Draw my border.">drawMyBorder</a>(opacity);
<a name="l02056"></a>02056 }
<a name="l02057"></a>02057 
<a name="l02058"></a><a class="code" href="classMMSWindow.html#206223ca7ad4380d724dba80a9a804ae">02058</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#206223ca7ad4380d724dba80a9a804ae" title="Internal method: Draw my border.">MMSWindow::drawMyBorder</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> opacity) {
<a name="l02059"></a>02059     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> borderThickness;
<a name="l02060"></a>02060     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#3a62537a4491595c94d5b6092d18e7a8" title="Get the border thickness.">getBorderThickness</a>(borderThickness))
<a name="l02061"></a>02061         borderThickness = 0;
<a name="l02062"></a>02062     <span class="keywordtype">bool</span> borderRCorners;
<a name="l02063"></a>02063     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#87f3a7c8b1d0fcb4d2a4f4e56723de7c" title="Detect if the border has round corners.">getBorderRCorners</a>(borderRCorners))
<a name="l02064"></a>02064         borderRCorners = <span class="keyword">false</span>;
<a name="l02065"></a>02065     <a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> c;
<a name="l02066"></a>02066 
<a name="l02067"></a>02067     <a class="code" href="classMMSWindow.html#08c0645d6a5d3ce0a330bc21db3d68ab" title="Get the color of the window border.">getBorderColor</a>(c);
<a name="l02068"></a>02068     <a class="code" href="mmsborder_8h.html#b2cac710c6636f666ffdb2b3574da7bc">drawBorder</a>(borderThickness, borderRCorners, this-&gt;<a class="code" href="classMMSWindow.html#93487be366c499483d76e249be9de23a" title="border images">borderimages</a>,
<a name="l02069"></a>02069                this-&gt;<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>, &amp;(this-&gt;<a class="code" href="classMMSWindow.html#2ab7d06ee8447a57ea877f315da20c04" title="border geometry set?">bordergeomset</a>), this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>,
<a name="l02070"></a>02070                0, 0, this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, this-&gt;geom.h, c, this-&gt;im, 255, opacity);
<a name="l02071"></a>02071 }
<a name="l02072"></a>02072 
<a name="l02073"></a>02073 
<a name="l02074"></a><a class="code" href="classMMSWindow.html#15a6054233a9e9dd8ce09565d9bcf5ac">02074</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#15a6054233a9e9dd8ce09565d9bcf5ac" title="Makes a window visible.">MMSWindow::show</a>() {
<a name="l02075"></a>02075 
<a name="l02076"></a>02076     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l02077"></a>02077     <span class="keywordtype">bool</span> rc = <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l02078"></a>02078     <span class="comment">// the window will be hidden in a few seconds (hideAction thread is running), wait for it</span>
<a name="l02079"></a>02079     <span class="keywordflow">while</span> (this-&gt;<a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a>)
<a name="l02080"></a>02080         <a class="code" href="tools_8h.html#214c8ed7283af52160d5b12e1e0752b4">msleep</a>(100);
<a name="l02081"></a>02081 
<a name="l02082"></a>02082     <span class="keywordflow">while</span>(1) {
<a name="l02083"></a>02083         <span class="comment">// check if the window is shown</span>
<a name="l02084"></a>02084         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>) {
<a name="l02085"></a>02085             <span class="comment">// call onAfterShow callback with already shown flag</span>
<a name="l02086"></a>02086             this-&gt;<a class="code" href="classMMSWindow.html#f87731da3a4643db8646d609906614ad" title="Set one or more callbacks for the onAfterShow event.">onAfterShow</a>-&gt;emit(<span class="keyword">this</span>, <span class="keyword">true</span>);
<a name="l02087"></a>02087             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02088"></a>02088         }
<a name="l02089"></a>02089 
<a name="l02090"></a>02090         <span class="comment">// check if the window will already be shown</span>
<a name="l02091"></a>02091         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a>) {
<a name="l02092"></a>02092             <a class="code" href="tools_8h.html#214c8ed7283af52160d5b12e1e0752b4">msleep</a>(100);
<a name="l02093"></a>02093             <span class="keywordflow">continue</span>;
<a name="l02094"></a>02094         }
<a name="l02095"></a>02095         <span class="keywordflow">break</span>;
<a name="l02096"></a>02096     }
<a name="l02097"></a>02097 
<a name="l02098"></a>02098     <span class="keywordflow">if</span>(rc)
<a name="l02099"></a>02099         <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#e68f3442c1054c4413815662cb274bf1">lock</a>();
<a name="l02100"></a>02100 
<a name="l02101"></a>02101     <span class="comment">// start the show process</span>
<a name="l02102"></a>02102     this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a> = <span class="keyword">true</span>;
<a name="l02103"></a>02103 
<a name="l02104"></a>02104     <span class="comment">// call onBeforeShow callback</span>
<a name="l02105"></a>02105     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#ba322273af774dd227a34140417809ee" title="Set one or more callbacks for the onBeforeShow event.">onBeforeShow</a>-&gt;emit(<span class="keyword">this</span>)) {
<a name="l02106"></a>02106         <span class="comment">// a callback returns false, break the show process</span>
<a name="l02107"></a>02107         this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a> = <span class="keyword">false</span>;
<a name="l02108"></a>02108         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02109"></a>02109     }
<a name="l02110"></a>02110 
<a name="l02111"></a>02111 
<a name="l02112"></a>02112     <span class="keywordflow">switch</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()) {
<a name="l02113"></a>02113     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380b8cb8eaf607b06b3078855e77515d98f" title="Main windows will be displayed over the root window.">MMSWINDOWTYPE_MAINWINDOW</a>:
<a name="l02114"></a>02114         <span class="comment">// hide all main and popup windows</span>
<a name="l02115"></a>02115         <span class="comment">// root windows will be hidden during the show animation, see beforeShowAction()</span>
<a name="l02116"></a>02116         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>) {
<a name="l02117"></a>02117             this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#e1f7315e57ce02b79a4a9afd3a0b5696">hideAllPopupWindows</a>(<span class="keyword">true</span>);
<a name="l02118"></a>02118             this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#45c239cb8900d14db923093478c9e250">hideAllMainWindows</a>();
<a name="l02119"></a>02119         }
<a name="l02120"></a>02120         <span class="keywordflow">break</span>;
<a name="l02121"></a>02121     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>:
<a name="l02122"></a>02122         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02123"></a>02123             <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>(<span class="keyword">true</span>)) {
<a name="l02124"></a>02124                 <span class="comment">// not really visible, break the show process</span>
<a name="l02125"></a>02125                 this-&gt;<a class="code" href="classMMSWindow.html#ed6f19f5da43298231027816c1b6e6eb" title="tbd">buffered_shown</a> = <span class="keyword">true</span>;
<a name="l02126"></a>02126                 this-&gt;<a class="code" href="classMMSWindow.html#b45358340ee710b7606b843ad3cd27c6" title="Internal method: Focus one widget/child window for the first time.">setFirstFocus</a>();
<a name="l02127"></a>02127                 this-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a> = <span class="keyword">true</span>;
<a name="l02128"></a>02128                 this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a> = <span class="keyword">false</span>;
<a name="l02129"></a>02129                 this-&gt;<a class="code" href="classMMSWindow.html#f87731da3a4643db8646d609906614ad" title="Set one or more callbacks for the onAfterShow event.">onAfterShow</a>-&gt;emit(<span class="keyword">this</span>, <span class="keyword">false</span>);
<a name="l02130"></a>02130                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02131"></a>02131             }
<a name="l02132"></a>02132         }
<a name="l02133"></a>02133         <span class="keywordflow">break</span>;
<a name="l02134"></a>02134     <span class="keywordflow">default</span>:
<a name="l02135"></a>02135         <span class="keywordflow">break</span>;
<a name="l02136"></a>02136     }
<a name="l02137"></a>02137 
<a name="l02138"></a>02138 
<a name="l02139"></a>02139 
<a name="l02140"></a>02140 <span class="comment">/*    if (this-&gt;action-&gt;isRunning())</span>
<a name="l02141"></a>02141 <span class="comment">        this-&gt;action-&gt;cancelBroadcast.emit(this-&gt;getType());</span>
<a name="l02142"></a>02142 <span class="comment">    this-&gt;action-&gt;setAction(MMSWACTION_SHOW);</span>
<a name="l02143"></a>02143 <span class="comment">    this-&gt;action-&gt;start();*/</span>
<a name="l02144"></a>02144 <span class="comment"></span>
<a name="l02145"></a>02145 <span class="comment">    //////////</span>
<a name="l02146"></a>02146 <span class="comment"></span>
<a name="l02147"></a>02147     <span class="comment">// do the animation in a separate thread...</span>
<a name="l02148"></a>02148     this-&gt;<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>.<a class="code" href="classMMSPulser.html#4d9e141c2e393a10b82a61849ec37233" title="Set animation steps per second.">setStepsPerSecond</a>(<a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">MMSWINDOW_ANIM_MAX_OFFSET</a> * 4);
<a name="l02149"></a>02149     this-&gt;<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>.<a class="code" href="classMMSPulser.html#85092ff9283237f21e8aabee1ff9f6fe" title="Set the maximum offset returned by getOffset().">setMaxOffset</a>(<a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">MMSWINDOW_ANIM_MAX_OFFSET</a>, <a class="code" href="mmspulser_8h.html#227d3b44ab08d4027705b7ab0f8546c2c1a204956dd499334ee9150aa3ac7bf8" title="logarithmic ascending, animation starts fast and ends smoothly">MMSPULSER_SEQ_LOG_SOFT_END</a>, <a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">MMSWINDOW_ANIM_MAX_OFFSET</a> / 2);
<a name="l02150"></a>02150     this-&gt;<a class="code" href="classMMSWindow.html#b5e2ecb511d98904b98c956fd05e7d48" title="current pulser mode">pulser_mode</a> = <a class="code" href="mmswindow_8h.html#f2dd23d1c49e2fbd9ce46a7d7335b9972d893ddc1a63d6b98353519817262780" title="show action">MMSWINDOW_PULSER_MODE_SHOW</a>;
<a name="l02151"></a>02151     this-&gt;<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>.<a class="code" href="classMMSPulser.html#ea5047848965760ba1834fe4adc7fd34" title="Start the animation.">start</a>(<span class="keyword">false</span>, <span class="keyword">true</span>);
<a name="l02152"></a>02152 
<a name="l02153"></a>02153 <span class="comment"></span>
<a name="l02154"></a>02154 <span class="comment">    ////////////</span>
<a name="l02155"></a>02155 <span class="comment"></span>
<a name="l02156"></a>02156 
<a name="l02157"></a>02157     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02158"></a>02158 }
<a name="l02159"></a>02159 
<a name="l02160"></a>02160 <span class="comment"></span>
<a name="l02161"></a>02161 <span class="comment">/////////////////////</span>
<a name="l02162"></a><a class="code" href="classMMSWindow.html#f792cf9797669841fad612536b7ee86c">02162</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#f792cf9797669841fad612536b7ee86c" title="tbd">MMSWindow::showBufferedShown</a>() {
<a name="l02163"></a>02163     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cws = <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size();
<a name="l02164"></a>02164     <span class="keywordflow">if</span> (!cws) {
<a name="l02165"></a>02165         <span class="comment">/* pre-calculate the navigation */</span>
<a name="l02166"></a>02166 <span class="comment">/*        if (this-&gt;parent) {</span>
<a name="l02167"></a>02167 <span class="comment">            this-&gt;parent-&gt;preCalcNavigation();</span>
<a name="l02168"></a>02168 <span class="comment">            this-&gt;switchArrowWidgets();</span>
<a name="l02169"></a>02169 <span class="comment">        }*/</span>
<a name="l02170"></a>02170     }
<a name="l02171"></a>02171 
<a name="l02172"></a>02172 <span class="comment">//printf("show4-0 - %s\n", name.c_str());</span>
<a name="l02173"></a>02173 
<a name="l02174"></a>02174     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l02175"></a>02175 
<a name="l02176"></a>02176     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l02177"></a>02177         <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *w = <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window;
<a name="l02178"></a>02178 
<a name="l02179"></a>02179         <span class="keywordflow">if</span> (w-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>) {
<a name="l02180"></a>02180             <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#ed6f19f5da43298231027816c1b6e6eb" title="tbd">buffered_shown</a>) {
<a name="l02181"></a>02181                 <span class="comment">// it is not the first time, so one draw is enough</span>
<a name="l02182"></a>02182                 <span class="comment">// do it only for child windows with own surfaces</span>
<a name="l02183"></a>02183                 <span class="keywordtype">bool</span> os;
<a name="l02184"></a>02184                 w-&gt;<a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l02185"></a>02185                 <span class="keywordflow">if</span> (os) {
<a name="l02186"></a>02186                     w-&gt;<a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>();
<a name="l02187"></a>02187                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l02188"></a>02188                     w-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(w);
<a name="l02189"></a>02189                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l02190"></a>02190                 }
<a name="l02191"></a>02191             }
<a name="l02192"></a>02192             <span class="keywordflow">else</span> {
<a name="l02193"></a>02193                 <span class="comment">// buffered shown, first time called</span>
<a name="l02194"></a>02194                 w-&gt;<a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>();
<a name="l02195"></a>02195                 w-&gt;<a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>();
<a name="l02196"></a>02196 
<a name="l02197"></a>02197                 <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#4e0f72750f2252e32189ba5ef65e8fa1" title="pre-calc navigation done?">precalcnav</a>) {
<a name="l02198"></a>02198                     <span class="comment">// init window (e.g. pre-calc navigation ...)</span>
<a name="l02199"></a>02199                     w-&gt;<a class="code" href="classMMSWindow.html#2147b5680f26016b850c06ebab8deb4d" title="Internal method: Init navigation.">initnav</a>();
<a name="l02200"></a>02200                     w-&gt;<a class="code" href="classMMSWindow.html#4e0f72750f2252e32189ba5ef65e8fa1" title="pre-calc navigation done?">precalcnav</a> = <span class="keyword">true</span>;
<a name="l02201"></a>02201                 }
<a name="l02202"></a>02202 
<a name="l02203"></a>02203                 <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#2819d67f1d1eb65b752e57428844c02a" title="up/down/left/right arrow widgets updated the first time?">initialArrowsDrawn</a>) {
<a name="l02204"></a>02204                     <span class="comment">// set the arrow widgets</span>
<a name="l02205"></a>02205                     w-&gt;<a class="code" href="classMMSWindow.html#2819d67f1d1eb65b752e57428844c02a" title="up/down/left/right arrow widgets updated the first time?">initialArrowsDrawn</a> = <span class="keyword">true</span>;
<a name="l02206"></a>02206                     w-&gt;<a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l02207"></a>02207                 }
<a name="l02208"></a>02208 
<a name="l02209"></a>02209                 <span class="comment">// flip only child windows with own surfaces</span>
<a name="l02210"></a>02210                 <span class="keywordtype">bool</span> os;
<a name="l02211"></a>02211                 w-&gt;<a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l02212"></a>02212                 <span class="keywordflow">if</span> (os) {
<a name="l02213"></a>02213                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l02214"></a>02214                     w-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(w);
<a name="l02215"></a>02215                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l02216"></a>02216                 }
<a name="l02217"></a>02217 
<a name="l02218"></a>02218                 <span class="keywordflow">if</span> ((w-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)||((!w-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)&amp;&amp;(w-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>))) {
<a name="l02219"></a>02219                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> opacity;
<a name="l02220"></a>02220                     <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#c709016273362ac9c5ff3f9b9e2187e2" title="Get the opacity of the window.">getOpacity</a>(opacity)) opacity = 255;
<a name="l02221"></a>02221 
<a name="l02222"></a>02222                     <span class="comment">// set final opacity</span>
<a name="l02223"></a>02223                     w-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(w, opacity);
<a name="l02224"></a>02224                 }
<a name="l02225"></a>02225 
<a name="l02226"></a>02226                 <span class="comment">// first time finished</span>
<a name="l02227"></a>02227                 w-&gt;<a class="code" href="classMMSWindow.html#ed6f19f5da43298231027816c1b6e6eb" title="tbd">buffered_shown</a> = <span class="keyword">false</span>;
<a name="l02228"></a>02228 
<a name="l02229"></a>02229                 <span class="comment">// go recursive to the child windows</span>
<a name="l02230"></a>02230                 w-&gt;<a class="code" href="classMMSWindow.html#f792cf9797669841fad612536b7ee86c" title="tbd">showBufferedShown</a>();
<a name="l02231"></a>02231             }
<a name="l02232"></a>02232         }
<a name="l02233"></a>02233     }
<a name="l02234"></a>02234 
<a name="l02235"></a>02235     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l02236"></a>02236 }
<a name="l02237"></a>02237 
<a name="l02238"></a>02238 
<a name="l02239"></a>02239 
<a name="l02240"></a><a class="code" href="classMMSWindow.html#3fa6c954489b646f748329f76bd342e2">02240</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#3fa6c954489b646f748329f76bd342e2">MMSWindow::raiseToTop</a>(<span class="keywordtype">int</span> zlevel) {
<a name="l02241"></a>02241 
<a name="l02242"></a>02242     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l02243"></a>02243 
<a name="l02244"></a>02244     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02245"></a>02245         <span class="comment">// normal parent window, set the window to top</span>
<a name="l02246"></a>02246         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>) {
<a name="l02247"></a>02247             <span class="comment">// raise MMSFBWindow to top (zbaselevel + zlevel)</span>
<a name="l02248"></a>02248             <span class="keywordtype">bool</span> ret = this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#ba615b7602b2a18743266e7b31213780">raiseToTop</a>(this-&gt;<a class="code" href="classMMSWindow.html#c99543fa4c8290455dbcf61ff2c7d7dd">zbaselevel</a> + zlevel);
<a name="l02249"></a>02249             <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l02250"></a>02250             <span class="keywordflow">return</span> ret;
<a name="l02251"></a>02251         }
<a name="l02252"></a>02252         <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l02253"></a>02253         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02254"></a>02254     }
<a name="l02255"></a>02255 
<a name="l02256"></a>02256     <span class="comment">// child window, change the childwins vector</span>
<a name="l02257"></a>02257     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l02258"></a>02258         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window == <span class="keyword">this</span>) {
<a name="l02259"></a>02259             <span class="comment">// child window found, move it to the end of the vector</span>
<a name="l02260"></a>02260             <span class="keywordflow">if</span> (i + 1 &lt; this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size()) {
<a name="l02261"></a>02261                 <span class="comment">// not at the end, moving it</span>
<a name="l02262"></a>02262                 <a class="code" href="structMMSWindow_1_1CHILDWINS.html" title="describes a child window">CHILDWINS</a> cw = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i);
<a name="l02263"></a>02263                 this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.erase(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.begin()+i);
<a name="l02264"></a>02264                 <span class="keywordtype">bool</span> aot = <span class="keyword">false</span>;
<a name="l02265"></a>02265                 this-&gt;<a class="code" href="classMMSWindow.html#aae984f71f967f92da6f33e1d8a468d4" title="Detect if the window will be permanently displayed at the top of the window stack...">getAlwaysOnTop</a>(aot);
<a name="l02266"></a>02266                 <span class="keywordflow">if</span> (!aot) {
<a name="l02267"></a>02267                     <span class="comment">// normal stack position, move window before windows with "always on top" flag</span>
<a name="l02268"></a>02268                     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.insert(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.begin() + this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a> - 1, cw);
<a name="l02269"></a>02269 
<a name="l02270"></a>02270                     <span class="keywordflow">if</span> (i &lt; this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a>) {
<a name="l02271"></a>02271                         <span class="comment">// window is already in the "normal" area</span>
<a name="l02272"></a>02272                         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> == i) {
<a name="l02273"></a>02273                             <span class="comment">// focused child window is raised</span>
<a name="l02274"></a>02274                             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a> - 1;
<a name="l02275"></a>02275                         }
<a name="l02276"></a>02276                         <span class="keywordflow">else</span> {
<a name="l02277"></a>02277                             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &lt; this-&gt;parent-&gt;always_on_top_index) {
<a name="l02278"></a>02278                                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &gt; i) {
<a name="l02279"></a>02279                                     <span class="comment">// the focused window will not be changed here!!!</span>
<a name="l02280"></a>02280                                     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>--;
<a name="l02281"></a>02281                                 }
<a name="l02282"></a>02282                             }
<a name="l02283"></a>02283                         }
<a name="l02284"></a>02284                     }
<a name="l02285"></a>02285                     <span class="keywordflow">else</span> {
<a name="l02286"></a>02286                         <span class="comment">// window is switched to "normal" area</span>
<a name="l02287"></a>02287                         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a>++;
<a name="l02288"></a>02288                         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> == i) {
<a name="l02289"></a>02289                             <span class="comment">// focused child window is raised</span>
<a name="l02290"></a>02290                             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a> - 1;
<a name="l02291"></a>02291                         }
<a name="l02292"></a>02292                         <span class="keywordflow">else</span> {
<a name="l02293"></a>02293                             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &gt;= this-&gt;parent-&gt;always_on_top_index) {
<a name="l02294"></a>02294                                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &lt; i) {
<a name="l02295"></a>02295                                     <span class="comment">// the focused window will not be changed here!!!</span>
<a name="l02296"></a>02296                                     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>++;
<a name="l02297"></a>02297                                 }
<a name="l02298"></a>02298                             }
<a name="l02299"></a>02299                         }
<a name="l02300"></a>02300                     }
<a name="l02301"></a>02301 
<a name="l02302"></a>02302                     <span class="comment">// index to the child window</span>
<a name="l02303"></a>02303                     i = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a> - 1;
<a name="l02304"></a>02304                 }
<a name="l02305"></a>02305                 <span class="keywordflow">else</span> {
<a name="l02306"></a>02306                     <span class="comment">// window with "always on top" flag, move it to the end of list</span>
<a name="l02307"></a>02307                     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.push_back(cw);
<a name="l02308"></a>02308 
<a name="l02309"></a>02309                     <span class="keywordflow">if</span> (i &gt;= this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a>) {
<a name="l02310"></a>02310                         <span class="comment">// window is already in the "always on top" area</span>
<a name="l02311"></a>02311                         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> == i) {
<a name="l02312"></a>02312                             <span class="comment">// focused child window is raised</span>
<a name="l02313"></a>02313                             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() - 1;
<a name="l02314"></a>02314                         }
<a name="l02315"></a>02315                         <span class="keywordflow">else</span> {
<a name="l02316"></a>02316                             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &gt; i) {
<a name="l02317"></a>02317                                 <span class="comment">// the focused window will not be changed here!!!</span>
<a name="l02318"></a>02318                                 this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>--;
<a name="l02319"></a>02319                             }
<a name="l02320"></a>02320                         }
<a name="l02321"></a>02321                     }
<a name="l02322"></a>02322                     <span class="keywordflow">else</span> {
<a name="l02323"></a>02323                         <span class="comment">// window is switched to "always on top" area</span>
<a name="l02324"></a>02324                         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a>--;
<a name="l02325"></a>02325                         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> == i) {
<a name="l02326"></a>02326                             <span class="comment">// focused child window is raised</span>
<a name="l02327"></a>02327                             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() - 1;
<a name="l02328"></a>02328                         }
<a name="l02329"></a>02329                         <span class="keywordflow">else</span> {
<a name="l02330"></a>02330                             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &gt; i) {
<a name="l02331"></a>02331                                 <span class="comment">// the focused window will not be changed here!!!</span>
<a name="l02332"></a>02332                                 this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>--;
<a name="l02333"></a>02333                             }
<a name="l02334"></a>02334                         }
<a name="l02335"></a>02335                     }
<a name="l02336"></a>02336 
<a name="l02337"></a>02337                     <span class="comment">// index to the child window</span>
<a name="l02338"></a>02338                     i = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() - 1;
<a name="l02339"></a>02339                 }
<a name="l02340"></a>02340 
<a name="l02341"></a>02341                 <span class="comment">// redraw the window stack if child window and parent is shown</span>
<a name="l02342"></a>02342                 <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;shown)&amp;&amp;(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>)) {
<a name="l02343"></a>02343                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l02344"></a>02344                     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window, NULL, <a class="code" href="mmsfbbase_8h.html#76feb4832a89c2a24b3007135ba509fd" title="surface flip flag: none">MMSFB_FLIP_NONE</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);
<a name="l02345"></a>02345                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l02346"></a>02346                 }
<a name="l02347"></a>02347 
<a name="l02348"></a>02348             }
<a name="l02349"></a>02349 
<a name="l02350"></a>02350             <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l02351"></a>02351             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02352"></a>02352         }
<a name="l02353"></a>02353     }
<a name="l02354"></a>02354     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l02355"></a>02355     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02356"></a>02356 }
<a name="l02357"></a>02357 
<a name="l02358"></a><a class="code" href="classMMSWindow.html#4d88e09b0a7d3b2fc6adc8ab7b58f924">02358</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#4d88e09b0a7d3b2fc6adc8ab7b58f924">MMSWindow::lowerToBottom</a>() {
<a name="l02359"></a>02359     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02360"></a>02360         <span class="comment">// normal parent window, set the window to bottom</span>
<a name="l02361"></a>02361         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>) {
<a name="l02362"></a>02362             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#1c9e6463bfe8cdadcd3b0c01d3807e59">lowerToBottom</a>();
<a name="l02363"></a>02363         }
<a name="l02364"></a>02364         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02365"></a>02365     }
<a name="l02366"></a>02366 
<a name="l02367"></a>02367     <span class="comment">// child window, change the childwins vector</span>
<a name="l02368"></a>02368     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l02369"></a>02369     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l02370"></a>02370         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window == <span class="keyword">this</span>) {
<a name="l02371"></a>02371             <span class="comment">// child window found, move it to the beginning of the vector</span>
<a name="l02372"></a>02372             <span class="keywordflow">if</span> (i &gt; 0) {
<a name="l02373"></a>02373                 <span class="comment">// not at the beginning, moving it</span>
<a name="l02374"></a>02374                 <a class="code" href="structMMSWindow_1_1CHILDWINS.html" title="describes a child window">CHILDWINS</a> cw = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i);
<a name="l02375"></a>02375                 this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.erase(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.begin()+i);
<a name="l02376"></a>02376 
<a name="l02377"></a>02377                 <span class="keywordtype">bool</span> aot = <span class="keyword">false</span>;
<a name="l02378"></a>02378                 this-&gt;<a class="code" href="classMMSWindow.html#aae984f71f967f92da6f33e1d8a468d4" title="Detect if the window will be permanently displayed at the top of the window stack...">getAlwaysOnTop</a>(aot);
<a name="l02379"></a>02379                 <span class="keywordflow">if</span> (!aot) {
<a name="l02380"></a>02380                     <span class="comment">// normal stack position, move window to the beginning of the list</span>
<a name="l02381"></a>02381                     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.insert(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.begin(), cw);
<a name="l02382"></a>02382 
<a name="l02383"></a>02383                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &lt; i) {
<a name="l02384"></a>02384                         <span class="comment">// the focused window will not be changed here!!!</span>
<a name="l02385"></a>02385                         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>++;
<a name="l02386"></a>02386                     }
<a name="l02387"></a>02387 
<a name="l02388"></a>02388                     <span class="comment">// index to the child window</span>
<a name="l02389"></a>02389                     i = 0;
<a name="l02390"></a>02390                 }
<a name="l02391"></a>02391                 <span class="keywordflow">else</span> {
<a name="l02392"></a>02392                     <span class="comment">// window with "always on top" flag, move window before all windows with "always on top" flag</span>
<a name="l02393"></a>02393                     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.insert(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.begin() + this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a>, cw);
<a name="l02394"></a>02394 
<a name="l02395"></a>02395                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &gt;= this-&gt;parent-&gt;always_on_top_index) {
<a name="l02396"></a>02396                         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &lt; i) {
<a name="l02397"></a>02397                             <span class="comment">// the focused window will not be changed here!!!</span>
<a name="l02398"></a>02398                             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>++;
<a name="l02399"></a>02399                         }
<a name="l02400"></a>02400                     }
<a name="l02401"></a>02401 
<a name="l02402"></a>02402                     <span class="comment">// index to the child window</span>
<a name="l02403"></a>02403                     i = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#804bd8cfc10c556196b2920fdbd51d62" title="index in childwins vector for the first window with the always on top flag">always_on_top_index</a>;
<a name="l02404"></a>02404                 }
<a name="l02405"></a>02405 
<a name="l02406"></a>02406                 <span class="comment">// redraw the window stack if child window and parent is shown</span>
<a name="l02407"></a>02407                 <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;shown)&amp;&amp;(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>)) {
<a name="l02408"></a>02408                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l02409"></a>02409                     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window, NULL, <a class="code" href="mmsfbbase_8h.html#76feb4832a89c2a24b3007135ba509fd" title="surface flip flag: none">MMSFB_FLIP_NONE</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);
<a name="l02410"></a>02410                     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l02411"></a>02411                 }
<a name="l02412"></a>02412             }
<a name="l02413"></a>02413 
<a name="l02414"></a>02414             <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l02415"></a>02415             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02416"></a>02416         }
<a name="l02417"></a>02417     }
<a name="l02418"></a>02418     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l02419"></a>02419     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02420"></a>02420 }
<a name="l02421"></a>02421 
<a name="l02422"></a><a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">02422</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">MMSWindow::moveTo</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l02423"></a>02423     x&amp;= ~0x01;
<a name="l02424"></a>02424     y&amp;= ~0x01;
<a name="l02425"></a>02425     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02426"></a>02426         <span class="keywordtype">bool</span> os;
<a name="l02427"></a>02427         <a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l02428"></a>02428         <span class="keywordflow">if</span> (os) {
<a name="l02429"></a>02429             <span class="comment">// own surface</span>
<a name="l02430"></a>02430             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#df9a458679b5322c77d267c48a165333">moveTo</a>(x, y);
<a name="l02431"></a>02431         }
<a name="l02432"></a>02432         <span class="keywordflow">else</span> {
<a name="l02433"></a>02433             <span class="comment">// root, main, popup window with shared surface</span>
<a name="l02434"></a>02434             <span class="keyword">static</span> <span class="keywordtype">bool</span> firsttime = <span class="keyword">true</span>;
<a name="l02435"></a>02435             <span class="keywordflow">if</span> (firsttime) {
<a name="l02436"></a>02436                 printf(<span class="stringliteral">"DISKO: Moving window (%s) with own_surface=\"false\" is not recommended.\n"</span>,
<a name="l02437"></a>02437                         (this-&gt;<a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>==<span class="stringliteral">""</span>)?<span class="stringliteral">"noname"</span>:this-&gt;<a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>.c_str());
<a name="l02438"></a>02438                 firsttime = <span class="keyword">false</span>;
<a name="l02439"></a>02439             }
<a name="l02440"></a>02440 
<a name="l02441"></a>02441             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l02442"></a>02442             <span class="comment">// clear</span>
<a name="l02443"></a>02443             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>();
<a name="l02444"></a>02444             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flip"</span>);
<a name="l02445"></a>02445             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>();
<a name="l02446"></a>02446             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flip"</span>);
<a name="l02447"></a>02447 
<a name="l02448"></a>02448             <span class="comment">// move subsurface</span>
<a name="l02449"></a>02449             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#65093dcad5aa349ff7d83122a8ca0fc9">moveTo</a>(x, y);
<a name="l02450"></a>02450             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l02451"></a>02451 
<a name="l02452"></a>02452             <span class="comment">// move visible rectangle</span>
<a name="l02453"></a>02453             <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>;
<a name="l02454"></a>02454             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#1bbb5a0c7c9949d4f35ffe4f7b8fdecf">getVisibleRectangle</a>(&amp;vrect)) {
<a name="l02455"></a>02455                 vrect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = x;
<a name="l02456"></a>02456                 vrect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = y;
<a name="l02457"></a>02457                 this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#37e311fd08d7e3f99fef32305443dc7a">setVisibleRectangle</a>(&amp;vrect);
<a name="l02458"></a>02458             }
<a name="l02459"></a>02459 
<a name="l02460"></a>02460             <span class="comment">// refresh (redraw) window</span>
<a name="l02461"></a>02461             this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l02462"></a>02462         }
<a name="l02463"></a>02463     }
<a name="l02464"></a>02464     <span class="keywordflow">else</span> {
<a name="l02465"></a>02465         <span class="comment">// this is a child window</span>
<a name="l02466"></a>02466         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#682d7bf1ee02410ff253629b206c542f" title="Internal method: Move a child window.">moveChildWindow</a>(<span class="keyword">this</span>, x, y, refresh);
<a name="l02467"></a>02467     }
<a name="l02468"></a>02468 
<a name="l02469"></a>02469     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02470"></a>02470 }
<a name="l02471"></a>02471 
<a name="l02472"></a>02472 
<a name="l02473"></a><a class="code" href="classMMSWindow.html#a0f7486e103805010af6c68ff310d8b5">02473</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#a0f7486e103805010af6c68ff310d8b5" title="Stretch the window to the layer or the parent window using stretchBlit().">MMSWindow::stretch</a>(<span class="keywordtype">double</span> left, <span class="keywordtype">double</span> up, <span class="keywordtype">double</span> right, <span class="keywordtype">double</span> down) {
<a name="l02474"></a>02474     <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;
<a name="l02475"></a>02475 
<a name="l02476"></a>02476     <span class="comment">// TODO: currently we work for child windows only</span>
<a name="l02477"></a>02477     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02478"></a>02478 
<a name="l02479"></a>02479     <span class="comment">// reset stretch mode</span>
<a name="l02480"></a>02480     this-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a> = <span class="keyword">false</span>;
<a name="l02481"></a>02481     this-&gt;<a class="code" href="classMMSWindow.html#0345a3eaba6914e061e08f37100033f3" title="stretch the window to X percent of the window WIDTH to the left side the value is...">stretchLeft</a> = (int)(left * 256);
<a name="l02482"></a>02482     this-&gt;<a class="code" href="classMMSWindow.html#4e60f5435ade4abed8cdf224274693b6" title="stretch the window to X percent of the window HEIGHT to the up side the value is...">stretchUp</a>   = (int)(up * 256);
<a name="l02483"></a>02483     this-&gt;<a class="code" href="classMMSWindow.html#b3e1a2e480b728ee1fdfa5cb95bf6c3b" title="stretch the window to X percent of the window WIDTH to the right side the value is...">stretchRight</a>= (int)(right * 256);
<a name="l02484"></a>02484     this-&gt;<a class="code" href="classMMSWindow.html#16a4acf8f803ac505f2db966dde0722f" title="stretch the window to X percent of the window HEIGHT to the down side the value is...">stretchDown</a> = (int)(down * 256);
<a name="l02485"></a>02485 
<a name="l02486"></a>02486     <span class="keywordflow">if</span> ((left != 100)||(right != 100)||(up != 100)||(down != 100)) {
<a name="l02487"></a>02487         <span class="keywordflow">if</span> ((((left-100)+(right-100)+100) &gt; 0) &amp;&amp; (((up-100)+(down-100)+100) &gt; 0)) {
<a name="l02488"></a>02488             <span class="comment">// values accepted</span>
<a name="l02489"></a>02489             this-&gt;<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a> = <span class="keyword">true</span>;
<a name="l02490"></a>02490         }
<a name="l02491"></a>02491         <span class="keywordflow">else</span> {
<a name="l02492"></a>02492             <span class="comment">// wrong inputs</span>
<a name="l02493"></a>02493             ret = <span class="keyword">false</span>;
<a name="l02494"></a>02494         }
<a name="l02495"></a>02495     }
<a name="l02496"></a>02496 
<a name="l02497"></a>02497     <span class="comment">// re-calculate the window region and return</span>
<a name="l02498"></a>02498     <a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#106e175356c714cf63981f39c41f1fac" title="Internal method: Set the region of a child window.">setChildWindowRegion</a>(<span class="keyword">this</span>, <span class="keyword">true</span>);
<a name="l02499"></a>02499     <span class="keywordflow">return</span> ret;
<a name="l02500"></a>02500 }
<a name="l02501"></a>02501 
<a name="l02502"></a><a class="code" href="classMMSWindow.html#b6c5081e209468c869d569d46f6b473f">02502</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#b6c5081e209468c869d569d46f6b473f">MMSWindow::onBeforeAnimation</a>(<a class="code" href="classMMSPulser.html" title="This class helps the MMSGUI and user specific applications to get smooth animations...">MMSPulser</a> *<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>) {
<a name="l02503"></a>02503     <span class="keywordtype">bool</span> rc = <span class="keyword">false</span>;
<a name="l02504"></a>02504     <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#e68f3442c1054c4413815662cb274bf1">lock</a>();
<a name="l02505"></a>02505     <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classMMSWindow.html#b5e2ecb511d98904b98c956fd05e7d48" title="current pulser mode">pulser_mode</a>) {
<a name="l02506"></a>02506     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#f2dd23d1c49e2fbd9ce46a7d7335b9972d893ddc1a63d6b98353519817262780" title="show action">MMSWINDOW_PULSER_MODE_SHOW</a>:
<a name="l02507"></a>02507         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"enter beforeShowAction"</span>);
<a name="l02508"></a>02508         rc = <a class="code" href="classMMSWindow.html#c0694502b87bb98fbabf6d22ebb57b4d">beforeShowAction</a>(pulser);
<a name="l02509"></a>02509         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"leave beforeShowAction"</span>);
<a name="l02510"></a>02510         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l02511"></a>02511         <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l02512"></a>02512         <span class="keywordflow">return</span> rc;
<a name="l02513"></a>02513     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#f2dd23d1c49e2fbd9ce46a7d7335b997663e5d8520593dd3ca70fa26e5b7683a" title="hide action">MMSWINDOW_PULSER_MODE_HIDE</a>:
<a name="l02514"></a>02514         rc = <a class="code" href="classMMSWindow.html#ea505373e731d5029701e90e220312c4">beforeHideAction</a>(pulser);
<a name="l02515"></a>02515         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l02516"></a>02516         <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l02517"></a>02517         <span class="keywordflow">return</span> rc;
<a name="l02518"></a>02518     }
<a name="l02519"></a>02519 
<a name="l02520"></a>02520     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l02521"></a>02521     <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l02522"></a>02522 
<a name="l02523"></a>02523     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02524"></a>02524 }
<a name="l02525"></a>02525 
<a name="l02526"></a><a class="code" href="classMMSWindow.html#6e65c2f623a600bfadb0e7db73332a65">02526</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#6e65c2f623a600bfadb0e7db73332a65">MMSWindow::onAnimation</a>(<a class="code" href="classMMSPulser.html" title="This class helps the MMSGUI and user specific applications to get smooth animations...">MMSPulser</a> *<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>) {
<a name="l02527"></a>02527     <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#e68f3442c1054c4413815662cb274bf1">lock</a>();
<a name="l02528"></a>02528     <span class="keywordtype">bool</span> rc = <span class="keyword">false</span>;
<a name="l02529"></a>02529     <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classMMSWindow.html#b5e2ecb511d98904b98c956fd05e7d48" title="current pulser mode">pulser_mode</a>) {
<a name="l02530"></a>02530     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#f2dd23d1c49e2fbd9ce46a7d7335b9972d893ddc1a63d6b98353519817262780" title="show action">MMSWINDOW_PULSER_MODE_SHOW</a>:
<a name="l02531"></a>02531         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"enter showAction"</span>);
<a name="l02532"></a>02532         rc = <a class="code" href="classMMSWindow.html#61e2241e6f99d4472f057e6905fad53f">showAction</a>(pulser);
<a name="l02533"></a>02533         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"leave showAction"</span>);
<a name="l02534"></a>02534         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l02535"></a>02535         <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l02536"></a>02536         <span class="keywordflow">return</span> rc;
<a name="l02537"></a>02537     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#f2dd23d1c49e2fbd9ce46a7d7335b997663e5d8520593dd3ca70fa26e5b7683a" title="hide action">MMSWINDOW_PULSER_MODE_HIDE</a>:
<a name="l02538"></a>02538         rc = <a class="code" href="classMMSWindow.html#e6ef13a0a6ec966a38b62032744c3d24">hideAction</a>(pulser);
<a name="l02539"></a>02539         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l02540"></a>02540         <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l02541"></a>02541         <span class="keywordflow">return</span> rc;
<a name="l02542"></a>02542     }
<a name="l02543"></a>02543     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l02544"></a>02544     <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l02545"></a>02545     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02546"></a>02546 }
<a name="l02547"></a>02547 
<a name="l02548"></a><a class="code" href="classMMSWindow.html#3e334a6505d912696104cdefc12fa286">02548</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#3e334a6505d912696104cdefc12fa286">MMSWindow::onAfterAnimation</a>(<a class="code" href="classMMSPulser.html" title="This class helps the MMSGUI and user specific applications to get smooth animations...">MMSPulser</a> *<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>) {
<a name="l02549"></a>02549     <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#e68f3442c1054c4413815662cb274bf1">lock</a>();
<a name="l02550"></a>02550 
<a name="l02551"></a>02551     <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classMMSWindow.html#b5e2ecb511d98904b98c956fd05e7d48" title="current pulser mode">pulser_mode</a>) {
<a name="l02552"></a>02552     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#f2dd23d1c49e2fbd9ce46a7d7335b9972d893ddc1a63d6b98353519817262780" title="show action">MMSWINDOW_PULSER_MODE_SHOW</a>:
<a name="l02553"></a>02553         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"enter afterShowAction"</span>);
<a name="l02554"></a>02554         <a class="code" href="classMMSWindow.html#44ef786df8e639c2788f990c3a739b91">afterShowAction</a>(pulser);
<a name="l02555"></a>02555         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"leave afterShowAction"</span>);
<a name="l02556"></a>02556         <span class="keywordflow">break</span>;
<a name="l02557"></a>02557     <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#f2dd23d1c49e2fbd9ce46a7d7335b997663e5d8520593dd3ca70fa26e5b7683a" title="hide action">MMSWINDOW_PULSER_MODE_HIDE</a>:
<a name="l02558"></a>02558         <a class="code" href="classMMSWindow.html#2eb226372352773e4fb50f65221d9d24">afterHideAction</a>(pulser);
<a name="l02559"></a>02559         <span class="keywordflow">break</span>;
<a name="l02560"></a>02560     }
<a name="l02561"></a>02561 
<a name="l02562"></a>02562     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l02563"></a>02563     <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l02564"></a>02564 }
<a name="l02565"></a>02565 
<a name="l02566"></a><a class="code" href="classMMSWindow.html#c0694502b87bb98fbabf6d22ebb57b4d">02566</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#c0694502b87bb98fbabf6d22ebb57b4d">MMSWindow::beforeShowAction</a>(<a class="code" href="classMMSPulser.html" title="This class helps the MMSGUI and user specific applications to get smooth animations...">MMSPulser</a> *<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>) {
<a name="l02567"></a>02567     <span class="keywordflow">if</span>(<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>==<span class="keyword">true</span>) {
<a name="l02568"></a>02568         <span class="comment">// call onAfterShow callback with already shown flag</span>
<a name="l02569"></a>02569         this-&gt;<a class="code" href="classMMSWindow.html#f87731da3a4643db8646d609906614ad" title="Set one or more callbacks for the onAfterShow event.">onAfterShow</a>-&gt;emit(<span class="keyword">this</span>, <span class="keyword">true</span>);
<a name="l02570"></a>02570         this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a>=<span class="keyword">false</span>;
<a name="l02571"></a>02571         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02572"></a>02572     }
<a name="l02573"></a>02573 
<a name="l02574"></a>02574     <span class="comment">// set the first focused widget, if not set and if window can get the focus</span>
<a name="l02575"></a>02575     this-&gt;<a class="code" href="classMMSWindow.html#b45358340ee710b7606b843ad3cd27c6" title="Internal method: Focus one widget/child window for the first time.">setFirstFocus</a>();
<a name="l02576"></a>02576 
<a name="l02577"></a>02577     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>() == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>) {
<a name="l02578"></a>02578         <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> &gt;= 0) {
<a name="l02579"></a>02579             <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *fw = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).window;
<a name="l02580"></a>02580             <span class="keywordflow">if</span> ((fw != <span class="keyword">this</span>) &amp;&amp; (!fw-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>())) {
<a name="l02581"></a>02581                 <span class="comment">// focused child window is not shown!</span>
<a name="l02582"></a>02582                 <span class="comment">// so set focus to this window</span>
<a name="l02583"></a>02583                 <a class="code" href="classMMSWindow.html#440b4f9fe056188c5560a0a7fcfe4d62" title="Set the focus to this window.">setFocus</a>();
<a name="l02584"></a>02584             }
<a name="l02585"></a>02585         }
<a name="l02586"></a>02586     }
<a name="l02587"></a>02587 
<a name="l02588"></a>02588     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"try to lock beforeshow"</span>);
<a name="l02589"></a>02589     <span class="comment">// lock during draw</span>
<a name="l02590"></a>02590     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l02591"></a>02591     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"got lock beforeshow"</span>);
<a name="l02592"></a>02592 
<a name="l02593"></a>02593     <span class="comment">// optimized shown</span>
<a name="l02594"></a>02594     <a class="code" href="classMMSWindow.html#f792cf9797669841fad612536b7ee86c" title="tbd">showBufferedShown</a>();
<a name="l02595"></a>02595 
<a name="l02596"></a>02596     <span class="comment">// check if all of its parents are shown</span>
<a name="l02597"></a>02597     <span class="keywordtype">bool</span> really_shown = <span class="keyword">true</span>;
<a name="l02598"></a>02598     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l02599"></a>02599         really_shown = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>(<span class="keyword">true</span>);
<a name="l02600"></a>02600 
<a name="l02601"></a>02601 
<a name="l02602"></a>02602     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>() == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380f0bcc3227155e1b4aac8eed09a5416f5" title="Root windows will be displayed in the background.">MMSWINDOWTYPE_ROOTWINDOW</a>) {
<a name="l02603"></a>02603         <span class="comment">// hide the current root window</span>
<a name="l02604"></a>02604         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>) {
<a name="l02605"></a>02605             this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#6137832dedf064fcc36bb3a9441ac4a7">hideAllRootWindows</a>(<span class="keyword">true</span>);
<a name="l02606"></a>02606             this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#26a9aa6adbcbfbc13944c33893de7aa9">lowerToBottom</a>(<span class="keyword">this</span>);
<a name="l02607"></a>02607         }
<a name="l02608"></a>02608         <span class="keywordflow">else</span> {
<a name="l02609"></a>02609             <a class="code" href="classMMSWindow.html#4d88e09b0a7d3b2fc6adc8ab7b58f924">lowerToBottom</a>();
<a name="l02610"></a>02610         }
<a name="l02611"></a>02611     }
<a name="l02612"></a>02612     <span class="keywordflow">else</span> {
<a name="l02613"></a>02613         <span class="comment">// bring all other windows in foreground</span>
<a name="l02614"></a>02614         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02615"></a>02615             <span class="comment">// normal parent window (main or popup)</span>
<a name="l02616"></a>02616             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>) {
<a name="l02617"></a>02617                 <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call raiseToTop"</span>);
<a name="l02618"></a>02618                 this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#46a73e0f8959941d731ec3d708f3e71f">raiseToTop</a>(<span class="keyword">this</span>);
<a name="l02619"></a>02619             }
<a name="l02620"></a>02620             <span class="keywordflow">else</span> {
<a name="l02621"></a>02621                 <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call raiseToTop"</span>);
<a name="l02622"></a>02622                 <a class="code" href="classMMSWindow.html#3fa6c954489b646f748329f76bd342e2">raiseToTop</a>();
<a name="l02623"></a>02623             }
<a name="l02624"></a>02624         }
<a name="l02625"></a>02625         <span class="keywordflow">else</span> {
<a name="l02626"></a>02626             <span class="comment">// change the z-order of child windows?</span>
<a name="l02627"></a>02627             <span class="keywordtype">bool</span> staticzorder = <span class="keyword">false</span>;
<a name="l02628"></a>02628             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#b251c8f0b8846f8ce8d5961078581b97" title="Detect if the window automatically changes the zorder of child windows during show()...">getStaticZOrder</a>(staticzorder);
<a name="l02629"></a>02629             <span class="keywordflow">if</span> (!staticzorder) {
<a name="l02630"></a>02630                 <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call raiseToTop"</span>);
<a name="l02631"></a>02631                 <a class="code" href="classMMSWindow.html#3fa6c954489b646f748329f76bd342e2">raiseToTop</a>();
<a name="l02632"></a>02632             }
<a name="l02633"></a>02633         }
<a name="l02634"></a>02634     }
<a name="l02635"></a>02635 
<a name="l02636"></a>02636     <span class="keywordflow">if</span> ((<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>() == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380f0bcc3227155e1b4aac8eed09a5416f5" title="Root windows will be displayed in the background.">MMSWINDOWTYPE_ROOTWINDOW</a>) || (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>() == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380b8cb8eaf607b06b3078855e77515d98f" title="Main windows will be displayed over the root window.">MMSWINDOWTYPE_MAINWINDOW</a>)) {
<a name="l02637"></a>02637         <span class="keywordtype">bool</span> os;
<a name="l02638"></a>02638         <a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l02639"></a>02639         <span class="keywordflow">if</span> (!os) {
<a name="l02640"></a>02640             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>) {
<a name="l02641"></a>02641                 <span class="comment">// we are working with a subsurface of a fullscreen window</span>
<a name="l02642"></a>02642                 this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#37e311fd08d7e3f99fef32305443dc7a">setVisibleRectangle</a>(&amp;this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>);
<a name="l02643"></a>02643             }
<a name="l02644"></a>02644         }
<a name="l02645"></a>02645     }
<a name="l02646"></a>02646 
<a name="l02647"></a>02647     <span class="comment">// draw complete window two times!!! *********************************</span>
<a name="l02648"></a>02648     <span class="comment">// two times are needed because if window is not shown (shown=false) *</span>
<a name="l02649"></a>02649     <span class="comment">// refreshFromChild does not work!!! -&gt; but the second call to draw  *</span>
<a name="l02650"></a>02650     <span class="comment">// uses the current settings from all childs                         *</span>
<a name="l02651"></a>02651     <a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>();
<a name="l02652"></a>02652     <a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>();
<a name="l02653"></a>02653     <span class="comment">//********************************************************************</span>
<a name="l02654"></a>02654 
<a name="l02655"></a>02655     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#4e0f72750f2252e32189ba5ef65e8fa1" title="pre-calc navigation done?">precalcnav</a>) {
<a name="l02656"></a>02656         <span class="comment">// init window (e.g. pre-calc navigation ...)</span>
<a name="l02657"></a>02657         <a class="code" href="classMMSWindow.html#2147b5680f26016b850c06ebab8deb4d" title="Internal method: Init navigation.">initnav</a>();
<a name="l02658"></a>02658         this-&gt;<a class="code" href="classMMSWindow.html#4e0f72750f2252e32189ba5ef65e8fa1" title="pre-calc navigation done?">precalcnav</a> = <span class="keyword">true</span>;
<a name="l02659"></a>02659     }
<a name="l02660"></a>02660 
<a name="l02661"></a>02661     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#2819d67f1d1eb65b752e57428844c02a" title="up/down/left/right arrow widgets updated the first time?">initialArrowsDrawn</a>) {
<a name="l02662"></a>02662         <span class="comment">// set the arrow widgets</span>
<a name="l02663"></a>02663         this-&gt;<a class="code" href="classMMSWindow.html#2819d67f1d1eb65b752e57428844c02a" title="up/down/left/right arrow widgets updated the first time?">initialArrowsDrawn</a> = <span class="keyword">true</span>;
<a name="l02664"></a>02664         <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l02665"></a>02665     }
<a name="l02666"></a>02666 
<a name="l02667"></a>02667     <span class="comment">// make it visible</span>
<a name="l02668"></a>02668     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02669"></a>02669         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l02670"></a>02670         <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(<span class="keyword">this</span>);
<a name="l02671"></a>02671         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l02672"></a>02672     }
<a name="l02673"></a>02673     <span class="keywordflow">else</span> {
<a name="l02674"></a>02674         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l02675"></a>02675         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(<span class="keyword">this</span>);
<a name="l02676"></a>02676         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l02677"></a>02677     }
<a name="l02678"></a>02678 
<a name="l02679"></a>02679     <span class="comment">// drawing finished, unlock</span>
<a name="l02680"></a>02680     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l02681"></a>02681 
<a name="l02682"></a>02682     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>) {
<a name="l02683"></a>02683         <span class="comment">// show window (normally the opacity is 0 here)</span>
<a name="l02684"></a>02684         this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#24432ea3e1d8cbd802b722a0f00c4f8d">show</a>();
<a name="l02685"></a>02685     }
<a name="l02686"></a>02686 
<a name="l02687"></a>02687     <span class="comment">// window is shown (important to set it before animation!!!)</span>
<a name="l02688"></a>02688     <a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>=<span class="keyword">true</span>;
<a name="l02689"></a>02689 
<a name="l02690"></a>02690     <span class="comment">// per default only main or root windows can get inputs</span>
<a name="l02691"></a>02691     <span class="comment">// popup windows can get inputs if the modal mode is set</span>
<a name="l02692"></a>02692     <span class="comment">// child windows get the inputs from the parent main, root or popup window</span>
<a name="l02693"></a>02693     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>) {
<a name="l02694"></a>02694         <span class="keywordflow">switch</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()) {
<a name="l02695"></a>02695             <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380b8cb8eaf607b06b3078855e77515d98f" title="Main windows will be displayed over the root window.">MMSWINDOWTYPE_MAINWINDOW</a>:
<a name="l02696"></a>02696             <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380f0bcc3227155e1b4aac8eed09a5416f5" title="Root windows will be displayed in the background.">MMSWINDOWTYPE_ROOTWINDOW</a>:
<a name="l02697"></a>02697                 this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#4be86c01fa691db7c6efecfd0a9760e5">setToplevelWindow</a>(<span class="keyword">this</span>);
<a name="l02698"></a>02698                 <span class="keywordflow">break</span>;
<a name="l02699"></a>02699             <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b93802f923b27f7012799b6a746bbd9f252c0" title="Popup windows will be displayed over root and main windows.">MMSWINDOWTYPE_POPUPWINDOW</a>: {
<a name="l02700"></a>02700                 <span class="keywordtype">bool</span> modal;
<a name="l02701"></a>02701                 <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#8bbdfc384b579db42047d57aa9e63b39" title="Detect if the window has to be modal if it is focused.">getModal</a>(modal)) {
<a name="l02702"></a>02702                     <span class="keywordflow">if</span> (modal)
<a name="l02703"></a>02703                         this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#4be86c01fa691db7c6efecfd0a9760e5">setToplevelWindow</a>(<span class="keyword">this</span>);
<a name="l02704"></a>02704                 }
<a name="l02705"></a>02705                 <span class="keywordflow">break</span>;
<a name="l02706"></a>02706             }
<a name="l02707"></a>02707             <span class="keywordflow">default</span>:
<a name="l02708"></a>02708                 <span class="keywordflow">break</span>;
<a name="l02709"></a>02709         }
<a name="l02710"></a>02710     }
<a name="l02711"></a>02711 
<a name="l02712"></a>02712     <span class="comment">// check if window or parent are correctly initialized</span>
<a name="l02713"></a>02713     <span class="keywordflow">if</span> (!((this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)||((!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)&amp;&amp;(this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>)))) {
<a name="l02714"></a>02714         <span class="comment">// no, do not start the animation</span>
<a name="l02715"></a>02715         <a class="code" href="classMMSWindow.html#44ef786df8e639c2788f990c3a739b91">afterShowAction</a>(NULL);
<a name="l02716"></a>02716         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02717"></a>02717     }
<a name="l02718"></a>02718 
<a name="l02719"></a>02719     <span class="comment">// init animation values</span>
<a name="l02720"></a>02720     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#c709016273362ac9c5ff3f9b9e2187e2" title="Get the opacity of the window.">getOpacity</a>(this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a>)) this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a> = 255;
<a name="l02721"></a>02721     this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a> = <a class="code" href="classMMSWindow.html#c58e45ae572bd6367c1d1c153c02f32e" title="Get the geometry of the window.">getGeometry</a>();
<a name="l02722"></a>02722     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#b642f37c0509a35837588fdb42436ee9" title="Detect if the window has to fade-in during the show action.">getFadeIn</a>(this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a>)) this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a> = <span class="keyword">false</span>;
<a name="l02723"></a>02723     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#af44a913ca9411f3d4a82d735bbf70cb" title="Get the move-in direction of the window which is used during the show action.">getMoveIn</a>(this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a>)) this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a> = <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1feacae4b8fb1b55eb72b54874f597a960">MMSDIRECTION_NOTSET</a>;
<a name="l02724"></a>02724 
<a name="l02725"></a>02725     <span class="keywordflow">if</span> ((!really_shown)||((!this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a>)&amp;&amp;(this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a>==<a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1feacae4b8fb1b55eb72b54874f597a960">MMSDIRECTION_NOTSET</a>))) {
<a name="l02726"></a>02726         <span class="comment">// nothing to animate, set values which are valid after the animation</span>
<a name="l02727"></a>02727         <a class="code" href="classMMSWindow.html#44ef786df8e639c2788f990c3a739b91">afterShowAction</a>(pulser);
<a name="l02728"></a>02728         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02729"></a>02729     }
<a name="l02730"></a>02730 
<a name="l02731"></a>02731     <span class="comment">// calculate the steps</span>
<a name="l02732"></a>02732     <span class="keywordtype">int</span> steps = <a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">MMSWINDOW_ANIM_MAX_OFFSET</a>;
<a name="l02733"></a>02733     <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a>) {
<a name="l02734"></a>02734         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f331e0603e3b662de4178d1731e1afdfe">MMSDIRECTION_LEFT</a>:
<a name="l02735"></a>02735             this-&gt;<a class="code" href="classMMSWindow.html#afb6794f02c8631bafaa2b54d36e4306">anim_move_step</a> = (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>) / (steps+1);
<a name="l02736"></a>02736             <span class="keywordflow">break</span>;
<a name="l02737"></a>02737         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1fe77303dd7acdac1c4edd94540123ee90">MMSDIRECTION_RIGHT</a>:
<a name="l02738"></a>02738             this-&gt;<a class="code" href="classMMSWindow.html#afb6794f02c8631bafaa2b54d36e4306">anim_move_step</a> = (this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>) / (steps+1);
<a name="l02739"></a>02739             <span class="keywordflow">break</span>;
<a name="l02740"></a>02740         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f634627570f039f4ac2986f77b2bc53af">MMSDIRECTION_UP</a>:
<a name="l02741"></a>02741             this-&gt;<a class="code" href="classMMSWindow.html#afb6794f02c8631bafaa2b54d36e4306">anim_move_step</a> = (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>) / (steps+1);
<a name="l02742"></a>02742             <span class="keywordflow">break</span>;
<a name="l02743"></a>02743         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f5005f52b4c5f0785e1a90db5476efbbb">MMSDIRECTION_DOWN</a>:
<a name="l02744"></a>02744             this-&gt;<a class="code" href="classMMSWindow.html#afb6794f02c8631bafaa2b54d36e4306">anim_move_step</a> = (this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>) / (steps+1);
<a name="l02745"></a>02745             <span class="keywordflow">break</span>;
<a name="l02746"></a>02746         <span class="keywordflow">default</span>:
<a name="l02747"></a>02747             <span class="keywordflow">break</span>;
<a name="l02748"></a>02748     }
<a name="l02749"></a>02749 
<a name="l02750"></a>02750     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a>)
<a name="l02751"></a>02751         this-&gt;<a class="code" href="classMMSWindow.html#fdcbb6b6ddc5c09492779077cc7a1ffc">anim_opacity_step</a> = this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a> / (steps+1);
<a name="l02752"></a>02752 
<a name="l02753"></a>02753     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02754"></a>02754 }
<a name="l02755"></a>02755 
<a name="l02756"></a>02756 
<a name="l02757"></a><a class="code" href="classMMSWindow.html#61e2241e6f99d4472f057e6905fad53f">02757</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#61e2241e6f99d4472f057e6905fad53f">MMSWindow::showAction</a>(<a class="code" href="classMMSPulser.html" title="This class helps the MMSGUI and user specific applications to get smooth animations...">MMSPulser</a> *<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>) {
<a name="l02758"></a>02758 
<a name="l02759"></a>02759     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"enter ShowAction"</span>);
<a name="l02760"></a>02760 
<a name="l02761"></a>02761     <span class="comment">// do the animation</span>
<a name="l02762"></a>02762     <span class="keywordtype">double</span> offs = <a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">MMSWINDOW_ANIM_MAX_OFFSET</a> - pulser-&gt;<a class="code" href="classMMSPulser.html#8dfdd9f6ece4dcbbf8e992b3d6636e5c" title="Get the offset of the animation.">getOffset</a>();
<a name="l02763"></a>02763 
<a name="l02764"></a>02764 <span class="comment">//printf("111111111111111 %f %d\n", offs, pulser-&gt;getOnAnimationCounter());</span>
<a name="l02765"></a>02765 
<a name="l02766"></a>02766     <span class="comment">// move it</span>
<a name="l02767"></a>02767     <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a>) {
<a name="l02768"></a>02768         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f331e0603e3b662de4178d1731e1afdfe">MMSDIRECTION_LEFT</a>:
<a name="l02769"></a>02769             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>((<span class="keywordtype">int</span>)(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + offs * this-&gt;anim_move_step) &amp; ~0x01, this-&gt;anim_rect.y);
<a name="l02770"></a>02770             <span class="keywordflow">break</span>;
<a name="l02771"></a>02771         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1fe77303dd7acdac1c4edd94540123ee90">MMSDIRECTION_RIGHT</a>:
<a name="l02772"></a>02772             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>((<span class="keywordtype">int</span>)(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> - offs * this-&gt;anim_move_step) &amp; ~0x01, this-&gt;anim_rect.y);
<a name="l02773"></a>02773             <span class="keywordflow">break</span>;
<a name="l02774"></a>02774         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f634627570f039f4ac2986f77b2bc53af">MMSDIRECTION_UP</a>:
<a name="l02775"></a>02775             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, (<span class="keywordtype">int</span>)(this-&gt;anim_rect.y + offs * this-&gt;anim_move_step) &amp; ~0x01);
<a name="l02776"></a>02776             <span class="keywordflow">break</span>;
<a name="l02777"></a>02777         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f5005f52b4c5f0785e1a90db5476efbbb">MMSDIRECTION_DOWN</a>:
<a name="l02778"></a>02778             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, (<span class="keywordtype">int</span>)(this-&gt;anim_rect.y - offs * this-&gt;anim_move_step) &amp; ~0x01);
<a name="l02779"></a>02779             <span class="keywordflow">break</span>;
<a name="l02780"></a>02780         <span class="keywordflow">default</span>:
<a name="l02781"></a>02781             <span class="keywordflow">break</span>;
<a name="l02782"></a>02782     }
<a name="l02783"></a>02783 
<a name="l02784"></a>02784     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a>) {
<a name="l02785"></a>02785         <span class="comment">// fade it</span>
<a name="l02786"></a>02786         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l02787"></a>02787             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a> - offs * this-&gt;<a class="code" href="classMMSWindow.html#fdcbb6b6ddc5c09492779077cc7a1ffc">anim_opacity_step</a>);
<a name="l02788"></a>02788         <span class="keywordflow">else</span>
<a name="l02789"></a>02789             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(<span class="keyword">this</span>, this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a> - offs * this-&gt;anim_opacity_step);
<a name="l02790"></a>02790     }
<a name="l02791"></a>02791     <span class="keywordflow">else</span>
<a name="l02792"></a>02792     <span class="keywordflow">if</span> (pulser-&gt;<a class="code" href="classMMSPulser.html#0ef4e7784c036b0fa723a688c9a837f8" title="Get the number of onAnimation calls after the last onBeforeAnimation call.">getOnAnimationCounter</a>() == 0) {
<a name="l02793"></a>02793         <span class="comment">// no fade animation and called for the first time, set the opacity</span>
<a name="l02794"></a>02794         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l02795"></a>02795             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a>);
<a name="l02796"></a>02796         <span class="keywordflow">else</span>
<a name="l02797"></a>02797             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(<span class="keyword">this</span>, this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a>);
<a name="l02798"></a>02798     }
<a name="l02799"></a>02799 
<a name="l02800"></a>02800     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"leave ShowAction"</span>);
<a name="l02801"></a>02801 
<a name="l02802"></a>02802     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02803"></a>02803 }
<a name="l02804"></a>02804 
<a name="l02805"></a><a class="code" href="classMMSWindow.html#44ef786df8e639c2788f990c3a739b91">02805</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#44ef786df8e639c2788f990c3a739b91">MMSWindow::afterShowAction</a>(<a class="code" href="classMMSPulser.html" title="This class helps the MMSGUI and user specific applications to get smooth animations...">MMSPulser</a> *<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>) {
<a name="l02806"></a>02806     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"enter afterShowAction"</span>);
<a name="l02807"></a>02807 
<a name="l02808"></a>02808     <span class="keywordflow">if</span> (pulser) {
<a name="l02809"></a>02809         <span class="comment">// animation finished</span>
<a name="l02810"></a>02810         <span class="comment">// set final position</span>
<a name="l02811"></a>02811         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a> != <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1feacae4b8fb1b55eb72b54874f597a960">MMSDIRECTION_NOTSET</a>) {
<a name="l02812"></a>02812             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, this-&gt;anim_rect.y);
<a name="l02813"></a>02813         }
<a name="l02814"></a>02814 
<a name="l02815"></a>02815         <span class="comment">// set final opacity</span>
<a name="l02816"></a>02816         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02817"></a>02817             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a>);
<a name="l02818"></a>02818         }
<a name="l02819"></a>02819         <span class="keywordflow">else</span> {
<a name="l02820"></a>02820             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(<span class="keyword">this</span>, this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a>);
<a name="l02821"></a>02821         }
<a name="l02822"></a>02822     }
<a name="l02823"></a>02823 
<a name="l02824"></a>02824     <span class="comment">// do the rest...</span>
<a name="l02825"></a>02825     this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a>=<span class="keyword">false</span>;
<a name="l02826"></a>02826 
<a name="l02827"></a>02827     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>() == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>) {
<a name="l02828"></a>02828         <span class="comment">//TODO: if no focused childwin, then i should get the focused back</span>
<a name="l02829"></a>02829 
<a name="l02830"></a>02830         <span class="comment">// pre-calculate the navigation</span>
<a name="l02831"></a>02831         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02832"></a>02832             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#4e21c34dbb01f2b87df13d9c29d6f533" title="Internal method: Do the pre-calculation of the navigation routes.">preCalcNavigation</a>();
<a name="l02833"></a>02833             this-&gt;<a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l02834"></a>02834         }
<a name="l02835"></a>02835     }
<a name="l02836"></a>02836 
<a name="l02837"></a>02837     <span class="comment">// call onAfterShow callback without already shown flag</span>
<a name="l02838"></a>02838     this-&gt;<a class="code" href="classMMSWindow.html#f87731da3a4643db8646d609906614ad" title="Set one or more callbacks for the onAfterShow event.">onAfterShow</a>-&gt;emit(<span class="keyword">this</span>, <span class="keyword">false</span>);
<a name="l02839"></a>02839 
<a name="l02840"></a>02840     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"leave afterShowAction"</span>);
<a name="l02841"></a>02841 }
<a name="l02842"></a>02842 
<a name="l02843"></a><a class="code" href="classMMSWindow.html#ea505373e731d5029701e90e220312c4">02843</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#ea505373e731d5029701e90e220312c4">MMSWindow::beforeHideAction</a>(<a class="code" href="classMMSPulser.html" title="This class helps the MMSGUI and user specific applications to get smooth animations...">MMSPulser</a> *<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>) {
<a name="l02844"></a>02844     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>==<span class="keyword">false</span>) {
<a name="l02845"></a>02845         this-&gt;<a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a> = <span class="keyword">false</span>;
<a name="l02846"></a>02846         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02847"></a>02847     }
<a name="l02848"></a>02848 
<a name="l02849"></a>02849     <span class="comment">// check if all of its parents are shown</span>
<a name="l02850"></a>02850     <span class="keywordtype">bool</span> really_shown = this-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>(<span class="keyword">true</span>);
<a name="l02851"></a>02851 
<a name="l02852"></a>02852     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l02853"></a>02853         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>)
<a name="l02854"></a>02854             this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#225f4ea7edfbb4404e347b3ac6ba4f42">removeWindowFromToplevel</a>(<span class="keyword">this</span>);
<a name="l02855"></a>02855 
<a name="l02856"></a>02856     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>() == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>) {
<a name="l02857"></a>02857         <span class="comment">// remove the focus from me</span>
<a name="l02858"></a>02858         <a class="code" href="classMMSWindow.html#cfe40cb6b19703782fed6b5577437294" title="Internal method: Remove the focus from a child window.">removeFocusFromChildWindow</a>();
<a name="l02859"></a>02859     }
<a name="l02860"></a>02860 
<a name="l02861"></a>02861     <span class="comment">// check if window or parent are correctly initialized</span>
<a name="l02862"></a>02862     <span class="keywordflow">if</span> (!((this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)||((!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)&amp;&amp;(this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>)))) {
<a name="l02863"></a>02863         <span class="comment">// no, check if i have the surface from layer</span>
<a name="l02864"></a>02864         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>) {
<a name="l02865"></a>02865             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l02866"></a>02866             <span class="comment">// clear it</span>
<a name="l02867"></a>02867             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>();
<a name="l02868"></a>02868             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flip"</span>);
<a name="l02869"></a>02869             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>();
<a name="l02870"></a>02870             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flip"</span>);
<a name="l02871"></a>02871             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l02872"></a>02872         }
<a name="l02873"></a>02873         <a class="code" href="classMMSWindow.html#2eb226372352773e4fb50f65221d9d24">afterHideAction</a>(NULL);
<a name="l02874"></a>02874         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02875"></a>02875     }
<a name="l02876"></a>02876 
<a name="l02877"></a>02877     <span class="comment">// init animation values</span>
<a name="l02878"></a>02878     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#c709016273362ac9c5ff3f9b9e2187e2" title="Get the opacity of the window.">getOpacity</a>(this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a>)) this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a> = 255;
<a name="l02879"></a>02879     this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a> = <a class="code" href="classMMSWindow.html#c58e45ae572bd6367c1d1c153c02f32e" title="Get the geometry of the window.">getGeometry</a>();
<a name="l02880"></a>02880     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#7215d87c77f2166b492bf30979a36e3c" title="Detect if the window has to fade-out during the hide action.">getFadeOut</a>(this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a>)) this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a> = <span class="keyword">false</span>;
<a name="l02881"></a>02881     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#8348666731a595939fcec849f713dd89" title="Get the move-out direction of the window which is used during the hide action.">getMoveOut</a>(this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a>)) this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a> = <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1feacae4b8fb1b55eb72b54874f597a960">MMSDIRECTION_NOTSET</a>;
<a name="l02882"></a>02882 
<a name="l02883"></a>02883     <span class="keywordflow">if</span> ((!really_shown)||((!this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a>)&amp;&amp;(this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a>==<a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1feacae4b8fb1b55eb72b54874f597a960">MMSDIRECTION_NOTSET</a>))) {
<a name="l02884"></a>02884         <span class="comment">// nothing to animate, set values which are valid after the animation</span>
<a name="l02885"></a>02885         <a class="code" href="classMMSWindow.html#2eb226372352773e4fb50f65221d9d24">afterHideAction</a>(pulser);
<a name="l02886"></a>02886         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02887"></a>02887     }
<a name="l02888"></a>02888 
<a name="l02889"></a>02889     <span class="comment">// calculate the steps</span>
<a name="l02890"></a>02890     <span class="keywordtype">int</span> steps = <a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">MMSWINDOW_ANIM_MAX_OFFSET</a>;
<a name="l02891"></a>02891     <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a>) {
<a name="l02892"></a>02892         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f331e0603e3b662de4178d1731e1afdfe">MMSDIRECTION_LEFT</a>:
<a name="l02893"></a>02893             this-&gt;<a class="code" href="classMMSWindow.html#afb6794f02c8631bafaa2b54d36e4306">anim_move_step</a> = (this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>) / (steps+1);
<a name="l02894"></a>02894             <span class="keywordflow">break</span>;
<a name="l02895"></a>02895         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1fe77303dd7acdac1c4edd94540123ee90">MMSDIRECTION_RIGHT</a>:
<a name="l02896"></a>02896             this-&gt;<a class="code" href="classMMSWindow.html#afb6794f02c8631bafaa2b54d36e4306">anim_move_step</a> = (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>) / (steps+1);
<a name="l02897"></a>02897             <span class="keywordflow">break</span>;
<a name="l02898"></a>02898         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f634627570f039f4ac2986f77b2bc53af">MMSDIRECTION_UP</a>:
<a name="l02899"></a>02899             this-&gt;<a class="code" href="classMMSWindow.html#afb6794f02c8631bafaa2b54d36e4306">anim_move_step</a> = (this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>) / (steps+1);
<a name="l02900"></a>02900             <span class="keywordflow">break</span>;
<a name="l02901"></a>02901         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f5005f52b4c5f0785e1a90db5476efbbb">MMSDIRECTION_DOWN</a>:
<a name="l02902"></a>02902             this-&gt;<a class="code" href="classMMSWindow.html#afb6794f02c8631bafaa2b54d36e4306">anim_move_step</a> = (<a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + <a class="code" href="classMMSWindow.html#e660a7b238efe71dab17be2c3a649f95" title="visible screen area (that means the visible area e.g. on the TV set), see the initialization...">vrect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>) / (steps+1);
<a name="l02903"></a>02903             <span class="keywordflow">break</span>;
<a name="l02904"></a>02904         <span class="keywordflow">default</span>:
<a name="l02905"></a>02905             <span class="keywordflow">break</span>;
<a name="l02906"></a>02906     }
<a name="l02907"></a>02907 
<a name="l02908"></a>02908     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a>)
<a name="l02909"></a>02909         this-&gt;<a class="code" href="classMMSWindow.html#fdcbb6b6ddc5c09492779077cc7a1ffc">anim_opacity_step</a> = this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a> / (steps+1);
<a name="l02910"></a>02910 
<a name="l02911"></a>02911     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02912"></a>02912 }
<a name="l02913"></a>02913 
<a name="l02914"></a><a class="code" href="classMMSWindow.html#e6ef13a0a6ec966a38b62032744c3d24">02914</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#e6ef13a0a6ec966a38b62032744c3d24">MMSWindow::hideAction</a>(<a class="code" href="classMMSPulser.html" title="This class helps the MMSGUI and user specific applications to get smooth animations...">MMSPulser</a> *<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>) {
<a name="l02915"></a>02915 
<a name="l02916"></a>02916     <span class="comment">// do the animation</span>
<a name="l02917"></a>02917     <span class="keywordtype">double</span> offs = pulser-&gt;<a class="code" href="classMMSPulser.html#8dfdd9f6ece4dcbbf8e992b3d6636e5c" title="Get the offset of the animation.">getOffset</a>();
<a name="l02918"></a>02918 
<a name="l02919"></a>02919 <span class="comment">//printf("2222222222222 %f %d\n", offs, pulser-&gt;getOnAnimationCounter());</span>
<a name="l02920"></a>02920 
<a name="l02921"></a>02921 
<a name="l02922"></a>02922     <span class="comment">// move it</span>
<a name="l02923"></a>02923     <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a>) {
<a name="l02924"></a>02924         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f331e0603e3b662de4178d1731e1afdfe">MMSDIRECTION_LEFT</a>:
<a name="l02925"></a>02925             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>((<span class="keywordtype">int</span>)(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> - offs * this-&gt;anim_move_step) &amp; ~0x01, this-&gt;anim_rect.y);
<a name="l02926"></a>02926             <span class="keywordflow">break</span>;
<a name="l02927"></a>02927         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1fe77303dd7acdac1c4edd94540123ee90">MMSDIRECTION_RIGHT</a>:
<a name="l02928"></a>02928             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>((<span class="keywordtype">int</span>)(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + offs * this-&gt;anim_move_step) &amp; ~0x01, this-&gt;anim_rect.y);
<a name="l02929"></a>02929             <span class="keywordflow">break</span>;
<a name="l02930"></a>02930         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f634627570f039f4ac2986f77b2bc53af">MMSDIRECTION_UP</a>:
<a name="l02931"></a>02931             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, (<span class="keywordtype">int</span>)(this-&gt;anim_rect.y - offs * this-&gt;anim_move_step) &amp; ~0x01);
<a name="l02932"></a>02932             <span class="keywordflow">break</span>;
<a name="l02933"></a>02933         <span class="keywordflow">case</span> <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f5005f52b4c5f0785e1a90db5476efbbb">MMSDIRECTION_DOWN</a>:
<a name="l02934"></a>02934             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, (<span class="keywordtype">int</span>)(this-&gt;anim_rect.y + offs * this-&gt;anim_move_step) &amp; ~0x01);
<a name="l02935"></a>02935             <span class="keywordflow">break</span>;
<a name="l02936"></a>02936         <span class="keywordflow">default</span>:
<a name="l02937"></a>02937             <span class="keywordflow">break</span>;
<a name="l02938"></a>02938     }
<a name="l02939"></a>02939 
<a name="l02940"></a>02940     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#9f918c5b9491a9a59d5488dc9ca263b6">anim_fade</a>) {
<a name="l02941"></a>02941         <span class="comment">// fade it</span>
<a name="l02942"></a>02942         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l02943"></a>02943             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a> - offs * this-&gt;<a class="code" href="classMMSWindow.html#fdcbb6b6ddc5c09492779077cc7a1ffc">anim_opacity_step</a>);
<a name="l02944"></a>02944         <span class="keywordflow">else</span>
<a name="l02945"></a>02945             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(<span class="keyword">this</span>, this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a> - offs * this-&gt;anim_opacity_step);
<a name="l02946"></a>02946     }
<a name="l02947"></a>02947     <span class="keywordflow">else</span>
<a name="l02948"></a>02948     <span class="keywordflow">if</span> (pulser-&gt;<a class="code" href="classMMSPulser.html#0ef4e7784c036b0fa723a688c9a837f8" title="Get the number of onAnimation calls after the last onBeforeAnimation call.">getOnAnimationCounter</a>() == 0) {
<a name="l02949"></a>02949         <span class="comment">// no fade animation and called for the first time, set the opacity</span>
<a name="l02950"></a>02950         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l02951"></a>02951             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a>);
<a name="l02952"></a>02952         <span class="keywordflow">else</span>
<a name="l02953"></a>02953             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(<span class="keyword">this</span>, this-&gt;<a class="code" href="classMMSWindow.html#0935daac4f2f868f8220c1d7eff37f20">anim_opacity</a>);
<a name="l02954"></a>02954     }
<a name="l02955"></a>02955 
<a name="l02956"></a>02956     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02957"></a>02957 }
<a name="l02958"></a>02958 
<a name="l02959"></a><a class="code" href="classMMSWindow.html#2eb226372352773e4fb50f65221d9d24">02959</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#2eb226372352773e4fb50f65221d9d24">MMSWindow::afterHideAction</a>(<a class="code" href="classMMSPulser.html" title="This class helps the MMSGUI and user specific applications to get smooth animations...">MMSPulser</a> *<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>) {
<a name="l02960"></a>02960     <span class="keywordflow">if</span> (pulser) {
<a name="l02961"></a>02961         <span class="comment">// animation finished</span>
<a name="l02962"></a>02962         <span class="comment">// set final opacity</span>
<a name="l02963"></a>02963         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02964"></a>02964             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(0);
<a name="l02965"></a>02965             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#6f0b829749987a6fab0d19a1700e837c">hide</a>();
<a name="l02966"></a>02966         }
<a name="l02967"></a>02967         <span class="keywordflow">else</span> {
<a name="l02968"></a>02968             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(<span class="keyword">this</span>, 0);
<a name="l02969"></a>02969         }
<a name="l02970"></a>02970 
<a name="l02971"></a>02971         <span class="comment">// restore position</span>
<a name="l02972"></a>02972         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#203170e8858cd0b48df903e4c139c9c3">anim_move</a> != <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1feacae4b8fb1b55eb72b54874f597a960">MMSDIRECTION_NOTSET</a>) {
<a name="l02973"></a>02973             <a class="code" href="classMMSWindow.html#82c869c6205f54bee6af9fc5d6a5899d">moveTo</a>(this-&gt;<a class="code" href="classMMSWindow.html#4ee334443e58a2add0b6498f797f74aa">anim_rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, this-&gt;anim_rect.y);
<a name="l02974"></a>02974         }
<a name="l02975"></a>02975     }
<a name="l02976"></a>02976 
<a name="l02977"></a>02977     <span class="comment">// do the rest...</span>
<a name="l02978"></a>02978     <a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>=<span class="keyword">false</span>;
<a name="l02979"></a>02979     <a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a>=<span class="keyword">false</span>;
<a name="l02980"></a>02980 
<a name="l02981"></a>02981     <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>() == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>) {
<a name="l02982"></a>02982         <span class="comment">// pre-calculate the navigation</span>
<a name="l02983"></a>02983         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l02984"></a>02984             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#4e21c34dbb01f2b87df13d9c29d6f533" title="Internal method: Do the pre-calculation of the navigation routes.">preCalcNavigation</a>();
<a name="l02985"></a>02985             <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l02986"></a>02986         }
<a name="l02987"></a>02987     }
<a name="l02988"></a>02988 
<a name="l02989"></a>02989     <span class="comment">//TODO: release images...</span>
<a name="l02990"></a>02990     <a class="code" href="classMMSWindow.html#dfa219bc6b4989434270629e9c57f52c" title="Internal method: Release images and other things.">release</a>();
<a name="l02991"></a>02991 }
<a name="l02992"></a>02992 
<a name="l02993"></a><a class="code" href="classMMSWindow.html#105bee15d0b3c3fc1d4cf74fad7ff424">02993</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#105bee15d0b3c3fc1d4cf74fad7ff424" title="Hide a visible window.">MMSWindow::hide</a>(<span class="keywordtype">bool</span> goback, <span class="keywordtype">bool</span> wait) {
<a name="l02994"></a>02994     <span class="comment">//give the other threads a chance to do their part</span>
<a name="l02995"></a>02995     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l02996"></a>02996     <span class="keywordtype">bool</span> rc = <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l02997"></a>02997     <span class="comment">/* the window will be shown in a few seconds (showAction thread is running), wait for it */</span>
<a name="l02998"></a>02998     <span class="keywordflow">while</span> (this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a>)
<a name="l02999"></a>02999         <a class="code" href="tools_8h.html#214c8ed7283af52160d5b12e1e0752b4">msleep</a>(100);
<a name="l03000"></a>03000 
<a name="l03001"></a>03001     <span class="keywordflow">while</span>(1) {
<a name="l03002"></a>03002         <span class="comment">/* check if the window is shown */</span>
<a name="l03003"></a>03003         <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>)
<a name="l03004"></a>03004             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03005"></a>03005         <span class="comment">/* check if the window will already be hidden */</span>
<a name="l03006"></a>03006         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a>) {
<a name="l03007"></a>03007             <a class="code" href="tools_8h.html#214c8ed7283af52160d5b12e1e0752b4">msleep</a>(100);
<a name="l03008"></a>03008             <span class="keywordflow">continue</span>;
<a name="l03009"></a>03009         }
<a name="l03010"></a>03010         <span class="keywordflow">break</span>;
<a name="l03011"></a>03011     }
<a name="l03012"></a>03012 
<a name="l03013"></a>03013     <span class="comment">//back to locking if applicable</span>
<a name="l03014"></a>03014     <span class="keywordflow">if</span>(rc)
<a name="l03015"></a>03015         <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#e68f3442c1054c4413815662cb274bf1">lock</a>();
<a name="l03016"></a>03016 
<a name="l03017"></a>03017     <span class="comment">/* starting hide process */</span>
<a name="l03018"></a>03018     this-&gt;<a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a> = <span class="keyword">true</span>;
<a name="l03019"></a>03019 
<a name="l03020"></a>03020     <span class="comment">/* call onBeforeHide callback */</span>
<a name="l03021"></a>03021     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#51c6c73061f202d9c7e04bfc52e90106" title="Set one or more callbacks for the onBeforeHide event.">onBeforeHide</a>-&gt;emit(<span class="keyword">this</span>, goback)) {
<a name="l03022"></a>03022         <span class="comment">/* a callback returns false, break the hide process */</span>
<a name="l03023"></a>03023         this-&gt;<a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a> = <span class="keyword">false</span>;
<a name="l03024"></a>03024         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03025"></a>03025     }
<a name="l03026"></a>03026 
<a name="l03027"></a>03027 <span class="comment">/*</span>
<a name="l03028"></a>03028 <span class="comment">    if (this-&gt;action-&gt;isRunning())</span>
<a name="l03029"></a>03029 <span class="comment">        this-&gt;action-&gt;cancelBroadcast.emit(this-&gt;getType());</span>
<a name="l03030"></a>03030 <span class="comment">    this-&gt;action-&gt;setAction(MMSWACTION_HIDE);</span>
<a name="l03031"></a>03031 <span class="comment">    this-&gt;action-&gt;start();</span>
<a name="l03032"></a>03032 <span class="comment"></span>
<a name="l03033"></a>03033 <span class="comment">    if (wait) {</span>
<a name="l03034"></a>03034 <span class="comment">        int c = 0;</span>
<a name="l03035"></a>03035 <span class="comment">        while ((this-&gt;action-&gt;getAction()==MMSWACTION_HIDE) &amp;&amp; c &lt; 20) { msleep(100); c++; }</span>
<a name="l03036"></a>03036 <span class="comment">    }</span>
<a name="l03037"></a>03037 <span class="comment">*/</span>
<a name="l03038"></a>03038 
<a name="l03039"></a>03039     <span class="comment">// do the animation in a separate thread...</span>
<a name="l03040"></a>03040     this-&gt;<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>.<a class="code" href="classMMSPulser.html#4d9e141c2e393a10b82a61849ec37233" title="Set animation steps per second.">setStepsPerSecond</a>(<a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">MMSWINDOW_ANIM_MAX_OFFSET</a> * 4);
<a name="l03041"></a>03041     this-&gt;<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>.<a class="code" href="classMMSPulser.html#85092ff9283237f21e8aabee1ff9f6fe" title="Set the maximum offset returned by getOffset().">setMaxOffset</a>(<a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">MMSWINDOW_ANIM_MAX_OFFSET</a>, <a class="code" href="mmspulser_8h.html#227d3b44ab08d4027705b7ab0f8546c27d341cde7154e124f2b530ecca3df902" title="logarithmic ascending, animation starts smoothly and ends fast">MMSPULSER_SEQ_LOG_SOFT_START</a>,  <a class="code" href="mmswindow_8cpp.html#6cf604b77c93ef894e8e26a2b23aded1">MMSWINDOW_ANIM_MAX_OFFSET</a> / 2);
<a name="l03042"></a>03042 <span class="comment">//  this-&gt;pulser.setMaxOffset(MMSWINDOW_ANIM_MAX_OFFSET, MMSPULSER_SEQ_LOG_SOFT_END,    MMSWINDOW_ANIM_MAX_OFFSET / 2);</span>
<a name="l03043"></a>03043 <span class="comment">//  this-&gt;pulser.setMaxOffset(MMSWINDOW_ANIM_MAX_OFFSET, MMSPULSER_SEQ_LINEAR);</span>
<a name="l03044"></a>03044 <span class="comment">//  this-&gt;pulser.setMaxOffset(MMSWINDOW_ANIM_MAX_OFFSET, MMSPULSER_SEQ_LINEAR_DESC);</span>
<a name="l03045"></a>03045 <span class="comment">//  this-&gt;pulser.setMaxOffset(MMSWINDOW_ANIM_MAX_OFFSET, MMSPULSER_SEQ_LOG_DESC_SOFT_START, MMSWINDOW_ANIM_MAX_OFFSET / 2);</span>
<a name="l03046"></a>03046 <span class="comment">//  this-&gt;pulser.setMaxOffset(MMSWINDOW_ANIM_MAX_OFFSET, MMSPULSER_SEQ_LOG_DESC_SOFT_END,   MMSWINDOW_ANIM_MAX_OFFSET / 2);</span>
<a name="l03047"></a>03047 <span class="comment">//  this-&gt;pulser.setMaxOffset(MMSWINDOW_ANIM_MAX_OFFSET, MMSPULSER_SEQ_LOG_SOFT_START_AND_END);</span>
<a name="l03048"></a>03048     this-&gt;<a class="code" href="classMMSWindow.html#b5e2ecb511d98904b98c956fd05e7d48" title="current pulser mode">pulser_mode</a> = <a class="code" href="mmswindow_8h.html#f2dd23d1c49e2fbd9ce46a7d7335b997663e5d8520593dd3ca70fa26e5b7683a" title="hide action">MMSWINDOW_PULSER_MODE_HIDE</a>;
<a name="l03049"></a>03049     this-&gt;<a class="code" href="classMMSWindow.html#28746d9b58f9d31a1bcda55b58bbd327" title="Pulser for e.g. fade/move animations during show/hide.">pulser</a>.<a class="code" href="classMMSPulser.html#ea5047848965760ba1834fe4adc7fd34" title="Start the animation.">start</a>(!wait, <span class="keyword">true</span>);
<a name="l03050"></a>03050 
<a name="l03051"></a>03051 
<a name="l03052"></a>03052     <span class="comment">// call onHide callback</span>
<a name="l03053"></a>03053     this-&gt;<a class="code" href="classMMSWindow.html#14303c25b0fd68a051cd616c1992faaa" title="Set one or more callbacks for the onHide event.">onHide</a>-&gt;emit(<span class="keyword">this</span>, goback);
<a name="l03054"></a>03054 
<a name="l03055"></a>03055     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03056"></a>03056 }
<a name="l03057"></a>03057 
<a name="l03058"></a>03058 <span class="comment">/*</span>
<a name="l03059"></a>03059 <span class="comment">bool MMSWindow::hideAction(bool *stopaction) {</span>
<a name="l03060"></a>03060 <span class="comment">    bool    saction = *stopaction;</span>
<a name="l03061"></a>03061 <span class="comment"></span>
<a name="l03062"></a>03062 <span class="comment">    if(shown==false)</span>
<a name="l03063"></a>03063 <span class="comment">        return !saction;</span>
<a name="l03064"></a>03064 <span class="comment"></span>
<a name="l03065"></a>03065 <span class="comment">    // check if all of its parents are shown</span>
<a name="l03066"></a>03066 <span class="comment">    bool really_shown = this-&gt;isShown(true);</span>
<a name="l03067"></a>03067 <span class="comment"></span>
<a name="l03068"></a>03068 <span class="comment">    if (!this-&gt;parent)</span>
<a name="l03069"></a>03069 <span class="comment">        if (this-&gt;windowmanager)</span>
<a name="l03070"></a>03070 <span class="comment">            this-&gt;windowmanager-&gt;removeWindowFromToplevel(this);</span>
<a name="l03071"></a>03071 <span class="comment"></span>
<a name="l03072"></a>03072 <span class="comment">    if (getType() == MMSWINDOWTYPE_CHILDWINDOW) {</span>
<a name="l03073"></a>03073 <span class="comment">        // remove the focus from me</span>
<a name="l03074"></a>03074 <span class="comment">        removeFocusFromChildWindow();</span>
<a name="l03075"></a>03075 <span class="comment">    }</span><span class="comment"></span>
<a name="l03076"></a>03076 <span class="comment">/////////////////</span>
<a name="l03077"></a>03077 <span class="comment"></span>    if ((this-&gt;parent)||((!this-&gt;parent)&amp;&amp;(this-&gt;window))) {
<a name="l03078"></a>03078         unsigned int opacity;
<a name="l03079"></a>03079         if (!getOpacity(opacity)) opacity = 255;
<a name="l03080"></a>03080         MMSFBRectangle rect = getGeometry();
<a name="l03081"></a>03081 
<a name="l03082"></a>03082         bool fadeout;
<a name="l03083"></a>03083         if (!getFadeOut(fadeout)) fadeout = false;
<a name="l03084"></a>03084         MMSDIRECTION moveout;
<a name="l03085"></a>03085         if (!getMoveOut(moveout)) moveout = MMSDIRECTION_NOTSET;
<a name="l03086"></a>03086 
<a name="l03087"></a>03087         if ((really_shown)&amp;&amp;((fadeout)||(moveout!=MMSDIRECTION_NOTSET))) {
<a name="l03088"></a>03088             // little animation
<a name="l03089"></a>03089             int steps = 3;
<a name="l03090"></a>03090             unsigned int opacity_step;
<a name="l03091"></a>03091             int move_step;
<a name="l03092"></a>03092 
<a name="l03093"></a>03093             switch (moveout) {
<a name="l03094"></a>03094                 case MMSDIRECTION_LEFT:
<a name="l03095"></a>03095                     move_step = (rect.w-vrect.x+rect.x) / (steps+1);
<a name="l03096"></a>03096                     break;
<a name="l03097"></a>03097                 case MMSDIRECTION_RIGHT:
<a name="l03098"></a>03098                     move_step = (vrect.w-rect.x+vrect.x) / (steps+1);
<a name="l03099"></a>03099                     break;
<a name="l03100"></a>03100                 case MMSDIRECTION_UP:
<a name="l03101"></a>03101                     move_step = (rect.h-vrect.y+rect.y) / (steps+1);
<a name="l03102"></a>03102                     break;
<a name="l03103"></a>03103                 case MMSDIRECTION_DOWN:
<a name="l03104"></a>03104                     move_step = (vrect.h-rect.y+vrect.y) / (steps+1);
<a name="l03105"></a>03105                     break;
<a name="l03106"></a>03106                 default:
<a name="l03107"></a>03107                     break;
<a name="l03108"></a>03108             }
<a name="l03109"></a>03109 
<a name="l03110"></a>03110             if (fadeout)
<a name="l03111"></a>03111                 opacity_step = opacity / (steps+1);
<a name="l03112"></a>03112 
<a name="l03113"></a>03113             for (int i = 1; i &lt;= steps; i++) {
<a name="l03114"></a>03114 
<a name="l03115"></a>03115                 // start time stamp
<a name="l03116"></a>03116                 unsigned int start_ts = getMTimeStamp();
<a name="l03117"></a>03117 
<a name="l03118"></a>03118                 switch (moveout) {
<a name="l03119"></a>03119                     case MMSDIRECTION_LEFT:
<a name="l03120"></a>03120                         moveTo((rect.x - i * move_step) &amp; ~0x01, rect.y);
<a name="l03121"></a>03121                         break;
<a name="l03122"></a>03122                     case MMSDIRECTION_RIGHT:
<a name="l03123"></a>03123                         moveTo((rect.x + i * move_step) &amp; ~0x01, rect.y);
<a name="l03124"></a>03124                         break;
<a name="l03125"></a>03125                     case MMSDIRECTION_UP:
<a name="l03126"></a>03126                         moveTo(rect.x, (rect.y - i * move_step) &amp; ~0x01);
<a name="l03127"></a>03127                         break;
<a name="l03128"></a>03128                     case MMSDIRECTION_DOWN:
<a name="l03129"></a>03129                         moveTo(rect.x, (rect.y + i * move_step) &amp; ~0x01);
<a name="l03130"></a>03130                         break;
<a name="l03131"></a>03131                     default:
<a name="l03132"></a>03132                         break;
<a name="l03133"></a>03133                 }
<a name="l03134"></a>03134 
<a name="l03135"></a>03135                 if (fadeout) {
<a name="l03136"></a>03136                     if (!parent)
<a name="l03137"></a>03137                         this-&gt;window-&gt;setOpacity(opacity - i * opacity_step);
<a name="l03138"></a>03138                     else
<a name="l03139"></a>03139                         this-&gt;parent-&gt;setChildWindowOpacity(this, opacity - i * opacity_step);
<a name="l03140"></a>03140                 }
<a name="l03141"></a>03141 
<a name="l03142"></a>03142                 if (*stopaction) {
<a name="l03143"></a>03143                     saction=true;
<a name="l03144"></a>03144                     break;
<a name="l03145"></a>03145                 }
<a name="l03146"></a>03146 
<a name="l03147"></a>03147                 // end time stamp
<a name="l03148"></a>03148                 unsigned int end_ts = getMTimeStamp();
<a name="l03149"></a>03149 
<a name="l03150"></a>03150                 // sleeping a little...
<a name="l03151"></a>03151                 msleep(getFrameDelay(start_ts, end_ts));
<a name="l03152"></a>03152 
<a name="l03153"></a>03153             }
<a name="l03154"></a>03154         }<span class="comment"></span>
<a name="l03155"></a>03155 <span class="comment">///ddd</span>
<a name="l03156"></a>03156 <span class="comment"></span>        if (!parent) {
<a name="l03157"></a>03157             // set final opacity
<a name="l03158"></a>03158             this-&gt;window-&gt;setOpacity(0);
<a name="l03159"></a>03159             this-&gt;window-&gt;hide();
<a name="l03160"></a>03160         }
<a name="l03161"></a>03161         else {
<a name="l03162"></a>03162             // set final opacity
<a name="l03163"></a>03163             this-&gt;parent-&gt;setChildWindowOpacity(this, 0);
<a name="l03164"></a>03164         }
<a name="l03165"></a>03165 
<a name="l03166"></a>03166         // restore position
<a name="l03167"></a>03167         if (moveout!=MMSDIRECTION_NOTSET)
<a name="l03168"></a>03168             moveTo(rect.x, rect.y);
<a name="l03169"></a>03169     }
<a name="l03170"></a>03170     else {
<a name="l03171"></a>03171         // check if i have the surface from layer
<a name="l03172"></a>03172         if (this-&gt;surface) {
<a name="l03173"></a>03173             // clear it
<a name="l03174"></a>03174             this-&gt;surface-&gt;clear();
<a name="l03175"></a>03175             this-&gt;surface-&gt;flip();
<a name="l03176"></a>03176         }
<a name="l03177"></a>03177     }<span class="comment"></span>
<a name="l03178"></a>03178 <span class="comment">///////////</span>
<a name="l03179"></a>03179 <span class="comment"></span>
<a name="l03180"></a>03180     shown=false;
<a name="l03181"></a>03181     willhide=false;
<a name="l03182"></a>03182 
<a name="l03183"></a>03183     if (getType() == MMSWINDOWTYPE_CHILDWINDOW) {
<a name="l03184"></a>03184         // pre-calculate the navigation
<a name="l03185"></a>03185         if (this-&gt;parent) {
<a name="l03186"></a>03186             this-&gt;parent-&gt;preCalcNavigation();
<a name="l03187"></a>03187             switchArrowWidgets();
<a name="l03188"></a>03188         }
<a name="l03189"></a>03189     }
<a name="l03190"></a>03190 
<a name="l03191"></a>03191     *stopaction=false;
<a name="l03192"></a>03192 
<a name="l03193"></a>03193     return !saction;
<a name="l03194"></a>03194 }*/
<a name="l03195"></a>03195 
<a name="l03196"></a><a class="code" href="classMMSWindow.html#52d4d1b3583773287bf44c617085b55c">03196</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#52d4d1b3583773287bf44c617085b55c" title="Can be called after show() waiting for end of showAction thread.">MMSWindow::waitUntilShown</a>() {
<a name="l03197"></a>03197     <span class="comment">//ensure that a show action can take place</span>
<a name="l03198"></a>03198     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l03199"></a>03199     <span class="keywordtype">bool</span> rc = <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l03200"></a>03200 
<a name="l03201"></a>03201     <span class="keywordflow">while</span> ((!<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>())||(<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a>))
<a name="l03202"></a>03202         <a class="code" href="tools_8h.html#214c8ed7283af52160d5b12e1e0752b4">msleep</a>(10);
<a name="l03203"></a>03203 
<a name="l03204"></a>03204     <span class="comment">//ensure that a show action can take place</span>
<a name="l03205"></a>03205     <span class="keywordflow">if</span>(rc)
<a name="l03206"></a>03206         <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#e68f3442c1054c4413815662cb274bf1">lock</a>();
<a name="l03207"></a>03207 }
<a name="l03208"></a>03208 
<a name="l03209"></a><a class="code" href="classMMSWindow.html#27323745549cb1635e0d7b73ed0c41be">03209</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#27323745549cb1635e0d7b73ed0c41be" title="Can be called after hide() waiting for end of hideAction thread.">MMSWindow::waitUntilHidden</a>() {
<a name="l03210"></a>03210     <span class="comment">//ensure that a show action can take place</span>
<a name="l03211"></a>03211     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"mmsfb unlock"</span>);
<a name="l03212"></a>03212     <span class="keywordtype">bool</span> rc = <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#66492fd8250ea2569bc5a424288371d1">unlock</a>();
<a name="l03213"></a>03213 
<a name="l03214"></a>03214     <span class="keywordflow">while</span> ((<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>())||(<a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a>))
<a name="l03215"></a>03215         <a class="code" href="tools_8h.html#214c8ed7283af52160d5b12e1e0752b4">msleep</a>(10);
<a name="l03216"></a>03216 
<a name="l03217"></a>03217     <span class="comment">//ensure that a show action can take place</span>
<a name="l03218"></a>03218     <span class="keywordflow">if</span>(rc)
<a name="l03219"></a>03219         <a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#e68f3442c1054c4413815662cb274bf1">lock</a>();
<a name="l03220"></a>03220 }
<a name="l03221"></a>03221 
<a name="l03222"></a><a class="code" href="classMMSWindow.html#7ef2b02aa383bf893207a33d128bd53a">03222</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#7ef2b02aa383bf893207a33d128bd53a" title="Add a widget to the window.">MMSWindow::add</a>(<a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *child) {
<a name="l03223"></a>03223 
<a name="l03224"></a>03224     <span class="comment">/* prevent duplicate items */</span>
<a name="l03225"></a>03225     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); i++) {
<a name="l03226"></a>03226         <span class="keywordflow">if</span>(<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getId() == child-&gt;<a class="code" href="classMMSWidget.html#d1d096cef23b06b2db6acc96cf774c08">getId</a>())
<a name="l03227"></a>03227             <span class="keywordflow">return</span>;
<a name="l03228"></a>03228     }
<a name="l03229"></a>03229 
<a name="l03230"></a>03230     <span class="comment">/* add to the children vector */</span>
<a name="l03231"></a>03231     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l03232"></a>03232     this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.push_back(child);
<a name="l03233"></a>03233     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l03234"></a>03234 }
<a name="l03235"></a>03235 
<a name="l03236"></a><a class="code" href="classMMSWindow.html#3a33282d48e578a91bd731de8d23d5b9">03236</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#3a33282d48e578a91bd731de8d23d5b9" title="Remove a widget from the window.">MMSWindow::remove</a>(<a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *child) {
<a name="l03237"></a>03237     <span class="comment">/* remove from children vector */</span>
<a name="l03238"></a>03238     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); i++) {
<a name="l03239"></a>03239         <span class="keywordflow">if</span>(<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i) == child) {
<a name="l03240"></a>03240             this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.erase(this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.begin()+i);
<a name="l03241"></a>03241             <span class="keywordflow">return</span>;
<a name="l03242"></a>03242         }
<a name="l03243"></a>03243     }
<a name="l03244"></a>03244 }
<a name="l03245"></a>03245 
<a name="l03246"></a>03246 
<a name="l03247"></a><a class="code" href="classMMSWindow.html#05d2130953284d2397644005c6556dae">03247</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#05d2130953284d2397644005c6556dae" title="Internal method: Will be called from the MMSWindowAction thread if the window should...">MMSWindow::refreshFromChild</a>(<a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *child, <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> *rect2update, <span class="keywordtype">bool</span> check_shown) {
<a name="l03248"></a>03248     <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a>     region;
<a name="l03249"></a>03249     <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a>  flip_rect;
<a name="l03250"></a>03250 
<a name="l03251"></a>03251     <span class="comment">// use own surface?</span>
<a name="l03252"></a>03252     <span class="comment">// note: os=false must ONLY be set, if this window is a child window!!!</span>
<a name="l03253"></a>03253     <span class="keywordtype">bool</span> os = <span class="keyword">true</span>;
<a name="l03254"></a>03254     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a> == <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>)
<a name="l03255"></a>03255         <a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(os);
<a name="l03256"></a>03256 
<a name="l03257"></a>03257     <span class="keywordflow">if</span> (check_shown) {
<a name="l03258"></a>03258         <span class="comment">// it makes sense that we skip all drawing requests here, if this window OR one of its parents are not shown</span>
<a name="l03259"></a>03259         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>(<span class="keyword">true</span>)) {
<a name="l03260"></a>03260             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"MMSWindow-&gt;refreshFromChild() skipped because window is not shown"</span>);
<a name="l03261"></a>03261             <span class="keywordflow">return</span>;
<a name="l03262"></a>03262         }
<a name="l03263"></a>03263     }
<a name="l03264"></a>03264 
<a name="l03265"></a>03265     <span class="comment">// lock drawing</span>
<a name="l03266"></a>03266 <span class="comment">//PUP    this-&gt;drawLock.lock();</span>
<a name="l03267"></a>03267     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l03268"></a>03268 
<a name="l03269"></a>03269 
<a name="l03270"></a>03270     <span class="comment">// calculate region</span>
<a name="l03271"></a>03271     <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> rect;
<a name="l03272"></a>03272     <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *c = child;
<a name="l03273"></a>03273     <span class="keywordflow">if</span> ((!c)&amp;&amp;(!<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.empty()))
<a name="l03274"></a>03274         c = <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(0);
<a name="l03275"></a>03275     <span class="keywordflow">if</span> (c) {
<a name="l03276"></a>03276         <span class="keywordflow">if</span> (!rect2update) {
<a name="l03277"></a>03277             rect = c-&gt;<a class="code" href="classMMSWidget.html#1414244912b618cf8edbca1270d90e03">getGeometry</a>();
<a name="l03278"></a>03278             <span class="keywordflow">if</span> (c-&gt;<a class="code" href="classMMSWidget.html#8dfc16cfd06cbfc79706e8ec50c42069">isDrawable</a>()) {
<a name="l03279"></a>03279                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> childmargin;
<a name="l03280"></a>03280                 <span class="keywordflow">if</span> (!c-&gt;<a class="code" href="classMMSWidget.html#9ed69ad64dddaa58a5a1c393dae19650">getMargin</a>(childmargin))
<a name="l03281"></a>03281                     childmargin = 0;
<a name="l03282"></a>03282                 rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>+=childmargin;
<a name="l03283"></a>03283                 rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>+=childmargin;
<a name="l03284"></a>03284                 rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>-=2*childmargin;
<a name="l03285"></a>03285                 rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>-=2*childmargin;
<a name="l03286"></a>03286             }
<a name="l03287"></a>03287         }
<a name="l03288"></a>03288         <span class="keywordflow">else</span>
<a name="l03289"></a>03289             rect = *rect2update;
<a name="l03290"></a>03290 
<a name="l03291"></a>03291         <span class="comment">// check x/y</span>
<a name="l03292"></a>03292         <span class="keywordflow">if</span> (rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> &lt; this-&gt;innerGeom.x) {
<a name="l03293"></a>03293             rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>-= this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> - rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l03294"></a>03294             rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l03295"></a>03295         }
<a name="l03296"></a>03296         <span class="keywordflow">if</span> (rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> &lt; this-&gt;innerGeom.y) {
<a name="l03297"></a>03297             rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>-= this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> - rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l03298"></a>03298             rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l03299"></a>03299         }
<a name="l03300"></a>03300 
<a name="l03301"></a>03301         <span class="comment">// valid rectangle?</span>
<a name="l03302"></a>03302         <span class="keywordflow">if</span> ((rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> &lt;= 0)||(rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> &lt;= 0)) {
<a name="l03303"></a>03303             <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l03304"></a>03304             <span class="keywordflow">return</span>;
<a name="l03305"></a>03305         }
<a name="l03306"></a>03306 
<a name="l03307"></a>03307         <span class="comment">// check width/height</span>
<a name="l03308"></a>03308         <span class="keywordflow">if</span> (rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> &gt; this-&gt;innerGeom.x + this-&gt;innerGeom.w)
<a name="l03309"></a>03309             rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l03310"></a>03310         <span class="keywordflow">if</span> (rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> &gt; this-&gt;innerGeom.y + this-&gt;innerGeom.h)
<a name="l03311"></a>03311             rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l03312"></a>03312 
<a name="l03313"></a>03313         <span class="comment">// valid rectangle?</span>
<a name="l03314"></a>03314         <span class="keywordflow">if</span> ((rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> &lt;= 0)||(rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> &lt;= 0)) {
<a name="l03315"></a>03315             <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l03316"></a>03316             <span class="keywordflow">return</span>;
<a name="l03317"></a>03317         }
<a name="l03318"></a>03318 
<a name="l03319"></a>03319         <span class="comment">// save src rectangle for separate flip() call</span>
<a name="l03320"></a>03320         flip_rect = rect;
<a name="l03321"></a>03321 
<a name="l03322"></a>03322         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a>) {
<a name="l03323"></a>03323             <span class="comment">// adjust the destination rectangle</span>
<a name="l03324"></a>03324             rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = <a class="code" href="mmswindow_8cpp.html#b5f5315b2eb953328dc242c063acfa86">MMSFBWINDOW_CALC_STRETCH_WIDTH</a>(rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, <span class="keyword">this</span>);
<a name="l03325"></a>03325             rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = <a class="code" href="mmswindow_8cpp.html#cdc59a738aeb7a0e1cc153ad4b34084b">MMSFBWINDOW_CALC_STRETCH_HEIGHT</a>(rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>, <span class="keyword">this</span>);
<a name="l03326"></a>03326             rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = <a class="code" href="mmswindow_8cpp.html#b5f5315b2eb953328dc242c063acfa86">MMSFBWINDOW_CALC_STRETCH_WIDTH</a>(rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, <span class="keyword">this</span>);
<a name="l03327"></a>03327             rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = <a class="code" href="mmswindow_8cpp.html#cdc59a738aeb7a0e1cc153ad4b34084b">MMSFBWINDOW_CALC_STRETCH_HEIGHT</a>(rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, <span class="keyword">this</span>);
<a name="l03328"></a>03328         }
<a name="l03329"></a>03329     }
<a name="l03330"></a>03330     <span class="keywordflow">else</span> {
<a name="l03331"></a>03331         <span class="comment">// update complete inner geom</span>
<a name="l03332"></a>03332         rect = this-&gt;<a class="code" href="classMMSWindow.html#1a7075173afb555af7cc98da617a37f6" title="inner geometry of the window based on the border margin attribute">innerGeom</a>;
<a name="l03333"></a>03333 
<a name="l03334"></a>03334         <span class="comment">// save src rectangle for separate flip() call</span>
<a name="l03335"></a>03335         flip_rect = rect;
<a name="l03336"></a>03336     }
<a name="l03337"></a>03337 
<a name="l03338"></a>03338     <span class="keywordflow">if</span>(child) {
<a name="l03339"></a>03339         <span class="comment">// draw only childs of this child</span>
<a name="l03340"></a>03340         <span class="keywordflow">if</span> (os)
<a name="l03341"></a>03341             child-&gt;<a class="code" href="classMMSWidget.html#aabe305bde364d2e50e73b60249b81f1">drawchildren</a>();
<a name="l03342"></a>03342     }
<a name="l03343"></a>03343     <span class="keywordflow">else</span> {
<a name="l03344"></a>03344         <span class="comment">// draw only some parts of the window</span>
<a name="l03345"></a>03345         <span class="keywordflow">if</span> (os)
<a name="l03346"></a>03346             <a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>(<span class="keyword">true</span>, (rect2update)?&amp;flip_rect:NULL);
<a name="l03347"></a>03347     }
<a name="l03348"></a>03348 
<a name="l03349"></a>03349     <span class="comment">// set region</span>
<a name="l03350"></a>03350     region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l03351"></a>03351     region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>+rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>-1;
<a name="l03352"></a>03352     region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l03353"></a>03353     region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>+rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>-1;
<a name="l03354"></a>03354 
<a name="l03355"></a>03355 <span class="comment">//    logger.writeLog("flip the region (x1,y1,x2,y2) (" +</span>
<a name="l03356"></a>03356 <span class="comment">//        iToStr(region.x1) + "," + iToStr(region.y1) + "," + iToStr(region.x2) + "," + iToStr(region.y2) +")");</span>
<a name="l03357"></a>03357 
<a name="l03358"></a>03358     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#2ab7d06ee8447a57ea877f315da20c04" title="border geometry set?">bordergeomset</a>)
<a name="l03359"></a>03359         <span class="comment">// border geom is not set -&gt; draw the border</span>
<a name="l03360"></a>03360         <a class="code" href="classMMSWindow.html#206223ca7ad4380d724dba80a9a804ae" title="Internal method: Draw my border.">drawMyBorder</a>();
<a name="l03361"></a>03361     <span class="keywordflow">else</span> {
<a name="l03362"></a>03362         <span class="comment">// draw the border if it is in the flipping region</span>
<a name="l03363"></a>03363         <span class="keywordtype">bool</span> htdb = <span class="keyword">false</span>;
<a name="l03364"></a>03364 
<a name="l03365"></a>03365         <span class="comment">// check if border should be drawn</span>
<a name="l03366"></a>03366         <span class="keywordflow">if</span> (!htdb)
<a name="l03367"></a>03367             htdb = ((<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[0].<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + <a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[0].<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> &gt; region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>)
<a name="l03368"></a>03368                   &amp;&amp;(<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[0].y + <a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[0].h &gt; region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>));
<a name="l03369"></a>03369         <span class="keywordflow">if</span> (!htdb)
<a name="l03370"></a>03370             htdb = (<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[1].<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + <a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[1].<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> &gt; region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>);
<a name="l03371"></a>03371         <span class="keywordflow">if</span> (!htdb)
<a name="l03372"></a>03372             htdb = ((<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[2].<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> &lt;= region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>)
<a name="l03373"></a>03373                   &amp;&amp;(<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[2].y + <a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[2].h &gt; region.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>));
<a name="l03374"></a>03374         <span class="keywordflow">if</span> (!htdb)
<a name="l03375"></a>03375             htdb = (<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[3].<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> &lt;= region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>);
<a name="l03376"></a>03376         <span class="keywordflow">if</span> (!htdb)
<a name="l03377"></a>03377             htdb = ((<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[4].<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> &lt;= region.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a>)
<a name="l03378"></a>03378                   &amp;&amp;(<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[4].y &lt;= region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>));
<a name="l03379"></a>03379         <span class="keywordflow">if</span> (!htdb)
<a name="l03380"></a>03380             htdb = (<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[5].<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> &lt;= region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>);
<a name="l03381"></a>03381         <span class="keywordflow">if</span> (!htdb)
<a name="l03382"></a>03382             htdb = ((<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[6].<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + <a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[6].<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> &gt; region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>)
<a name="l03383"></a>03383                   &amp;&amp;(<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[6].y &lt;= region.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a>));
<a name="l03384"></a>03384         <span class="keywordflow">if</span> (!htdb)
<a name="l03385"></a>03385             htdb = (<a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[7].<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + <a class="code" href="classMMSWindow.html#985c2e095aa0967acc54012bfef37fac" title="border geometry">bordergeom</a>[7].<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> &gt; region.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>);
<a name="l03386"></a>03386 
<a name="l03387"></a>03387         <span class="keywordflow">if</span> (htdb) {
<a name="l03388"></a>03388             <span class="comment">// I have to draw the border</span>
<a name="l03389"></a>03389             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"draw window border"</span>);
<a name="l03390"></a>03390             <a class="code" href="classMMSWindow.html#206223ca7ad4380d724dba80a9a804ae" title="Internal method: Draw my border.">drawMyBorder</a>();
<a name="l03391"></a>03391         }
<a name="l03392"></a>03392     }
<a name="l03393"></a>03393 
<a name="l03394"></a>03394     <span class="comment">// flip region</span>
<a name="l03395"></a>03395     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l03396"></a>03396         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l03397"></a>03397         <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(<span class="keyword">this</span>, &amp;region, <a class="code" href="mmsfbbase_8h.html#24603080ce959d994a6b8f6029337479" title="surface flip flag: flip upon the next vertical sync">MMSFB_FLIP_ONSYNC</a>);
<a name="l03398"></a>03398         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l03399"></a>03399     }
<a name="l03400"></a>03400     <span class="keywordflow">else</span> {
<a name="l03401"></a>03401         <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#4f3fd05289a6e0bcc40b4586fcbd6d80" title="window will be stretched to the layer or the parent window using stretchBlit(), default...">stretchmode</a>) {
<a name="l03402"></a>03402             <span class="comment">// normal flip</span>
<a name="l03403"></a>03403             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l03404"></a>03404             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(<span class="keyword">this</span>, &amp;region, <a class="code" href="mmsfbbase_8h.html#24603080ce959d994a6b8f6029337479" title="surface flip flag: flip upon the next vertical sync">MMSFB_FLIP_ONSYNC</a>);
<a name="l03405"></a>03405             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l03406"></a>03406         }
<a name="l03407"></a>03407         <span class="keywordflow">else</span> {
<a name="l03408"></a>03408             <span class="comment">// flip src region and call flipWindow with stretched region</span>
<a name="l03409"></a>03409             <a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> rg;
<a name="l03410"></a>03410             rg.<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> = flip_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l03411"></a>03411             rg.<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> = flip_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + flip_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>-1;
<a name="l03412"></a>03412             rg.<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> = flip_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l03413"></a>03413             rg.<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> = flip_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + flip_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>-1;
<a name="l03414"></a>03414             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#4e181ae640172a6f6e7983f48925bd25">lock</a>();
<a name="l03415"></a>03415             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flip"</span>);
<a name="l03416"></a>03416             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>(&amp;rg);
<a name="l03417"></a>03417             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flip"</span>);
<a name="l03418"></a>03418             this-&gt;<a class="code" href="classMMSWindow.html#c9f710f35c43131561ed898b41e5fd0e" title="access to the MMSFBSurface of the window">surface</a>-&gt;<a class="code" href="classMMSFBSurface.html#c8dd139d9306532c9a2f12b79a63762a">unlock</a>();
<a name="l03419"></a>03419             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l03420"></a>03420             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(<span class="keyword">this</span>, &amp;region, <a class="code" href="mmsfbbase_8h.html#24603080ce959d994a6b8f6029337479" title="surface flip flag: flip upon the next vertical sync">MMSFB_FLIP_ONSYNC</a>, <span class="keyword">false</span>);
<a name="l03421"></a>03421             <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l03422"></a>03422         }
<a name="l03423"></a>03423     }
<a name="l03424"></a>03424 
<a name="l03425"></a>03425     <span class="comment">// unlock drawing</span>
<a name="l03426"></a>03426 <span class="comment">//PUP    this-&gt;drawLock.unlock();</span>
<a name="l03427"></a>03427     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l03428"></a>03428 }
<a name="l03429"></a>03429 
<a name="l03430"></a><a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78">03430</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">MMSWindow::refresh</a>(<a class="code" href="classMMSFBRegion.html" title="describes a region">MMSFBRegion</a> *region) {
<a name="l03431"></a>03431 
<a name="l03432"></a>03432     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>(<span class="keyword">true</span>)) {
<a name="l03433"></a>03433         <span class="comment">// drawing skipped because window is or it's parents are not shown</span>
<a name="l03434"></a>03434         <span class="keywordflow">return</span>;
<a name="l03435"></a>03435     }
<a name="l03436"></a>03436 
<a name="l03437"></a>03437     <span class="comment">// lock drawing</span>
<a name="l03438"></a>03438 <span class="comment">//PUP    this-&gt;drawLock.lock();</span>
<a name="l03439"></a>03439     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l03440"></a>03440 
<a name="l03441"></a>03441     <span class="comment">// draw window</span>
<a name="l03442"></a>03442     <a class="code" href="classMMSWindow.html#54be35f446151218a90b5169670cd6e8" title="Internal method: Give window a recalculation hint used for next draw().">setWidgetGeometryOnNextDraw</a>();
<a name="l03443"></a>03443     <span class="keywordflow">if</span> (region) {
<a name="l03444"></a>03444         <span class="comment">// draw a region</span>
<a name="l03445"></a>03445         <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> rect2update;
<a name="l03446"></a>03446         rect2update.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = region-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a>;
<a name="l03447"></a>03447         rect2update.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = region-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a>;
<a name="l03448"></a>03448         rect2update.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = region-&gt;<a class="code" href="classMMSFBRegion.html#ff7987f9cf4b06c94d760c651787d379" title="x2">x2</a> - region-&gt;<a class="code" href="classMMSFBRegion.html#e97887e9f9b471f1830584e45317328a" title="x1">x1</a> + 1;
<a name="l03449"></a>03449         rect2update.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = region-&gt;<a class="code" href="classMMSFBRegion.html#1c8c8b23f41476668af7ff5ca163576b" title="y2">y2</a> - region-&gt;<a class="code" href="classMMSFBRegion.html#14477c251656937006694cd885dfcbbd" title="y1">y1</a> + 1;
<a name="l03450"></a>03450         <a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>(<span class="keyword">false</span>, &amp;rect2update);
<a name="l03451"></a>03451     }
<a name="l03452"></a>03452     <span class="keywordflow">else</span> {
<a name="l03453"></a>03453         <span class="comment">// draw whole window</span>
<a name="l03454"></a>03454         <a class="code" href="classMMSWindow.html#47e623e055008fc2acb7f8b54abc5a88" title="Internal method: Draw me.">draw</a>();
<a name="l03455"></a>03455     }
<a name="l03456"></a>03456 
<a name="l03457"></a>03457     <span class="comment">// make it visible</span>
<a name="l03458"></a>03458     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l03459"></a>03459         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l03460"></a>03460         <a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(<span class="keyword">this</span>, region);
<a name="l03461"></a>03461         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l03462"></a>03462     }
<a name="l03463"></a>03463     <span class="keywordflow">else</span> {
<a name="l03464"></a>03464         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call flipWindow"</span>);
<a name="l03465"></a>03465         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e978f560c30011de8e007b921e3a0405" title="Internal method: Flip a window.">flipWindow</a>(<span class="keyword">this</span>, region);
<a name="l03466"></a>03466         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"end flipWindow"</span>);
<a name="l03467"></a>03467     }
<a name="l03468"></a>03468 
<a name="l03469"></a>03469     <span class="comment">// unlock drawing</span>
<a name="l03470"></a>03470 <span class="comment">//PUP    this-&gt;drawLock.unlock();</span>
<a name="l03471"></a>03471     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l03472"></a>03472 }
<a name="l03473"></a>03473 
<a name="l03474"></a>03474 
<a name="l03475"></a><a class="code" href="classMMSWindow.html#cf3ce52f4c30b3a62b93f99485b8f14a">03475</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#cf3ce52f4c30b3a62b93f99485b8f14a" title="Internal method: Set the focused widget.">MMSWindow::setFocusedWidget</a>(<a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *child, <span class="keywordtype">bool</span> <span class="keyword">set</span>, <span class="keywordtype">bool</span> switchfocus, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l03476"></a>03476 <span class="comment">//printf("XXX: setFocusedWidget for window %s %x set = %d, switchfocus = %d\n", name.c_str(), this, set, switchfocus);</span>
<a name="l03477"></a>03477     <span class="keywordflow">if</span> (<span class="keyword">set</span>) {
<a name="l03478"></a>03478         <span class="keywordflow">if</span> (switchfocus) {
<a name="l03479"></a>03479  <span class="comment">//         printf("&gt;&gt;&gt; %x, %x\n", this-&gt;focusedwidget, child);</span>
<a name="l03480"></a>03480             <span class="keywordflow">if</span> (child != this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>) {
<a name="l03481"></a>03481                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>)
<a name="l03482"></a>03482                     this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#09868f299568c6a7dc4cdcd1c94c1198">setFocus</a>(<span class="keyword">false</span>, refresh);
<a name="l03483"></a>03483             }
<a name="l03484"></a>03484             <span class="keywordflow">if</span> (child) {
<a name="l03485"></a>03485                 <span class="keywordflow">if</span> (!child-&gt;<a class="code" href="classMMSWidget.html#1e74edd8905b412dbf5085a39438e2be">isFocused</a>()) {
<a name="l03486"></a>03486                     child-&gt;<a class="code" href="classMMSWidget.html#09868f299568c6a7dc4cdcd1c94c1198">setFocus</a>(<span class="keyword">true</span>, refresh);
<a name="l03487"></a>03487                 }
<a name="l03488"></a>03488             }
<a name="l03489"></a>03489         }
<a name="l03490"></a>03490         this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a> = child;
<a name="l03491"></a>03491         this-&gt;<a class="code" href="classMMSWindow.html#b548a400de35cee8007957ffee61d10e" title="focus set the first time?">firstfocusset</a> = <span class="keyword">true</span>;
<a name="l03492"></a>03492     }
<a name="l03493"></a>03493     <span class="keywordflow">else</span> {
<a name="l03494"></a>03494         <span class="keywordflow">if</span> (child)
<a name="l03495"></a>03495             <span class="keywordflow">if</span> (child-&gt;<a class="code" href="classMMSWidget.html#1e74edd8905b412dbf5085a39438e2be">isFocused</a>()) {
<a name="l03496"></a>03496                 <span class="keywordflow">if</span> (switchfocus) {
<a name="l03497"></a>03497 <span class="comment">//                  child-&gt;focused = false; ////////////////////////</span>
<a name="l03498"></a>03498                     child-&gt;<a class="code" href="classMMSWidget.html#09868f299568c6a7dc4cdcd1c94c1198">setFocus</a>(<span class="keyword">false</span>, refresh);
<a name="l03499"></a>03499                 }
<a name="l03500"></a>03500                 this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a> = NULL;
<a name="l03501"></a>03501                 this-&gt;<a class="code" href="classMMSWindow.html#b548a400de35cee8007957ffee61d10e" title="focus set the first time?">firstfocusset</a> = <span class="keyword">false</span>;
<a name="l03502"></a>03502             }
<a name="l03503"></a>03503     }
<a name="l03504"></a>03504 
<a name="l03505"></a>03505     <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l03506"></a>03506 }
<a name="l03507"></a>03507 
<a name="l03508"></a><a class="code" href="classMMSWindow.html#b45358340ee710b7606b843ad3cd27c6">03508</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#b45358340ee710b7606b843ad3cd27c6" title="Internal method: Focus one widget/child window for the first time.">MMSWindow::setFirstFocus</a>(<span class="keywordtype">bool</span> cw) {
<a name="l03509"></a>03509 <span class="comment">//printf("XXX: setFirstFocus1 to %s %x\n", name.c_str(), this);</span>
<a name="l03510"></a>03510 
<a name="l03511"></a>03511 
<a name="l03512"></a>03512     <span class="comment">// per default only main or root windows can get inputs</span>
<a name="l03513"></a>03513     <span class="comment">// popup windows can get inputs if the modal mode is set</span>
<a name="l03514"></a>03514     <span class="comment">// child windows get the inputs from the parent main, root or popup window</span>
<a name="l03515"></a>03515     <span class="keywordflow">switch</span> (<a class="code" href="classMMSWindow.html#f1c0cad3111489e2e08b2e872adedc6b" title="Get the type of the window.">getType</a>()) {
<a name="l03516"></a>03516         <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380b8cb8eaf607b06b3078855e77515d98f" title="Main windows will be displayed over the root window.">MMSWINDOWTYPE_MAINWINDOW</a>:
<a name="l03517"></a>03517         <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380f0bcc3227155e1b4aac8eed09a5416f5" title="Root windows will be displayed in the background.">MMSWINDOWTYPE_ROOTWINDOW</a>:
<a name="l03518"></a>03518             <span class="keywordflow">break</span>;
<a name="l03519"></a>03519         <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b93802f923b27f7012799b6a746bbd9f252c0" title="Popup windows will be displayed over root and main windows.">MMSWINDOWTYPE_POPUPWINDOW</a>: {
<a name="l03520"></a>03520             <span class="keywordtype">bool</span> modal;
<a name="l03521"></a>03521             <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#8bbdfc384b579db42047d57aa9e63b39" title="Detect if the window has to be modal if it is focused.">getModal</a>(modal)) {
<a name="l03522"></a>03522                 <span class="keywordflow">if</span> (modal)
<a name="l03523"></a>03523                     this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#4be86c01fa691db7c6efecfd0a9760e5">setToplevelWindow</a>(<span class="keyword">this</span>);
<a name="l03524"></a>03524             }
<a name="l03525"></a>03525             <span class="keywordflow">break</span>;
<a name="l03526"></a>03526         }
<a name="l03527"></a>03527         <span class="keywordflow">case</span> <a class="code" href="mmswindow_8h.html#0282555cd1f7fce7412ef4632d2b9380cb8d9240300a7aed6a933602a8e769ed" title="Child windows are parts of main, popup and root windows.">MMSWINDOWTYPE_CHILDWINDOW</a>:
<a name="l03528"></a>03528             <span class="keywordflow">if</span> (!cw) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03529"></a>03529 <span class="comment">//printf ("parent-&gt;focusedChildWin %d\n", parent-&gt;focusedChildWin);</span>
<a name="l03530"></a>03530 <span class="comment">//printf ("parent-&gt;focusedwidget %d\n", this-&gt;focusedwidget);</span>
<a name="l03531"></a>03531             <span class="keywordflow">break</span>;
<a name="l03532"></a>03532         <span class="keywordflow">default</span>:
<a name="l03533"></a>03533             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03534"></a>03534     }
<a name="l03535"></a>03535 
<a name="l03536"></a>03536 <span class="comment">//printf("XXX: setFirstFocus2 to %s\n", name.c_str());</span>
<a name="l03537"></a>03537     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"MMSWindow: setFirstFocus to "</span> + <a class="code" href="classMMSWindow.html#3f4ea5bd7db27133a43752662ccd388e" title="Get the name of the window.">getName</a>());
<a name="l03538"></a>03538 
<a name="l03539"></a>03539     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#b548a400de35cee8007957ffee61d10e" title="focus set the first time?">firstfocusset</a>) {
<a name="l03540"></a>03540 <span class="comment">//printf("XXX: setFirstFocus2.2 to %s\n", name.c_str());</span>
<a name="l03541"></a>03541         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"MMSWindow: focus already set"</span>);
<a name="l03542"></a>03542         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03543"></a>03543     }
<a name="l03544"></a>03544     this-&gt;<a class="code" href="classMMSWindow.html#b548a400de35cee8007957ffee61d10e" title="focus set the first time?">firstfocusset</a> = <span class="keyword">true</span>;
<a name="l03545"></a>03545     <span class="keywordtype">bool</span> b;
<a name="l03546"></a>03546 
<a name="l03547"></a>03547 <span class="comment">//printf("XXX: setFirstFocus3 to %s\n", name.c_str());</span>
<a name="l03548"></a>03548 
<a name="l03549"></a>03549     <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.empty()) {
<a name="l03550"></a>03550         <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;
<a name="l03551"></a>03551 
<a name="l03552"></a>03552         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); j++) {
<a name="l03553"></a>03553             <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *w = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(j).window;
<a name="l03554"></a>03554             <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a> &amp;&amp; !w-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a>) {
<a name="l03555"></a>03555 <span class="comment">//printf("XXX: setFirstFocus3.1 to %s -&gt; childwin %s %d %d %d\n", name.c_str(), w-&gt;name.c_str(), w-&gt;buffered_shown, w-&gt;shown, w-&gt;willshow);</span>
<a name="l03556"></a>03556                 <span class="keywordflow">continue</span>;
<a name="l03557"></a>03557             }
<a name="l03558"></a>03558 
<a name="l03559"></a>03559 <span class="comment">//printf("XXX: setFirstFocus4 to %s -&gt; childwin %s\n", name.c_str(), w-&gt;name.c_str());</span>
<a name="l03560"></a>03560 
<a name="l03561"></a>03561             <span class="keywordflow">if</span> (w-&gt;<a class="code" href="classMMSWindow.html#7aaf738d72d7f9932d9852606b217e9f" title="Get the number of focusable widgets.">getNumberOfFocusableWidgets</a>()) {
<a name="l03562"></a>03562 <span class="comment">//printf("XXX: setFirstFocus5 to %s -&gt; childwin %s %d\n", name.c_str(), w-&gt;name.c_str(), j);</span>
<a name="l03563"></a>03563                 <span class="comment">/* widgets found which can be focused */</span>
<a name="l03564"></a>03564                 this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = j;
<a name="l03565"></a>03565                 found = <span class="keyword">true</span>;
<a name="l03566"></a>03566                 <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#b548a400de35cee8007957ffee61d10e" title="focus set the first time?">firstfocusset</a>) {
<a name="l03567"></a>03567 <span class="comment">//printf("XXX: setFirstFocus6 to %s -&gt; childwin %s\n", name.c_str(), w-&gt;name.c_str());</span>
<a name="l03568"></a>03568                     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;w-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size();i++) {
<a name="l03569"></a>03569                         <span class="keywordflow">if</span>(w-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getFocusable(b))
<a name="l03570"></a>03570                             <span class="keywordflow">if</span> (b) {
<a name="l03571"></a>03571                                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"MMSWindow: set focus to child nr "</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(i));
<a name="l03572"></a>03572                                 <span class="keywordtype">string</span> inputmode = <span class="stringliteral">""</span>;
<a name="l03573"></a>03573                                 w-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getInputModeEx(inputmode);
<a name="l03574"></a>03574                                 <span class="keywordflow">if</span> (<a class="code" href="tools_8h.html#9cc8f0cf29eba1975b26342af280a1ba">strToUpr</a>(inputmode) != <span class="stringliteral">"CLICK"</span>) {
<a name="l03575"></a>03575 <span class="comment">//printf("XXX: setFirstFocus7 to %s -&gt; childwin %s\n", name.c_str(), w-&gt;name.c_str());</span>
<a name="l03576"></a>03576                                     w-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;setFocus(<span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l03577"></a>03577                                 }
<a name="l03578"></a>03578                                 <span class="keywordflow">else</span> {
<a name="l03579"></a>03579                                     w-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;setFocus(<span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l03580"></a>03580                                 }
<a name="l03581"></a>03581                                 w-&gt;<a class="code" href="classMMSWindow.html#b548a400de35cee8007957ffee61d10e" title="focus set the first time?">firstfocusset</a> = <span class="keyword">true</span>;
<a name="l03582"></a>03582                                 this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(j).focusedWidget = i;
<a name="l03583"></a>03583                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03584"></a>03584                             }
<a name="l03585"></a>03585                     }
<a name="l03586"></a>03586                 }
<a name="l03587"></a>03587                 <span class="keywordflow">break</span>;
<a name="l03588"></a>03588             }
<a name="l03589"></a>03589             <span class="keywordflow">else</span>
<a name="l03590"></a>03590             <span class="keywordflow">if</span> (w-&gt;<a class="code" href="classMMSWindow.html#0aeecf9b8419e796faac96ce4b1ad380" title="Get the number of focusable child windows.">getNumberOfFocusableChildWins</a>()) {
<a name="l03591"></a>03591                 <span class="comment">/* child windows found which have focusable widgets */</span>
<a name="l03592"></a>03592                 this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = j;
<a name="l03593"></a>03593                 found = <span class="keyword">true</span>;
<a name="l03594"></a>03594                 <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWindow.html#b548a400de35cee8007957ffee61d10e" title="focus set the first time?">firstfocusset</a>) {
<a name="l03595"></a>03595                     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;w-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size();i++) {
<a name="l03596"></a>03596                         <span class="keywordflow">if</span> (w-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;setFirstFocus(<span class="keyword">true</span>))
<a name="l03597"></a>03597                             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03598"></a>03598                     }
<a name="l03599"></a>03599                 }
<a name="l03600"></a>03600                 <span class="keywordflow">break</span>;
<a name="l03601"></a>03601             }
<a name="l03602"></a>03602         }
<a name="l03603"></a>03603 
<a name="l03604"></a>03604         <span class="keywordflow">if</span> (found) {
<a name="l03605"></a>03605             <span class="keyword">static</span> <span class="keywordtype">bool</span> again = <span class="keyword">false</span>;
<a name="l03606"></a>03606 
<a name="l03607"></a>03607             <span class="keywordflow">if</span> (!again) {
<a name="l03608"></a>03608                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"MMSWindow::setFirstFocus() found first focus"</span>);
<a name="l03609"></a>03609                 <span class="keywordflow">if</span> (getenv( <span class="stringliteral">"MMS_EXIT_ON_FIRST_FOCUS"</span> ))
<a name="l03610"></a>03610                     exit(0);
<a name="l03611"></a>03611 
<a name="l03612"></a>03612                 again = <span class="keyword">true</span>;
<a name="l03613"></a>03613             }
<a name="l03614"></a>03614             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03615"></a>03615         }
<a name="l03616"></a>03616 
<a name="l03617"></a>03617         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"MMSWindow: no children to focus for window "</span> + <a class="code" href="classMMSWindow.html#3f4ea5bd7db27133a43752662ccd388e" title="Get the name of the window.">getName</a>());
<a name="l03618"></a>03618         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03619"></a>03619     }
<a name="l03620"></a>03620 
<a name="l03621"></a>03621 
<a name="l03622"></a>03622     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size();i++) {
<a name="l03623"></a>03623         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getFocusable(b))
<a name="l03624"></a>03624             <span class="keywordflow">if</span> (b) {
<a name="l03625"></a>03625                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"MMSWindow: set focus to child nr "</span> + <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(i));
<a name="l03626"></a>03626                 <span class="keywordtype">string</span> inputmode = <span class="stringliteral">""</span>;
<a name="l03627"></a>03627                 this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getInputModeEx(inputmode);
<a name="l03628"></a>03628                 <span class="keywordflow">if</span> (<a class="code" href="tools_8h.html#9cc8f0cf29eba1975b26342af280a1ba">strToUpr</a>(inputmode) != <span class="stringliteral">"CLICK"</span>)
<a name="l03629"></a>03629                     this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;setFocus(<span class="keyword">true</span>);
<a name="l03630"></a>03630                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l03631"></a>03631             }
<a name="l03632"></a>03632     }
<a name="l03633"></a>03633 
<a name="l03634"></a>03634     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"MMSWindow: no children to focus for window "</span> + <a class="code" href="classMMSWindow.html#3f4ea5bd7db27133a43752662ccd388e" title="Get the name of the window.">getName</a>());
<a name="l03635"></a>03635     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l03636"></a>03636 }
<a name="l03637"></a>03637 
<a name="l03638"></a>03638 
<a name="l03639"></a>03639 
<a name="l03640"></a><a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">03640</a> <span class="preprocessor">#define MAXDGCODE   999999</span>
<a name="l03641"></a>03641 <span class="preprocessor"></span>
<a name="l03642"></a>03642 <span class="comment">/* a lower return value is better than an higher value */</span>
<a name="l03643"></a><a class="code" href="classMMSWindow.html#d8249fe482f43f2c16891e1a7e3d0a38">03643</a> <span class="keywordtype">double</span> <a class="code" href="classMMSWindow.html#d8249fe482f43f2c16891e1a7e3d0a38" title="Internal method: Used to find best candidate to navigate up from currPos.">MMSWindow::calculateDistGradCode_Up</a>(<a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> currPos, <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> candPos) {
<a name="l03644"></a>03644 
<a name="l03645"></a>03645     <a class="code" href="mmsfbbase_8h.html#c6e6a220bdf43c067371b6971981827a">MMSFB_BREAK</a>();
<a name="l03646"></a>03646 
<a name="l03647"></a>03647     <span class="comment">/* check if candidate is over the current widget */</span>
<a name="l03648"></a>03648     <span class="keywordflow">if</span> (candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> &gt;= currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>)
<a name="l03649"></a>03649         <span class="comment">/* no */</span>
<a name="l03650"></a>03650         <span class="keywordflow">return</span> <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l03651"></a>03651 
<a name="l03652"></a>03652     <span class="comment">/* create some vector points */</span>
<a name="l03653"></a>03653     <span class="keywordtype">double</span> w1 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;                          <span class="comment">// left border to left border</span>
<a name="l03654"></a>03654            w1-= (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l03655"></a>03655     <span class="keywordtype">double</span> w2 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + (<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;  <span class="comment">// right border to right border</span>
<a name="l03656"></a>03656            w2-= (double)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;
<a name="l03657"></a>03657     <span class="keywordtype">double</span> w3 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2);<span class="comment">// middle to middle</span>
<a name="l03658"></a>03658            w3-= (double)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2);
<a name="l03659"></a>03659     <span class="keywordtype">double</span> h  = (double)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2);<span class="comment">// height</span>
<a name="l03660"></a>03660            h -= (double)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2);
<a name="l03661"></a>03661 
<a name="l03662"></a>03662     <span class="comment">/* if the candidate is direct over the current widget and candidate width is equal or greater */</span>
<a name="l03663"></a>03663     <span class="keywordflow">if</span> ((w1 - (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2 &lt;= 0) &amp;&amp; (w2 + (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2 &gt;= 0)) {
<a name="l03664"></a>03664         <span class="comment">/* then set the gradient of the middle vector to zero */</span>
<a name="l03665"></a>03665         w3 = 0;
<a name="l03666"></a>03666 
<a name="l03667"></a>03667         <span class="comment">/* set smallest possible height */</span>
<a name="l03668"></a>03668         h = 0 - ((double)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> - ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + (double)candPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1));
<a name="l03669"></a>03669     }
<a name="l03670"></a>03670 
<a name="l03671"></a>03671     <span class="comment">/* check if correct quadrant */</span>
<a name="l03672"></a>03672     <span class="keywordflow">if</span> (h &gt;= 0)
<a name="l03673"></a>03673         <span class="keywordflow">return</span> <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l03674"></a>03674 
<a name="l03675"></a>03675     <span class="comment">/* get absolute values */</span>
<a name="l03676"></a>03676     w1 = fabs(w1);
<a name="l03677"></a>03677     w2 = fabs(w2);
<a name="l03678"></a>03678     w3 = fabs(w3);
<a name="l03679"></a>03679     h  = fabs(h);
<a name="l03680"></a>03680 
<a name="l03681"></a>03681     <span class="comment">/* temporary storage for distance */</span>
<a name="l03682"></a>03682     <span class="keywordtype">double</span> dist;
<a name="l03683"></a>03683 
<a name="l03684"></a>03684     <span class="comment">/* temporary result storage */</span>
<a name="l03685"></a>03685     <span class="keywordtype">double</span> dgcode1, dgcode2;
<a name="l03686"></a>03686 
<a name="l03687"></a>03687     <span class="comment">/* work with left vector */</span>
<a name="l03688"></a>03688     dist = sqrt(w1*w1 + h*h);
<a name="l03689"></a>03689     <span class="keywordflow">if</span> (w1 &lt;= h) {
<a name="l03690"></a>03690         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03691"></a>03691         <span class="keywordtype">double</span> grad = w1 / h;
<a name="l03692"></a>03692         dgcode1 = dist / (1 - grad);
<a name="l03693"></a>03693     }
<a name="l03694"></a>03694     <span class="keywordflow">else</span>
<a name="l03695"></a>03695         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03696"></a>03696         dgcode1 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03697"></a>03697 
<a name="l03698"></a>03698     <span class="comment">/* work with right vector */</span>
<a name="l03699"></a>03699     dist = sqrt(w2*w2 + h*h);
<a name="l03700"></a>03700     <span class="keywordflow">if</span> (w2 &lt;= h) {
<a name="l03701"></a>03701         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03702"></a>03702         <span class="keywordtype">double</span> grad = w2 / h;
<a name="l03703"></a>03703         dgcode2 = dist / (1 - grad);
<a name="l03704"></a>03704     }
<a name="l03705"></a>03705     <span class="keywordflow">else</span>
<a name="l03706"></a>03706         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03707"></a>03707         dgcode2 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03708"></a>03708 
<a name="l03709"></a>03709     <span class="comment">/* take the smallest value */</span>
<a name="l03710"></a>03710     <span class="keywordflow">if</span> (dgcode1 &gt; dgcode2)
<a name="l03711"></a>03711         dgcode1 = dgcode2;
<a name="l03712"></a>03712 
<a name="l03713"></a>03713     <span class="comment">/* work with middle vector */</span>
<a name="l03714"></a>03714     dist = sqrt(w3*w3 + h*h);
<a name="l03715"></a>03715     <span class="keywordflow">if</span> (w3 &lt;= h) {
<a name="l03716"></a>03716         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03717"></a>03717         <span class="keywordtype">double</span> grad = w3 / h;
<a name="l03718"></a>03718         dgcode2 = dist / (1 - grad);
<a name="l03719"></a>03719     }
<a name="l03720"></a>03720     <span class="keywordflow">else</span>
<a name="l03721"></a>03721         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03722"></a>03722         dgcode2 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03723"></a>03723 
<a name="l03724"></a>03724     <span class="comment">/* return with the smallest value */</span>
<a name="l03725"></a>03725     <span class="keywordflow">if</span> (dgcode1 &lt; dgcode2)
<a name="l03726"></a>03726         <span class="keywordflow">return</span> dgcode1;
<a name="l03727"></a>03727 
<a name="l03728"></a>03728     <span class="comment">/* return the result */</span>
<a name="l03729"></a>03729     <span class="keywordflow">return</span> dgcode2;
<a name="l03730"></a>03730 }
<a name="l03731"></a>03731 
<a name="l03732"></a>03732 
<a name="l03733"></a>03733 <span class="comment">/* a lower return value is better than an higher value */</span>
<a name="l03734"></a><a class="code" href="classMMSWindow.html#a9cdd12cdcb6a5f0182219647cad33c8">03734</a> <span class="keywordtype">double</span> <a class="code" href="classMMSWindow.html#a9cdd12cdcb6a5f0182219647cad33c8" title="Internal method: Used to find best candidate to navigate down from currPos.">MMSWindow::calculateDistGradCode_Down</a>(<a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> currPos, <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> candPos) {
<a name="l03735"></a>03735 
<a name="l03736"></a>03736     <span class="comment">/* check if candidate is under the current widget */</span>
<a name="l03737"></a>03737     <span class="keywordflow">if</span> (candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + candPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1 &lt;= currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1)
<a name="l03738"></a>03738         <span class="comment">/* no */</span>
<a name="l03739"></a>03739         <span class="keywordflow">return</span> <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l03740"></a>03740 
<a name="l03741"></a>03741     <span class="comment">/* create some vector points */</span>
<a name="l03742"></a>03742     <span class="keywordtype">double</span> w1 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;                          <span class="comment">// left border to left border</span>
<a name="l03743"></a>03743            w1-= (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l03744"></a>03744     <span class="keywordtype">double</span> w2 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + (<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;  <span class="comment">// right border to right border</span>
<a name="l03745"></a>03745            w2-= (double)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1;
<a name="l03746"></a>03746     <span class="keywordtype">double</span> w3 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2);<span class="comment">// middle to middle</span>
<a name="l03747"></a>03747            w3-= (double)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2);
<a name="l03748"></a>03748     <span class="keywordtype">double</span> h  = (double)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2);<span class="comment">// height</span>
<a name="l03749"></a>03749            h -= (double)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2);
<a name="l03750"></a>03750 
<a name="l03751"></a>03751     <span class="comment">/* if the candidate is direct under the current widget and candidate width is equal or greater */</span>
<a name="l03752"></a>03752     <span class="keywordflow">if</span> ((w1 - (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2 &lt;= 0) &amp;&amp; (w2 + (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2 &gt;= 0)) {
<a name="l03753"></a>03753         <span class="comment">/* then set the gradient of the middle vector to zero */</span>
<a name="l03754"></a>03754         w3 = 0;
<a name="l03755"></a>03755 
<a name="l03756"></a>03756         <span class="comment">/* set smallest possible height */</span>
<a name="l03757"></a>03757         h = (double)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> - ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + (double)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1);
<a name="l03758"></a>03758     }
<a name="l03759"></a>03759 
<a name="l03760"></a>03760     <span class="comment">/* check if correct quadrant */</span>
<a name="l03761"></a>03761     <span class="keywordflow">if</span> (h &lt;= 0)
<a name="l03762"></a>03762         <span class="keywordflow">return</span> <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l03763"></a>03763 
<a name="l03764"></a>03764     <span class="comment">/* get absolute values */</span>
<a name="l03765"></a>03765     w1 = fabs(w1);
<a name="l03766"></a>03766     w2 = fabs(w2);
<a name="l03767"></a>03767     w3 = fabs(w3);
<a name="l03768"></a>03768     h  = fabs(h);
<a name="l03769"></a>03769 
<a name="l03770"></a>03770     <span class="comment">/* temporary storage for distance */</span>
<a name="l03771"></a>03771     <span class="keywordtype">double</span> dist;
<a name="l03772"></a>03772 
<a name="l03773"></a>03773     <span class="comment">/* temporary result storage */</span>
<a name="l03774"></a>03774     <span class="keywordtype">double</span> dgcode1, dgcode2;
<a name="l03775"></a>03775 
<a name="l03776"></a>03776     <span class="comment">/* work with left vector */</span>
<a name="l03777"></a>03777     dist = sqrt(w1*w1 + h*h);
<a name="l03778"></a>03778     <span class="keywordflow">if</span> (w1 &lt;= h) {
<a name="l03779"></a>03779         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03780"></a>03780         <span class="keywordtype">double</span> grad = w1 / h;
<a name="l03781"></a>03781         dgcode1 = dist / (1 - grad);
<a name="l03782"></a>03782     }
<a name="l03783"></a>03783     <span class="keywordflow">else</span>
<a name="l03784"></a>03784         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03785"></a>03785         dgcode1 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03786"></a>03786 
<a name="l03787"></a>03787     <span class="comment">/* work with right vector */</span>
<a name="l03788"></a>03788     dist = sqrt(w2*w2 + h*h);
<a name="l03789"></a>03789     <span class="keywordflow">if</span> (w2 &lt;= h) {
<a name="l03790"></a>03790         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03791"></a>03791         <span class="keywordtype">double</span> grad = w2 / h;
<a name="l03792"></a>03792         dgcode2 = dist / (1 - grad);
<a name="l03793"></a>03793     }
<a name="l03794"></a>03794     <span class="keywordflow">else</span>
<a name="l03795"></a>03795         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03796"></a>03796         dgcode2 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03797"></a>03797 
<a name="l03798"></a>03798     <span class="comment">/* take the smallest value */</span>
<a name="l03799"></a>03799     <span class="keywordflow">if</span> (dgcode1 &gt; dgcode2)
<a name="l03800"></a>03800         dgcode1 = dgcode2;
<a name="l03801"></a>03801 
<a name="l03802"></a>03802     <span class="comment">/* work with middle vector */</span>
<a name="l03803"></a>03803     dist = sqrt(w3*w3 + h*h);
<a name="l03804"></a>03804     <span class="keywordflow">if</span> (w3 &lt;= h) {
<a name="l03805"></a>03805         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03806"></a>03806         <span class="keywordtype">double</span> grad = w3 / h;
<a name="l03807"></a>03807         dgcode2 = dist / (1 - grad);
<a name="l03808"></a>03808     }
<a name="l03809"></a>03809     <span class="keywordflow">else</span>
<a name="l03810"></a>03810         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03811"></a>03811         dgcode2 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03812"></a>03812 
<a name="l03813"></a>03813     <span class="comment">/* return with the smallest value */</span>
<a name="l03814"></a>03814     <span class="keywordflow">if</span> (dgcode1 &lt; dgcode2)
<a name="l03815"></a>03815         <span class="keywordflow">return</span> dgcode1;
<a name="l03816"></a>03816 
<a name="l03817"></a>03817     <span class="comment">/* return the result */</span>
<a name="l03818"></a>03818     <span class="keywordflow">return</span> dgcode2;
<a name="l03819"></a>03819 }
<a name="l03820"></a>03820 
<a name="l03821"></a>03821 
<a name="l03822"></a>03822 <span class="comment">/* a lower return value is better than an higher value */</span>
<a name="l03823"></a><a class="code" href="classMMSWindow.html#989838bf265cfa2e8b399cc4786f883a">03823</a> <span class="keywordtype">double</span> <a class="code" href="classMMSWindow.html#989838bf265cfa2e8b399cc4786f883a" title="Internal method: Used to find best candidate to navigate left from currPos.">MMSWindow::calculateDistGradCode_Left</a>(<a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> currPos, <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> candPos) {
<a name="l03824"></a>03824 
<a name="l03825"></a>03825     <span class="comment">/* check if candidate is left of the current widget */</span>
<a name="l03826"></a>03826     <span class="keywordflow">if</span> (candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> &gt;= currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>)
<a name="l03827"></a>03827         <span class="keywordflow">return</span> <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l03828"></a>03828 
<a name="l03829"></a>03829     <span class="comment">/* create some vector points */</span>
<a name="l03830"></a>03830     <span class="keywordtype">double</span> h1 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;                          <span class="comment">// top border to top border</span>
<a name="l03831"></a>03831            h1-= (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l03832"></a>03832     <span class="keywordtype">double</span> h2 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + (<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;  <span class="comment">// bottom border to bottom border</span>
<a name="l03833"></a>03833            h2-= (double)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;
<a name="l03834"></a>03834     <span class="keywordtype">double</span> h3 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2);<span class="comment">// middle to middle</span>
<a name="l03835"></a>03835            h3-= (double)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2);
<a name="l03836"></a>03836     <span class="keywordtype">double</span> w  = (double)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2);<span class="comment">// width</span>
<a name="l03837"></a>03837            w -= (double)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2);
<a name="l03838"></a>03838 
<a name="l03839"></a>03839     <span class="comment">/* if the candidate is direct left of the current widget and candidate width is equal or greater */</span>
<a name="l03840"></a>03840     <span class="keywordflow">if</span> ((h1 - (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2 &lt;= 0) &amp;&amp; (h2 + (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2 &gt;= 0)) {
<a name="l03841"></a>03841         <span class="comment">/* then set the gradient of the middle vector to zero */</span>
<a name="l03842"></a>03842         h3 = 0;
<a name="l03843"></a>03843 
<a name="l03844"></a>03844         <span class="comment">/* set smallest possible width */</span>
<a name="l03845"></a>03845         w = 0-((double)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> - ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + (double)candPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1));
<a name="l03846"></a>03846     }
<a name="l03847"></a>03847 
<a name="l03848"></a>03848     <span class="comment">/* check if correct quadrant */</span>
<a name="l03849"></a>03849     <span class="keywordflow">if</span> (w &gt;= 0)
<a name="l03850"></a>03850         <span class="keywordflow">return</span> <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l03851"></a>03851 
<a name="l03852"></a>03852     <span class="comment">/* get absolute values */</span>
<a name="l03853"></a>03853     h1 = fabs(h1);
<a name="l03854"></a>03854     h2 = fabs(h2);
<a name="l03855"></a>03855     h3 = fabs(h3);
<a name="l03856"></a>03856     w  = fabs(w);
<a name="l03857"></a>03857 
<a name="l03858"></a>03858     <span class="comment">/* temporary storage for distance */</span>
<a name="l03859"></a>03859     <span class="keywordtype">double</span> dist;
<a name="l03860"></a>03860 
<a name="l03861"></a>03861     <span class="comment">/* temporary result storage */</span>
<a name="l03862"></a>03862     <span class="keywordtype">double</span> dgcode1, dgcode2;
<a name="l03863"></a>03863 
<a name="l03864"></a>03864     <span class="comment">/* work with top vector */</span>
<a name="l03865"></a>03865     dist = sqrt(h1*h1 + w*w);
<a name="l03866"></a>03866     <span class="keywordflow">if</span> (h1 &lt;= w) {
<a name="l03867"></a>03867         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03868"></a>03868         <span class="keywordtype">double</span> grad = h1 / w;
<a name="l03869"></a>03869         dgcode1 = dist / (1 - grad);
<a name="l03870"></a>03870     }
<a name="l03871"></a>03871     <span class="keywordflow">else</span>
<a name="l03872"></a>03872         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03873"></a>03873         dgcode1 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03874"></a>03874 
<a name="l03875"></a>03875     <span class="comment">/* work with bottom vector */</span>
<a name="l03876"></a>03876     dist = sqrt(h2*h2 + w*w);
<a name="l03877"></a>03877     <span class="keywordflow">if</span> (h2 &lt;= w) {
<a name="l03878"></a>03878         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03879"></a>03879         <span class="keywordtype">double</span> grad = h2 / w;
<a name="l03880"></a>03880         dgcode2 = dist / (1 - grad);
<a name="l03881"></a>03881     }
<a name="l03882"></a>03882     <span class="keywordflow">else</span>
<a name="l03883"></a>03883         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03884"></a>03884         dgcode2 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03885"></a>03885 
<a name="l03886"></a>03886     <span class="comment">/* take the smallest value */</span>
<a name="l03887"></a>03887     <span class="keywordflow">if</span> (dgcode1 &gt; dgcode2)
<a name="l03888"></a>03888         dgcode1 = dgcode2;
<a name="l03889"></a>03889 
<a name="l03890"></a>03890     <span class="comment">/* work with middle vector */</span>
<a name="l03891"></a>03891     dist = sqrt(h3*h3 + w*w);
<a name="l03892"></a>03892     <span class="keywordflow">if</span> (h3 &lt;= w) {
<a name="l03893"></a>03893         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03894"></a>03894         <span class="keywordtype">double</span> grad = h3 / w;
<a name="l03895"></a>03895         dgcode2 = dist / (1 - grad);
<a name="l03896"></a>03896     }
<a name="l03897"></a>03897     <span class="keywordflow">else</span>
<a name="l03898"></a>03898         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03899"></a>03899         dgcode2 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03900"></a>03900 
<a name="l03901"></a>03901     <span class="comment">/* return with the smallest value */</span>
<a name="l03902"></a>03902     <span class="keywordflow">if</span> (dgcode1 &lt; dgcode2)
<a name="l03903"></a>03903         <span class="keywordflow">return</span> dgcode1;
<a name="l03904"></a>03904 
<a name="l03905"></a>03905     <span class="comment">/* return the result */</span>
<a name="l03906"></a>03906     <span class="keywordflow">return</span> dgcode2;
<a name="l03907"></a>03907 }
<a name="l03908"></a>03908 
<a name="l03909"></a>03909 
<a name="l03910"></a>03910 <span class="comment">/* a lower return value is better than an higher value */</span>
<a name="l03911"></a><a class="code" href="classMMSWindow.html#3c81537a06423cb58b9ff021d577674f">03911</a> <span class="keywordtype">double</span> <a class="code" href="classMMSWindow.html#3c81537a06423cb58b9ff021d577674f" title="Internal method: Used to find best candidate to navigate right from currPos.">MMSWindow::calculateDistGradCode_Right</a>(<a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> currPos, <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> candPos) {
<a name="l03912"></a>03912 
<a name="l03913"></a>03913     <span class="comment">/* check if candidate is right of the current widget */</span>
<a name="l03914"></a>03914     <span class="keywordflow">if</span> (candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + candPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1 &lt;= currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1)
<a name="l03915"></a>03915         <span class="keywordflow">return</span> <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l03916"></a>03916 
<a name="l03917"></a>03917     <span class="comment">/* create some vector points */</span>
<a name="l03918"></a>03918     <span class="keywordtype">double</span> h1 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;                          <span class="comment">// top border to top border</span>
<a name="l03919"></a>03919            h1-= (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l03920"></a>03920     <span class="keywordtype">double</span> h2 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + (<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;  <span class="comment">// bottom border to bottom border</span>
<a name="l03921"></a>03921            h2-= (double)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - 1;
<a name="l03922"></a>03922     <span class="keywordtype">double</span> h3 = (double)candPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2);<span class="comment">// middle to middle</span>
<a name="l03923"></a>03923            h3-= (double)currPos.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2);
<a name="l03924"></a>03924     <span class="keywordtype">double</span> w  = (double)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + ((<span class="keywordtype">double</span>)candPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2);<span class="comment">// width</span>
<a name="l03925"></a>03925            w -= (double)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> / 2);
<a name="l03926"></a>03926 
<a name="l03927"></a>03927     <span class="comment">/* if the candidate is direct right of the current widget and candidate width is equal or greater */</span>
<a name="l03928"></a>03928     <span class="keywordflow">if</span> ((h1 - (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2 &lt;= 0) &amp;&amp; (h2 + (<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> / 2 &gt;= 0)) {
<a name="l03929"></a>03929         <span class="comment">/* then set the gradient of the middle vector to zero */</span>
<a name="l03930"></a>03930         h3 = 0;
<a name="l03931"></a>03931 
<a name="l03932"></a>03932         <span class="comment">/* set smallest possible width */</span>
<a name="l03933"></a>03933         w = (double)candPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> - ((<span class="keywordtype">double</span>)currPos.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + (double)currPos.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - 1);
<a name="l03934"></a>03934     }
<a name="l03935"></a>03935 
<a name="l03936"></a>03936     <span class="comment">/* check if correct quadrant */</span>
<a name="l03937"></a>03937     <span class="keywordflow">if</span> (w &lt;= 0)
<a name="l03938"></a>03938         <span class="keywordflow">return</span> <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l03939"></a>03939 
<a name="l03940"></a>03940     <span class="comment">/* get absolute values */</span>
<a name="l03941"></a>03941     h1 = fabs(h1);
<a name="l03942"></a>03942     h2 = fabs(h2);
<a name="l03943"></a>03943     h3 = fabs(h3);
<a name="l03944"></a>03944     w  = fabs(w);
<a name="l03945"></a>03945 
<a name="l03946"></a>03946     <span class="comment">/* temporary storage for distance */</span>
<a name="l03947"></a>03947     <span class="keywordtype">double</span> dist;
<a name="l03948"></a>03948 
<a name="l03949"></a>03949     <span class="comment">/* temporary result storage */</span>
<a name="l03950"></a>03950     <span class="keywordtype">double</span> dgcode1, dgcode2;
<a name="l03951"></a>03951 
<a name="l03952"></a>03952     <span class="comment">/* work with top vector */</span>
<a name="l03953"></a>03953     dist = sqrt(h1*h1 + w*w);
<a name="l03954"></a>03954     <span class="keywordflow">if</span> (h1 &lt;= w) {
<a name="l03955"></a>03955         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03956"></a>03956         <span class="keywordtype">double</span> grad = h1 / w;
<a name="l03957"></a>03957         dgcode1 = dist / (1 - grad);
<a name="l03958"></a>03958     }
<a name="l03959"></a>03959     <span class="keywordflow">else</span>
<a name="l03960"></a>03960         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03961"></a>03961         dgcode1 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03962"></a>03962 
<a name="l03963"></a>03963     <span class="comment">/* work with bottom vector */</span>
<a name="l03964"></a>03964     dist = sqrt(h2*h2 + w*w);
<a name="l03965"></a>03965     <span class="keywordflow">if</span> (h2 &lt;= w) {
<a name="l03966"></a>03966         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03967"></a>03967         <span class="keywordtype">double</span> grad = h2 / w;
<a name="l03968"></a>03968         dgcode2 = dist / (1 - grad);
<a name="l03969"></a>03969     }
<a name="l03970"></a>03970     <span class="keywordflow">else</span>
<a name="l03971"></a>03971         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03972"></a>03972         dgcode2 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03973"></a>03973 
<a name="l03974"></a>03974     <span class="comment">/* take the smallest value */</span>
<a name="l03975"></a>03975     <span class="keywordflow">if</span> (dgcode1 &gt; dgcode2)
<a name="l03976"></a>03976         dgcode1 = dgcode2;
<a name="l03977"></a>03977 
<a name="l03978"></a>03978     <span class="comment">/* work with middle vector */</span>
<a name="l03979"></a>03979     dist = sqrt(h3*h3 + w*w);
<a name="l03980"></a>03980     <span class="keywordflow">if</span> (h3 &lt;= w) {
<a name="l03981"></a>03981         <span class="comment">/* calc the gradient and the result code */</span>
<a name="l03982"></a>03982         <span class="keywordtype">double</span> grad = h3 / w;
<a name="l03983"></a>03983         dgcode2 = dist / (1 - grad);
<a name="l03984"></a>03984     }
<a name="l03985"></a>03985     <span class="keywordflow">else</span>
<a name="l03986"></a>03986         <span class="comment">/* the grad is higher than 1 and will be ignored */</span>
<a name="l03987"></a>03987         dgcode2 = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>-<a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>/2+dist;
<a name="l03988"></a>03988 
<a name="l03989"></a>03989     <span class="comment">/* return with the smallest value */</span>
<a name="l03990"></a>03990     <span class="keywordflow">if</span> (dgcode1 &lt; dgcode2)
<a name="l03991"></a>03991         <span class="keywordflow">return</span> dgcode1;
<a name="l03992"></a>03992 
<a name="l03993"></a>03993     <span class="comment">/* return the result */</span>
<a name="l03994"></a>03994     <span class="keywordflow">return</span> dgcode2;
<a name="l03995"></a>03995 }
<a name="l03996"></a>03996 
<a name="l03997"></a>03997 
<a name="l03998"></a><a class="code" href="classMMSWindow.html#6df5418b8e9d84b405d1a4ff50cebd7d">03998</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#6df5418b8e9d84b405d1a4ff50cebd7d" title="Internal method: Handle widget navigation (up/down/left/right).">MMSWindow::handleNavigationForWidgets</a>(<a class="code" href="structMMSInputEvent.html">MMSInputEvent</a> *inputevent) {
<a name="l03999"></a>03999     <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *candidate = NULL;
<a name="l04000"></a>04000 
<a name="l04001"></a>04001     <span class="comment">/* if no focused widget then return */</span>
<a name="l04002"></a>04002     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>)
<a name="l04003"></a>04003         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04004"></a>04004 
<a name="l04005"></a>04005     <span class="keywordflow">if</span> (inputevent-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a> == <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc2609318c7f66765835a326411f9bcc8370a1">MMSINPUTEVENTTYPE_KEYPRESS</a>) {
<a name="l04006"></a>04006         <span class="comment">/* keyboard inputs */</span>
<a name="l04007"></a>04007 
<a name="l04008"></a>04008         <span class="comment">/* check if widget names for navigation are set to the focused widget */</span>
<a name="l04009"></a>04009         <span class="keywordflow">switch</span> (inputevent-&gt;<a class="code" href="structMMSInputEvent.html#39baa7bb431c0c28bc7b2d0bf155e16e">key</a>) {
<a name="l04010"></a>04010             <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>:
<a name="l04011"></a>04011                 candidate = this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#7eb03cba5692a306f3dfd4a70060d005">getNavigateDownWidget</a>();
<a name="l04012"></a>04012                 <span class="keywordflow">break</span>;
<a name="l04013"></a>04013             <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>:
<a name="l04014"></a>04014                 candidate = this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#56b491a89e2833a7a0ab788adce25020">getNavigateUpWidget</a>();
<a name="l04015"></a>04015                 <span class="keywordflow">break</span>;
<a name="l04016"></a>04016             <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>:
<a name="l04017"></a>04017                 candidate = this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#e16e058f3d0c77a6147b1c673e7567de">getNavigateRightWidget</a>();
<a name="l04018"></a>04018                 <span class="keywordflow">break</span>;
<a name="l04019"></a>04019             <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>:
<a name="l04020"></a>04020                 candidate = this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#75d6d27efe16c81ed808f595db1568cb">getNavigateLeftWidget</a>();
<a name="l04021"></a>04021                 <span class="keywordflow">break</span>;
<a name="l04022"></a>04022 
<a name="l04023"></a>04023             <span class="keywordflow">default</span>:
<a name="l04024"></a>04024                 <span class="keywordflow">break</span>;
<a name="l04025"></a>04025         }
<a name="l04026"></a>04026     }
<a name="l04027"></a>04027     <span class="keywordflow">else</span> {
<a name="l04028"></a>04028         <span class="comment">/* other inputs */</span>
<a name="l04029"></a>04029     }
<a name="l04030"></a>04030 
<a name="l04031"></a>04031     <span class="keywordflow">if</span> (candidate) {
<a name="l04032"></a>04032         <span class="comment">/* i found a new widget */</span>
<a name="l04033"></a>04033         <span class="keywordflow">if</span> (candidate-&gt;<a class="code" href="classMMSWidget.html#d1d096cef23b06b2db6acc96cf774c08">getId</a>() != this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#d1d096cef23b06b2db6acc96cf774c08">getId</a>()) {
<a name="l04034"></a>04034             <span class="comment">/* different from current focus */</span>
<a name="l04035"></a>04035             this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#09868f299568c6a7dc4cdcd1c94c1198">setFocus</a>(<span class="keyword">false</span>);
<a name="l04036"></a>04036             candidate-&gt;<a class="code" href="classMMSWidget.html#09868f299568c6a7dc4cdcd1c94c1198">setFocus</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, inputevent);
<a name="l04037"></a>04037             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04038"></a>04038         }
<a name="l04039"></a>04039     }
<a name="l04040"></a>04040 
<a name="l04041"></a>04041     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04042"></a>04042 }
<a name="l04043"></a>04043 
<a name="l04044"></a>04044 
<a name="l04045"></a>04045 
<a name="l04046"></a><a class="code" href="classMMSWindow.html#c6a8392f3cf09937275df9fcb998a731">04046</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#c6a8392f3cf09937275df9fcb998a731" title="Internal method: Remove the focus from the currently focused child window. Goal:...">MMSWindow::removeChildWinFocus</a>() {
<a name="l04047"></a>04047     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() &gt; this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>) {
<a name="l04048"></a>04048 
<a name="l04049"></a>04049         <span class="comment">/* get the focused childwin */</span>
<a name="l04050"></a>04050         <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *fWin = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).window;
<a name="l04051"></a>04051 
<a name="l04052"></a>04052         <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.empty()) {
<a name="l04053"></a>04053             <span class="comment">/* save focused widget from current window and remove the focus */</span>
<a name="l04054"></a>04054             <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size();i++) {
<a name="l04055"></a>04055                 <span class="keywordflow">if</span>(fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;isFocused()) {
<a name="l04056"></a>04056                     <span class="keywordflow">try</span> {
<a name="l04057"></a>04057                         <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).focusedWidget = i;
<a name="l04058"></a>04058                     } <span class="keywordflow">catch</span> (std::exception&amp;) {
<a name="l04059"></a>04059                     }
<a name="l04060"></a>04060                     fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;setFocus(<span class="keyword">false</span>);
<a name="l04061"></a>04061 
<a name="l04062"></a>04062                     <span class="comment">/* set the arrow widgets */</span>
<a name="l04063"></a>04063                     fWin-&gt;<a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04064"></a>04064 
<a name="l04065"></a>04065                     <span class="keywordflow">break</span>;
<a name="l04066"></a>04066                 }
<a name="l04067"></a>04067             }
<a name="l04068"></a>04068         }
<a name="l04069"></a>04069         <span class="keywordflow">else</span> {
<a name="l04070"></a>04070             <span class="comment">/* recursive to my focused childwin */</span>
<a name="l04071"></a>04071             fWin-&gt;<a class="code" href="classMMSWindow.html#c6a8392f3cf09937275df9fcb998a731" title="Internal method: Remove the focus from the currently focused child window. Goal:...">removeChildWinFocus</a>();
<a name="l04072"></a>04072         }
<a name="l04073"></a>04073     }
<a name="l04074"></a>04074 }
<a name="l04075"></a>04075 
<a name="l04076"></a><a class="code" href="classMMSWindow.html#38bb167e0f7d90acf1e62d0ce3e77a9c">04076</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#38bb167e0f7d90acf1e62d0ce3e77a9c" title="Internal method: Restore the focus to the currently focused child window. Goal: Change...">MMSWindow::restoreChildWinFocus</a>(<a class="code" href="structMMSInputEvent.html">MMSInputEvent</a> *inputevent) {
<a name="l04077"></a>04077 
<a name="l04078"></a>04078     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() &gt; this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>) {
<a name="l04079"></a>04079 
<a name="l04080"></a>04080         <span class="comment">/* get the focused childwin */</span>
<a name="l04081"></a>04081         <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *fWin = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).window;
<a name="l04082"></a>04082 
<a name="l04083"></a>04083         <span class="comment">/* check if something to focus */</span>
<a name="l04084"></a>04084         <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#7aaf738d72d7f9932d9852606b217e9f" title="Get the number of focusable widgets.">getNumberOfFocusableWidgets</a>())
<a name="l04085"></a>04085             <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#0aeecf9b8419e796faac96ce4b1ad380" title="Get the number of focusable child windows.">getNumberOfFocusableChildWins</a>())
<a name="l04086"></a>04086                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04087"></a>04087 
<a name="l04088"></a>04088         <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.empty()) {
<a name="l04089"></a>04089             <span class="comment">/* restore focused widget to candidate window */</span>
<a name="l04090"></a>04090             <span class="keywordtype">bool</span> b;
<a name="l04091"></a>04091             <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(this-&gt;childwins.at(this-&gt;focusedChildWin).focusedWidget)-&gt;<a class="code" href="classMMSWindow.html#b3734c53ae3293d16eecc3024ff56d1b" title="Detect if the window can be focused.">getFocusable</a>(b))
<a name="l04092"></a>04092                 b = <span class="keyword">false</span>;
<a name="l04093"></a>04093 
<a name="l04094"></a>04094             <span class="keywordflow">if</span> (b) {
<a name="l04095"></a>04095                 <span class="keywordtype">string</span> inputmode = <span class="stringliteral">""</span>;
<a name="l04096"></a>04096                 fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;focusedChildWin).focusedWidget)-&gt;getInputModeEx(inputmode);
<a name="l04097"></a>04097                 <span class="keywordflow">if</span> (<a class="code" href="tools_8h.html#9cc8f0cf29eba1975b26342af280a1ba">strToUpr</a>(inputmode) != <span class="stringliteral">"CLICK"</span>) {
<a name="l04098"></a>04098                     fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;focusedChildWin).focusedWidget)-&gt;<a class="code" href="classMMSWindow.html#440b4f9fe056188c5560a0a7fcfe4d62" title="Set the focus to this window.">setFocus</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, inputevent);
<a name="l04099"></a>04099                 }
<a name="l04100"></a>04100             }
<a name="l04101"></a>04101             <span class="keywordflow">else</span> {
<a name="l04102"></a>04102                 <span class="comment">/* last focusable widget is not focusable anymore, search other widget to focus */</span>
<a name="l04103"></a>04103                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size();i++) {
<a name="l04104"></a>04104                     <span class="keywordflow">if</span>(fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getFocusable(b))
<a name="l04105"></a>04105                         <span class="keywordflow">if</span> (b) {
<a name="l04106"></a>04106                             this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).focusedWidget = i;
<a name="l04107"></a>04107 
<a name="l04108"></a>04108                             <span class="keywordtype">string</span> inputmode = <span class="stringliteral">""</span>;
<a name="l04109"></a>04109                             fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getInputModeEx(inputmode);
<a name="l04110"></a>04110                             <span class="keywordflow">if</span> (<a class="code" href="tools_8h.html#9cc8f0cf29eba1975b26342af280a1ba">strToUpr</a>(inputmode) != <span class="stringliteral">"CLICK"</span>) {
<a name="l04111"></a>04111                                 fWin-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;setFocus(<span class="keyword">true</span>, <span class="keyword">true</span>, inputevent);
<a name="l04112"></a>04112                             }
<a name="l04113"></a>04113 
<a name="l04114"></a>04114                             <span class="keywordflow">break</span>;
<a name="l04115"></a>04115                         }
<a name="l04116"></a>04116                 }
<a name="l04117"></a>04117             }
<a name="l04118"></a>04118 
<a name="l04119"></a>04119             <span class="comment">/* set the arrow widgets */</span>
<a name="l04120"></a>04120             fWin-&gt;<a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04121"></a>04121         }
<a name="l04122"></a>04122         <span class="keywordflow">else</span> {
<a name="l04123"></a>04123             <span class="comment">/* recursive to my focused childwin */</span>
<a name="l04124"></a>04124             <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#38bb167e0f7d90acf1e62d0ce3e77a9c" title="Internal method: Restore the focus to the currently focused child window. Goal: Change...">restoreChildWinFocus</a>(inputevent)) {
<a name="l04125"></a>04125 
<a name="l04126"></a>04126                 <span class="comment">/* nothing to focus, searching for other childwin */</span>
<a name="l04127"></a>04127                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; fWin-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l04128"></a>04128                     <span class="keywordflow">if</span> (i == fWin-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>)
<a name="l04129"></a>04129                         <span class="keywordflow">continue</span>;
<a name="l04130"></a>04130 
<a name="l04131"></a>04131                     <span class="comment">/* found */</span>
<a name="l04132"></a>04132                     fWin-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = i;
<a name="l04133"></a>04133 
<a name="l04134"></a>04134                     <span class="comment">/* next try */</span>
<a name="l04135"></a>04135                     <span class="keywordflow">if</span> (fWin-&gt;<a class="code" href="classMMSWindow.html#38bb167e0f7d90acf1e62d0ce3e77a9c" title="Internal method: Restore the focus to the currently focused child window. Goal: Change...">restoreChildWinFocus</a>(inputevent))
<a name="l04136"></a>04136                         <span class="comment">/* okay */</span>
<a name="l04137"></a>04137                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04138"></a>04138                     <span class="keywordflow">else</span>
<a name="l04139"></a>04139                         <span class="comment">/* try with next */</span>
<a name="l04140"></a>04140                         <span class="keywordflow">continue</span>;
<a name="l04141"></a>04141                 }
<a name="l04142"></a>04142 
<a name="l04143"></a>04143                 <span class="comment">/* no childwin found, reset the focus to the first childwin */</span>
<a name="l04144"></a>04144                 fWin-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = 0;
<a name="l04145"></a>04145                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04146"></a>04146             }
<a name="l04147"></a>04147         }
<a name="l04148"></a>04148     }
<a name="l04149"></a>04149 
<a name="l04150"></a>04150     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04151"></a>04151 }
<a name="l04152"></a>04152 
<a name="l04153"></a>04153 
<a name="l04154"></a><a class="code" href="classMMSWindow.html#440b4f9fe056188c5560a0a7fcfe4d62">04154</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#440b4f9fe056188c5560a0a7fcfe4d62" title="Set the focus to this window.">MMSWindow::setFocus</a>() {
<a name="l04155"></a>04155 
<a name="l04156"></a>04156 <span class="comment">//printf("MMSWindow::setFocus %08x, %s\n", this, name.c_str());</span>
<a name="l04157"></a>04157 
<a name="l04158"></a>04158     <span class="comment">// i do only work for child windows</span>
<a name="l04159"></a>04159     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) <span class="keywordflow">return</span>;
<a name="l04160"></a>04160 
<a name="l04161"></a>04161     <span class="comment">// check if focusable</span>
<a name="l04162"></a>04162     <span class="keywordtype">bool</span> focusable = <span class="keyword">false</span>;
<a name="l04163"></a>04163     <a class="code" href="classMMSWindow.html#b3734c53ae3293d16eecc3024ff56d1b" title="Detect if the window can be focused.">getFocusable</a>(focusable);
<a name="l04164"></a>04164     <span class="keywordflow">if</span> (!focusable) <span class="keywordflow">return</span>;
<a name="l04165"></a>04165 
<a name="l04166"></a>04166     <span class="comment">// searching me</span>
<a name="l04167"></a>04167     <span class="keywordtype">int</span> me = -1;
<a name="l04168"></a>04168     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++)
<a name="l04169"></a>04169         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window == <span class="keyword">this</span>) {
<a name="l04170"></a>04170             me = i;
<a name="l04171"></a>04171             <span class="keywordflow">break</span>;
<a name="l04172"></a>04172         }
<a name="l04173"></a>04173 
<a name="l04174"></a>04174 <span class="comment">//printf("setFocus2 %s\n", name.c_str());</span>
<a name="l04175"></a>04175 
<a name="l04176"></a>04176     <span class="comment">// found within parents list?</span>
<a name="l04177"></a>04177     <span class="keywordflow">if</span> (me &lt; 0) <span class="keywordflow">return</span>;
<a name="l04178"></a>04178 
<a name="l04179"></a>04179 <span class="comment">//printf("setFocus3 %s, %d, %d, parent = %s\n", name.c_str(), this-&gt;parent-&gt;focusedChildWin, me, this-&gt;parent-&gt;name.c_str());</span>
<a name="l04180"></a>04180 
<a name="l04181"></a>04181     <span class="comment">// check if shown</span>
<a name="l04182"></a>04182     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>() &amp;&amp; !this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a>) {
<a name="l04183"></a>04183         this-&gt;<a class="code" href="classMMSWindow.html#15a6054233a9e9dd8ce09565d9bcf5ac" title="Makes a window visible.">show</a>();
<a name="l04184"></a>04184         this-&gt;<a class="code" href="classMMSWindow.html#52d4d1b3583773287bf44c617085b55c" title="Can be called after show() waiting for end of showAction thread.">waitUntilShown</a>();
<a name="l04185"></a>04185     }
<a name="l04186"></a>04186 
<a name="l04187"></a>04187     <span class="comment">// currently focused child window?</span>
<a name="l04188"></a>04188     <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> == me) <span class="keywordflow">return</span>;
<a name="l04189"></a>04189 
<a name="l04190"></a>04190 <span class="comment">//printf("setFocus4 %s\n", name.c_str());</span>
<a name="l04191"></a>04191 
<a name="l04192"></a>04192     <span class="comment">// save focused widget from current window and remove the focus</span>
<a name="l04193"></a>04193     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#c6a8392f3cf09937275df9fcb998a731" title="Internal method: Remove the focus from the currently focused child window. Goal:...">removeChildWinFocus</a>();
<a name="l04194"></a>04194 
<a name="l04195"></a>04195     <span class="comment">// i am the new focused window</span>
<a name="l04196"></a>04196     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = me;
<a name="l04197"></a>04197 
<a name="l04198"></a>04198     <span class="comment">// restore focused widget to candidate window</span>
<a name="l04199"></a>04199     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#38bb167e0f7d90acf1e62d0ce3e77a9c" title="Internal method: Restore the focus to the currently focused child window. Goal: Change...">restoreChildWinFocus</a>();
<a name="l04200"></a>04200 
<a name="l04201"></a>04201     <span class="comment">// change the z-order of child windows?</span>
<a name="l04202"></a>04202     <span class="keywordtype">bool</span> staticzorder = <span class="keyword">false</span>;
<a name="l04203"></a>04203     this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#b251c8f0b8846f8ce8d5961078581b97" title="Detect if the window automatically changes the zorder of child windows during show()...">getStaticZOrder</a>(staticzorder);
<a name="l04204"></a>04204     <span class="keywordflow">if</span> (!staticzorder) {
<a name="l04205"></a>04205         <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call raiseToTop"</span>);
<a name="l04206"></a>04206         <a class="code" href="classMMSWindow.html#3fa6c954489b646f748329f76bd342e2">raiseToTop</a>();
<a name="l04207"></a>04207     }
<a name="l04208"></a>04208 }
<a name="l04209"></a>04209 
<a name="l04210"></a><a class="code" href="classMMSWindow.html#4726b52fe2e49e45dea7f44d4aebb686">04210</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#4726b52fe2e49e45dea7f44d4aebb686" title="Is the window focused?">MMSWindow::getFocus</a>(<span class="keywordtype">bool</span> checkparents) {
<a name="l04211"></a>04211     <span class="comment">// check if i am a child window</span>
<a name="l04212"></a>04212     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l04213"></a>04213         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#55d085904248fd88c83a080e39eb6af9">getToplevelWindow</a>() == <span class="keyword">this</span>)
<a name="l04214"></a>04214             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04215"></a>04215         <span class="keywordflow">else</span>
<a name="l04216"></a>04216             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04217"></a>04217     }
<a name="l04218"></a>04218 
<a name="l04219"></a>04219     <span class="comment">// search me</span>
<a name="l04220"></a>04220     <span class="keywordtype">int</span> me = -1;
<a name="l04221"></a>04221     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++)
<a name="l04222"></a>04222         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window == <span class="keyword">this</span>) {
<a name="l04223"></a>04223             me = i;
<a name="l04224"></a>04224             <span class="keywordflow">break</span>;
<a name="l04225"></a>04225         }
<a name="l04226"></a>04226 
<a name="l04227"></a>04227     <span class="comment">// i have found me within my parents list</span>
<a name="l04228"></a>04228     <span class="keywordflow">if</span> (me &lt; 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04229"></a>04229 
<a name="l04230"></a>04230     <span class="comment">// i am the currently focused child window?</span>
<a name="l04231"></a>04231     <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> == me) {
<a name="l04232"></a>04232         <span class="keywordflow">if</span> (checkparents)
<a name="l04233"></a>04233             <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#4726b52fe2e49e45dea7f44d4aebb686" title="Is the window focused?">getFocus</a>(checkparents);
<a name="l04234"></a>04234         <span class="keywordflow">else</span>
<a name="l04235"></a>04235             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04236"></a>04236     }
<a name="l04237"></a>04237     <span class="keywordflow">else</span>
<a name="l04238"></a>04238         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04239"></a>04239 }
<a name="l04240"></a>04240 
<a name="l04241"></a><a class="code" href="classMMSWindow.html#b0e73e63f9822e8709aa2c87c1f4ebc0">04241</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#b0e73e63f9822e8709aa2c87c1f4ebc0" title="Internal method: Handle child window navigation (up/down/left/right).">MMSWindow::handleNavigationForChildWins</a>(<a class="code" href="structMMSInputEvent.html">MMSInputEvent</a> *inputevent) {
<a name="l04242"></a>04242     <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *candidate = NULL;
<a name="l04243"></a>04243     <span class="keywordtype">int</span> cand=-1;
<a name="l04244"></a>04244 
<a name="l04245"></a>04245     <span class="comment">/* check if I have child windows */</span>
<a name="l04246"></a>04246     <span class="keywordflow">if</span> (!(this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() &gt; this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>))
<a name="l04247"></a>04247         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04248"></a>04248 
<a name="l04249"></a>04249     <span class="comment">/* get access to the focused child window */</span>
<a name="l04250"></a>04250     <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *fWin = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).window;
<a name="l04251"></a>04251 
<a name="l04252"></a>04252     <span class="keywordflow">if</span> (inputevent-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a> == <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc2609318c7f66765835a326411f9bcc8370a1">MMSINPUTEVENTTYPE_KEYPRESS</a>) {
<a name="l04253"></a>04253         <span class="comment">/* keyboard inputs */</span>
<a name="l04254"></a>04254 
<a name="l04255"></a>04255         <span class="comment">/* check if window names for navigation are set to the focused child window */</span>
<a name="l04256"></a>04256         <span class="keywordflow">switch</span> (inputevent-&gt;<a class="code" href="structMMSInputEvent.html#39baa7bb431c0c28bc7b2d0bf155e16e">key</a>) {
<a name="l04257"></a>04257             <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>:
<a name="l04258"></a>04258                 candidate = fWin-&gt;<a class="code" href="classMMSWindow.html#5212ef060e299456185a170ab1645003" title="Get the window to which the GUI navigates if the user press down.">getNavigateDownWindow</a>();
<a name="l04259"></a>04259                 <span class="keywordflow">break</span>;
<a name="l04260"></a>04260             <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>:
<a name="l04261"></a>04261                 candidate = fWin-&gt;<a class="code" href="classMMSWindow.html#4f0cf8a6de042d4266a90d195227fef7" title="Get the window to which the GUI navigates if the user press up.">getNavigateUpWindow</a>();
<a name="l04262"></a>04262                 <span class="keywordflow">break</span>;
<a name="l04263"></a>04263             <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>:
<a name="l04264"></a>04264                 candidate = fWin-&gt;<a class="code" href="classMMSWindow.html#70d5330b8f30abb43d66689d83912ddb" title="Get the window to which the GUI navigates if the user press right.">getNavigateRightWindow</a>();
<a name="l04265"></a>04265                 <span class="keywordflow">break</span>;
<a name="l04266"></a>04266             <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>:
<a name="l04267"></a>04267                 candidate = fWin-&gt;<a class="code" href="classMMSWindow.html#43f3330e7592eb67da0a4a18c6bff581" title="Get the window to which the GUI navigates if the user press left.">getNavigateLeftWindow</a>();
<a name="l04268"></a>04268                 <span class="keywordflow">break</span>;
<a name="l04269"></a>04269 
<a name="l04270"></a>04270             <span class="keywordflow">default</span>:
<a name="l04271"></a>04271                 <span class="keywordflow">break</span>;
<a name="l04272"></a>04272         }
<a name="l04273"></a>04273     }
<a name="l04274"></a>04274     <span class="keywordflow">else</span> {
<a name="l04275"></a>04275         <span class="comment">/* other inputs */</span>
<a name="l04276"></a>04276 
<a name="l04277"></a>04277     }
<a name="l04278"></a>04278 
<a name="l04279"></a>04279     <span class="keywordflow">if</span> (candidate) {
<a name="l04280"></a>04280         <span class="comment">/* check if candidate has something to focus */</span>
<a name="l04281"></a>04281         <span class="keywordflow">if</span> (!candidate-&gt;<a class="code" href="classMMSWindow.html#7aaf738d72d7f9932d9852606b217e9f" title="Get the number of focusable widgets.">getNumberOfFocusableWidgets</a>())
<a name="l04282"></a>04282             <span class="keywordflow">if</span> (!candidate-&gt;<a class="code" href="classMMSWindow.html#0aeecf9b8419e796faac96ce4b1ad380" title="Get the number of focusable child windows.">getNumberOfFocusableChildWins</a>())
<a name="l04283"></a>04283                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04284"></a>04284 
<a name="l04285"></a>04285         <span class="comment">/* i found a new window */</span>
<a name="l04286"></a>04286         <span class="keywordflow">if</span> (candidate != fWin) {
<a name="l04287"></a>04287             <span class="comment">/* different from current focus */</span>
<a name="l04288"></a>04288             <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l04289"></a>04289                 <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window == candidate) {
<a name="l04290"></a>04290                     cand = i;
<a name="l04291"></a>04291                     <span class="keywordflow">break</span>;
<a name="l04292"></a>04292                 }
<a name="l04293"></a>04293             }
<a name="l04294"></a>04294             <span class="keywordflow">if</span> (cand &lt; 0)
<a name="l04295"></a>04295                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04296"></a>04296 
<a name="l04297"></a>04297             <span class="comment">/* save focused widget from current window and remove the focus */</span>
<a name="l04298"></a>04298             <a class="code" href="classMMSWindow.html#c6a8392f3cf09937275df9fcb998a731" title="Internal method: Remove the focus from the currently focused child window. Goal:...">removeChildWinFocus</a>();
<a name="l04299"></a>04299 
<a name="l04300"></a>04300             <span class="comment">/* new focused window */</span>
<a name="l04301"></a>04301             this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a> = cand;
<a name="l04302"></a>04302 
<a name="l04303"></a>04303             <span class="comment">/* restore focused widget to candidate window */</span>
<a name="l04304"></a>04304             <a class="code" href="classMMSWindow.html#38bb167e0f7d90acf1e62d0ce3e77a9c" title="Internal method: Restore the focus to the currently focused child window. Goal: Change...">restoreChildWinFocus</a>(inputevent);
<a name="l04305"></a>04305 
<a name="l04306"></a>04306             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04307"></a>04307         }
<a name="l04308"></a>04308     }
<a name="l04309"></a>04309 
<a name="l04310"></a>04310     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04311"></a>04311 }
<a name="l04312"></a>04312 
<a name="l04313"></a>04313 
<a name="l04314"></a><a class="code" href="classMMSWindow.html#4e21c34dbb01f2b87df13d9c29d6f533">04314</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#4e21c34dbb01f2b87df13d9c29d6f533" title="Internal method: Do the pre-calculation of the navigation routes.">MMSWindow::preCalcNavigation</a>() {
<a name="l04315"></a>04315 
<a name="l04316"></a>04316     <a class="code" href="classMMSWindow.html#f47a547f3bae106e1daaa99664614bfa" title="lock the pre-calculation of the navigation">preCalcNaviLock</a>.<a class="code" href="classMMSMutex.html#3e92cd5170706c0d1a0f5c87a0719494">lock</a>();
<a name="l04317"></a>04317 
<a name="l04318"></a>04318     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.empty()) {
<a name="l04319"></a>04319         <span class="comment">/* for each focusable widget */</span>
<a name="l04320"></a>04320         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); k++) {
<a name="l04321"></a>04321             <span class="comment">/* simulate that this widget has the focus */</span>
<a name="l04322"></a>04322             <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *fwidget = <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(k);
<a name="l04323"></a>04323             <span class="keywordtype">bool</span>    b;
<a name="l04324"></a>04324             <span class="keywordtype">string</span>  s;
<a name="l04325"></a>04325 
<a name="l04326"></a>04326             <span class="keywordflow">if</span> (!fwidget-&gt;<a class="code" href="classMMSWidget.html#f07560b3ba6575b859293728c4214698">getFocusable</a>(b))
<a name="l04327"></a>04327                 <span class="keywordflow">continue</span>;
<a name="l04328"></a>04328             <span class="keywordflow">if</span> (!b)
<a name="l04329"></a>04329                 <span class="keywordflow">continue</span>;
<a name="l04330"></a>04330 
<a name="l04331"></a>04331             <span class="comment">/* for up, down, left right keys */</span>
<a name="l04332"></a>04332             <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; 4; j++) {
<a name="l04333"></a>04333                 <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043" title="supported keys">MMSKeySymbol</a> key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0436280a551e4ae82d354af5118ab1ad98c">MMSKEY_NULL</a>;
<a name="l04334"></a>04334                 <span class="keywordflow">switch</span> (j) {
<a name="l04335"></a>04335                     <span class="keywordflow">case</span> 0:
<a name="l04336"></a>04336                         key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>;
<a name="l04337"></a>04337                         <span class="keywordflow">break</span>;
<a name="l04338"></a>04338                     <span class="keywordflow">case</span> 1:
<a name="l04339"></a>04339                         key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>;
<a name="l04340"></a>04340                         <span class="keywordflow">break</span>;
<a name="l04341"></a>04341                     <span class="keywordflow">case</span> 2:
<a name="l04342"></a>04342                         key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>;
<a name="l04343"></a>04343                         <span class="keywordflow">break</span>;
<a name="l04344"></a>04344                     <span class="keywordflow">case</span> 3:
<a name="l04345"></a>04345                         key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>;
<a name="l04346"></a>04346                         <span class="keywordflow">break</span>;
<a name="l04347"></a>04347                 }
<a name="l04348"></a>04348 
<a name="l04349"></a>04349                 <span class="comment">/* searching for next widget to become the focus */</span>
<a name="l04350"></a>04350                 <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> fGeom = fwidget-&gt;<a class="code" href="classMMSWidget.html#1414244912b618cf8edbca1270d90e03">getGeometry</a>();
<a name="l04351"></a>04351                 <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *candidate = NULL;
<a name="l04352"></a>04352                 <span class="keywordtype">double</span> dgcode = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l04353"></a>04353 
<a name="l04354"></a>04354                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); i++) {
<a name="l04355"></a>04355                     <span class="comment">/* get widget */</span>
<a name="l04356"></a>04356                     <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *widget = <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i);
<a name="l04357"></a>04357 
<a name="l04358"></a>04358                     <span class="comment">/* not for already focused widget */</span>
<a name="l04359"></a>04359                     <span class="keywordflow">if</span> (i != k) {
<a name="l04360"></a>04360                         <span class="comment">/* its not the already focused one */</span>
<a name="l04361"></a>04361                         <span class="keywordflow">if</span> (widget-&gt;<a class="code" href="classMMSWidget.html#f07560b3ba6575b859293728c4214698">getFocusable</a>(b))
<a name="l04362"></a>04362                             <span class="keywordflow">if</span> (b) {
<a name="l04363"></a>04363                                 <span class="comment">/* basically it can be focused */</span>
<a name="l04364"></a>04364                                 <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> wGeom = widget-&gt;<a class="code" href="classMMSWidget.html#1414244912b618cf8edbca1270d90e03">getGeometry</a>();
<a name="l04365"></a>04365                                 <span class="keywordtype">double</span> cand_dgcode = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l04366"></a>04366 
<a name="l04367"></a>04367                                 <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>)
<a name="l04368"></a>04368                                     cand_dgcode = <a class="code" href="classMMSWindow.html#a9cdd12cdcb6a5f0182219647cad33c8" title="Internal method: Used to find best candidate to navigate down from currPos.">calculateDistGradCode_Down</a>(fGeom, wGeom);
<a name="l04369"></a>04369                                 <span class="keywordflow">else</span>
<a name="l04370"></a>04370                                 <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>)
<a name="l04371"></a>04371                                     cand_dgcode = <a class="code" href="classMMSWindow.html#d8249fe482f43f2c16891e1a7e3d0a38" title="Internal method: Used to find best candidate to navigate up from currPos.">calculateDistGradCode_Up</a>(fGeom, wGeom);
<a name="l04372"></a>04372                                 <span class="keywordflow">else</span>
<a name="l04373"></a>04373                                 <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>)
<a name="l04374"></a>04374                                     cand_dgcode = <a class="code" href="classMMSWindow.html#3c81537a06423cb58b9ff021d577674f" title="Internal method: Used to find best candidate to navigate right from currPos.">calculateDistGradCode_Right</a>(fGeom, wGeom);
<a name="l04375"></a>04375                                 <span class="keywordflow">else</span>
<a name="l04376"></a>04376                                 <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>)
<a name="l04377"></a>04377                                     cand_dgcode = <a class="code" href="classMMSWindow.html#989838bf265cfa2e8b399cc4786f883a" title="Internal method: Used to find best candidate to navigate left from currPos.">calculateDistGradCode_Left</a>(fGeom, wGeom);
<a name="l04378"></a>04378 
<a name="l04379"></a>04379                                 <span class="comment">/* new candidate? */</span>
<a name="l04380"></a>04380                                 <span class="keywordflow">if</span> (cand_dgcode &lt; dgcode) {
<a name="l04381"></a>04381                                     <span class="comment">/* yes, make it to my new candidate */</span>
<a name="l04382"></a>04382                                     candidate = widget;
<a name="l04383"></a>04383                                     dgcode = cand_dgcode;
<a name="l04384"></a>04384                                 }
<a name="l04385"></a>04385                             }
<a name="l04386"></a>04386                     }
<a name="l04387"></a>04387                 }
<a name="l04388"></a>04388 
<a name="l04389"></a>04389                 <span class="keywordflow">if</span> (candidate) {
<a name="l04390"></a>04390                     <span class="comment">/* i found a new widget */</span>
<a name="l04391"></a>04391                     <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>) {
<a name="l04392"></a>04392                         <span class="keywordflow">if</span> (!fwidget-&gt;<a class="code" href="classMMSWidget.html#7188fdf813698f0626979b3a6aad7273">getNavigateDown</a>(s))
<a name="l04393"></a>04393                             fwidget-&gt;<a class="code" href="classMMSWidget.html#cc77e1ab9fb638e74e1c42badc7bdfc8">setNavigateDownWidget</a>(candidate);
<a name="l04394"></a>04394                         <span class="keywordflow">else</span>
<a name="l04395"></a>04395                             <span class="keywordflow">if</span> (s == <span class="stringliteral">""</span>)
<a name="l04396"></a>04396                                 fwidget-&gt;<a class="code" href="classMMSWidget.html#cc77e1ab9fb638e74e1c42badc7bdfc8">setNavigateDownWidget</a>(candidate);
<a name="l04397"></a>04397                     } <span class="keywordflow">else</span>
<a name="l04398"></a>04398                     <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>) {
<a name="l04399"></a>04399                         <span class="keywordflow">if</span> (!fwidget-&gt;<a class="code" href="classMMSWidget.html#a6b85acc6397f8945bea9b827383f01d">getNavigateUp</a>(s))
<a name="l04400"></a>04400                             fwidget-&gt;<a class="code" href="classMMSWidget.html#5d3bdde7f11b3002b43f40243578dc8a">setNavigateUpWidget</a>(candidate);
<a name="l04401"></a>04401                         <span class="keywordflow">else</span>
<a name="l04402"></a>04402                             <span class="keywordflow">if</span> (s == <span class="stringliteral">""</span>)
<a name="l04403"></a>04403                                 fwidget-&gt;<a class="code" href="classMMSWidget.html#5d3bdde7f11b3002b43f40243578dc8a">setNavigateUpWidget</a>(candidate);
<a name="l04404"></a>04404                     } <span class="keywordflow">else</span>
<a name="l04405"></a>04405                     <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>) {
<a name="l04406"></a>04406                         <span class="keywordflow">if</span> (!fwidget-&gt;<a class="code" href="classMMSWidget.html#c4b8c1dcd84345568769625589bbeab4">getNavigateRight</a>(s))
<a name="l04407"></a>04407                             fwidget-&gt;<a class="code" href="classMMSWidget.html#ae45cd88c58ca7a0820b1292bc976d32">setNavigateRightWidget</a>(candidate);
<a name="l04408"></a>04408                         <span class="keywordflow">else</span>
<a name="l04409"></a>04409                             <span class="keywordflow">if</span> (s == <span class="stringliteral">""</span>)
<a name="l04410"></a>04410                                 fwidget-&gt;<a class="code" href="classMMSWidget.html#ae45cd88c58ca7a0820b1292bc976d32">setNavigateRightWidget</a>(candidate);
<a name="l04411"></a>04411                     } <span class="keywordflow">else</span>
<a name="l04412"></a>04412                     <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>) {
<a name="l04413"></a>04413                         <span class="keywordflow">if</span> (!fwidget-&gt;<a class="code" href="classMMSWidget.html#63c7ff8c978ccda7c8885899f5c17c33">getNavigateLeft</a>(s))
<a name="l04414"></a>04414                             fwidget-&gt;<a class="code" href="classMMSWidget.html#f9f75966adc7baaeeacb0a8107bf4951">setNavigateLeftWidget</a>(candidate);
<a name="l04415"></a>04415                         <span class="keywordflow">else</span>
<a name="l04416"></a>04416                             <span class="keywordflow">if</span> (s == <span class="stringliteral">""</span>)
<a name="l04417"></a>04417                                 fwidget-&gt;<a class="code" href="classMMSWidget.html#f9f75966adc7baaeeacb0a8107bf4951">setNavigateLeftWidget</a>(candidate);
<a name="l04418"></a>04418                     }
<a name="l04419"></a>04419                 }
<a name="l04420"></a>04420             }
<a name="l04421"></a>04421         }
<a name="l04422"></a>04422     }
<a name="l04423"></a>04423     <span class="keywordflow">else</span> {
<a name="l04424"></a>04424         <span class="comment">/* no widgets, work for child windows */</span>
<a name="l04425"></a>04425         <span class="comment">/* for each child window which have focusable widgets or child windows */</span>
<a name="l04426"></a>04426         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0; k &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); k++) {
<a name="l04427"></a>04427             <span class="comment">/* simulate that this window has the focus */</span>
<a name="l04428"></a>04428             <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *fWin = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(k).window;
<a name="l04429"></a>04429 
<a name="l04430"></a>04430             <span class="comment">/* only for visible windows */</span>
<a name="l04431"></a>04431             <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>())
<a name="l04432"></a>04432                 <span class="keywordflow">continue</span>;
<a name="l04433"></a>04433 
<a name="l04434"></a>04434             <span class="comment">/* search for shown parent */</span>
<a name="l04435"></a>04435             <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *p = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>;
<a name="l04436"></a>04436             <span class="keywordflow">while</span> (p) {
<a name="l04437"></a>04437                 <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l04438"></a>04438                     p = NULL;
<a name="l04439"></a>04439                     <span class="keywordflow">break</span>;
<a name="l04440"></a>04440                 }
<a name="l04441"></a>04441                 <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>())
<a name="l04442"></a>04442                     <span class="keywordflow">break</span>;
<a name="l04443"></a>04443                 p = p-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>;
<a name="l04444"></a>04444             }
<a name="l04445"></a>04445             <span class="keywordflow">if</span> (p)
<a name="l04446"></a>04446                 <span class="keywordflow">continue</span>;
<a name="l04447"></a>04447 
<a name="l04448"></a>04448             <span class="comment">/* check if i have something to focus */</span>
<a name="l04449"></a>04449             <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#7aaf738d72d7f9932d9852606b217e9f" title="Get the number of focusable widgets.">getNumberOfFocusableWidgets</a>())
<a name="l04450"></a>04450                 <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#0aeecf9b8419e796faac96ce4b1ad380" title="Get the number of focusable child windows.">getNumberOfFocusableChildWins</a>())
<a name="l04451"></a>04451                     <span class="keywordflow">continue</span>;
<a name="l04452"></a>04452 
<a name="l04453"></a>04453             <span class="comment">/* for up, down, left right keys */</span>
<a name="l04454"></a>04454             <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; 4; j++) {
<a name="l04455"></a>04455                 <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043" title="supported keys">MMSKeySymbol</a> key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0436280a551e4ae82d354af5118ab1ad98c">MMSKEY_NULL</a>;
<a name="l04456"></a>04456                 <span class="keywordflow">switch</span> (j) {
<a name="l04457"></a>04457                     <span class="keywordflow">case</span> 0:
<a name="l04458"></a>04458                         key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>;
<a name="l04459"></a>04459                         <span class="keywordflow">break</span>;
<a name="l04460"></a>04460                     <span class="keywordflow">case</span> 1:
<a name="l04461"></a>04461                         key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>;
<a name="l04462"></a>04462                         <span class="keywordflow">break</span>;
<a name="l04463"></a>04463                     <span class="keywordflow">case</span> 2:
<a name="l04464"></a>04464                         key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>;
<a name="l04465"></a>04465                         <span class="keywordflow">break</span>;
<a name="l04466"></a>04466                     <span class="keywordflow">case</span> 3:
<a name="l04467"></a>04467                         key = <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>;
<a name="l04468"></a>04468                         <span class="keywordflow">break</span>;
<a name="l04469"></a>04469                 }
<a name="l04470"></a>04470 
<a name="l04471"></a>04471 
<a name="l04472"></a>04472                 <span class="comment">/* searching for child window to become the focus */</span>
<a name="l04473"></a>04473                 <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> fGeom;
<a name="l04474"></a>04474                 fGeom.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = fWin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l04475"></a>04475                 fGeom.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = fWin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l04476"></a>04476                 fGeom.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = fWin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>;
<a name="l04477"></a>04477                 fGeom.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = fWin-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>;
<a name="l04478"></a>04478                 <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *candidate = NULL;
<a name="l04479"></a>04479                 <span class="keywordtype">double</span> dgcode = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l04480"></a>04480 
<a name="l04481"></a>04481                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l04482"></a>04482                     <span class="comment">/* get window */</span>
<a name="l04483"></a>04483                     <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a> = <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window;
<a name="l04484"></a>04484 
<a name="l04485"></a>04485                     <span class="comment">/* only for visible windows */</span>
<a name="l04486"></a>04486                     <span class="keywordflow">if</span> (!window-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>())
<a name="l04487"></a>04487                         <span class="keywordflow">continue</span>;
<a name="l04488"></a>04488 
<a name="l04489"></a>04489                     <span class="comment">/* not for already focused window */</span>
<a name="l04490"></a>04490                     <span class="keywordflow">if</span> (i != k) {
<a name="l04491"></a>04491                         <span class="comment">/* its not the already focused one */</span>
<a name="l04492"></a>04492                         <span class="keywordtype">int</span> fwd = window-&gt;<a class="code" href="classMMSWindow.html#7aaf738d72d7f9932d9852606b217e9f" title="Get the number of focusable widgets.">getNumberOfFocusableWidgets</a>();
<a name="l04493"></a>04493                         <span class="keywordtype">int</span> fwn = window-&gt;<a class="code" href="classMMSWindow.html#0aeecf9b8419e796faac96ce4b1ad380" title="Get the number of focusable child windows.">getNumberOfFocusableChildWins</a>();
<a name="l04494"></a>04494                         <span class="keywordflow">if</span> ((fwd&gt;0)||(fwn&gt;0)) {
<a name="l04495"></a>04495                             <span class="comment">/* basically it can be focused */</span>
<a name="l04496"></a>04496                             <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> wGeom;
<a name="l04497"></a>04497                             wGeom.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = window-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l04498"></a>04498                             wGeom.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = window-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l04499"></a>04499                             wGeom.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = window-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>;
<a name="l04500"></a>04500                             wGeom.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = window-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>;
<a name="l04501"></a>04501                             <span class="keywordtype">double</span> cand_dgcode = <a class="code" href="mmswindow_8cpp.html#358fa88ce0ff4f9b60ba0112b16ce268">MAXDGCODE</a>;
<a name="l04502"></a>04502 
<a name="l04503"></a>04503                             <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>)
<a name="l04504"></a>04504                                 cand_dgcode = <a class="code" href="classMMSWindow.html#a9cdd12cdcb6a5f0182219647cad33c8" title="Internal method: Used to find best candidate to navigate down from currPos.">calculateDistGradCode_Down</a>(fGeom, wGeom);
<a name="l04505"></a>04505                             <span class="keywordflow">else</span>
<a name="l04506"></a>04506                             <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>)
<a name="l04507"></a>04507                                 cand_dgcode = <a class="code" href="classMMSWindow.html#d8249fe482f43f2c16891e1a7e3d0a38" title="Internal method: Used to find best candidate to navigate up from currPos.">calculateDistGradCode_Up</a>(fGeom, wGeom);
<a name="l04508"></a>04508                             <span class="keywordflow">else</span>
<a name="l04509"></a>04509                             <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>)
<a name="l04510"></a>04510                                 cand_dgcode = <a class="code" href="classMMSWindow.html#3c81537a06423cb58b9ff021d577674f" title="Internal method: Used to find best candidate to navigate right from currPos.">calculateDistGradCode_Right</a>(fGeom, wGeom);
<a name="l04511"></a>04511                             <span class="keywordflow">else</span>
<a name="l04512"></a>04512                             <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>)
<a name="l04513"></a>04513                                 cand_dgcode = <a class="code" href="classMMSWindow.html#989838bf265cfa2e8b399cc4786f883a" title="Internal method: Used to find best candidate to navigate left from currPos.">calculateDistGradCode_Left</a>(fGeom, wGeom);
<a name="l04514"></a>04514 
<a name="l04515"></a>04515                             <span class="comment">/* new candidate? */</span>
<a name="l04516"></a>04516                             <span class="keywordflow">if</span> (cand_dgcode &lt; dgcode) {
<a name="l04517"></a>04517                                 <span class="comment">/* yes, make it to my new candidate */</span>
<a name="l04518"></a>04518                                 candidate = window;
<a name="l04519"></a>04519                                 dgcode = cand_dgcode;
<a name="l04520"></a>04520 
<a name="l04521"></a>04521                                 <span class="keywordflow">if</span> (fwn&gt;0) {
<a name="l04522"></a>04522                                     <a class="code" href="classMMSWindow.html#f47a547f3bae106e1daaa99664614bfa" title="lock the pre-calculation of the navigation">preCalcNaviLock</a>.<a class="code" href="classMMSMutex.html#4d74a213cf809b3b62671e19026b4219">unlock</a>();
<a name="l04523"></a>04523                                     window-&gt;<a class="code" href="classMMSWindow.html#4e21c34dbb01f2b87df13d9c29d6f533" title="Internal method: Do the pre-calculation of the navigation routes.">preCalcNavigation</a>();
<a name="l04524"></a>04524                                     <a class="code" href="classMMSWindow.html#f47a547f3bae106e1daaa99664614bfa" title="lock the pre-calculation of the navigation">preCalcNaviLock</a>.<a class="code" href="classMMSMutex.html#3e92cd5170706c0d1a0f5c87a0719494">lock</a>();
<a name="l04525"></a>04525                                 }
<a name="l04526"></a>04526                             }
<a name="l04527"></a>04527                         }
<a name="l04528"></a>04528                     }
<a name="l04529"></a>04529                 }
<a name="l04530"></a>04530 
<a name="l04531"></a>04531                 <span class="comment">/* i found a new window */</span>
<a name="l04532"></a>04532                 <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>) {
<a name="l04533"></a>04533                     <span class="keywordtype">string</span> s;
<a name="l04534"></a>04534                     <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#c9c2e57cae8564ad96c8b0c474620b8c" title="Get the name of the navigatedown window.">getNavigateDown</a>(s)) s = <span class="stringliteral">""</span>;
<a name="l04535"></a>04535                     <span class="keywordflow">if</span> (s == <span class="stringliteral">""</span>)
<a name="l04536"></a>04536                         fWin-&gt;<a class="code" href="classMMSWindow.html#8be45bc6ffc6bf454beb72666d414fe1" title="Set the window to which the GUI navigates if the user press down.">setNavigateDownWindow</a>(candidate);
<a name="l04537"></a>04537                 } <span class="keywordflow">else</span>
<a name="l04538"></a>04538                 <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>) {
<a name="l04539"></a>04539                     <span class="keywordtype">string</span> s;
<a name="l04540"></a>04540                     <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#a4e8f39ada4cbbf55d8b9a0c81b3a93e" title="Get the name of the navigateup window.">getNavigateUp</a>(s)) s = <span class="stringliteral">""</span>;
<a name="l04541"></a>04541                     <span class="keywordflow">if</span> (s == <span class="stringliteral">""</span>)
<a name="l04542"></a>04542                         fWin-&gt;<a class="code" href="classMMSWindow.html#06ee6ee636d9708236833ad170f1fcc6" title="Set the window to which the GUI navigates if the user press up.">setNavigateUpWindow</a>(candidate);
<a name="l04543"></a>04543                 } <span class="keywordflow">else</span>
<a name="l04544"></a>04544                 <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>) {
<a name="l04545"></a>04545                     <span class="keywordtype">string</span> s;
<a name="l04546"></a>04546                     <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#c8101d2c3719ee8568bf4fc339e0b8da" title="Get the name of the navigateright window.">getNavigateRight</a>(s)) s = <span class="stringliteral">""</span>;
<a name="l04547"></a>04547                     <span class="keywordflow">if</span> (s == <span class="stringliteral">""</span>)
<a name="l04548"></a>04548                         fWin-&gt;<a class="code" href="classMMSWindow.html#4242fa5c9847f8cdb70aacd619bf3ca8" title="Set the window to which the GUI navigates if the user press right.">setNavigateRightWindow</a>(candidate);
<a name="l04549"></a>04549                 } <span class="keywordflow">else</span>
<a name="l04550"></a>04550                 <span class="keywordflow">if</span> (key == <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>) {
<a name="l04551"></a>04551                     <span class="keywordtype">string</span> s;
<a name="l04552"></a>04552                     <span class="keywordflow">if</span> (!fWin-&gt;<a class="code" href="classMMSWindow.html#40b9531df602501e2949b464a8f1ebf1" title="Get the name of the navigateleft window.">getNavigateLeft</a>(s)) s = <span class="stringliteral">""</span>;
<a name="l04553"></a>04553                     <span class="keywordflow">if</span> (s == <span class="stringliteral">""</span>)
<a name="l04554"></a>04554                         fWin-&gt;<a class="code" href="classMMSWindow.html#409593deb5560e3db0848d276fef4da7" title="Set the window to which the GUI navigates if the user press left.">setNavigateLeftWindow</a>(candidate);
<a name="l04555"></a>04555                 }
<a name="l04556"></a>04556             }
<a name="l04557"></a>04557         }
<a name="l04558"></a>04558     }
<a name="l04559"></a>04559 
<a name="l04560"></a>04560     <a class="code" href="classMMSWindow.html#f47a547f3bae106e1daaa99664614bfa" title="lock the pre-calculation of the navigation">preCalcNaviLock</a>.<a class="code" href="classMMSMutex.html#4d74a213cf809b3b62671e19026b4219">unlock</a>();
<a name="l04561"></a>04561 }
<a name="l04562"></a>04562 
<a name="l04563"></a>04563 
<a name="l04564"></a><a class="code" href="classMMSWindow.html#556db7cfdedcaac01fd1ca6691563457">04564</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#556db7cfdedcaac01fd1ca6691563457" title="Internal method: Will be called by MMSInputManager if the window has the input focus...">MMSWindow::handleInput</a>(<a class="code" href="structMMSInputEvent.html">MMSInputEvent</a> *inputevent) {
<a name="l04565"></a>04565     <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;
<a name="l04566"></a>04566     <span class="keywordtype">bool</span> navigate = <span class="keyword">false</span>;
<a name="l04567"></a>04567 
<a name="l04568"></a>04568     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a> == <span class="keyword">false</span> || this-&gt;<a class="code" href="classMMSWindow.html#91075a5c7188570410ed8f2e45c1a9d3" title="is show animation running?">willshow</a> || this-&gt;<a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a>) {
<a name="l04569"></a>04569         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04570"></a>04570     }
<a name="l04571"></a>04571 
<a name="l04572"></a>04572 <span class="comment">/*</span>
<a name="l04573"></a>04573 <span class="comment">    printf("111111111111111111111&gt; %08x %s\n", this, name.c_str());</span>
<a name="l04574"></a>04574 <span class="comment">    getWindowManager()-&gt;printStack();</span>
<a name="l04575"></a>04575 <span class="comment">    printf("111111111111111111111&lt;\n");</span>
<a name="l04576"></a>04576 <span class="comment">*/</span>
<a name="l04577"></a>04577         <span class="comment">//check childwindows</span>
<a name="l04578"></a>04578         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.empty()) {
<a name="l04579"></a>04579             <span class="keywordflow">if</span>(<a class="code" href="classMMSWindow.html#bb5e0d540eb48eb0a97565db75f17eba" title="Set one or more callbacks for the onBeforeHandleInput event.">onBeforeHandleInput</a>-&gt;emit(<span class="keyword">this</span>,inputevent)) {
<a name="l04580"></a>04580                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04581"></a>04581             }
<a name="l04582"></a>04582         } <span class="keywordflow">else</span> {
<a name="l04583"></a>04583             <span class="keywordflow">try</span> {
<a name="l04584"></a>04584                 <span class="keywordflow">if</span>(<a class="code" href="classMMSWindow.html#bb5e0d540eb48eb0a97565db75f17eba" title="Set one or more callbacks for the onBeforeHandleInput event.">onBeforeHandleInput</a>-&gt;emit(this-&gt;childwins.at(this-&gt;focusedChildWin).window,inputevent)) {
<a name="l04585"></a>04585                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04586"></a>04586                 }
<a name="l04587"></a>04587             } <span class="keywordflow">catch</span>(std::exception&amp;) {
<a name="l04588"></a>04588                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04589"></a>04589             }
<a name="l04590"></a>04590         }
<a name="l04591"></a>04591 <span class="comment">/*</span>
<a name="l04592"></a>04592 <span class="comment">    printf("22222222222222222&gt;\n");</span>
<a name="l04593"></a>04593 <span class="comment">    getWindowManager()-&gt;printStack();</span>
<a name="l04594"></a>04594 <span class="comment">    printf("22222222222222222&lt;\n");</span>
<a name="l04595"></a>04595 <span class="comment">*/</span>
<a name="l04596"></a>04596         <span class="keywordflow">if</span> (inputevent-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a> == <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc2609318c7f66765835a326411f9bcc8370a1">MMSINPUTEVENTTYPE_KEYPRESS</a>) {
<a name="l04597"></a>04597             <span class="comment">// keyboard inputs</span>
<a name="l04598"></a>04598             <span class="keywordflow">try</span> {
<a name="l04599"></a>04599                 <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a> != NULL) {
<a name="l04600"></a>04600                     this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>-&gt;<a class="code" href="classMMSWidget.html#277cf795ad986c75dad249cbb8646164">handleInput</a>(inputevent);
<a name="l04601"></a>04601 
<a name="l04602"></a>04602                     <span class="keywordflow">switch</span>(inputevent-&gt;<a class="code" href="structMMSInputEvent.html#39baa7bb431c0c28bc7b2d0bf155e16e">key</a>) {
<a name="l04603"></a>04603                         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>:
<a name="l04604"></a>04604                         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>:
<a name="l04605"></a>04605                         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>:
<a name="l04606"></a>04606                         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>:
<a name="l04607"></a>04607                             <span class="comment">// set the arrow widgets</span>
<a name="l04608"></a>04608                             <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04609"></a>04609                             <span class="keywordflow">break</span>;
<a name="l04610"></a>04610                         <span class="keywordflow">default</span>:
<a name="l04611"></a>04611                             <span class="keywordflow">break</span>;
<a name="l04612"></a>04612                     }
<a name="l04613"></a>04613 
<a name="l04614"></a>04614                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04615"></a>04615                 }
<a name="l04616"></a>04616                 <span class="keywordflow">else</span>
<a name="l04617"></a>04617                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() &gt; this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>) {
<a name="l04618"></a>04618                     <span class="comment">// get the focus to my focused child window</span>
<a name="l04619"></a>04619 <span class="comment">//                  logger.writeLog("try to execute input on childwindow");</span>
<a name="l04620"></a>04620                     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;focusedChildWin).window-&gt;handleInput(inputevent)) {
<a name="l04621"></a>04621                         <span class="comment">// childwin cannot navigate further, so try to find the next childwin</span>
<a name="l04622"></a>04622                         <span class="keywordtype">bool</span> modal = <span class="keyword">false</span>;
<a name="l04623"></a>04623                         ((<a class="code" href="classMMSChildWindow.html">MMSChildWindow</a>*)this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;focusedChildWin).window)-&gt;<a class="code" href="classMMSWindow.html#8bbdfc384b579db42047d57aa9e63b39" title="Detect if the window has to be modal if it is focused.">getModal</a>(modal);
<a name="l04624"></a>04624                         <span class="keywordflow">if</span> (!modal)
<a name="l04625"></a>04625                             <span class="comment">// currently focused child window is NOT marked as modal, so try to change the focus</span>
<a name="l04626"></a>04626                             this-&gt;<a class="code" href="classMMSWindow.html#b0e73e63f9822e8709aa2c87c1f4ebc0" title="Internal method: Handle child window navigation (up/down/left/right).">handleNavigationForChildWins</a>(inputevent);
<a name="l04627"></a>04627 
<a name="l04628"></a>04628                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04629"></a>04629                     }
<a name="l04630"></a>04630 
<a name="l04631"></a>04631                     <span class="comment">// set the arrow widgets</span>
<a name="l04632"></a>04632                     <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04633"></a>04633 
<a name="l04634"></a>04634                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04635"></a>04635                 }
<a name="l04636"></a>04636                 <span class="keywordflow">else</span> {
<a name="l04637"></a>04637                     <span class="comment">//throw MMSWidgetError(1,"navigate");</span>
<a name="l04638"></a>04638                      navigate=<span class="keyword">true</span>;
<a name="l04639"></a>04639                 }
<a name="l04640"></a>04640 
<a name="l04641"></a>04641             } <span class="keywordflow">catch</span> (MMSWidgetError &amp;err) {
<a name="l04642"></a>04642                 <span class="keywordflow">if</span>(err.getCode() == 1) {
<a name="l04643"></a>04643                     printf(<span class="stringliteral">"missed navigation exception 1\n"</span>);
<a name="l04644"></a>04644                     navigate=<span class="keyword">true</span>;
<a name="l04645"></a>04645                 }
<a name="l04646"></a>04646             }
<a name="l04647"></a>04647             <span class="keywordflow">if</span>(navigate) {
<a name="l04648"></a>04648                 <span class="comment">/* test if navigation must be done */</span>
<a name="l04649"></a>04649                 ret = <span class="keyword">true</span>;
<a name="l04650"></a>04650                 <span class="keywordflow">switch</span>(inputevent-&gt;<a class="code" href="structMMSInputEvent.html#39baa7bb431c0c28bc7b2d0bf155e16e">key</a>) {
<a name="l04651"></a>04651                     <span class="comment">/* handle navigation */</span>
<a name="l04652"></a>04652                     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043ec4a510196d5062646f47298dad35aca">MMSKEY_CURSOR_DOWN</a>:
<a name="l04653"></a>04653                     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b0439581b883623519ab58330b8e087d5747">MMSKEY_CURSOR_LEFT</a>:
<a name="l04654"></a>04654                     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043f974796ec058f781ac89801a06e7e34f">MMSKEY_CURSOR_RIGHT</a>:
<a name="l04655"></a>04655                     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043e300c1a229816dbf7c9c3054c2711202">MMSKEY_CURSOR_UP</a>:
<a name="l04656"></a>04656 <span class="comment">//                          logger.writeLog("widget threw a exception so try to navigate");</span>
<a name="l04657"></a>04657                         ret = this-&gt;<a class="code" href="classMMSWindow.html#6df5418b8e9d84b405d1a4ff50cebd7d" title="Internal method: Handle widget navigation (up/down/left/right).">handleNavigationForWidgets</a>(inputevent);
<a name="l04658"></a>04658 
<a name="l04659"></a>04659                         <span class="comment">/* set the arrow widgets */</span>
<a name="l04660"></a>04660                         <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04661"></a>04661 
<a name="l04662"></a>04662                         <span class="keywordflow">break</span>;
<a name="l04663"></a>04663                     <span class="keywordflow">default</span>:
<a name="l04664"></a>04664                         <span class="comment">/* input is no navigation */</span>
<a name="l04665"></a>04665                         ret = <span class="keyword">false</span>;
<a name="l04666"></a>04666                         <span class="keywordflow">break</span>;
<a name="l04667"></a>04667                 }
<a name="l04668"></a>04668 
<a name="l04669"></a>04669                 <span class="comment">/* call handle input callback */</span>
<a name="l04670"></a>04670                 <a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>-&gt;emit(<span class="keyword">this</span>, inputevent);
<a name="l04671"></a>04671             }
<a name="l04672"></a>04672 
<a name="l04673"></a>04673         }
<a name="l04674"></a>04674         <span class="keywordflow">else</span>
<a name="l04675"></a>04675         <span class="keywordflow">if</span> (inputevent-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a> == <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc26098d3f245a0c04fb9eb066261e2b733b4c">MMSINPUTEVENTTYPE_KEYRELEASE</a>) {
<a name="l04676"></a>04676             <span class="comment">/* call handle input callback */</span>
<a name="l04677"></a>04677             <a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>-&gt;emit(<span class="keyword">this</span>, inputevent);
<a name="l04678"></a>04678         }
<a name="l04679"></a>04679         <span class="keywordflow">else</span>
<a name="l04680"></a>04680         <span class="keywordflow">if</span> (inputevent-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a> == <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc260983e8ebed2fd26ad4ef5aac63aea397b7">MMSINPUTEVENTTYPE_BUTTONPRESS</a>) {
<a name="l04681"></a>04681             <span class="comment">// button pressed</span>
<a name="l04682"></a>04682             <span class="keywordflow">try</span> {
<a name="l04683"></a>04683                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size()) {
<a name="l04684"></a>04684                     <span class="comment">// searching for the right widget to get the focus</span>
<a name="l04685"></a>04685                     <span class="keywordtype">int</span> posx = inputevent-&gt;<a class="code" href="structMMSInputEvent.html#e48730a401f49586f2d40296858b5cb0">posx</a>;
<a name="l04686"></a>04686                     <span class="keywordtype">int</span> posy = inputevent-&gt;<a class="code" href="structMMSInputEvent.html#4af0096d9331829d0dc64edfa1134133">posy</a>;
<a name="l04687"></a>04687                     <span class="keywordtype">bool</span> b;
<a name="l04688"></a>04688                     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); j++) {
<a name="l04689"></a>04689                         <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *w = this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(j);
<a name="l04690"></a>04690                         <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWidget.html#8f1e6f1afed0b7c8198c4e2c538ec1dc">getClickable</a>(b))
<a name="l04691"></a>04691                             <span class="keywordflow">continue</span>;
<a name="l04692"></a>04692                         <span class="keywordflow">if</span> (!b)
<a name="l04693"></a>04693                             <span class="keywordflow">continue</span>;
<a name="l04694"></a>04694                         <span class="keywordflow">if</span> (!w-&gt;<a class="code" href="classMMSWidget.html#c1774591e1c0173616b23fa8cf4850f8">isActivated</a>())
<a name="l04695"></a>04695                             <span class="keywordflow">continue</span>;
<a name="l04696"></a>04696 
<a name="l04697"></a>04697                         <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> rect = this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(j)-&gt;getGeometry();
<a name="l04698"></a>04698                         <span class="keywordflow">if</span> ((posx &gt;= rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>)&amp;&amp;(posy &gt;= rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>)
<a name="l04699"></a>04699                           &amp;&amp;(posx &lt; rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>)&amp;&amp;(posy &lt; rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>)) {
<a name="l04700"></a>04700                             <span class="comment">// this is the widget under the pointer</span>
<a name="l04701"></a>04701                             <span class="keywordtype">string</span> inputmode = <span class="stringliteral">""</span>;
<a name="l04702"></a>04702                             w-&gt;<a class="code" href="classMMSWidget.html#a20d6f33b35d404a9f964086be2f939e">getInputModeEx</a>(inputmode);
<a name="l04703"></a>04703                             <span class="keywordflow">if</span> (<a class="code" href="tools_8h.html#9cc8f0cf29eba1975b26342af280a1ba">strToUpr</a>(inputmode) != <span class="stringliteral">"CLICK"</span>) {
<a name="l04704"></a>04704                                 <span class="comment">// e.g. remote control</span>
<a name="l04705"></a>04705                                 w-&gt;<a class="code" href="classMMSWidget.html#f07560b3ba6575b859293728c4214698">getFocusable</a>(b);
<a name="l04706"></a>04706                                 <span class="keywordflow">if</span> ((b)&amp;&amp;(w != this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>)) {
<a name="l04707"></a>04707                                     <span class="comment">// set focus to this widget</span>
<a name="l04708"></a>04708                                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"try to change focus"</span>);
<a name="l04709"></a>04709 
<a name="l04710"></a>04710                                     <span class="comment">// set focused widget</span>
<a name="l04711"></a>04711                                     <a class="code" href="classMMSWindow.html#cf3ce52f4c30b3a62b93f99485b8f14a" title="Internal method: Set the focused widget.">setFocusedWidget</a>(w, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);
<a name="l04712"></a>04712                                 }
<a name="l04713"></a>04713 
<a name="l04714"></a>04714                                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"try to execute input on widget"</span>);
<a name="l04715"></a>04715                                 this-&gt;<a class="code" href="classMMSWindow.html#8c2678c96fa118a43934d65bd3f04692" title="widget on which the user has pressed the (mouse) button">buttonpress_widget</a> = w;
<a name="l04716"></a>04716                                 this-&gt;<a class="code" href="classMMSWindow.html#8c2678c96fa118a43934d65bd3f04692" title="widget on which the user has pressed the (mouse) button">buttonpress_widget</a>-&gt;<a class="code" href="classMMSWidget.html#277cf795ad986c75dad249cbb8646164">handleInput</a>(inputevent);
<a name="l04717"></a>04717                             }
<a name="l04718"></a>04718                             <span class="keywordflow">else</span> {
<a name="l04719"></a>04719                                 <span class="comment">// e.g. touch</span>
<a name="l04720"></a>04720                                 w-&gt;<a class="code" href="classMMSWidget.html#f07560b3ba6575b859293728c4214698">getFocusable</a>(b);
<a name="l04721"></a>04721                                 <span class="keywordflow">if</span> (b) {
<a name="l04722"></a>04722                                     <span class="keywordflow">if</span> (w != this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>) {
<a name="l04723"></a>04723                                         <span class="comment">// set focus to this widget</span>
<a name="l04724"></a>04724                                         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"try to change focus"</span>);
<a name="l04725"></a>04725                                     }
<a name="l04726"></a>04726 
<a name="l04727"></a>04727                                     <span class="comment">// set focused widget</span>
<a name="l04728"></a>04728                                     <span class="comment">// note, that we do not refresh the screen, because widget::handleInput() was</span>
<a name="l04729"></a>04729                                     <span class="comment">// called which will do this task</span>
<a name="l04730"></a>04730                                     <a class="code" href="classMMSWindow.html#cf3ce52f4c30b3a62b93f99485b8f14a" title="Internal method: Set the focused widget.">setFocusedWidget</a>(w, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l04731"></a>04731                                 }
<a name="l04732"></a>04732 
<a name="l04733"></a>04733                                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"try to execute input on widget"</span>);
<a name="l04734"></a>04734                                 this-&gt;<a class="code" href="classMMSWindow.html#8c2678c96fa118a43934d65bd3f04692" title="widget on which the user has pressed the (mouse) button">buttonpress_widget</a> = w;
<a name="l04735"></a>04735                                 this-&gt;<a class="code" href="classMMSWindow.html#8c2678c96fa118a43934d65bd3f04692" title="widget on which the user has pressed the (mouse) button">buttonpress_widget</a>-&gt;<a class="code" href="classMMSWidget.html#277cf795ad986c75dad249cbb8646164">handleInput</a>(inputevent);
<a name="l04736"></a>04736                             }
<a name="l04737"></a>04737 
<a name="l04738"></a>04738 
<a name="l04739"></a>04739                             <span class="comment">// set the arrow widgets</span>
<a name="l04740"></a>04740                             <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04741"></a>04741 
<a name="l04742"></a>04742                             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04743"></a>04743                         }
<a name="l04744"></a>04744                     }
<a name="l04745"></a>04745 
<a name="l04746"></a>04746                     <span class="comment">// no widget found</span>
<a name="l04747"></a>04747                     this-&gt;<a class="code" href="classMMSWindow.html#8c2678c96fa118a43934d65bd3f04692" title="widget on which the user has pressed the (mouse) button">buttonpress_widget</a> = NULL;
<a name="l04748"></a>04748 
<a name="l04749"></a>04749                     <span class="comment">// call handle input callback</span>
<a name="l04750"></a>04750                     <a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>-&gt;emit(<span class="keyword">this</span>, inputevent);
<a name="l04751"></a>04751                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04752"></a>04752                     <span class="comment">//throw MMSWidgetError(1,"no focusable widget found");</span>
<a name="l04753"></a>04753                 }
<a name="l04754"></a>04754                 <span class="keywordflow">else</span>
<a name="l04755"></a>04755                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() &gt; this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>) {
<a name="l04756"></a>04756                     <span class="keywordtype">bool</span> modal = <span class="keyword">false</span>;
<a name="l04757"></a>04757                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;focusedChildWin).window-&gt;isShown())
<a name="l04758"></a>04758                         this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;focusedChildWin).window-&gt;getModal(modal);
<a name="l04759"></a>04759 
<a name="l04760"></a>04760                     <span class="keywordflow">if</span> (!modal) {
<a name="l04761"></a>04761                         <span class="comment">/* searching for the right childwin to get the focus */</span>
<a name="l04762"></a>04762                         <span class="keywordtype">int</span> posx = inputevent-&gt;<a class="code" href="structMMSInputEvent.html#e48730a401f49586f2d40296858b5cb0">posx</a>;
<a name="l04763"></a>04763                         <span class="keywordtype">int</span> posy = inputevent-&gt;<a class="code" href="structMMSInputEvent.html#4af0096d9331829d0dc64edfa1134133">posy</a>;
<a name="l04764"></a>04764     <span class="comment">//                  for (unsigned int j = 0; j &lt; this-&gt;childwins.size(); j++) {</span>
<a name="l04765"></a>04765                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = (<span class="keywordtype">int</span>)this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size()-1; j &gt;= 0; j--) {
<a name="l04766"></a>04766                             <span class="comment">// get access to the window</span>
<a name="l04767"></a>04767                             <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a> = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(j).window;
<a name="l04768"></a>04768 
<a name="l04769"></a>04769                             <span class="comment">// shown?</span>
<a name="l04770"></a>04770                             <span class="keywordflow">if</span> (!window-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>()) {
<a name="l04771"></a>04771                                 <span class="comment">// no, ignoring it</span>
<a name="l04772"></a>04772                                 <span class="keywordflow">continue</span>;
<a name="l04773"></a>04773                             }
<a name="l04774"></a>04774 
<a name="l04775"></a>04775                             <span class="comment">// focusable?</span>
<a name="l04776"></a>04776                             <span class="keywordtype">bool</span> focusable = <span class="keyword">false</span>;
<a name="l04777"></a>04777                             window-&gt;<a class="code" href="classMMSWindow.html#b3734c53ae3293d16eecc3024ff56d1b" title="Detect if the window can be focused.">getFocusable</a>(focusable);
<a name="l04778"></a>04778                             <span class="keywordflow">if</span> (!focusable) {
<a name="l04779"></a>04779                                 <span class="comment">// no, ignoring it</span>
<a name="l04780"></a>04780                                 <span class="keywordflow">continue</span>;
<a name="l04781"></a>04781                             }
<a name="l04782"></a>04782 
<a name="l04783"></a>04783                             <span class="comment">// check if the window is under the pointer</span>
<a name="l04784"></a>04784                             <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> rect = window-&gt;<a class="code" href="classMMSWindow.html#c58e45ae572bd6367c1d1c153c02f32e" title="Get the geometry of the window.">getGeometry</a>();
<a name="l04785"></a>04785                             <span class="keywordflow">if</span> ((posx &gt;= rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>)&amp;&amp;(posy &gt;= rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>)
<a name="l04786"></a>04786                               &amp;&amp;(posx &lt; rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> + rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>)&amp;&amp;(posy &lt; rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> + rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>)) {
<a name="l04787"></a>04787                                 <span class="comment">// this is the childwin under the pointer</span>
<a name="l04788"></a>04788                                 <span class="keywordflow">if</span> (!window-&gt;<a class="code" href="classMMSWindow.html#4726b52fe2e49e45dea7f44d4aebb686" title="Is the window focused?">getFocus</a>()) {
<a name="l04789"></a>04789     <span class="comment">//                              bool modal = false;</span>
<a name="l04790"></a>04790     <span class="comment">//                              ((MMSChildWindow*)this-&gt;childwins.at(this-&gt;focusedChildWin).window)-&gt;getModal(modal);</span>
<a name="l04791"></a>04791     <span class="comment">//                              if (modal)</span>
<a name="l04792"></a>04792                                         <span class="comment">// currently focused child window is marked as modal, so do not change the focus</span>
<a name="l04793"></a>04793     <span class="comment">//                                  continue;</span>
<a name="l04794"></a>04794 
<a name="l04795"></a>04795                                     <span class="keywordflow">if</span> (window-&gt;<a class="code" href="classMMSWindow.html#7aaf738d72d7f9932d9852606b217e9f" title="Get the number of focusable widgets.">getNumberOfFocusableWidgets</a>(<span class="keyword">true</span>)&gt;0)
<a name="l04796"></a>04796                                     {
<a name="l04797"></a>04797                                         <span class="comment">/* set focus to this childwin */</span>
<a name="l04798"></a>04798                                         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"try to change focus"</span>);
<a name="l04799"></a>04799                                         window-&gt;<a class="code" href="classMMSWindow.html#440b4f9fe056188c5560a0a7fcfe4d62" title="Set the focus to this window.">setFocus</a>();
<a name="l04800"></a>04800                                     }
<a name="l04801"></a>04801                                 }
<a name="l04802"></a>04802 
<a name="l04803"></a>04803                                 <span class="comment">// normalize the pointer position</span>
<a name="l04804"></a>04804                                 inputevent-&gt;<a class="code" href="structMMSInputEvent.html#e48730a401f49586f2d40296858b5cb0">posx</a>-=rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l04805"></a>04805                                 inputevent-&gt;<a class="code" href="structMMSInputEvent.html#4af0096d9331829d0dc64edfa1134133">posy</a>-=rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l04806"></a>04806 
<a name="l04807"></a>04807                                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"try to execute input on childwin"</span>);
<a name="l04808"></a>04808                                 this-&gt;<a class="code" href="classMMSWindow.html#f7872aacbf2900d923018bf56e18d920" title="child window on which the user has pressed the (mouse) button">buttonpress_childwin</a> = window;
<a name="l04809"></a>04809                                 window-&gt;<a class="code" href="classMMSWindow.html#556db7cfdedcaac01fd1ca6691563457" title="Internal method: Will be called by MMSInputManager if the window has the input focus...">handleInput</a>(inputevent);
<a name="l04810"></a>04810 
<a name="l04811"></a>04811                                 <span class="comment">// set the arrow widgets</span>
<a name="l04812"></a>04812                                 <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04813"></a>04813 
<a name="l04814"></a>04814                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04815"></a>04815                             }
<a name="l04816"></a>04816                         }
<a name="l04817"></a>04817 
<a name="l04818"></a>04818                         <span class="comment">// no childwin found</span>
<a name="l04819"></a>04819                         this-&gt;<a class="code" href="classMMSWindow.html#f7872aacbf2900d923018bf56e18d920" title="child window on which the user has pressed the (mouse) button">buttonpress_childwin</a> = NULL;
<a name="l04820"></a>04820                         <span class="keywordflow">throw</span> MMSWidgetError(1,<span class="stringliteral">"no focusable childwin found"</span>);
<a name="l04821"></a>04821                     }
<a name="l04822"></a>04822                     <span class="keywordflow">else</span> {
<a name="l04823"></a>04823                         <span class="comment">// modal window is active</span>
<a name="l04824"></a>04824                         <span class="comment">//int posx = inputeventset-&gt;at(i).posx;</span>
<a name="l04825"></a>04825                         <span class="comment">//int posy = inputeventset-&gt;at(i).posy;</span>
<a name="l04826"></a>04826                         <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> rect = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).window-&gt;getGeometry();
<a name="l04827"></a>04827 
<a name="l04828"></a>04828                         inputevent-&gt;<a class="code" href="structMMSInputEvent.html#e48730a401f49586f2d40296858b5cb0">posx</a>-=rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l04829"></a>04829                         inputevent-&gt;<a class="code" href="structMMSInputEvent.html#4af0096d9331829d0dc64edfa1134133">posy</a>-=rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l04830"></a>04830 
<a name="l04831"></a>04831                         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"try to execute input on childwin"</span>);
<a name="l04832"></a>04832                         this-&gt;<a class="code" href="classMMSWindow.html#f7872aacbf2900d923018bf56e18d920" title="child window on which the user has pressed the (mouse) button">buttonpress_childwin</a> = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).window;
<a name="l04833"></a>04833                         this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>).window-&gt;handleInput(inputevent);
<a name="l04834"></a>04834 
<a name="l04835"></a>04835                         <span class="comment">// set the arrow widgets</span>
<a name="l04836"></a>04836                         <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04837"></a>04837 
<a name="l04838"></a>04838                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04839"></a>04839                     }
<a name="l04840"></a>04840                 }
<a name="l04841"></a>04841                 <span class="keywordflow">else</span> {
<a name="l04842"></a>04842                     <span class="comment">//throw MMSWidgetError(1,"navigate, buttonpress");</span>
<a name="l04843"></a>04843                     navigate=<span class="keyword">true</span>;
<a name="l04844"></a>04844                 }
<a name="l04845"></a>04845 
<a name="l04846"></a>04846             } <span class="keywordflow">catch</span> (MMSWidgetError &amp;err) {
<a name="l04847"></a>04847                 <span class="keywordflow">if</span>(err.getCode() == 1) {
<a name="l04848"></a>04848                     printf(<span class="stringliteral">"missed navigation exception 2\n"</span>);
<a name="l04849"></a>04849                     navigate=<span class="keyword">true</span>;
<a name="l04850"></a>04850                 }
<a name="l04851"></a>04851             }
<a name="l04852"></a>04852             <span class="keywordflow">if</span>(navigate) {
<a name="l04853"></a>04853                 <span class="comment">/* test if navigation must be done */</span>
<a name="l04854"></a>04854                 ret = <span class="keyword">true</span>;
<a name="l04855"></a>04855 
<a name="l04856"></a>04856                 <span class="comment">/* call handle input callback */</span>
<a name="l04857"></a>04857                 <a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>-&gt;emit(<span class="keyword">this</span>, inputevent);
<a name="l04858"></a>04858             }
<a name="l04859"></a>04859 
<a name="l04860"></a>04860         }
<a name="l04861"></a>04861         <span class="keywordflow">else</span>
<a name="l04862"></a>04862         <span class="keywordflow">if</span>   ((inputevent-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a> == <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc260995bc9431d848e49872c7642fb080071a">MMSINPUTEVENTTYPE_BUTTONRELEASE</a>)
<a name="l04863"></a>04863             ||(inputevent-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a> == <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc26096fefdc4442ed8e471f9af0b326f737f5">MMSINPUTEVENTTYPE_AXISMOTION</a>)) {
<a name="l04864"></a>04864             <span class="comment">/* button released */</span>
<a name="l04865"></a>04865             <span class="keywordflow">try</span> {
<a name="l04866"></a>04866                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size()) {
<a name="l04867"></a>04867                     <span class="comment">// window with widgets</span>
<a name="l04868"></a>04868                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#8c2678c96fa118a43934d65bd3f04692" title="widget on which the user has pressed the (mouse) button">buttonpress_widget</a>) {
<a name="l04869"></a>04869                         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"try to execute input on widget"</span>);
<a name="l04870"></a>04870                         this-&gt;<a class="code" href="classMMSWindow.html#8c2678c96fa118a43934d65bd3f04692" title="widget on which the user has pressed the (mouse) button">buttonpress_widget</a>-&gt;<a class="code" href="classMMSWidget.html#277cf795ad986c75dad249cbb8646164">handleInput</a>(inputevent);
<a name="l04871"></a>04871 
<a name="l04872"></a>04872                         <span class="keywordflow">if</span> (inputevent-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a> == <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc260995bc9431d848e49872c7642fb080071a">MMSINPUTEVENTTYPE_BUTTONRELEASE</a>)
<a name="l04873"></a>04873                             this-&gt;<a class="code" href="classMMSWindow.html#8c2678c96fa118a43934d65bd3f04692" title="widget on which the user has pressed the (mouse) button">buttonpress_widget</a> = NULL;
<a name="l04874"></a>04874 
<a name="l04875"></a>04875                         <span class="comment">// set the arrow widgets</span>
<a name="l04876"></a>04876                         <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04877"></a>04877 
<a name="l04878"></a>04878                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l04879"></a>04879                     }
<a name="l04880"></a>04880                     <span class="keywordflow">else</span> {
<a name="l04881"></a>04881                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04882"></a>04882                     }
<a name="l04883"></a>04883                 }
<a name="l04884"></a>04884                 <span class="keywordflow">else</span>
<a name="l04885"></a>04885                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size() &gt; this-&gt;<a class="code" href="classMMSWindow.html#37c0ca0e609a945c09416e565fdbd5a4" title="focused child window">focusedChildWin</a>) {
<a name="l04886"></a>04886                     <span class="comment">// window with childwindows</span>
<a name="l04887"></a>04887                     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#f7872aacbf2900d923018bf56e18d920" title="child window on which the user has pressed the (mouse) button">buttonpress_childwin</a>) {
<a name="l04888"></a>04888                         <span class="comment">/* normalize the pointer position */</span>
<a name="l04889"></a>04889                         <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> rect = this-&gt;<a class="code" href="classMMSWindow.html#f7872aacbf2900d923018bf56e18d920" title="child window on which the user has pressed the (mouse) button">buttonpress_childwin</a>-&gt;<a class="code" href="classMMSWindow.html#c58e45ae572bd6367c1d1c153c02f32e" title="Get the geometry of the window.">getGeometry</a>();
<a name="l04890"></a>04890                         inputevent-&gt;<a class="code" href="structMMSInputEvent.html#e48730a401f49586f2d40296858b5cb0">posx</a>-=rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l04891"></a>04891                         inputevent-&gt;<a class="code" href="structMMSInputEvent.html#4af0096d9331829d0dc64edfa1134133">posy</a>-=rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l04892"></a>04892 
<a name="l04893"></a>04893                         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"try to execute input on childwin"</span>);
<a name="l04894"></a>04894                         <span class="keywordtype">bool</span> rc = this-&gt;<a class="code" href="classMMSWindow.html#f7872aacbf2900d923018bf56e18d920" title="child window on which the user has pressed the (mouse) button">buttonpress_childwin</a>-&gt;<a class="code" href="classMMSWindow.html#556db7cfdedcaac01fd1ca6691563457" title="Internal method: Will be called by MMSInputManager if the window has the input focus...">handleInput</a>(inputevent);
<a name="l04895"></a>04895 
<a name="l04896"></a>04896                         <span class="keywordflow">if</span> (inputevent-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a> == <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc260995bc9431d848e49872c7642fb080071a">MMSINPUTEVENTTYPE_BUTTONRELEASE</a>)
<a name="l04897"></a>04897                             this-&gt;<a class="code" href="classMMSWindow.html#f7872aacbf2900d923018bf56e18d920" title="child window on which the user has pressed the (mouse) button">buttonpress_childwin</a> = NULL;
<a name="l04898"></a>04898 
<a name="l04899"></a>04899                         <span class="comment">// set the arrow widgets</span>
<a name="l04900"></a>04900                         <a class="code" href="classMMSWindow.html#cbe0bd27eac6a8a53eec5b5d7b9e8e44" title="Internal method: Update the status of the arrow widgets.">switchArrowWidgets</a>();
<a name="l04901"></a>04901 
<a name="l04902"></a>04902                         <span class="keywordflow">return</span> rc;
<a name="l04903"></a>04903                     }
<a name="l04904"></a>04904                     <span class="keywordflow">else</span> {
<a name="l04905"></a>04905                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l04906"></a>04906                     }
<a name="l04907"></a>04907                 }
<a name="l04908"></a>04908                 <span class="keywordflow">else</span> {
<a name="l04909"></a>04909 <span class="comment">//                  throw MMSWidgetError(1,"navigate, buttonrelease");</span>
<a name="l04910"></a>04910 
<a name="l04911"></a>04911                     <span class="comment">// window without widgets and childwindows, e.g. video/flash windows</span>
<a name="l04912"></a>04912 
<a name="l04913"></a>04913                     <span class="comment">// call handle input callback</span>
<a name="l04914"></a>04914                     <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>-&gt;emit(<span class="keyword">this</span>, inputevent);
<a name="l04915"></a>04915                 }
<a name="l04916"></a>04916 
<a name="l04917"></a>04917             } <span class="keywordflow">catch</span> (MMSWidgetError &amp;err) {
<a name="l04918"></a>04918                 <span class="keywordflow">if</span>(err.getCode() == 1) {
<a name="l04919"></a>04919                     <span class="comment">/* test if navigation must be done */</span>
<a name="l04920"></a>04920                     ret = <span class="keyword">true</span>;
<a name="l04921"></a>04921 
<a name="l04922"></a>04922                     <span class="comment">/* call handle input callback */</span>
<a name="l04923"></a>04923                     <a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>-&gt;emit(<span class="keyword">this</span>, inputevent);
<a name="l04924"></a>04924                 }
<a name="l04925"></a>04925             }
<a name="l04926"></a>04926         }
<a name="l04927"></a>04927 
<a name="l04928"></a>04928     <span class="keywordflow">return</span> ret;
<a name="l04929"></a>04929 }
<a name="l04930"></a>04930 
<a name="l04931"></a><a class="code" href="classMMSWindow.html#c58e45ae572bd6367c1d1c153c02f32e">04931</a> <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> <a class="code" href="classMMSWindow.html#c58e45ae572bd6367c1d1c153c02f32e" title="Get the geometry of the window.">MMSWindow::getGeometry</a>() {
<a name="l04932"></a>04932     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>;
<a name="l04933"></a>04933 }
<a name="l04934"></a>04934 
<a name="l04935"></a><a class="code" href="classMMSWindow.html#869417e28e165aaa24b96672164f231d">04935</a> <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> <a class="code" href="classMMSWindow.html#869417e28e165aaa24b96672164f231d" title="Get the geometry of the window based on the layer.">MMSWindow::getRealGeometry</a>() {
<a name="l04936"></a>04936     <span class="comment">/* childwin? */</span>
<a name="l04937"></a>04937     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)
<a name="l04938"></a>04938         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>;
<a name="l04939"></a>04939 
<a name="l04940"></a>04940     <span class="comment">/* yes */</span>
<a name="l04941"></a>04941     <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> r1,r2;
<a name="l04942"></a>04942     r1 = this-&gt;<a class="code" href="classMMSWindow.html#57c9c941a047d4076c42abb34c78acd1" title="geometry of the window based on the margin attribute">geom</a>;
<a name="l04943"></a>04943     r2 = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#869417e28e165aaa24b96672164f231d" title="Get the geometry of the window based on the layer.">getRealGeometry</a>();
<a name="l04944"></a>04944     r1.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>+=r2.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>;
<a name="l04945"></a>04945     r1.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>+=r2.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>;
<a name="l04946"></a>04946     <span class="keywordflow">return</span> r1;
<a name="l04947"></a>04947 }
<a name="l04948"></a>04948 
<a name="l04949"></a>04949 
<a name="l04950"></a><a class="code" href="classMMSWindow.html#ecfa3683df57920c7c96f450b3918d67">04950</a> <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *<a class="code" href="classMMSWindow.html#ecfa3683df57920c7c96f450b3918d67" title="Get the currently focused widget.">MMSWindow::getFocusedWidget</a>() {
<a name="l04951"></a>04951     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#a24f3463ed4f3bfc346ba3937b4ae8fb" title="focused widget or NULL">focusedwidget</a>;
<a name="l04952"></a>04952 }
<a name="l04953"></a>04953 
<a name="l04954"></a><a class="code" href="classMMSWindow.html#7aaf738d72d7f9932d9852606b217e9f">04954</a> <span class="keywordtype">int</span> <a class="code" href="classMMSWindow.html#7aaf738d72d7f9932d9852606b217e9f" title="Get the number of focusable widgets.">MMSWindow::getNumberOfFocusableWidgets</a>(<span class="keywordtype">bool</span> cw) {
<a name="l04955"></a>04955     <span class="keywordtype">int</span>     cnt = 0;
<a name="l04956"></a>04956     <span class="keywordtype">bool</span>    b;
<a name="l04957"></a>04957 
<a name="l04958"></a>04958     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.empty()) {
<a name="l04959"></a>04959         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); i++)
<a name="l04960"></a>04960             <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getFocusable(b))
<a name="l04961"></a>04961                 <span class="keywordflow">if</span> (b)
<a name="l04962"></a>04962                     cnt++;
<a name="l04963"></a>04963     }
<a name="l04964"></a>04964     <span class="keywordflow">else</span> {
<a name="l04965"></a>04965         <span class="keywordflow">if</span> (cw) {
<a name="l04966"></a>04966             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++)
<a name="l04967"></a>04967                 cnt += <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;getNumberOfFocusableWidgets(cw);
<a name="l04968"></a>04968         }
<a name="l04969"></a>04969     }
<a name="l04970"></a>04970 
<a name="l04971"></a>04971     <span class="keywordflow">return</span> cnt;
<a name="l04972"></a>04972 }
<a name="l04973"></a>04973 
<a name="l04974"></a><a class="code" href="classMMSWindow.html#0aeecf9b8419e796faac96ce4b1ad380">04974</a> <span class="keywordtype">int</span> <a class="code" href="classMMSWindow.html#0aeecf9b8419e796faac96ce4b1ad380" title="Get the number of focusable child windows.">MMSWindow::getNumberOfFocusableChildWins</a>() {
<a name="l04975"></a>04975     <span class="keywordtype">int</span> cnt = 0;
<a name="l04976"></a>04976 
<a name="l04977"></a>04977     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++)
<a name="l04978"></a>04978         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;getNumberOfFocusableWidgets()&gt;0)
<a name="l04979"></a>04979             cnt++;
<a name="l04980"></a>04980         <span class="keywordflow">else</span>
<a name="l04981"></a>04981             cnt+=<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;getNumberOfFocusableChildWins();
<a name="l04982"></a>04982 
<a name="l04983"></a>04983     <span class="keywordflow">return</span> cnt;
<a name="l04984"></a>04984 }
<a name="l04985"></a>04985 
<a name="l04986"></a>04986 
<a name="l04987"></a><a class="code" href="classMMSWindow.html#080a167a0a97d79f89e737c7921810f9">04987</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#080a167a0a97d79f89e737c7921810f9" title="Set the window manager.">MMSWindow::setWindowManager</a>(<a class="code" href="classIMMSWindowManager.html">IMMSWindowManager</a> *wm) {
<a name="l04988"></a>04988     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a> != wm) {
<a name="l04989"></a>04989         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"windowmanager != wm"</span>);
<a name="l04990"></a>04990         <span class="comment">/* set new window manager */</span>
<a name="l04991"></a>04991         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a> != NULL) {
<a name="l04992"></a>04992             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"windowmanager != NULL"</span>);
<a name="l04993"></a>04993             this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a> = wm;
<a name="l04994"></a>04994             <span class="comment">/* and add the window to it */</span>
<a name="l04995"></a>04995             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>) {
<a name="l04996"></a>04996                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"windowmanager-&gt;addWindow"</span>);
<a name="l04997"></a>04997                 this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#2ad88d80b58e4143d3d68ac6b7300f55">addWindow</a>(<span class="keyword">this</span>);
<a name="l04998"></a>04998             }
<a name="l04999"></a>04999         }
<a name="l05000"></a>05000         <span class="keywordflow">else</span> {
<a name="l05001"></a>05001             this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a> = wm;
<a name="l05002"></a>05002             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSGUI"</span>, <span class="stringliteral">"resize"</span>);
<a name="l05003"></a>05003             this-&gt;<a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05004"></a>05004         }
<a name="l05005"></a>05005     }
<a name="l05006"></a>05006 }
<a name="l05007"></a>05007 
<a name="l05008"></a><a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8">05008</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">MMSWindow::isShown</a>(<span class="keywordtype">bool</span> checkparents, <span class="keywordtype">bool</span> checkopacity) {
<a name="l05009"></a>05009     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#67bdb41f215bc73a994515b9d0e4ebac" title="is window shown?">shown</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l05010"></a>05010     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#ed6f19f5da43298231027816c1b6e6eb" title="tbd">buffered_shown</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l05011"></a>05011     <span class="keywordflow">if</span> (checkopacity) {
<a name="l05012"></a>05012         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> opacity;
<a name="l05013"></a>05013         this-&gt;<a class="code" href="classMMSWindow.html#c709016273362ac9c5ff3f9b9e2187e2" title="Get the opacity of the window.">getOpacity</a>(opacity);
<a name="l05014"></a>05014         <span class="keywordflow">if</span> (!opacity) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l05015"></a>05015     }
<a name="l05016"></a>05016     <span class="keywordflow">if</span> ((checkparents)&amp;&amp;(this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)) <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>(<span class="keyword">true</span>, checkopacity);
<a name="l05017"></a>05017     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l05018"></a>05018 }
<a name="l05019"></a>05019 
<a name="l05020"></a>05020 
<a name="l05021"></a>05021 
<a name="l05022"></a><a class="code" href="classMMSWindow.html#a292918bdd3bdb457730db3fa4aa08d7">05022</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#a292918bdd3bdb457730db3fa4aa08d7" title="Is the hide action running?">MMSWindow::willHide</a>() {
<a name="l05023"></a>05023     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#867d2120a88be80c418887f26b2740c2" title="is hide animation running?">willhide</a>;
<a name="l05024"></a>05024 }
<a name="l05025"></a>05025 
<a name="l05026"></a><a class="code" href="classMMSWindow.html#2b26e25075dfd850e19228f5ac628b5c">05026</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#2b26e25075dfd850e19228f5ac628b5c" title="Internal method: Show the window without animation.">MMSWindow::instantShow</a>() {
<a name="l05027"></a>05027     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> opacity;
<a name="l05028"></a>05028     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#c709016273362ac9c5ff3f9b9e2187e2" title="Get the opacity of the window.">getOpacity</a>(opacity)) opacity = 255;
<a name="l05029"></a>05029 
<a name="l05030"></a>05030     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l05031"></a>05031         <span class="comment">/* normal window */</span>
<a name="l05032"></a>05032         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>) {
<a name="l05033"></a>05033             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#24432ea3e1d8cbd802b722a0f00c4f8d">show</a>();
<a name="l05034"></a>05034             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(opacity);
<a name="l05035"></a>05035         }
<a name="l05036"></a>05036     }
<a name="l05037"></a>05037     <span class="keywordflow">else</span> {
<a name="l05038"></a>05038         <span class="comment">/* child window */</span>
<a name="l05039"></a>05039         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(<span class="keyword">this</span>, opacity);
<a name="l05040"></a>05040     }
<a name="l05041"></a>05041 }
<a name="l05042"></a>05042 
<a name="l05043"></a><a class="code" href="classMMSWindow.html#381cb20ccfd15b89072f379ec6498f3c">05043</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#381cb20ccfd15b89072f379ec6498f3c" title="Internal method: Hide the window without animation.">MMSWindow::instantHide</a>() {
<a name="l05044"></a>05044     <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l05045"></a>05045         <span class="comment">// normal window</span>
<a name="l05046"></a>05046         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>)
<a name="l05047"></a>05047             this-&gt;<a class="code" href="classMMSWindow.html#effe3a6fe560de838516496166da0a6c" title="interface to the window manager">windowmanager</a>-&gt;<a class="code" href="classIMMSWindowManager.html#225f4ea7edfbb4404e347b3ac6ba4f42">removeWindowFromToplevel</a>(<span class="keyword">this</span>);
<a name="l05048"></a>05048         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>())
<a name="l05049"></a>05049             <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>) {
<a name="l05050"></a>05050                 this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(0);
<a name="l05051"></a>05051                 this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#6f0b829749987a6fab0d19a1700e837c">hide</a>();
<a name="l05052"></a>05052             }
<a name="l05053"></a>05053     }
<a name="l05054"></a>05054     <span class="keywordflow">else</span> {
<a name="l05055"></a>05055         <span class="comment">// child window</span>
<a name="l05056"></a>05056         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>()) {
<a name="l05057"></a>05057             <a class="code" href="classMMSWindow.html#cfe40cb6b19703782fed6b5577437294" title="Internal method: Remove the focus from a child window.">removeFocusFromChildWindow</a>();
<a name="l05058"></a>05058             this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(<span class="keyword">this</span>, 0);
<a name="l05059"></a>05059         }
<a name="l05060"></a>05060     }
<a name="l05061"></a>05061 }
<a name="l05062"></a>05062 
<a name="l05063"></a>05063 
<a name="l05064"></a><a class="code" href="classMMSWindow.html#54be35f446151218a90b5169670cd6e8">05064</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#54be35f446151218a90b5169670cd6e8" title="Internal method: Give window a recalculation hint used for next draw().">MMSWindow::setWidgetGeometryOnNextDraw</a>() {
<a name="l05065"></a>05065     this-&gt;<a class="code" href="classMMSWindow.html#60602e2b9750b19b22441f95219b1222" title="check and recalc the geometry of the widgets during the next draw()?">draw_setgeom</a> = <span class="keyword">true</span>;
<a name="l05066"></a>05066 }
<a name="l05067"></a>05067 
<a name="l05068"></a><a class="code" href="classMMSWindow.html#0cede2d21c86692bf22f8bf661fb0ce1">05068</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#0cede2d21c86692bf22f8bf661fb0ce1" title="Internal method: Inform the window, that the language has changed.">MMSWindow::targetLangChanged</a>(<a class="code" href="mmstypes_8h.html#4d18e9ee17981d90835ff9cd09a19962" title="known languages">MMSLanguage</a> lang, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05069"></a>05069     <span class="comment">// for all child windows</span>
<a name="l05070"></a>05070     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l05071"></a>05071         this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;targetLangChanged(lang, <span class="keyword">false</span>);
<a name="l05072"></a>05072     }
<a name="l05073"></a>05073 
<a name="l05074"></a>05074     <span class="comment">// for my own children (widgets)</span>
<a name="l05075"></a>05075     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); i++)
<a name="l05076"></a>05076         <span class="keywordflow">switch</span> (this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getType()) {
<a name="l05077"></a>05077         <span class="keywordflow">case</span> <a class="code" href="mmswidget_8h.html#6d0eddde5cdc2617bf86158bed71e4a4e3b298b1b060969ee8e8b87365e15209" title="A MMSLabelWidget cannot get the focus but can be selected. It displays one line of...">MMSWIDGETTYPE_LABEL</a>:
<a name="l05078"></a>05078             ((<a class="code" href="classMMSLabelWidget.html" title="With this class you can display one line text.">MMSLabelWidget</a> *)this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i))-&gt;<a class="code" href="classMMSWindow.html#0cede2d21c86692bf22f8bf661fb0ce1" title="Internal method: Inform the window, that the language has changed.">targetLangChanged</a>(lang);
<a name="l05079"></a>05079             <span class="keywordflow">break</span>;
<a name="l05080"></a>05080         <span class="keywordflow">case</span> <a class="code" href="mmswidget_8h.html#6d0eddde5cdc2617bf86158bed71e4a45d86207bd736f3e19633cba098ccffc1" title="A MMSTextBoxWidget can get the focus and therefore can process inputs. It displays...">MMSWIDGETTYPE_TEXTBOX</a>:
<a name="l05081"></a>05081             ((<a class="code" href="classMMSTextBoxWidget.html" title="With this class you can display text with more than one line.">MMSTextBoxWidget</a> *)this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i))-&gt;<a class="code" href="classMMSWindow.html#0cede2d21c86692bf22f8bf661fb0ce1" title="Internal method: Inform the window, that the language has changed.">targetLangChanged</a>(lang);
<a name="l05082"></a>05082             <span class="keywordflow">break</span>;
<a name="l05083"></a>05083         <span class="keywordflow">case</span> <a class="code" href="mmswidget_8h.html#6d0eddde5cdc2617bf86158bed71e4a483a1cfcaf9ca6ab20ec140df278451a9" title="A MMSInputWidget can get the focus and therefore can process inputs. You can display...">MMSWIDGETTYPE_INPUT</a>:
<a name="l05084"></a>05084             ((<a class="code" href="classMMSInputWidget.html" title="With this class you can display and edit one line text.">MMSInputWidget</a> *)this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i))-&gt;<a class="code" href="classMMSWindow.html#0cede2d21c86692bf22f8bf661fb0ce1" title="Internal method: Inform the window, that the language has changed.">targetLangChanged</a>(lang);
<a name="l05085"></a>05085             <span class="keywordflow">break</span>;
<a name="l05086"></a>05086         <span class="keywordflow">default</span>:
<a name="l05087"></a>05087             <span class="keywordflow">break</span>;
<a name="l05088"></a>05088         }
<a name="l05089"></a>05089 
<a name="l05090"></a>05090     <span class="comment">// window needs to be redrawn</span>
<a name="l05091"></a>05091     <span class="comment">// this is especially required for child windows with own_surface="true"</span>
<a name="l05092"></a>05092     this-&gt;<a class="code" href="classMMSWindow.html#d1df2097f4b63b77cec9fbad988060b3">need_redraw</a> = <span class="keyword">true</span>;
<a name="l05093"></a>05093 
<a name="l05094"></a>05094     <span class="comment">// refresh it</span>
<a name="l05095"></a>05095     <span class="keywordflow">if</span> (refresh) {
<a name="l05096"></a>05096         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05097"></a>05097     }
<a name="l05098"></a>05098 }
<a name="l05099"></a>05099 
<a name="l05100"></a><a class="code" href="classMMSWindow.html#932ada4d58f9d6ffa13a8a62ea12bb5d">05100</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#932ada4d58f9d6ffa13a8a62ea12bb5d" title="Internal method: Inform the window, that the theme has changed.">MMSWindow::themeChanged</a>(<span class="keywordtype">string</span> &amp;themeName, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05101"></a>05101     <span class="comment">// for all child windows</span>
<a name="l05102"></a>05102     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++) {
<a name="l05103"></a>05103         this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;themeChanged(themeName, <span class="keyword">false</span>);
<a name="l05104"></a>05104     }
<a name="l05105"></a>05105 
<a name="l05106"></a>05106     <span class="comment">// for my own children (widgets)</span>
<a name="l05107"></a>05107     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); i++) {
<a name="l05108"></a>05108         this-&gt;<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;themeChanged(themeName);
<a name="l05109"></a>05109     }
<a name="l05110"></a>05110 
<a name="l05111"></a>05111     <span class="comment">// delete images, ...</span>
<a name="l05112"></a>05112     <a class="code" href="classMMSWindow.html#dfa219bc6b4989434270629e9c57f52c" title="Internal method: Release images and other things.">release</a>();
<a name="l05113"></a>05113 
<a name="l05114"></a>05114     <span class="comment">// refresh it</span>
<a name="l05115"></a>05115     <span class="keywordflow">if</span> (refresh)
<a name="l05116"></a>05116         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05117"></a>05117 }
<a name="l05118"></a>05118 
<a name="l05119"></a>05119 
<a name="l05120"></a>05120 
<a name="l05121"></a><a class="code" href="classMMSWindow.html#33df330d64bfa1338dfd6dd1cddbf248">05121</a> <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a>* <a class="code" href="classMMSWindow.html#33df330d64bfa1338dfd6dd1cddbf248" title="Find a widget with a given name.">MMSWindow::findWidget</a>(<span class="keywordtype">string</span> <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>) {
<a name="l05122"></a>05122     <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *widget;
<a name="l05123"></a>05123 
<a name="l05124"></a>05124     <span class="keywordflow">if</span> (name == <span class="stringliteral">""</span>) {
<a name="l05125"></a>05125         <span class="comment">// empty name</span>
<a name="l05126"></a>05126         <span class="keywordflow">return</span> NULL;
<a name="l05127"></a>05127     }
<a name="l05128"></a>05128 
<a name="l05129"></a>05129     <span class="comment">// for all child windows</span>
<a name="l05130"></a>05130     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++)
<a name="l05131"></a>05131         <span class="keywordflow">if</span> ((widget = <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;findWidget(name)))
<a name="l05132"></a>05132             <span class="keywordflow">return</span> widget;
<a name="l05133"></a>05133 
<a name="l05134"></a>05134     <span class="comment">// for my own children (widgets)</span>
<a name="l05135"></a>05135     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); i++)
<a name="l05136"></a>05136         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getName() == name)
<a name="l05137"></a>05137             <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i);
<a name="l05138"></a>05138 
<a name="l05139"></a>05139     <span class="keywordflow">return</span> NULL;
<a name="l05140"></a>05140 }
<a name="l05141"></a>05141 
<a name="l05142"></a><a class="code" href="classMMSWindow.html#6e7167edbb436d6beb8ab27ab442f8cf">05142</a> <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a>* <a class="code" href="classMMSWindow.html#6e7167edbb436d6beb8ab27ab442f8cf" title="Find a widget with a given type.">MMSWindow::findWidgetType</a>(<a class="code" href="mmswidget_8h.html#6d0eddde5cdc2617bf86158bed71e4a4" title="The available types of widgets.">MMSWIDGETTYPE</a> <a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a>) {
<a name="l05143"></a>05143     <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *widget;
<a name="l05144"></a>05144 
<a name="l05145"></a>05145     <span class="comment">/* for all child windows */</span>
<a name="l05146"></a>05146     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i++)
<a name="l05147"></a>05147         <span class="keywordflow">if</span> ((widget = <a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i).window-&gt;findWidgetType(type)))
<a name="l05148"></a>05148             <span class="keywordflow">return</span> widget;
<a name="l05149"></a>05149 
<a name="l05150"></a>05150     <span class="comment">/* first, my own children */</span>
<a name="l05151"></a>05151     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); i++)
<a name="l05152"></a>05152         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;getType() == type)
<a name="l05153"></a>05153             <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i);
<a name="l05154"></a>05154 
<a name="l05155"></a>05155     <span class="comment">/* second, call search method of my children */</span>
<a name="l05156"></a>05156     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size(); i++)
<a name="l05157"></a>05157         <span class="keywordflow">if</span> ((widget = <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(i)-&gt;findWidgetType(type)))
<a name="l05158"></a>05158             <span class="keywordflow">return</span> widget;
<a name="l05159"></a>05159 
<a name="l05160"></a>05160     <span class="keywordflow">return</span> NULL;
<a name="l05161"></a>05161 }
<a name="l05162"></a>05162 
<a name="l05163"></a><a class="code" href="classMMSWindow.html#3c01b56db16fe18872071d9e595a23c7">05163</a> <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a>* <a class="code" href="classMMSWindow.html#3c01b56db16fe18872071d9e595a23c7" title="Find a widget with a given name and type.">MMSWindow::findWidgetAndType</a>(<span class="keywordtype">string</span> <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>, <a class="code" href="mmswidget_8h.html#6d0eddde5cdc2617bf86158bed71e4a4" title="The available types of widgets.">MMSWIDGETTYPE</a> <a class="code" href="classMMSWindow.html#eef97e46c48cdffb4d9df9e330df26a4" title="type of the window">type</a>) {
<a name="l05164"></a>05164     <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *widget;
<a name="l05165"></a>05165 
<a name="l05166"></a>05166     <span class="keywordflow">if</span> ((widget = <a class="code" href="classMMSWindow.html#33df330d64bfa1338dfd6dd1cddbf248" title="Find a widget with a given name.">findWidget</a>(name))) {
<a name="l05167"></a>05167         <span class="comment">// root widget found, find child widget with type</span>
<a name="l05168"></a>05168         <span class="keywordflow">if</span> (widget-&gt;<a class="code" href="classMMSWidget.html#1cea94a1e92cd8dfcc12e5765b65480c">getType</a>() == type) {
<a name="l05169"></a>05169             <span class="comment">// found root widget has the correct type</span>
<a name="l05170"></a>05170             <span class="keywordflow">return</span> widget;
<a name="l05171"></a>05171         }
<a name="l05172"></a>05172         <span class="keywordflow">else</span> {
<a name="l05173"></a>05173             <span class="comment">// find the type within root's children</span>
<a name="l05174"></a>05174             <span class="keywordflow">return</span> widget-&gt;<a class="code" href="classMMSWidget.html#2b752da8d6f9bcd8c85e032a6813b561">findWidgetType</a>(type);
<a name="l05175"></a>05175         }
<a name="l05176"></a>05176     }
<a name="l05177"></a>05177 
<a name="l05178"></a>05178     <span class="keywordflow">return</span> NULL;
<a name="l05179"></a>05179 }
<a name="l05180"></a>05180 
<a name="l05181"></a><a class="code" href="classMMSWindow.html#cf38c0f2c3020b75d5238aa5c30c4ce4">05181</a> <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a>* <a class="code" href="classMMSWindow.html#cf38c0f2c3020b75d5238aa5c30c4ce4" title="Operator [] which you can use to find a widget.">MMSWindow::operator[]</a>(<span class="keywordtype">string</span> <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>) {
<a name="l05182"></a>05182     <a class="code" href="classMMSWidget.html" title="This class is the base class for all widgets.">MMSWidget</a> *widget;
<a name="l05183"></a>05183 
<a name="l05184"></a>05184     <span class="keywordflow">if</span> (name.empty()) {
<a name="l05185"></a>05185         <span class="keywordflow">if</span> (<a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.size() &gt; 0)
<a name="l05186"></a>05186             <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#761ec6699cd0c3446aed9aec30056b63" title="widgets of the window">children</a>.at(0);
<a name="l05187"></a>05187     }
<a name="l05188"></a>05188 
<a name="l05189"></a>05189     <span class="keywordflow">if</span> ((widget = <a class="code" href="classMMSWindow.html#33df330d64bfa1338dfd6dd1cddbf248" title="Find a widget with a given name.">findWidget</a>(name)))
<a name="l05190"></a>05190         <span class="keywordflow">return</span> widget;
<a name="l05191"></a>05191 
<a name="l05192"></a>05192     <span class="keywordflow">throw</span> MMSWidgetError(1, <span class="stringliteral">"widget "</span> + name + <span class="stringliteral">" not found"</span>);
<a name="l05193"></a>05193 }
<a name="l05194"></a>05194 
<a name="l05195"></a>05195 
<a name="l05196"></a><a class="code" href="classMMSWindow.html#4f0cf8a6de042d4266a90d195227fef7">05196</a> <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSWindow.html#4f0cf8a6de042d4266a90d195227fef7" title="Get the window to which the GUI navigates if the user press up.">MMSWindow::getNavigateUpWindow</a>() {
<a name="l05197"></a>05197     <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#446470a75ad31f794c05f11e478c5ccf" title="child window which is to be focused if user navigates up">navigateUpWindow</a>;
<a name="l05198"></a>05198 }
<a name="l05199"></a>05199 
<a name="l05200"></a><a class="code" href="classMMSWindow.html#5212ef060e299456185a170ab1645003">05200</a> <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSWindow.html#5212ef060e299456185a170ab1645003" title="Get the window to which the GUI navigates if the user press down.">MMSWindow::getNavigateDownWindow</a>() {
<a name="l05201"></a>05201     <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#fc9d9ea5d133caae51b933c2979c63a4" title="child window which is to be focused if user navigates down">navigateDownWindow</a>;
<a name="l05202"></a>05202 }
<a name="l05203"></a>05203 
<a name="l05204"></a><a class="code" href="classMMSWindow.html#43f3330e7592eb67da0a4a18c6bff581">05204</a> <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSWindow.html#43f3330e7592eb67da0a4a18c6bff581" title="Get the window to which the GUI navigates if the user press left.">MMSWindow::getNavigateLeftWindow</a>() {
<a name="l05205"></a>05205     <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#8d9b31f8bfc5532fced383e009a81dbc" title="child window which is to be focused if user navigates left">navigateLeftWindow</a>;
<a name="l05206"></a>05206 }
<a name="l05207"></a>05207 
<a name="l05208"></a><a class="code" href="classMMSWindow.html#70d5330b8f30abb43d66689d83912ddb">05208</a> <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSWindow.html#70d5330b8f30abb43d66689d83912ddb" title="Get the window to which the GUI navigates if the user press right.">MMSWindow::getNavigateRightWindow</a>() {
<a name="l05209"></a>05209     <span class="keywordflow">return</span> <a class="code" href="classMMSWindow.html#83e103344725791142f96f1800e461b4" title="child window which is to be focused if user navigates right">navigateRightWindow</a>;
<a name="l05210"></a>05210 }
<a name="l05211"></a>05211 
<a name="l05212"></a><a class="code" href="classMMSWindow.html#06ee6ee636d9708236833ad170f1fcc6">05212</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#06ee6ee636d9708236833ad170f1fcc6" title="Set the window to which the GUI navigates if the user press up.">MMSWindow::setNavigateUpWindow</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *upWindow) {
<a name="l05213"></a>05213     <a class="code" href="classMMSWindow.html#446470a75ad31f794c05f11e478c5ccf" title="child window which is to be focused if user navigates up">navigateUpWindow</a> = upWindow;
<a name="l05214"></a>05214 }
<a name="l05215"></a>05215 
<a name="l05216"></a><a class="code" href="classMMSWindow.html#8be45bc6ffc6bf454beb72666d414fe1">05216</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#8be45bc6ffc6bf454beb72666d414fe1" title="Set the window to which the GUI navigates if the user press down.">MMSWindow::setNavigateDownWindow</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *downWindow) {
<a name="l05217"></a>05217     <a class="code" href="classMMSWindow.html#fc9d9ea5d133caae51b933c2979c63a4" title="child window which is to be focused if user navigates down">navigateDownWindow</a> = downWindow;
<a name="l05218"></a>05218 }
<a name="l05219"></a>05219 
<a name="l05220"></a><a class="code" href="classMMSWindow.html#4242fa5c9847f8cdb70aacd619bf3ca8">05220</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#4242fa5c9847f8cdb70aacd619bf3ca8" title="Set the window to which the GUI navigates if the user press right.">MMSWindow::setNavigateRightWindow</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *rightWindow) {
<a name="l05221"></a>05221     <a class="code" href="classMMSWindow.html#83e103344725791142f96f1800e461b4" title="child window which is to be focused if user navigates right">navigateRightWindow</a> = rightWindow;
<a name="l05222"></a>05222 }
<a name="l05223"></a>05223 
<a name="l05224"></a><a class="code" href="classMMSWindow.html#409593deb5560e3db0848d276fef4da7">05224</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#409593deb5560e3db0848d276fef4da7" title="Set the window to which the GUI navigates if the user press left.">MMSWindow::setNavigateLeftWindow</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *leftWindow) {
<a name="l05225"></a>05225     <a class="code" href="classMMSWindow.html#8d9b31f8bfc5532fced383e009a81dbc" title="child window which is to be focused if user navigates left">navigateLeftWindow</a> = leftWindow;
<a name="l05226"></a>05226 }
<a name="l05227"></a>05227 
<a name="l05228"></a>05228 
<a name="l05229"></a>05229 
<a name="l05230"></a><a class="code" href="classMMSWindow.html#e2b19549e9d1531f17e0b1c99e89973c">05230</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classMMSWindow.html#e2b19549e9d1531f17e0b1c99e89973c">MMSWindow::printStack</a>(<span class="keywordtype">char</span> *buffer, <span class="keywordtype">int</span> space) {
<a name="l05231"></a>05231     <span class="keywordtype">char</span> *ptr = buffer + space;
<a name="l05232"></a>05232     <span class="keywordtype">int</span> cnt;
<a name="l05233"></a>05233 
<a name="l05234"></a>05234     <span class="comment">// name of window</span>
<a name="l05235"></a>05235     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>.empty())
<a name="l05236"></a>05236         cnt = sprintf(ptr, <span class="stringliteral">"%s"</span>, this-&gt;<a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>.c_str());
<a name="l05237"></a>05237     <span class="keywordflow">else</span>
<a name="l05238"></a>05238         cnt = sprintf(ptr, <span class="stringliteral">"&lt;noname&gt;"</span>);
<a name="l05239"></a>05239     <span class="keywordflow">if</span> (cnt &gt; 32 - space) cnt = 32 - space;
<a name="l05240"></a>05240     ptr[cnt] = <span class="charliteral">' '</span>;
<a name="l05241"></a>05241     ptr+=33 - space;
<a name="l05242"></a>05242 
<a name="l05243"></a>05243     <span class="comment">// this ptr</span>
<a name="l05244"></a>05244     cnt = sprintf(ptr, <span class="stringliteral">"%p"</span>, <span class="keyword">this</span>);
<a name="l05245"></a>05245     ptr[cnt] = <span class="charliteral">' '</span>;
<a name="l05246"></a>05246     ptr+=9;
<a name="l05247"></a>05247 
<a name="l05248"></a>05248     <span class="comment">// shown/focused state</span>
<a name="l05249"></a>05249     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>()) {
<a name="l05250"></a>05250         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#0fbfc3a7819879b15cdf5f1b73dacee8" title="Is the window shown?">isShown</a>(<span class="keyword">true</span>, <span class="keyword">true</span>)) {
<a name="l05251"></a>05251             <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#4726b52fe2e49e45dea7f44d4aebb686" title="Is the window focused?">getFocus</a>(<span class="keyword">true</span>))
<a name="l05252"></a>05252                 cnt = sprintf(ptr, <span class="stringliteral">"shown"</span>);
<a name="l05253"></a>05253             <span class="keywordflow">else</span>
<a name="l05254"></a>05254                 cnt = sprintf(ptr, <span class="stringliteral">"shown/focus"</span>);
<a name="l05255"></a>05255         }
<a name="l05256"></a>05256         <span class="keywordflow">else</span> {
<a name="l05257"></a>05257             <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#4726b52fe2e49e45dea7f44d4aebb686" title="Is the window focused?">getFocus</a>(<span class="keyword">true</span>))
<a name="l05258"></a>05258                 cnt = sprintf(ptr, <span class="stringliteral">"visible"</span>);
<a name="l05259"></a>05259             <span class="keywordflow">else</span>
<a name="l05260"></a>05260                 cnt = sprintf(ptr, <span class="stringliteral">"visible/focus"</span>);
<a name="l05261"></a>05261         }
<a name="l05262"></a>05262     }
<a name="l05263"></a>05263     <span class="keywordflow">else</span> {
<a name="l05264"></a>05264         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#4726b52fe2e49e45dea7f44d4aebb686" title="Is the window focused?">getFocus</a>(<span class="keyword">true</span>))
<a name="l05265"></a>05265             cnt = sprintf(ptr, <span class="stringliteral">"hidden"</span>);
<a name="l05266"></a>05266         <span class="keywordflow">else</span>
<a name="l05267"></a>05267             cnt = sprintf(ptr, <span class="stringliteral">"hidden/focus"</span>);
<a name="l05268"></a>05268     }
<a name="l05269"></a>05269     ptr[cnt] = <span class="charliteral">' '</span>;
<a name="l05270"></a>05270     ptr+=14;
<a name="l05271"></a>05271 
<a name="l05272"></a>05272     <span class="comment">// opacity</span>
<a name="l05273"></a>05273     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> opacity;
<a name="l05274"></a>05274     <a class="code" href="classMMSWindow.html#c709016273362ac9c5ff3f9b9e2187e2" title="Get the opacity of the window.">getOpacity</a>(opacity);
<a name="l05275"></a>05275     cnt = sprintf(ptr, <span class="stringliteral">"%02x"</span>, opacity);
<a name="l05276"></a>05276     ptr[cnt] = <span class="charliteral">' '</span>;
<a name="l05277"></a>05277     ptr+=8;
<a name="l05278"></a>05278 
<a name="l05279"></a>05279     <span class="comment">// opacity</span>
<a name="l05280"></a>05280     <span class="keywordtype">bool</span> ownsurface;
<a name="l05281"></a>05281     <a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">getOwnSurface</a>(ownsurface);
<a name="l05282"></a>05282     cnt = sprintf(ptr, <span class="stringliteral">"%s"</span>, (ownsurface)?<span class="stringliteral">"true"</span>:<span class="stringliteral">"false"</span>);
<a name="l05283"></a>05283     ptr[cnt] = <span class="charliteral">' '</span>;
<a name="l05284"></a>05284     ptr+=12;
<a name="l05285"></a>05285 
<a name="l05286"></a>05286     <span class="comment">// line feed</span>
<a name="l05287"></a>05287     cnt = sprintf(ptr, <span class="stringliteral">"\n"</span>);
<a name="l05288"></a>05288     ptr[cnt] = <span class="charliteral">' '</span>;
<a name="l05289"></a>05289     ptr+= cnt;
<a name="l05290"></a>05290 
<a name="l05291"></a>05291     <span class="comment">// through child windows, from top to bottom</span>
<a name="l05292"></a>05292     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.size(); i &gt; 0; i--) {
<a name="l05293"></a>05293         ptr += this-&gt;<a class="code" href="classMMSWindow.html#5b217680902d643478cfaa2984077e40" title="child windows of the window">childwins</a>.at(i-1).window-&gt;printStack(ptr, space + 1);
<a name="l05294"></a>05294     }
<a name="l05295"></a>05295 
<a name="l05296"></a>05296     <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(ptr - buffer);
<a name="l05297"></a>05297 }
<a name="l05298"></a>05298 
<a name="l05299"></a>05299 
<a name="l05300"></a>05300 <span class="comment">/***********************************************/</span>
<a name="l05301"></a>05301 <span class="comment">/* begin of theme access methods (get methods) */</span>
<a name="l05302"></a>05302 <span class="comment">/***********************************************/</span>
<a name="l05303"></a>05303 
<a name="l05304"></a><a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">05304</a> <span class="preprocessor">#define GETWINDOW(x,y) \</span>
<a name="l05305"></a>05305 <span class="preprocessor">    if (this-&gt;myWindowClass.is##x()) return myWindowClass.get##x(y); \</span>
<a name="l05306"></a>05306 <span class="preprocessor">    else if ((windowClass)&amp;&amp;(windowClass-&gt;is##x())) return windowClass-&gt;get##x(y); \</span>
<a name="l05307"></a>05307 <span class="preprocessor">    else return baseWindowClass-&gt;get##x(y);</span>
<a name="l05308"></a>05308 <span class="preprocessor"></span>
<a name="l05309"></a>05309 
<a name="l05310"></a><a class="code" href="classMMSWindow.html#c3aa82151b4ce3b80a6866f9b7478de1">05310</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#c3aa82151b4ce3b80a6866f9b7478de1" title="Get the alignment of the window.">MMSWindow::getAlignment</a>(<a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9" title="alignment type, used e.g. for positioning of windows, text in labels or textboxes...">MMSALIGNMENT</a> &amp;alignment) {
<a name="l05311"></a>05311     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Alignment, alignment);
<a name="l05312"></a>05312 }
<a name="l05313"></a>05313 
<a name="l05314"></a><a class="code" href="classMMSWindow.html#589576d693f44b3e8fba2d4abe4d1906">05314</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#589576d693f44b3e8fba2d4abe4d1906" title="Get the x-movement of the window.">MMSWindow::getDx</a>(<span class="keywordtype">string</span> &amp;dx) {
<a name="l05315"></a>05315     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Dx, dx);
<a name="l05316"></a>05316 }
<a name="l05317"></a>05317 
<a name="l05318"></a><a class="code" href="classMMSWindow.html#5ecc4c6cf7637651440e5f024bd9481c">05318</a> <span class="keywordtype">int</span> <a class="code" href="classMMSWindow.html#5ecc4c6cf7637651440e5f024bd9481c" title="Get the x-movement of the window as integer in pixel.">MMSWindow::getDxPix</a>() {
<a name="l05319"></a>05319     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#eb1592626842e8f7a07e16bdb800cf6a" title="x-movement of the window based on the alignment attribute">dxpix</a>;
<a name="l05320"></a>05320 }
<a name="l05321"></a>05321 
<a name="l05322"></a><a class="code" href="classMMSWindow.html#9db600968d1db1df46618d105aafc57e">05322</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#9db600968d1db1df46618d105aafc57e" title="Get the y-movement of the window.">MMSWindow::getDy</a>(<span class="keywordtype">string</span> &amp;dy) {
<a name="l05323"></a>05323     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Dy, dy);
<a name="l05324"></a>05324 }
<a name="l05325"></a>05325 
<a name="l05326"></a><a class="code" href="classMMSWindow.html#ccc0df0f8a0fdcfb4cf84d97dcc80e34">05326</a> <span class="keywordtype">int</span> <a class="code" href="classMMSWindow.html#ccc0df0f8a0fdcfb4cf84d97dcc80e34" title="Get the y-movement of the window as integer in pixel.">MMSWindow::getDyPix</a>() {
<a name="l05327"></a>05327     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classMMSWindow.html#6ab3465fae4f0a763bc2b5705983a6b5" title="y-movement of the window based on the alignment attribute">dypix</a>;
<a name="l05328"></a>05328 }
<a name="l05329"></a>05329 
<a name="l05330"></a><a class="code" href="classMMSWindow.html#ad7b5cddb3e22b21e33f9d6f32529dce">05330</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#ad7b5cddb3e22b21e33f9d6f32529dce" title="Get the width of the window.">MMSWindow::getWidth</a>(<span class="keywordtype">string</span> &amp;width) {
<a name="l05331"></a>05331     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Width, width);
<a name="l05332"></a>05332 }
<a name="l05333"></a>05333 
<a name="l05334"></a><a class="code" href="classMMSWindow.html#9e81d03a1c5dae51c5390ca82ad7aca8">05334</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#9e81d03a1c5dae51c5390ca82ad7aca8" title="Get the height of the window.">MMSWindow::getHeight</a>(<span class="keywordtype">string</span> &amp;height) {
<a name="l05335"></a>05335     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Height, height);
<a name="l05336"></a>05336 }
<a name="l05337"></a>05337 
<a name="l05338"></a><a class="code" href="classMMSWindow.html#154f02edcd2242056c52786361ca79b4">05338</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#154f02edcd2242056c52786361ca79b4" title="Get the background color of the window.">MMSWindow::getBgColor</a>(<a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> &amp;bgcolor) {
<a name="l05339"></a>05339     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(BgColor, bgcolor);
<a name="l05340"></a>05340 }
<a name="l05341"></a>05341 
<a name="l05342"></a><a class="code" href="classMMSWindow.html#604c354e267046639c6bf69ad3730a97">05342</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#604c354e267046639c6bf69ad3730a97" title="Get the path to the background image of the window.">MMSWindow::getBgImagePath</a>(<span class="keywordtype">string</span> &amp;bgimagepath) {
<a name="l05343"></a>05343     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(BgImagePath, bgimagepath);
<a name="l05344"></a>05344 }
<a name="l05345"></a>05345 
<a name="l05346"></a><a class="code" href="classMMSWindow.html#af6ba7b657c29b3b77bb9682850151e8">05346</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#af6ba7b657c29b3b77bb9682850151e8" title="Get the name of the background image.">MMSWindow::getBgImageName</a>(<span class="keywordtype">string</span> &amp;bgimagename) {
<a name="l05347"></a>05347     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(BgImageName, bgimagename);
<a name="l05348"></a>05348 }
<a name="l05349"></a>05349 
<a name="l05350"></a><a class="code" href="classMMSWindow.html#c709016273362ac9c5ff3f9b9e2187e2">05350</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#c709016273362ac9c5ff3f9b9e2187e2" title="Get the opacity of the window.">MMSWindow::getOpacity</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;opacity) {
<a name="l05351"></a>05351     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Opacity, opacity);
<a name="l05352"></a>05352 }
<a name="l05353"></a>05353 
<a name="l05354"></a><a class="code" href="classMMSWindow.html#b642f37c0509a35837588fdb42436ee9">05354</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#b642f37c0509a35837588fdb42436ee9" title="Detect if the window has to fade-in during the show action.">MMSWindow::getFadeIn</a>(<span class="keywordtype">bool</span> &amp;fadein) {
<a name="l05355"></a>05355     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(FadeIn, fadein);
<a name="l05356"></a>05356 }
<a name="l05357"></a>05357 
<a name="l05358"></a><a class="code" href="classMMSWindow.html#7215d87c77f2166b492bf30979a36e3c">05358</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#7215d87c77f2166b492bf30979a36e3c" title="Detect if the window has to fade-out during the hide action.">MMSWindow::getFadeOut</a>(<span class="keywordtype">bool</span> &amp;fadeout) {
<a name="l05359"></a>05359     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(FadeOut, fadeout);
<a name="l05360"></a>05360 }
<a name="l05361"></a>05361 
<a name="l05362"></a><a class="code" href="classMMSWindow.html#0abb64868f0d8e8e65dbc45efd12d0cf">05362</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#0abb64868f0d8e8e65dbc45efd12d0cf" title="Detect if the window has to draw debug rectangles around its widgets.">MMSWindow::getDebug</a>(<span class="keywordtype">bool</span> &amp;debug) {
<a name="l05363"></a>05363     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Debug, debug);
<a name="l05364"></a>05364 }
<a name="l05365"></a>05365 
<a name="l05366"></a><a class="code" href="classMMSWindow.html#9fb44c1976f272ac071f4a0957a32bb9">05366</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#9fb44c1976f272ac071f4a0957a32bb9" title="Get the margin of the window.">MMSWindow::getMargin</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;margin) {
<a name="l05367"></a>05367     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Margin, margin);
<a name="l05368"></a>05368 }
<a name="l05369"></a>05369 
<a name="l05370"></a><a class="code" href="classMMSWindow.html#f4d50157005ee39bbcee369ac48a7f27">05370</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#f4d50157005ee39bbcee369ac48a7f27" title="Get the name of the uparrow widget.">MMSWindow::getUpArrow</a>(<span class="keywordtype">string</span> &amp;uparrow) {
<a name="l05371"></a>05371     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(UpArrow, uparrow);
<a name="l05372"></a>05372 }
<a name="l05373"></a>05373 
<a name="l05374"></a><a class="code" href="classMMSWindow.html#9492b545cb27ab555e123e3891f158b0">05374</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#9492b545cb27ab555e123e3891f158b0" title="Get the name of the downarrow widget.">MMSWindow::getDownArrow</a>(<span class="keywordtype">string</span> &amp;downarrow) {
<a name="l05375"></a>05375     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(DownArrow, downarrow);
<a name="l05376"></a>05376 }
<a name="l05377"></a>05377 
<a name="l05378"></a><a class="code" href="classMMSWindow.html#be9b8c674ba91db46da35c8706b6c7b8">05378</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#be9b8c674ba91db46da35c8706b6c7b8" title="Get the name of the leftarrow widget.">MMSWindow::getLeftArrow</a>(<span class="keywordtype">string</span> &amp;leftarrow) {
<a name="l05379"></a>05379     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(LeftArrow, leftarrow);
<a name="l05380"></a>05380 }
<a name="l05381"></a>05381 
<a name="l05382"></a><a class="code" href="classMMSWindow.html#b98746612a88bf3ea014e13da484a16a">05382</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#b98746612a88bf3ea014e13da484a16a" title="Get the name of the rightarrow widget.">MMSWindow::getRightArrow</a>(<span class="keywordtype">string</span> &amp;rightarrow) {
<a name="l05383"></a>05383     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(RightArrow, rightarrow);
<a name="l05384"></a>05384 }
<a name="l05385"></a>05385 
<a name="l05386"></a><a class="code" href="classMMSWindow.html#a4e8f39ada4cbbf55d8b9a0c81b3a93e">05386</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#a4e8f39ada4cbbf55d8b9a0c81b3a93e" title="Get the name of the navigateup window.">MMSWindow::getNavigateUp</a>(<span class="keywordtype">string</span> &amp;navigateup) {
<a name="l05387"></a>05387     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(NavigateUp, navigateup);
<a name="l05388"></a>05388 }
<a name="l05389"></a>05389 
<a name="l05390"></a><a class="code" href="classMMSWindow.html#c9c2e57cae8564ad96c8b0c474620b8c">05390</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#c9c2e57cae8564ad96c8b0c474620b8c" title="Get the name of the navigatedown window.">MMSWindow::getNavigateDown</a>(<span class="keywordtype">string</span> &amp;navigatedown) {
<a name="l05391"></a>05391     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(NavigateDown, navigatedown);
<a name="l05392"></a>05392 }
<a name="l05393"></a>05393 
<a name="l05394"></a><a class="code" href="classMMSWindow.html#40b9531df602501e2949b464a8f1ebf1">05394</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#40b9531df602501e2949b464a8f1ebf1" title="Get the name of the navigateleft window.">MMSWindow::getNavigateLeft</a>(<span class="keywordtype">string</span> &amp;navigateleft) {
<a name="l05395"></a>05395     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(NavigateLeft, navigateleft);
<a name="l05396"></a>05396 }
<a name="l05397"></a>05397 
<a name="l05398"></a><a class="code" href="classMMSWindow.html#c8101d2c3719ee8568bf4fc339e0b8da">05398</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#c8101d2c3719ee8568bf4fc339e0b8da" title="Get the name of the navigateright window.">MMSWindow::getNavigateRight</a>(<span class="keywordtype">string</span> &amp;navigateright) {
<a name="l05399"></a>05399     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(NavigateRight, navigateright);
<a name="l05400"></a>05400 }
<a name="l05401"></a>05401 
<a name="l05402"></a><a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd">05402</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#a3047d6b0e6b07fdc9827b8e5a1795cd" title="Detect if the window has an own surface.">MMSWindow::getOwnSurface</a>(<span class="keywordtype">bool</span> &amp;ownsurface) {
<a name="l05403"></a>05403     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(OwnSurface, ownsurface);
<a name="l05404"></a>05404 }
<a name="l05405"></a>05405 
<a name="l05406"></a><a class="code" href="classMMSWindow.html#af44a913ca9411f3d4a82d735bbf70cb">05406</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#af44a913ca9411f3d4a82d735bbf70cb" title="Get the move-in direction of the window which is used during the show action.">MMSWindow::getMoveIn</a>(<a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f">MMSDIRECTION</a> &amp;movein) {
<a name="l05407"></a>05407     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(MoveIn, movein);
<a name="l05408"></a>05408 }
<a name="l05409"></a>05409 
<a name="l05410"></a><a class="code" href="classMMSWindow.html#8348666731a595939fcec849f713dd89">05410</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8348666731a595939fcec849f713dd89" title="Get the move-out direction of the window which is used during the hide action.">MMSWindow::getMoveOut</a>(<a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f">MMSDIRECTION</a> &amp;moveout) {
<a name="l05411"></a>05411     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(MoveOut, moveout);
<a name="l05412"></a>05412 }
<a name="l05413"></a>05413 
<a name="l05414"></a><a class="code" href="classMMSWindow.html#8bbdfc384b579db42047d57aa9e63b39">05414</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8bbdfc384b579db42047d57aa9e63b39" title="Detect if the window has to be modal if it is focused.">MMSWindow::getModal</a>(<span class="keywordtype">bool</span> &amp;modal) {
<a name="l05415"></a>05415     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Modal, modal);
<a name="l05416"></a>05416 }
<a name="l05417"></a>05417 
<a name="l05418"></a><a class="code" href="classMMSWindow.html#b251c8f0b8846f8ce8d5961078581b97">05418</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#b251c8f0b8846f8ce8d5961078581b97" title="Detect if the window automatically changes the zorder of child windows during show()...">MMSWindow::getStaticZOrder</a>(<span class="keywordtype">bool</span> &amp;staticzorder) {
<a name="l05419"></a>05419     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(StaticZOrder, staticzorder);
<a name="l05420"></a>05420 }
<a name="l05421"></a>05421 
<a name="l05422"></a><a class="code" href="classMMSWindow.html#aae984f71f967f92da6f33e1d8a468d4">05422</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#aae984f71f967f92da6f33e1d8a468d4" title="Detect if the window will be permanently displayed at the top of the window stack...">MMSWindow::getAlwaysOnTop</a>(<span class="keywordtype">bool</span> &amp;alwaysontop) {
<a name="l05423"></a>05423     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(AlwaysOnTop, alwaysontop);
<a name="l05424"></a>05424 }
<a name="l05425"></a>05425 
<a name="l05426"></a><a class="code" href="classMMSWindow.html#b3734c53ae3293d16eecc3024ff56d1b">05426</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#b3734c53ae3293d16eecc3024ff56d1b" title="Detect if the window can be focused.">MMSWindow::getFocusable</a>(<span class="keywordtype">bool</span> &amp;focusable) {
<a name="l05427"></a>05427     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(Focusable, focusable);
<a name="l05428"></a>05428 }
<a name="l05429"></a>05429 
<a name="l05430"></a><a class="code" href="classMMSWindow.html#eee09a44e3b647b804ba30b1b7336a04">05430</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#eee09a44e3b647b804ba30b1b7336a04" title="Detect if the window has an backbuffer.">MMSWindow::getBackBuffer</a>(<span class="keywordtype">bool</span> &amp;backbuffer) {
<a name="l05431"></a>05431     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(BackBuffer, backbuffer);
<a name="l05432"></a>05432 }
<a name="l05433"></a>05433 
<a name="l05434"></a><a class="code" href="classMMSWindow.html#e92d4c1e03261542ae0df2fe85e4003e">05434</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#e92d4c1e03261542ae0df2fe85e4003e" title="Detect if the window is loading images, fonts etc. during initialization.">MMSWindow::getInitialLoad</a>(<span class="keywordtype">bool</span> &amp;initialload) {
<a name="l05435"></a>05435     <a class="code" href="mmswindow_8cpp.html#f04e6286252664dbe97a2719274dfeff">GETWINDOW</a>(InitialLoad, initialload);
<a name="l05436"></a>05436 }
<a name="l05437"></a>05437 
<a name="l05438"></a>05438 
<a name="l05439"></a><a class="code" href="mmswindow_8cpp.html#70f2bdf485f58fc9b58c519506b3994e">05439</a> <span class="preprocessor">#define GETBORDER(x,y) \</span>
<a name="l05440"></a>05440 <span class="preprocessor">    if (this-&gt;myWindowClass.border.is##x()) return myWindowClass.border.get##x(y); \</span>
<a name="l05441"></a>05441 <span class="preprocessor">    else if ((windowClass)&amp;&amp;(windowClass-&gt;border.is##x())) return windowClass-&gt;border.get##x(y); \</span>
<a name="l05442"></a>05442 <span class="preprocessor">    else return baseWindowClass-&gt;border.get##x(y);</span>
<a name="l05443"></a>05443 <span class="preprocessor"></span>
<a name="l05444"></a><a class="code" href="mmswindow_8cpp.html#56e29aed0ba3412805a269f38ada4290">05444</a> <span class="preprocessor">#define GETBORDER_IMAGES(x,p,y) \</span>
<a name="l05445"></a>05445 <span class="preprocessor">    if (this-&gt;myWindowClass.border.is##x()) return myWindowClass.border.get##x(p,y); \</span>
<a name="l05446"></a>05446 <span class="preprocessor">    else if ((windowClass)&amp;&amp;(windowClass-&gt;border.is##x())) return windowClass-&gt;border.get##x(p,y); \</span>
<a name="l05447"></a>05447 <span class="preprocessor">    else return baseWindowClass-&gt;border.get##x(p,y);</span>
<a name="l05448"></a>05448 <span class="preprocessor"></span>
<a name="l05449"></a>05449 
<a name="l05450"></a><a class="code" href="classMMSWindow.html#08c0645d6a5d3ce0a330bc21db3d68ab">05450</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#08c0645d6a5d3ce0a330bc21db3d68ab" title="Get the color of the window border.">MMSWindow::getBorderColor</a>(<a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> &amp;color) {
<a name="l05451"></a>05451     <a class="code" href="mmswidget_8cpp.html#70f2bdf485f58fc9b58c519506b3994e">GETBORDER</a>(Color, color);
<a name="l05452"></a>05452 }
<a name="l05453"></a>05453 
<a name="l05454"></a><a class="code" href="classMMSWindow.html#73045a650d5c78466206e3b159f2d8dd">05454</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#73045a650d5c78466206e3b159f2d8dd" title="Get the path to the window border images.">MMSWindow::getBorderImagePath</a>(<span class="keywordtype">string</span> &amp;imagepath) {
<a name="l05455"></a>05455     <a class="code" href="mmswidget_8cpp.html#70f2bdf485f58fc9b58c519506b3994e">GETBORDER</a>(ImagePath, imagepath);
<a name="l05456"></a>05456 }
<a name="l05457"></a>05457 
<a name="l05458"></a><a class="code" href="classMMSWindow.html#eca4461fd3efe6252eaa0255bf612ff6">05458</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#eca4461fd3efe6252eaa0255bf612ff6" title="Get the name of a border image.">MMSWindow::getBorderImageNames</a>(<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2d" title="describes the 8 possible border images">MMSBORDER_IMAGE_NUM</a> num, <span class="keywordtype">string</span> &amp;imagename) {
<a name="l05459"></a>05459     <a class="code" href="mmswidget_8cpp.html#56e29aed0ba3412805a269f38ada4290">GETBORDER_IMAGES</a>(ImageNames, num, imagename);
<a name="l05460"></a>05460 }
<a name="l05461"></a>05461 
<a name="l05462"></a><a class="code" href="classMMSWindow.html#3a62537a4491595c94d5b6092d18e7a8">05462</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#3a62537a4491595c94d5b6092d18e7a8" title="Get the border thickness.">MMSWindow::getBorderThickness</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;thickness) {
<a name="l05463"></a>05463     <a class="code" href="mmswidget_8cpp.html#70f2bdf485f58fc9b58c519506b3994e">GETBORDER</a>(Thickness, thickness);
<a name="l05464"></a>05464 }
<a name="l05465"></a>05465 
<a name="l05466"></a><a class="code" href="classMMSWindow.html#0f3ab0e81e863df0b60e153420f4f63d">05466</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#0f3ab0e81e863df0b60e153420f4f63d" title="Get the border margin.">MMSWindow::getBorderMargin</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;margin) {
<a name="l05467"></a>05467     <a class="code" href="mmswidget_8cpp.html#70f2bdf485f58fc9b58c519506b3994e">GETBORDER</a>(Margin, margin);
<a name="l05468"></a>05468 }
<a name="l05469"></a>05469 
<a name="l05470"></a><a class="code" href="classMMSWindow.html#87f3a7c8b1d0fcb4d2a4f4e56723de7c">05470</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#87f3a7c8b1d0fcb4d2a4f4e56723de7c" title="Detect if the border has round corners.">MMSWindow::getBorderRCorners</a>(<span class="keywordtype">bool</span> &amp;rcorners) {
<a name="l05471"></a>05471     <a class="code" href="mmswidget_8cpp.html#70f2bdf485f58fc9b58c519506b3994e">GETBORDER</a>(RCorners, rcorners);
<a name="l05472"></a>05472 }
<a name="l05473"></a>05473 
<a name="l05474"></a>05474 <span class="comment">/***********************************************/</span>
<a name="l05475"></a>05475 <span class="comment">/* begin of theme access methods (set methods) */</span>
<a name="l05476"></a>05476 <span class="comment">/***********************************************/</span>
<a name="l05477"></a>05477 
<a name="l05478"></a><a class="code" href="classMMSWindow.html#30858e7c11f711a1b9d9707b1f18dc05">05478</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#30858e7c11f711a1b9d9707b1f18dc05" title="Set the alignment of the window.">MMSWindow::setAlignment</a>(<a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9" title="alignment type, used e.g. for positioning of windows, text in labels or textboxes...">MMSALIGNMENT</a> alignment, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05479"></a>05479     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#a5771288d1efc121c00fed8c552dddeb">setAlignment</a>(alignment);
<a name="l05480"></a>05480     <span class="keywordflow">if</span> (resize)
<a name="l05481"></a>05481         this-&gt;<a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05482"></a>05482     <span class="keywordflow">if</span> (refresh)
<a name="l05483"></a>05483         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05484"></a>05484 }
<a name="l05485"></a>05485 
<a name="l05486"></a><a class="code" href="classMMSWindow.html#93c3c6c71e793dfda90d6afcddd75ff1">05486</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#93c3c6c71e793dfda90d6afcddd75ff1" title="Set the x-movement of the window.">MMSWindow::setDx</a>(<span class="keywordtype">string</span> dx, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05487"></a>05487     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#298faa51e457deaf4c030d9548bd56f8">setDx</a>(dx);
<a name="l05488"></a>05488     <span class="keywordflow">if</span> (resize)
<a name="l05489"></a>05489         this-&gt;<a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05490"></a>05490     <span class="keywordflow">if</span> (refresh)
<a name="l05491"></a>05491         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05492"></a>05492 }
<a name="l05493"></a>05493 
<a name="l05494"></a><a class="code" href="classMMSWindow.html#4f7fd63a447cb4042f928dd468c8f071">05494</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#4f7fd63a447cb4042f928dd468c8f071" title="Set the x-movement of the window as integer in pixel.">MMSWindow::setDxPix</a>(<span class="keywordtype">int</span> dx, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05495"></a>05495     <span class="keywordtype">string</span> s = <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(dx) + <span class="stringliteral">"px"</span>;
<a name="l05496"></a>05496     <a class="code" href="classMMSWindow.html#93c3c6c71e793dfda90d6afcddd75ff1" title="Set the x-movement of the window.">setDx</a>(s, refresh, resize);
<a name="l05497"></a>05497 }
<a name="l05498"></a>05498 
<a name="l05499"></a><a class="code" href="classMMSWindow.html#4ae82fe64a75660a80691548e43d633f">05499</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#4ae82fe64a75660a80691548e43d633f" title="Set the y-movement of the window.">MMSWindow::setDy</a>(<span class="keywordtype">string</span> dy, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05500"></a>05500     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#a5a15cbd94494878ccf56e230f8a27ed">setDy</a>(dy);
<a name="l05501"></a>05501     <span class="keywordflow">if</span> (resize)
<a name="l05502"></a>05502         this-&gt;<a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05503"></a>05503     <span class="keywordflow">if</span> (refresh)
<a name="l05504"></a>05504         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05505"></a>05505 }
<a name="l05506"></a>05506 
<a name="l05507"></a><a class="code" href="classMMSWindow.html#04838f295e4946a3ced9e8770ea48ef7">05507</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#04838f295e4946a3ced9e8770ea48ef7" title="Set the y-movement of the window as integer in pixel.">MMSWindow::setDyPix</a>(<span class="keywordtype">int</span> dy, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05508"></a>05508     <span class="keywordtype">string</span> s = <a class="code" href="tools_8h.html#441e096e5497221a0331da02e62d6c73">iToStr</a>(dy) + <span class="stringliteral">"px"</span>;
<a name="l05509"></a>05509     <a class="code" href="classMMSWindow.html#4ae82fe64a75660a80691548e43d633f" title="Set the y-movement of the window.">setDy</a>(s, refresh, resize);
<a name="l05510"></a>05510 }
<a name="l05511"></a>05511 
<a name="l05512"></a><a class="code" href="classMMSWindow.html#186768c58ccdd4a1685f6fcec7ca08e7">05512</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#186768c58ccdd4a1685f6fcec7ca08e7" title="Set the width of the window.">MMSWindow::setWidth</a>(<span class="keywordtype">string</span> width, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05513"></a>05513     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#b7ace0f513039d4e5bd9d09d5e1c9506">setWidth</a>(width);
<a name="l05514"></a>05514     <span class="keywordflow">if</span> (resize)
<a name="l05515"></a>05515         this-&gt;<a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05516"></a>05516     <span class="keywordflow">if</span> (refresh)
<a name="l05517"></a>05517         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05518"></a>05518 }
<a name="l05519"></a>05519 
<a name="l05520"></a><a class="code" href="classMMSWindow.html#c5e330e38d186786da66ad8bb5fe9eee">05520</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#c5e330e38d186786da66ad8bb5fe9eee" title="Set the height of the window.">MMSWindow::setHeight</a>(<span class="keywordtype">string</span> height, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05521"></a>05521     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#16e19b0058c87e506a7a8aa3e1992fab">setHeight</a>(height);
<a name="l05522"></a>05522     <span class="keywordflow">if</span> (resize)
<a name="l05523"></a>05523         this-&gt;<a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05524"></a>05524     <span class="keywordflow">if</span> (refresh)
<a name="l05525"></a>05525         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05526"></a>05526 }
<a name="l05527"></a>05527 
<a name="l05528"></a><a class="code" href="classMMSWindow.html#a9bc575a3a137aa1cd2d997401a04bbd">05528</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#a9bc575a3a137aa1cd2d997401a04bbd" title="Set the background color of the window.">MMSWindow::setBgColor</a>(<a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> bgcolor, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05529"></a>05529     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#8641d0cfbf040e8357215b33ca2c0578">setBgColor</a>(bgcolor);
<a name="l05530"></a>05530     <span class="keywordflow">if</span> (refresh)
<a name="l05531"></a>05531         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05532"></a>05532 }
<a name="l05533"></a>05533 
<a name="l05534"></a><a class="code" href="classMMSWindow.html#bb68bf1b2ded61f8bef190f8673e659a">05534</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#bb68bf1b2ded61f8bef190f8673e659a" title="Set the path to the background image of the window.">MMSWindow::setBgImagePath</a>(<span class="keywordtype">string</span> bgimagepath, <span class="keywordtype">bool</span> load, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05535"></a>05535     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#a658d85b9f08a4b97998e8884d12eba0">setBgImagePath</a>(bgimagepath);
<a name="l05536"></a>05536     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#45aabc8f5a3c7aeccbbf00577fb5aae6" title="background image set by application">bgimage_from_external</a>) {
<a name="l05537"></a>05537         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a>) {
<a name="l05538"></a>05538             <span class="keywordflow">if</span> (load) {
<a name="l05539"></a>05539                 <a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#c4645fc54381ead21da4428b56fa6152">releaseImage</a>(this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a>);
<a name="l05540"></a>05540                 <span class="keywordtype">string</span> path, <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>;
<a name="l05541"></a>05541                 <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#604c354e267046639c6bf69ad3730a97" title="Get the path to the background image of the window.">getBgImagePath</a>(path)) path = <span class="stringliteral">""</span>;
<a name="l05542"></a>05542                 <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#af6ba7b657c29b3b77bb9682850151e8" title="Get the name of the background image.">getBgImageName</a>(name)) name = <span class="stringliteral">""</span>;
<a name="l05543"></a>05543                 this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a> = <a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#4d2f832f28b7a5028fadbdc6522035a8">getImage</a>(path, name);
<a name="l05544"></a>05544             }
<a name="l05545"></a>05545             <span class="keywordflow">if</span> (refresh)
<a name="l05546"></a>05546                 this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05547"></a>05547         }
<a name="l05548"></a>05548     }
<a name="l05549"></a>05549 }
<a name="l05550"></a>05550 
<a name="l05551"></a><a class="code" href="classMMSWindow.html#259dbd94532cc04171f1b6f3b6c3d7db">05551</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#259dbd94532cc04171f1b6f3b6c3d7db" title="Set the name of the background image.">MMSWindow::setBgImageName</a>(<span class="keywordtype">string</span> bgimagename, <span class="keywordtype">bool</span> load, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05552"></a>05552     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#d7a019fbbd8b2091c4094952a7bc96b1">setBgImageName</a>(bgimagename);
<a name="l05553"></a>05553     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#45aabc8f5a3c7aeccbbf00577fb5aae6" title="background image set by application">bgimage_from_external</a>) {
<a name="l05554"></a>05554         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a>) {
<a name="l05555"></a>05555             <span class="keywordflow">if</span> (load) {
<a name="l05556"></a>05556                 <a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#c4645fc54381ead21da4428b56fa6152">releaseImage</a>(this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a>);
<a name="l05557"></a>05557                 <span class="keywordtype">string</span> path, <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>;
<a name="l05558"></a>05558                 <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#604c354e267046639c6bf69ad3730a97" title="Get the path to the background image of the window.">getBgImagePath</a>(path)) path = <span class="stringliteral">""</span>;
<a name="l05559"></a>05559                 <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#af6ba7b657c29b3b77bb9682850151e8" title="Get the name of the background image.">getBgImageName</a>(name)) name = <span class="stringliteral">""</span>;
<a name="l05560"></a>05560                 this-&gt;<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a> = <a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#4d2f832f28b7a5028fadbdc6522035a8">getImage</a>(path, name);
<a name="l05561"></a>05561             }
<a name="l05562"></a>05562             <span class="keywordflow">if</span> (refresh)
<a name="l05563"></a>05563                 this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05564"></a>05564         }
<a name="l05565"></a>05565     }
<a name="l05566"></a>05566 }
<a name="l05567"></a>05567 
<a name="l05568"></a>05568 
<a name="l05569"></a><a class="code" href="classMMSWindow.html#e3e275d14e2e7523d3f0e66ee5c15463">05569</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#e3e275d14e2e7523d3f0e66ee5c15463" title="Set background image already loaded by the application.">MMSWindow::setBgImage</a>(<a class="code" href="classMMSFBSurface.html" title="This class describes a surface.">MMSFBSurface</a> *<a class="code" href="classMMSWindow.html#9b66bf3d84e9ffdddaf92c00843eef7e" title="background image">bgimage</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05570"></a>05570     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#45aabc8f5a3c7aeccbbf00577fb5aae6" title="background image set by application">bgimage_from_external</a>) {
<a name="l05571"></a>05571         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a>) {
<a name="l05572"></a>05572             <a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#c4645fc54381ead21da4428b56fa6152">releaseImage</a>(this-&gt;bgimage);
<a name="l05573"></a>05573             this-&gt;bgimage = NULL;
<a name="l05574"></a>05574         }
<a name="l05575"></a>05575     }
<a name="l05576"></a>05576 
<a name="l05577"></a>05577     <span class="comment">// set external pointer to bgimage</span>
<a name="l05578"></a>05578     this-&gt;bgimage = bgimage;
<a name="l05579"></a>05579     this-&gt;<a class="code" href="classMMSWindow.html#45aabc8f5a3c7aeccbbf00577fb5aae6" title="background image set by application">bgimage_from_external</a> = <span class="keyword">true</span>;
<a name="l05580"></a>05580 
<a name="l05581"></a>05581     <span class="keywordflow">if</span> (refresh)
<a name="l05582"></a>05582         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05583"></a>05583 }
<a name="l05584"></a>05584 
<a name="l05585"></a>05585 
<a name="l05586"></a><a class="code" href="classMMSWindow.html#f96843c86a48934ee3c9ee209b757875">05586</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#f96843c86a48934ee3c9ee209b757875" title="Set the opacity of the window.">MMSWindow::setOpacity</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> opacity, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05587"></a>05587     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> op = 0;
<a name="l05588"></a>05588 
<a name="l05589"></a>05589     <a class="code" href="classMMSWindow.html#c709016273362ac9c5ff3f9b9e2187e2" title="Get the opacity of the window.">getOpacity</a>(op);
<a name="l05590"></a>05590 
<a name="l05591"></a>05591     <span class="keywordflow">if</span> (op == opacity)
<a name="l05592"></a>05592         <span class="keywordflow">return</span>;
<a name="l05593"></a>05593 
<a name="l05594"></a>05594     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#d1143397ef7414c5053c838a69af56ea">setOpacity</a>(opacity);
<a name="l05595"></a>05595 
<a name="l05596"></a>05596     <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>) {
<a name="l05597"></a>05597         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>)
<a name="l05598"></a>05598             this-&gt;<a class="code" href="classMMSWindow.html#2cacf01c297b166332dbfae3bab8b65a" title="access to the MMSFBWindow which is behind of this class">window</a>-&gt;<a class="code" href="classMMSFBWindow.html#5744178ac8a04b4e0f2f37febee7a693">setOpacity</a>(opacity);
<a name="l05599"></a>05599     }
<a name="l05600"></a>05600     <span class="keywordflow">else</span> {
<a name="l05601"></a>05601         this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#a944d0214d8708f3358b22647474ea55" title="Internal method: Set the opacity of a child window.">setChildWindowOpacity</a>(<span class="keyword">this</span>, opacity, refresh);
<a name="l05602"></a>05602     }
<a name="l05603"></a>05603 }
<a name="l05604"></a>05604 
<a name="l05605"></a><a class="code" href="classMMSWindow.html#9fd22da896a032b07bdfca29f7204389">05605</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#9fd22da896a032b07bdfca29f7204389" title="Set the fadein status needed during the show action.">MMSWindow::setFadeIn</a>(<span class="keywordtype">bool</span> fadein) {
<a name="l05606"></a>05606     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#202abfe434d49e24c042901bcc4870d3">setFadeIn</a>(fadein);
<a name="l05607"></a>05607 }
<a name="l05608"></a>05608 
<a name="l05609"></a><a class="code" href="classMMSWindow.html#73eb33ed53e272561b791435f4620a8e">05609</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#73eb33ed53e272561b791435f4620a8e" title="Set the fadeout status needed during the hide action.">MMSWindow::setFadeOut</a>(<span class="keywordtype">bool</span> fadeout) {
<a name="l05610"></a>05610     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#cf8bc104229149ce51a00198ea3e0676">setFadeOut</a>(fadeout);
<a name="l05611"></a>05611 }
<a name="l05612"></a>05612 
<a name="l05613"></a><a class="code" href="classMMSWindow.html#85dc9c554bceced83a8d7132f96c0fa4">05613</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#85dc9c554bceced83a8d7132f96c0fa4" title="Should the window draw debug rectangles around its widgets?">MMSWindow::setDebug</a>(<span class="keywordtype">bool</span> debug, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05614"></a>05614     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#db37b82706817e3e72190efc10727529">setDebug</a>(debug);
<a name="l05615"></a>05615     <span class="keywordflow">if</span> (refresh)
<a name="l05616"></a>05616         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05617"></a>05617 }
<a name="l05618"></a>05618 
<a name="l05619"></a><a class="code" href="classMMSWindow.html#ee6da813ff662012a8ffb382ef26d973">05619</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#ee6da813ff662012a8ffb382ef26d973" title="Set the margin of the window.">MMSWindow::setMargin</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> margin, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05620"></a>05620     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#728d05a0e1ccc2b3864b375df788fa2f">setMargin</a>(margin);
<a name="l05621"></a>05621     <span class="keywordflow">if</span> (resize)
<a name="l05622"></a>05622         this-&gt;<a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05623"></a>05623     <span class="keywordflow">if</span> (refresh)
<a name="l05624"></a>05624         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05625"></a>05625 }
<a name="l05626"></a>05626 
<a name="l05627"></a><a class="code" href="classMMSWindow.html#de5407b4aa19cf1bae11e08821d63a92">05627</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#de5407b4aa19cf1bae11e08821d63a92" title="Set the name of the uparrow widget.">MMSWindow::setUpArrow</a>(<span class="keywordtype">string</span> uparrow, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05628"></a>05628     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#79ad83eebfd41fcac9871766ec6af1a7" title="Set the uparrow.">setUpArrow</a>(uparrow);
<a name="l05629"></a>05629     <a class="code" href="classMMSWindow.html#dfb478c9a075eaae12575f21b547bb40" title="widget which has to be selected if it is possible to navigate up">upArrowWidget</a> = NULL;
<a name="l05630"></a>05630     <span class="keywordflow">if</span> (refresh)
<a name="l05631"></a>05631         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05632"></a>05632 }
<a name="l05633"></a>05633 
<a name="l05634"></a><a class="code" href="classMMSWindow.html#d8bef5c3470404d99590303ebcf5f6c0">05634</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#d8bef5c3470404d99590303ebcf5f6c0" title="Set the name of the downarrow widget.">MMSWindow::setDownArrow</a>(<span class="keywordtype">string</span> downarrow, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05635"></a>05635     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#c7e66db1d3613c201acf0c210c555373" title="Set the downarrow.">setDownArrow</a>(downarrow);
<a name="l05636"></a>05636     <a class="code" href="classMMSWindow.html#23d535ddfb90ccafa853a4f13aa423e2" title="widget which has to be selected if it is possible to navigate down">downArrowWidget</a> = NULL;
<a name="l05637"></a>05637     <span class="keywordflow">if</span> (refresh)
<a name="l05638"></a>05638         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05639"></a>05639 }
<a name="l05640"></a>05640 
<a name="l05641"></a><a class="code" href="classMMSWindow.html#d2a905f313867cef493a3dd89d943074">05641</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#d2a905f313867cef493a3dd89d943074" title="Set the name of the leftarrow widget.">MMSWindow::setLeftArrow</a>(<span class="keywordtype">string</span> leftarrow, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05642"></a>05642     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#3f5ca193967d5f303e66dcc0e4d679db" title="Set the leftarrow.">setLeftArrow</a>(leftarrow);
<a name="l05643"></a>05643     <a class="code" href="classMMSWindow.html#ac285b738a71e9aa2830764447dfe68c" title="widget which has to be selected if it is possible to navigate left">leftArrowWidget</a> = NULL;
<a name="l05644"></a>05644     <span class="keywordflow">if</span> (refresh)
<a name="l05645"></a>05645         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05646"></a>05646 }
<a name="l05647"></a>05647 
<a name="l05648"></a><a class="code" href="classMMSWindow.html#7435d67df280cb73e6d8af0122d3557f">05648</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#7435d67df280cb73e6d8af0122d3557f" title="Set the name of the rightarrow widget.">MMSWindow::setRightArrow</a>(<span class="keywordtype">string</span> rightarrow, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05649"></a>05649     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#d989a51c4d50639532f2cb8469666536" title="Set the rightarrow.">setRightArrow</a>(rightarrow);
<a name="l05650"></a>05650     <a class="code" href="classMMSWindow.html#4256a1e05eaad21ba121268e7cc13f96" title="widget which has to be selected if it is possible to navigate right">rightArrowWidget</a> = NULL;
<a name="l05651"></a>05651     <span class="keywordflow">if</span> (refresh)
<a name="l05652"></a>05652         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05653"></a>05653 }
<a name="l05654"></a>05654 
<a name="l05655"></a><a class="code" href="classMMSWindow.html#76380b9247d7858239aed5da476689af">05655</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#76380b9247d7858239aed5da476689af" title="Set the name of the navigateup window.">MMSWindow::setNavigateUp</a>(<span class="keywordtype">string</span> navigateup) {
<a name="l05656"></a>05656     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#b7ff97f737a37d7d869ac9805823aee6" title="Set the navigateup window.">setNavigateUp</a>(navigateup);
<a name="l05657"></a>05657     this-&gt;<a class="code" href="classMMSWindow.html#446470a75ad31f794c05f11e478c5ccf" title="child window which is to be focused if user navigates up">navigateUpWindow</a> = NULL;
<a name="l05658"></a>05658     <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)&amp;&amp;(navigateup!=<span class="stringliteral">""</span>))
<a name="l05659"></a>05659         this-&gt;<a class="code" href="classMMSWindow.html#446470a75ad31f794c05f11e478c5ccf" title="child window which is to be focused if user navigates up">navigateUpWindow</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912" title="Find a window over its name.">findWindow</a>(navigateup);
<a name="l05660"></a>05660 }
<a name="l05661"></a>05661 
<a name="l05662"></a><a class="code" href="classMMSWindow.html#87feae96efb412630dbd5cb7d5dc02ff">05662</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#87feae96efb412630dbd5cb7d5dc02ff" title="Set the name of the navigatedown window.">MMSWindow::setNavigateDown</a>(<span class="keywordtype">string</span> navigatedown) {
<a name="l05663"></a>05663     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#f2e15602a12930cb96c8add2c733b219" title="Set the navigatedown window.">setNavigateDown</a>(navigatedown);
<a name="l05664"></a>05664     this-&gt;<a class="code" href="classMMSWindow.html#fc9d9ea5d133caae51b933c2979c63a4" title="child window which is to be focused if user navigates down">navigateDownWindow</a> = NULL;
<a name="l05665"></a>05665     <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)&amp;&amp;(navigatedown!=<span class="stringliteral">""</span>))
<a name="l05666"></a>05666         this-&gt;<a class="code" href="classMMSWindow.html#fc9d9ea5d133caae51b933c2979c63a4" title="child window which is to be focused if user navigates down">navigateDownWindow</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912" title="Find a window over its name.">findWindow</a>(navigatedown);
<a name="l05667"></a>05667 }
<a name="l05668"></a>05668 
<a name="l05669"></a><a class="code" href="classMMSWindow.html#5c80c590fa9107b3f1577475e77aea85">05669</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#5c80c590fa9107b3f1577475e77aea85" title="Set the name of the navigateleft window.">MMSWindow::setNavigateLeft</a>(<span class="keywordtype">string</span> navigateleft) {
<a name="l05670"></a>05670     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#88ad0c1e17391725ecffa232c4294998" title="Set the navigateleft window.">setNavigateLeft</a>(navigateleft);
<a name="l05671"></a>05671     this-&gt;<a class="code" href="classMMSWindow.html#8d9b31f8bfc5532fced383e009a81dbc" title="child window which is to be focused if user navigates left">navigateLeftWindow</a> = NULL;
<a name="l05672"></a>05672     <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)&amp;&amp;(navigateleft!=<span class="stringliteral">""</span>))
<a name="l05673"></a>05673         this-&gt;<a class="code" href="classMMSWindow.html#8d9b31f8bfc5532fced383e009a81dbc" title="child window which is to be focused if user navigates left">navigateLeftWindow</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912" title="Find a window over its name.">findWindow</a>(navigateleft);
<a name="l05674"></a>05674 }
<a name="l05675"></a>05675 
<a name="l05676"></a><a class="code" href="classMMSWindow.html#a705b5431ad599e23bbd1cc6cda1edd1">05676</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#a705b5431ad599e23bbd1cc6cda1edd1" title="Set the name of the navigateright window.">MMSWindow::setNavigateRight</a>(<span class="keywordtype">string</span> navigateright) {
<a name="l05677"></a>05677     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#70404554d3c519f42ed027dde316bcad" title="Set the navigateright.">setNavigateRight</a>(navigateright);
<a name="l05678"></a>05678     this-&gt;<a class="code" href="classMMSWindow.html#83e103344725791142f96f1800e461b4" title="child window which is to be focused if user navigates right">navigateRightWindow</a> = NULL;
<a name="l05679"></a>05679     <span class="keywordflow">if</span> ((this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>)&amp;&amp;(navigateright!=<span class="stringliteral">""</span>))
<a name="l05680"></a>05680         this-&gt;<a class="code" href="classMMSWindow.html#83e103344725791142f96f1800e461b4" title="child window which is to be focused if user navigates right">navigateRightWindow</a> = this-&gt;<a class="code" href="classMMSWindow.html#a6fb68c524a741fe7a3052af338ee20c" title="parent window (if window is a child window) or NULL">parent</a>-&gt;<a class="code" href="classMMSWindow.html#e1412106a51c1ba78329e4163f0f3912" title="Find a window over its name.">findWindow</a>(navigateright);
<a name="l05681"></a>05681 }
<a name="l05682"></a>05682 
<a name="l05683"></a><a class="code" href="classMMSWindow.html#f7a2a91f20b6cd0ade6679bb223f018a">05683</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#f7a2a91f20b6cd0ade6679bb223f018a" title="Should the window working with an own surface?">MMSWindow::setOwnSurface</a>(<span class="keywordtype">bool</span> ownsurface) {
<a name="l05684"></a>05684     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#37512a7f29b213f94a9bd78125bd1afd">setOwnSurface</a>(ownsurface);
<a name="l05685"></a>05685 }
<a name="l05686"></a>05686 
<a name="l05687"></a><a class="code" href="classMMSWindow.html#f6ee64fa4bf53a7d6e4c6cea670c231f">05687</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#f6ee64fa4bf53a7d6e4c6cea670c231f" title="Set the move-in direction of the window which is used during the show action.">MMSWindow::setMoveIn</a>(<a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f">MMSDIRECTION</a> movein) {
<a name="l05688"></a>05688     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#de9fdd0563ebb5784d3499ab96e04e2a">setMoveIn</a>(movein);
<a name="l05689"></a>05689 }
<a name="l05690"></a>05690 
<a name="l05691"></a><a class="code" href="classMMSWindow.html#a87404d06f7f9551520a5ef8f9457d43">05691</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#a87404d06f7f9551520a5ef8f9457d43" title="Set the move-out direction of the window which is used during the hide action.">MMSWindow::setMoveOut</a>(<a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f">MMSDIRECTION</a> moveout) {
<a name="l05692"></a>05692     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#8c5407001955e4956415299e283b16c7">setMoveOut</a>(moveout);
<a name="l05693"></a>05693 }
<a name="l05694"></a>05694 
<a name="l05695"></a><a class="code" href="classMMSWindow.html#2c044ed9ed034bfd58a88fa1c9e99b48">05695</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#2c044ed9ed034bfd58a88fa1c9e99b48" title="Set the modal status of the window.">MMSWindow::setModal</a>(<span class="keywordtype">bool</span> modal) {
<a name="l05696"></a>05696     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#2dae6bb03ee5070824429b9ba7c79118">setModal</a>(modal);
<a name="l05697"></a>05697 }
<a name="l05698"></a>05698 
<a name="l05699"></a><a class="code" href="classMMSWindow.html#04dd08716328e1e831277816136b9fe2">05699</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#04dd08716328e1e831277816136b9fe2" title="Set the zorder status of the window.">MMSWindow::setStaticZOrder</a>(<span class="keywordtype">bool</span> staticzorder) {
<a name="l05700"></a>05700     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#11c98d54021d6c59757967ec1e25db8a">setStaticZOrder</a>(staticzorder);
<a name="l05701"></a>05701 }
<a name="l05702"></a>05702 
<a name="l05703"></a><a class="code" href="classMMSWindow.html#ca671fa924fe4899d3b3b347e5a5a8aa">05703</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#ca671fa924fe4899d3b3b347e5a5a8aa" title="Set the always on top flag of the window.">MMSWindow::setAlwaysOnTop</a>(<span class="keywordtype">bool</span> alwaysontop) {
<a name="l05704"></a>05704     <span class="comment">// get current status</span>
<a name="l05705"></a>05705     <span class="keywordtype">bool</span> aot = <span class="keyword">false</span>;
<a name="l05706"></a>05706     this-&gt;<a class="code" href="classMMSWindow.html#aae984f71f967f92da6f33e1d8a468d4" title="Detect if the window will be permanently displayed at the top of the window stack...">getAlwaysOnTop</a>(aot);
<a name="l05707"></a>05707 
<a name="l05708"></a>05708     <span class="comment">// status change?</span>
<a name="l05709"></a>05709     <span class="keywordflow">if</span> (aot == alwaysontop)
<a name="l05710"></a>05710         <span class="keywordflow">return</span>;
<a name="l05711"></a>05711 
<a name="l05712"></a>05712     <span class="comment">// set value</span>
<a name="l05713"></a>05713     <a class="code" href="classMMSWindow.html#ffe685ead1d54d0c2fbbee97dce6bf86" title="Internal method: Lock the window. Will be used by the widgets.">lock</a>();
<a name="l05714"></a>05714     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#1b974e9412ed5fe98081b28b739717b3">setAlwaysOnTop</a>(alwaysontop);
<a name="l05715"></a>05715 
<a name="l05716"></a>05716     <span class="comment">// raise the window to the top of "normal" or "always on top" area in the childwins list</span>
<a name="l05717"></a>05717     <a class="code" href="mmsfb_8cpp.html#0a52413067b838c7e79ca4207f834d95">PRINT_LOCK</a>(<span class="stringliteral">"call raiseToTop"</span>);
<a name="l05718"></a>05718     <a class="code" href="classMMSWindow.html#3fa6c954489b646f748329f76bd342e2">raiseToTop</a>();
<a name="l05719"></a>05719 
<a name="l05720"></a>05720     <a class="code" href="classMMSWindow.html#f5e71bf323a9b17694b41c554677c5f3" title="Internal method: Unlock the window. Will be used by the widgets.">unlock</a>();
<a name="l05721"></a>05721 }
<a name="l05722"></a>05722 
<a name="l05723"></a><a class="code" href="classMMSWindow.html#43f8216f71f377f15c8b017a6f94f290">05723</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#43f8216f71f377f15c8b017a6f94f290" title="Set the focusable flag of the window.">MMSWindow::setFocusable</a>(<span class="keywordtype">bool</span> focusable) {
<a name="l05724"></a>05724     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#56eea0467bd7f7531250c7e462215c26">setFocusable</a>(focusable);
<a name="l05725"></a>05725 }
<a name="l05726"></a>05726 
<a name="l05727"></a><a class="code" href="classMMSWindow.html#afc9b050ad2f4785349aa0117f257fb4">05727</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#afc9b050ad2f4785349aa0117f257fb4" title="Set the backbuffer flag of the window.">MMSWindow::setBackBuffer</a>(<span class="keywordtype">bool</span> backbuffer) {
<a name="l05728"></a>05728     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#4f8e96db7f9c86962445acbc2c56256d">setBackBuffer</a>(backbuffer);
<a name="l05729"></a>05729 }
<a name="l05730"></a>05730 
<a name="l05731"></a><a class="code" href="classMMSWindow.html#978192de58b306475c434111353735fb">05731</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#978192de58b306475c434111353735fb" title="Set the initial load flag of the window.">MMSWindow::setInitialLoad</a>(<span class="keywordtype">bool</span> initialload) {
<a name="l05732"></a>05732     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#055db65800b02f8910cb8cd7ccf0ccec">setInitialLoad</a>(initialload);
<a name="l05733"></a>05733 }
<a name="l05734"></a>05734 
<a name="l05735"></a><a class="code" href="classMMSWindow.html#eeebcf38d627eb52ca4d74f6f6102185">05735</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#eeebcf38d627eb52ca4d74f6f6102185" title="Set the color of the window border.">MMSWindow::setBorderColor</a>(<a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a> color, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05736"></a>05736     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#703f18aab0012a8e8839f3076497eb6c">setColor</a>(color);
<a name="l05737"></a>05737     <span class="keywordflow">if</span> (refresh)
<a name="l05738"></a>05738         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05739"></a>05739 }
<a name="l05740"></a>05740 
<a name="l05741"></a><a class="code" href="classMMSWindow.html#62fed670aae0aadc99c793408d77ddb6">05741</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#62fed670aae0aadc99c793408d77ddb6" title="Set the path to the window border images.">MMSWindow::setBorderImagePath</a>(<span class="keywordtype">string</span> imagepath, <span class="keywordtype">bool</span> load, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05742"></a>05742     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#bfd3ea4cc5c158c45e23fbf7f6698aa0">setImagePath</a>(imagepath);
<a name="l05743"></a>05743     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a>) {
<a name="l05744"></a>05744         <span class="keywordflow">if</span> (load) {
<a name="l05745"></a>05745             <span class="keywordtype">string</span> path, <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>;
<a name="l05746"></a>05746             <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#73045a650d5c78466206e3b159f2d8dd" title="Get the path to the window border images.">getBorderImagePath</a>(path)) path = <span class="stringliteral">""</span>;
<a name="l05747"></a>05747             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="mmsborderclass_8h.html#e5ee0e929c7ede8483739e98dff1efc9" title="8 possible border images">MMSBORDER_IMAGE_NUM_SIZE</a>;i++) {
<a name="l05748"></a>05748                 <a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#c4645fc54381ead21da4428b56fa6152">releaseImage</a>(this-&gt;<a class="code" href="classMMSWindow.html#93487be366c499483d76e249be9de23a" title="border images">borderimages</a>[i]);
<a name="l05749"></a>05749                 <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#eca4461fd3efe6252eaa0255bf612ff6" title="Get the name of a border image.">getBorderImageNames</a>((<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2d" title="describes the 8 possible border images">MMSBORDER_IMAGE_NUM</a>)i, name)) name = <span class="stringliteral">""</span>;
<a name="l05750"></a>05750                 this-&gt;<a class="code" href="classMMSWindow.html#93487be366c499483d76e249be9de23a" title="border images">borderimages</a>[i] = <a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#4d2f832f28b7a5028fadbdc6522035a8">getImage</a>(path, name);
<a name="l05751"></a>05751             }
<a name="l05752"></a>05752         }
<a name="l05753"></a>05753         <span class="keywordflow">if</span> (refresh)
<a name="l05754"></a>05754             this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05755"></a>05755     }
<a name="l05756"></a>05756 }
<a name="l05757"></a>05757 
<a name="l05758"></a><a class="code" href="classMMSWindow.html#c7e90b3760a1f424a99d546cd43fe148">05758</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#c7e90b3760a1f424a99d546cd43fe148" title="Set the names of the window border images.">MMSWindow::setBorderImageNames</a>(<span class="keywordtype">string</span> imagename_1, <span class="keywordtype">string</span> imagename_2, <span class="keywordtype">string</span> imagename_3, <span class="keywordtype">string</span> imagename_4,
<a name="l05759"></a>05759                                     <span class="keywordtype">string</span> imagename_5, <span class="keywordtype">string</span> imagename_6, <span class="keywordtype">string</span> imagename_7, <span class="keywordtype">string</span> imagename_8,
<a name="l05760"></a>05760                                     <span class="keywordtype">bool</span> load, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05761"></a>05761     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#5792eaf26d35c07acb352d7545c87251">setImageNames</a>(imagename_1, imagename_2, imagename_3, imagename_4,
<a name="l05762"></a>05762                                        imagename_5, imagename_6, imagename_7, imagename_8);
<a name="l05763"></a>05763     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSWindow.html#45de41aa57e663a0d8ef03c8e504d475" title="is window initialized?">initialized</a>) {
<a name="l05764"></a>05764         <span class="keywordflow">if</span> (load) {
<a name="l05765"></a>05765             <span class="keywordtype">string</span> path, <a class="code" href="classMMSWindow.html#1d0ebd69e4efbfac37e8f91c6746aee6" title="name of the window">name</a>;
<a name="l05766"></a>05766             <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#73045a650d5c78466206e3b159f2d8dd" title="Get the path to the window border images.">getBorderImagePath</a>(path)) path = <span class="stringliteral">""</span>;
<a name="l05767"></a>05767             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="mmsborderclass_8h.html#e5ee0e929c7ede8483739e98dff1efc9" title="8 possible border images">MMSBORDER_IMAGE_NUM_SIZE</a>;i++) {
<a name="l05768"></a>05768                 <a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#c4645fc54381ead21da4428b56fa6152">releaseImage</a>(this-&gt;<a class="code" href="classMMSWindow.html#93487be366c499483d76e249be9de23a" title="border images">borderimages</a>[i]);
<a name="l05769"></a>05769                 <span class="keywordflow">if</span> (!<a class="code" href="classMMSWindow.html#eca4461fd3efe6252eaa0255bf612ff6" title="Get the name of a border image.">getBorderImageNames</a>((<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2d" title="describes the 8 possible border images">MMSBORDER_IMAGE_NUM</a>)i, name)) name = <span class="stringliteral">""</span>;
<a name="l05770"></a>05770                 this-&gt;<a class="code" href="classMMSWindow.html#93487be366c499483d76e249be9de23a" title="border images">borderimages</a>[i] = <a class="code" href="classMMSWindow.html#990f7f4301b3cbb6145dfb98b4100d41" title="image manager for the window">im</a>-&gt;<a class="code" href="classMMSImageManager.html#4d2f832f28b7a5028fadbdc6522035a8">getImage</a>(path, name);
<a name="l05771"></a>05771             }
<a name="l05772"></a>05772         }
<a name="l05773"></a>05773         <span class="keywordflow">if</span> (refresh)
<a name="l05774"></a>05774             this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05775"></a>05775     }
<a name="l05776"></a>05776 }
<a name="l05777"></a>05777 
<a name="l05778"></a><a class="code" href="classMMSWindow.html#7909851543f824b0e62cc64da24c00f1">05778</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#7909851543f824b0e62cc64da24c00f1" title="Set the border thickness.">MMSWindow::setBorderThickness</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> thickness, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05779"></a>05779     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#9b1a54f50181f4f64c8c06e88bbc13ba">setThickness</a>(thickness);
<a name="l05780"></a>05780     <span class="keywordflow">if</span> (resize)
<a name="l05781"></a>05781         this-&gt;<a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05782"></a>05782     <span class="keywordflow">if</span> (refresh)
<a name="l05783"></a>05783         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05784"></a>05784 }
<a name="l05785"></a>05785 
<a name="l05786"></a><a class="code" href="classMMSWindow.html#26bc96b7c10133b462c0fab74c51086d">05786</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#26bc96b7c10133b462c0fab74c51086d" title="Set the border margin.">MMSWindow::setBorderMargin</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> margin, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>) {
<a name="l05787"></a>05787     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#62be3db7c76ad2d0445eab930d9a0b41">setMargin</a>(margin);
<a name="l05788"></a>05788     <span class="keywordflow">if</span> (resize)
<a name="l05789"></a>05789         this-&gt;<a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05790"></a>05790     <span class="keywordflow">if</span> (refresh)
<a name="l05791"></a>05791         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05792"></a>05792 }
<a name="l05793"></a>05793 
<a name="l05794"></a><a class="code" href="classMMSWindow.html#c814dddcf74c962ef7b6d4b6c09560b6">05794</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#c814dddcf74c962ef7b6d4b6c09560b6" title="Should the window border uses round corners?">MMSWindow::setBorderRCorners</a>(<span class="keywordtype">bool</span> rcorners, <span class="keywordtype">bool</span> <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>) {
<a name="l05795"></a>05795     <a class="code" href="classMMSWindow.html#3267c8b073782f42be68bad12b3e37e6" title="attributes of the window which will be set during the runtime">myWindowClass</a>.<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#1e2e00f7f15c537a41ae5e42c08f03ed">setRCorners</a>(rcorners);
<a name="l05796"></a>05796     <span class="keywordflow">if</span> (refresh)
<a name="l05797"></a>05797         this-&gt;<a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05798"></a>05798 }
<a name="l05799"></a>05799 
<a name="l05800"></a><a class="code" href="classMMSWindow.html#d4e3098e85ebf48fc25f16a183ec90a7">05800</a> <span class="keywordtype">void</span> <a class="code" href="classMMSWindow.html#d4e3098e85ebf48fc25f16a183ec90a7" title="Update the current window settings with settings from another theme class.">MMSWindow::updateFromThemeClass</a>(<a class="code" href="classMMSWindowClass.html">MMSWindowClass</a> *themeClass) {
<a name="l05801"></a>05801 
<a name="l05802"></a>05802     <a class="code" href="mmsthemebase_8h.html#0dff033328de705b251b85ff699606b9" title="alignment type, used e.g. for positioning of windows, text in labels or textboxes...">MMSALIGNMENT</a>    a;
<a name="l05803"></a>05803     <span class="keywordtype">bool</span>            b;
<a name="l05804"></a>05804     <a class="code" href="classMMSFBColor.html" title="describes a color with alpha">MMSFBColor</a>      c;
<a name="l05805"></a>05805     <a class="code" href="mmsthemebase_8h.html#f739361818920e17f1daa43862646a1f">MMSDIRECTION</a>    d;
<a name="l05806"></a>05806     <span class="keywordtype">string</span>          s;
<a name="l05807"></a>05807     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    u;
<a name="l05808"></a>05808 
<a name="l05809"></a>05809     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#4fbe665722db47f4c2027c92efca8399">getAlignment</a>(a))
<a name="l05810"></a>05810         <a class="code" href="classMMSWindow.html#30858e7c11f711a1b9d9707b1f18dc05" title="Set the alignment of the window.">setAlignment</a>(a, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l05811"></a>05811     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#13328912dc633663ed02b11a5de5b5da">getDx</a>(s))
<a name="l05812"></a>05812         <a class="code" href="classMMSWindow.html#93c3c6c71e793dfda90d6afcddd75ff1" title="Set the x-movement of the window.">setDx</a>(s, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l05813"></a>05813     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#1c3e8b48db2351fc1414c2b40cb8eb46">getDy</a>(s))
<a name="l05814"></a>05814         <a class="code" href="classMMSWindow.html#4ae82fe64a75660a80691548e43d633f" title="Set the y-movement of the window.">setDy</a>(s, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l05815"></a>05815     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#c4c796a064cf78320c312c458b5b1c0e">getWidth</a>(s))
<a name="l05816"></a>05816         <a class="code" href="classMMSWindow.html#186768c58ccdd4a1685f6fcec7ca08e7" title="Set the width of the window.">setWidth</a>(s, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l05817"></a>05817     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9a798b42355f0171371345a3ece0c046">getHeight</a>(s))
<a name="l05818"></a>05818         <a class="code" href="classMMSWindow.html#c5e330e38d186786da66ad8bb5fe9eee" title="Set the height of the window.">setHeight</a>(s, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l05819"></a>05819     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#7627b01e6c1d2e38ca31d302f1109651">getBgColor</a>(c))
<a name="l05820"></a>05820         <a class="code" href="classMMSWindow.html#a9bc575a3a137aa1cd2d997401a04bbd" title="Set the background color of the window.">setBgColor</a>(c, <span class="keyword">false</span>);
<a name="l05821"></a>05821     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#2ce82dc1e9a13e4ff8e5f7a0c7113ba0">getBgImagePath</a>(s))
<a name="l05822"></a>05822         <a class="code" href="classMMSWindow.html#bb68bf1b2ded61f8bef190f8673e659a" title="Set the path to the background image of the window.">setBgImagePath</a>(s, <span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l05823"></a>05823     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#b8de9537a57350ee1bf70238cfc46570">getBgImageName</a>(s))
<a name="l05824"></a>05824         <a class="code" href="classMMSWindow.html#259dbd94532cc04171f1b6f3b6c3d7db" title="Set the name of the background image.">setBgImageName</a>(s, <span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l05825"></a>05825     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9febc72eb9d9e75811c0a33bc7901f8d">getOpacity</a>(u))
<a name="l05826"></a>05826         <a class="code" href="classMMSWindow.html#f96843c86a48934ee3c9ee209b757875" title="Set the opacity of the window.">setOpacity</a>(u, <span class="keyword">false</span>);
<a name="l05827"></a>05827     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#71b0af4702d98496324140b630cd7f6f">getFadeIn</a>(b))
<a name="l05828"></a>05828         <a class="code" href="classMMSWindow.html#9fd22da896a032b07bdfca29f7204389" title="Set the fadein status needed during the show action.">setFadeIn</a>(b);
<a name="l05829"></a>05829     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#f06a7b0a9c07ec026dc4c800584052ae">getFadeOut</a>(b))
<a name="l05830"></a>05830         <a class="code" href="classMMSWindow.html#73eb33ed53e272561b791435f4620a8e" title="Set the fadeout status needed during the hide action.">setFadeOut</a>(b);
<a name="l05831"></a>05831     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#61b7579037885a9030f7223b21e28945">getDebug</a>(b))
<a name="l05832"></a>05832         <a class="code" href="classMMSWindow.html#85dc9c554bceced83a8d7132f96c0fa4" title="Should the window draw debug rectangles around its widgets?">setDebug</a>(b, <span class="keyword">false</span>);
<a name="l05833"></a>05833     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#8243b55d9e7ee6aba81cffad64f4f006">getMargin</a>(u))
<a name="l05834"></a>05834         <a class="code" href="classMMSWindow.html#ee6da813ff662012a8ffb382ef26d973" title="Set the margin of the window.">setMargin</a>(u, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l05835"></a>05835     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#43665b9a95d7e81c01db51833249f788" title="Get the uparrow.">getUpArrow</a>(s))
<a name="l05836"></a>05836         <a class="code" href="classMMSWindow.html#de5407b4aa19cf1bae11e08821d63a92" title="Set the name of the uparrow widget.">setUpArrow</a>(s, <span class="keyword">false</span>);
<a name="l05837"></a>05837     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#b75a193dee91a4233c7682d882de45c1" title="Get the downarrow.">getDownArrow</a>(s))
<a name="l05838"></a>05838         <a class="code" href="classMMSWindow.html#d8bef5c3470404d99590303ebcf5f6c0" title="Set the name of the downarrow widget.">setDownArrow</a>(s, <span class="keyword">false</span>);
<a name="l05839"></a>05839     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#cdfa5a7df18a5b0cb466f089028d2a2a" title="Get the leftarrow.">getLeftArrow</a>(s))
<a name="l05840"></a>05840         <a class="code" href="classMMSWindow.html#d2a905f313867cef493a3dd89d943074" title="Set the name of the leftarrow widget.">setLeftArrow</a>(s, <span class="keyword">false</span>);
<a name="l05841"></a>05841     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9d42415ecb2a4661a79cf0e52180ad2b" title="Get the rightarrow.">getRightArrow</a>(s))
<a name="l05842"></a>05842         <a class="code" href="classMMSWindow.html#7435d67df280cb73e6d8af0122d3557f" title="Set the name of the rightarrow widget.">setRightArrow</a>(s, <span class="keyword">false</span>);
<a name="l05843"></a>05843     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#860bb03b421c1dc0f2580aea0faf31be" title="Get the navigateup window.">getNavigateUp</a>(s))
<a name="l05844"></a>05844         <a class="code" href="classMMSWindow.html#76380b9247d7858239aed5da476689af" title="Set the name of the navigateup window.">setNavigateUp</a>(s);
<a name="l05845"></a>05845     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#f005ae1a49b7ac5f9daf5cee2e493f55" title="Get the navigatedown window.">getNavigateDown</a>(s))
<a name="l05846"></a>05846         <a class="code" href="classMMSWindow.html#87feae96efb412630dbd5cb7d5dc02ff" title="Set the name of the navigatedown window.">setNavigateDown</a>(s);
<a name="l05847"></a>05847     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#248cf12bf7037557897ba91cc10906ab" title="Get the navigateleft window.">getNavigateLeft</a>(s))
<a name="l05848"></a>05848         <a class="code" href="classMMSWindow.html#5c80c590fa9107b3f1577475e77aea85" title="Set the name of the navigateleft window.">setNavigateLeft</a>(s);
<a name="l05849"></a>05849     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#3585cf0d339b89fc15e4857028c8614d" title="Get the navigateright window.">getNavigateRight</a>(s))
<a name="l05850"></a>05850         <a class="code" href="classMMSWindow.html#a705b5431ad599e23bbd1cc6cda1edd1" title="Set the name of the navigateright window.">setNavigateRight</a>(s);
<a name="l05851"></a>05851     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#e98f47c3d033893d754421614194c746">getOwnSurface</a>(b))
<a name="l05852"></a>05852         <a class="code" href="classMMSWindow.html#f7a2a91f20b6cd0ade6679bb223f018a" title="Should the window working with an own surface?">setOwnSurface</a>(b);
<a name="l05853"></a>05853     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#4f354f6b19d348e7e039aa3b3b782fc5">getMoveIn</a>(d))
<a name="l05854"></a>05854         <a class="code" href="classMMSWindow.html#f6ee64fa4bf53a7d6e4c6cea670c231f" title="Set the move-in direction of the window which is used during the show action.">setMoveIn</a>(d);
<a name="l05855"></a>05855     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#d345ebca409dce9aa7e47cf4dc988ccc">getMoveOut</a>(d))
<a name="l05856"></a>05856         <a class="code" href="classMMSWindow.html#a87404d06f7f9551520a5ef8f9457d43" title="Set the move-out direction of the window which is used during the hide action.">setMoveOut</a>(d);
<a name="l05857"></a>05857     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#f9eb5707883b737bd2b6318f0e09bde5">getModal</a>(b))
<a name="l05858"></a>05858         <a class="code" href="classMMSWindow.html#2c044ed9ed034bfd58a88fa1c9e99b48" title="Set the modal status of the window.">setModal</a>(b);
<a name="l05859"></a>05859     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#f5c58a21be2d66f9e4ee2ed27cc53a1b">getStaticZOrder</a>(b))
<a name="l05860"></a>05860         <a class="code" href="classMMSWindow.html#04dd08716328e1e831277816136b9fe2" title="Set the zorder status of the window.">setStaticZOrder</a>(b);
<a name="l05861"></a>05861     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#aa5e28e7acf5d16ad88eb146b5eb9929">getAlwaysOnTop</a>(b))
<a name="l05862"></a>05862         <a class="code" href="classMMSWindow.html#ca671fa924fe4899d3b3b347e5a5a8aa" title="Set the always on top flag of the window.">setAlwaysOnTop</a>(b);
<a name="l05863"></a>05863     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#cd3330c0f2cfa96b8181cefc8b3b61e3">getFocusable</a>(b))
<a name="l05864"></a>05864         <a class="code" href="classMMSWindow.html#43f8216f71f377f15c8b017a6f94f290" title="Set the focusable flag of the window.">setFocusable</a>(b);
<a name="l05865"></a>05865     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#5179c5cd584131c2ac07f1f487e4b12d">getBackBuffer</a>(b))
<a name="l05866"></a>05866         <a class="code" href="classMMSWindow.html#afc9b050ad2f4785349aa0117f257fb4" title="Set the backbuffer flag of the window.">setBackBuffer</a>(b);
<a name="l05867"></a>05867     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#a6ecbed3655a77c79e1f996b0e8931da">getInitialLoad</a>(b))
<a name="l05868"></a>05868         <a class="code" href="classMMSWindow.html#978192de58b306475c434111353735fb" title="Set the initial load flag of the window.">setInitialLoad</a>(b);
<a name="l05869"></a>05869     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#4be457c694553a6a6baa473a88881026">getColor</a>(c))
<a name="l05870"></a>05870         <a class="code" href="classMMSWindow.html#eeebcf38d627eb52ca4d74f6f6102185" title="Set the color of the window border.">setBorderColor</a>(c, <span class="keyword">false</span>);
<a name="l05871"></a>05871     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#9b27f55d1f5f1ca902c3045143f5d072">getImagePath</a>(s))
<a name="l05872"></a>05872         <a class="code" href="classMMSWindow.html#62fed670aae0aadc99c793408d77ddb6" title="Set the path to the window border images.">setBorderImagePath</a>(s, <span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l05873"></a>05873     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#fe036cfb1cedc6a48d6510d5d882eb25">isImageNames</a>()) {
<a name="l05874"></a>05874         <span class="keywordtype">string</span> s[8];
<a name="l05875"></a>05875         themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#ac3512a875f5f61f238f23643d5374b6">getImageNames</a>(<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2dbd2c6ba23e63e1b54bc788c669d04dc1">MMSBORDER_IMAGE_NUM_TOP_LEFT</a>, s[0]);
<a name="l05876"></a>05876         themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#ac3512a875f5f61f238f23643d5374b6">getImageNames</a>(<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2dfd9b38c7e5ba474ea45cf60a56e29f5c">MMSBORDER_IMAGE_NUM_TOP</a>, s[1]);
<a name="l05877"></a>05877         themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#ac3512a875f5f61f238f23643d5374b6">getImageNames</a>(<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2d392715766b2bbd006e69979522db99d4">MMSBORDER_IMAGE_NUM_TOP_RIGHT</a>, s[2]);
<a name="l05878"></a>05878         themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#ac3512a875f5f61f238f23643d5374b6">getImageNames</a>(<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2dea0318ebc9bf90d063bf35ae74f8171f">MMSBORDER_IMAGE_NUM_RIGHT</a>, s[3]);
<a name="l05879"></a>05879         themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#ac3512a875f5f61f238f23643d5374b6">getImageNames</a>(<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2d17f929a85d4d8048ff1a601a4d738387">MMSBORDER_IMAGE_NUM_BOTTOM_RIGHT</a>, s[4]);
<a name="l05880"></a>05880         themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#ac3512a875f5f61f238f23643d5374b6">getImageNames</a>(<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2d6811732915f1b5b80304af7bc3252047">MMSBORDER_IMAGE_NUM_BOTTOM</a>, s[5]);
<a name="l05881"></a>05881         themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#ac3512a875f5f61f238f23643d5374b6">getImageNames</a>(<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2d4acd0eabe20752e6cdb0999418268011">MMSBORDER_IMAGE_NUM_BOTTOM_LEFT</a>, s[6]);
<a name="l05882"></a>05882         themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#ac3512a875f5f61f238f23643d5374b6">getImageNames</a>(<a class="code" href="mmsborderclass_8h.html#7623d26fe6f6a11164090b3feca80e2d97e823fe086abafb38bb2ffaee3dfff4">MMSBORDER_IMAGE_NUM_LEFT</a>, s[7]);
<a name="l05883"></a>05883         <a class="code" href="classMMSWindow.html#c7e90b3760a1f424a99d546cd43fe148" title="Set the names of the window border images.">setBorderImageNames</a>(s[0], s[1], s[2], s[3], s[4], s[5], s[6], s[7], <span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l05884"></a>05884     }
<a name="l05885"></a>05885     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#675ece9afb85674d7efcf157034dfe9f">getThickness</a>(u))
<a name="l05886"></a>05886         <a class="code" href="classMMSWindow.html#7909851543f824b0e62cc64da24c00f1" title="Set the border thickness.">setBorderThickness</a>(u, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l05887"></a>05887     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#74d9c89bd149364e38df1b660deb5c25">getMargin</a>(u))
<a name="l05888"></a>05888         <a class="code" href="classMMSWindow.html#26bc96b7c10133b462c0fab74c51086d" title="Set the border margin.">setBorderMargin</a>(u, <span class="keyword">false</span>, <span class="keyword">false</span>);
<a name="l05889"></a>05889     <span class="keywordflow">if</span> (themeClass-&gt;<a class="code" href="classMMSWindowClass.html#9819adebd82be90f51811447b760f718">border</a>.<a class="code" href="classMMSBorderClass.html#d65b26860b0790cee1b88e657779de06">getRCorners</a>(b))
<a name="l05890"></a>05890         <a class="code" href="classMMSWindow.html#c814dddcf74c962ef7b6d4b6c09560b6" title="Should the window border uses round corners?">setBorderRCorners</a>(b, <span class="keyword">false</span>);
<a name="l05891"></a>05891 
<a name="l05892"></a>05892     <span class="comment">/* resize window and refresh */</span>
<a name="l05893"></a>05893     <a class="code" href="classMMSWindow.html#8f5c666be62968a56d4c729d66badb46" title="Internal method: Resize the window.">resize</a>();
<a name="l05894"></a>05894     <a class="code" href="classMMSWindow.html#2960b838882bf6ce01a8f7748fb3fb78" title="Refresh (redraw) the whole window or a part of it.">refresh</a>();
<a name="l05895"></a>05895 }
<a name="l05896"></a>05896 
<a name="l05897"></a>05897 <span class="comment">/***********************************************/</span>
<a name="l05898"></a>05898 <span class="comment">/* end of theme access methods                 */</span>
<a name="l05899"></a>05899 <span class="comment">/***********************************************/</span>
</pre></div></div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1675780-3");
pageTracker._trackPageview();
</script>

<hr class="footer"/><address class="footer" style="text-align:right;"><small>Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a></small></address>
</body>
</html>
