<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Disko API Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);' >
<div id="top">
<div id="titlearea" style="background:#262929;">
  <div id="projectlogo">
    <img alt="Logo" src="./disko-logo.png" style="float:left;"/>
    <br clear="all"/>
  </div>
</div>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
<h1>mmsav.cpp</h1><a href="mmsav_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> *   Copyright (C) 2005-2007 Stefan Schwarzer, Jens Schneider,             *</span>
<a name="l00003"></a>00003 <span class="comment"> *                           Matthias Hardt, Guido Madaus                  *</span>
<a name="l00004"></a>00004 <span class="comment"> *                                                                         *</span>
<a name="l00005"></a>00005 <span class="comment"> *   Copyright (C) 2007-2008 BerLinux Solutions GbR                        *</span>
<a name="l00006"></a>00006 <span class="comment"> *                           Stefan Schwarzer &amp; Guido Madaus               *</span>
<a name="l00007"></a>00007 <span class="comment"> *                                                                         *</span>
<a name="l00008"></a>00008 <span class="comment"> *   Copyright (C) 2009-2013 BerLinux Solutions GmbH                       *</span>
<a name="l00009"></a>00009 <span class="comment"> *                                                                         *</span>
<a name="l00010"></a>00010 <span class="comment"> *   Authors:                                                              *</span>
<a name="l00011"></a>00011 <span class="comment"> *      Stefan Schwarzer   &lt;stefan.schwarzer@diskohq.org&gt;,                 *</span>
<a name="l00012"></a>00012 <span class="comment"> *      Matthias Hardt     &lt;matthias.hardt@diskohq.org&gt;,                   *</span>
<a name="l00013"></a>00013 <span class="comment"> *      Jens Schneider     &lt;jens.schneider@diskohq.org&gt;,                   *</span>
<a name="l00014"></a>00014 <span class="comment"> *      Guido Madaus       &lt;guido.madaus@diskohq.org&gt;,                     *</span>
<a name="l00015"></a>00015 <span class="comment"> *      Patrick Helterhoff &lt;patrick.helterhoff@diskohq.org&gt;,               *</span>
<a name="l00016"></a>00016 <span class="comment"> *      René Bählkow       &lt;rene.baehlkow@diskohq.org&gt;                     *</span>
<a name="l00017"></a>00017 <span class="comment"> *                                                                         *</span>
<a name="l00018"></a>00018 <span class="comment"> *   This library is free software; you can redistribute it and/or         *</span>
<a name="l00019"></a>00019 <span class="comment"> *   modify it under the terms of the GNU Lesser General Public            *</span>
<a name="l00020"></a>00020 <span class="comment"> *   License version 2.1 as published by the Free Software Foundation.     *</span>
<a name="l00021"></a>00021 <span class="comment"> *                                                                         *</span>
<a name="l00022"></a>00022 <span class="comment"> *   This library is distributed in the hope that it will be useful,       *</span>
<a name="l00023"></a>00023 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
<a name="l00024"></a>00024 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU     *</span>
<a name="l00025"></a>00025 <span class="comment"> *   Lesser General Public License for more details.                       *</span>
<a name="l00026"></a>00026 <span class="comment"> *                                                                         *</span>
<a name="l00027"></a>00027 <span class="comment"> *   You should have received a copy of the GNU Lesser General Public      *</span>
<a name="l00028"></a>00028 <span class="comment"> *   License along with this library; if not, write to the                 *</span>
<a name="l00029"></a>00029 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
<a name="l00030"></a>00030 <span class="comment"> *   51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA            *</span>
<a name="l00031"></a>00031 <span class="comment"> **************************************************************************/</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="mmsav_8h.html">mmsmedia/mmsav.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#ifdef __HAVE_DIRECTFB__</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#include &lt;directfb_version.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#endif</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#include "<a class="code" href="mmsgst_8h.html">mmsmedia/mmsgst.h</a>"</span>
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <a class="code" href="mmserror_8h.html#02305d35408e1ff3dbe4474a222c6a94" title="Macro which defines a new error type.">MMS_CREATEERROR</a>(MMSAVError);
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a><a class="code" href="mmsav_8cpp.html#9ac7c0412dd1ba277980d3f77a2c11d8">00048</a> <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="mmsav_8cpp.html#9ac7c0412dd1ba277980d3f77a2c11d8">gstPlayRoutine</a>(<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html">GST_DISKOVIDEOSINK_DATA</a> *gst_diskovideosink_data) {
<a name="l00049"></a>00049 
<a name="l00050"></a>00050     printf(<span class="stringliteral">"uri %s\n"</span>, gst_diskovideosink_data-&gt;<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#4ee8bc7176312f3b0e3386f7a947606e" title="uri which is to play">uri</a>.c_str());
<a name="l00051"></a>00051 
<a name="l00052"></a>00052     <span class="keywordflow">if</span> (gst_diskovideosink_data-&gt;<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a>) {
<a name="l00053"></a>00053         <span class="comment">// playing gstreamer pipe</span>
<a name="l00054"></a>00054         <a class="code" href="mmsgst_8h.html#1f4fb4048f501ad54085604658e05ec6" title="start playback of a pipeline">mmsGstPlay</a>(gst_diskovideosink_data-&gt;<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a>);
<a name="l00055"></a>00055     }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057     <span class="keywordflow">return</span> NULL;
<a name="l00058"></a>00058 }
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="preprocessor">#endif</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00067"></a>00067 <span class="preprocessor">#ifdef __HAVE_DIRECTFB__</span>
<a name="l00068"></a><a class="code" href="mmsav_8cpp.html#29b9b7b7795ff47ef784f7ca98c23769">00068</a> <span class="preprocessor"></span>DFBResult <a class="code" href="mmsav_8cpp.html#29b9b7b7795ff47ef784f7ca98c23769">dfbres</a>;
<a name="l00069"></a><a class="code" href="mmsav_8cpp.html#292acb8b48ea711115d21237e493bd7a">00069</a> <span class="preprocessor">#define THROW_DFB_ERROR(dfbres,msg) {if (dfbres) { string s1 = msg; string s2 = DirectFBErrorString((DFBResult)dfbres); throw MMSAVError(dfbres,s1 + " [" + s2 + "]"); }else{ throw MMSAVError(0,msg); }}</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00072"></a>00072 <span class="comment">/**</span>
<a name="l00073"></a>00073 <span class="comment"> * Callback, that will be called before a frame is drawn.</span>
<a name="l00074"></a>00074 <span class="comment"> *</span>
<a name="l00075"></a>00075 <span class="comment"> * It checks if the ratio has changed and sets some variables if so.</span>
<a name="l00076"></a>00076 <span class="comment"> *</span>
<a name="l00077"></a>00077 <span class="comment"> * @param   cdata       [in/out]    pointer to VODESC structure</span>
<a name="l00078"></a>00078 <span class="comment"> * @param   width       [in]        width of dvd stream</span>
<a name="l00079"></a>00079 <span class="comment"> * @param   height      [in]        height of dvd stream</span>
<a name="l00080"></a>00080 <span class="comment"> * @param   ratio       [in]        ratio of dvd stream</span>
<a name="l00081"></a>00081 <span class="comment"> * @param   format      [in]        pixel format of dvd stream</span>
<a name="l00082"></a>00082 <span class="comment"> * @param   dest_rect   [out]       the current rectangle will be returned</span>
<a name="l00083"></a>00083 <span class="comment"> */</span>
<a name="l00084"></a>00084 <span class="preprocessor">#ifdef __HAVE_DIRECTFB__</span>
<a name="l00085"></a><a class="code" href="mmsav_8cpp.html#f83eb0e6551f60782f690cdb78b90da5">00085</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mmsav_8cpp.html#f83eb0e6551f60782f690cdb78b90da5" title="Callback, that will be called before a frame is drawn.">dfb_output_cb</a>(<span class="keywordtype">void</span> *cdata, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keywordtype">double</span> ratio,
<a name="l00086"></a>00086                           DFBSurfacePixelFormat format, DFBRectangle* dest_rect) {
<a name="l00087"></a>00087     <a class="code" href="structVODESC.html" title="Video output description structure.">VODESC</a> *vodesc = (<a class="code" href="structVODESC.html" title="Video output description structure.">VODESC</a> *) cdata;
<a name="l00088"></a>00088     <span class="keywordtype">int</span>    newH, newW;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <span class="comment">//DEBUGOUT("\noutput_cb %d:%d:%f:%d:%d",width,height,ratio,vodesc-&gt;windsc.width,vodesc-&gt;windsc.height);</span>
<a name="l00091"></a>00091     <span class="keywordflow">if</span> (vodesc-&gt;<a class="code" href="structVODESC.html#b03faf288dc274be097a86a70590d38c" title="ratio of video stream">ratio</a> != ratio) {
<a name="l00092"></a>00092         newW = (int)((<span class="keywordtype">double</span>)(vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.height) * ratio + 0.5);
<a name="l00093"></a>00093         newH = (int)((<span class="keywordtype">double</span>)(vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.width) / ratio + 0.5);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095         <span class="comment">/* ratio has changed */</span>
<a name="l00096"></a>00096         <span class="keywordflow">if</span> (ratio&lt;1.0) {
<a name="l00097"></a>00097             <span class="keywordflow">if</span>(newW &gt; vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.width) {
<a name="l00098"></a>00098                 vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.width;
<a name="l00099"></a>00099                 vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = newH;
<a name="l00100"></a>00100             } <span class="keywordflow">else</span> {
<a name="l00101"></a>00101                 vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = newW;
<a name="l00102"></a>00102                 vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.height;
<a name="l00103"></a>00103             }
<a name="l00104"></a>00104             vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = (vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.width - vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) / 2;
<a name="l00105"></a>00105             vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = 0;
<a name="l00106"></a>00106         } <span class="keywordflow">else</span> {
<a name="l00107"></a>00107             <span class="keywordflow">if</span>(newH &gt; vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.height) {
<a name="l00108"></a>00108                 vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.height;
<a name="l00109"></a>00109                 vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = newW;
<a name="l00110"></a>00110             } <span class="keywordflow">else</span> {
<a name="l00111"></a>00111                 vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.width;
<a name="l00112"></a>00112                 vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = newH;
<a name="l00113"></a>00113             }
<a name="l00114"></a>00114             vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = 0;
<a name="l00115"></a>00115             vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = (vodesc-&gt;<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.height - vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) / 2;
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117 
<a name="l00118"></a>00118         <span class="comment">/* save other infos */</span>
<a name="l00119"></a>00119         vodesc-&gt;<a class="code" href="structVODESC.html#5c2316b6a44add70d387059d20f913c6" title="pixel format of surface">format</a> = format;
<a name="l00120"></a>00120         vodesc-&gt;<a class="code" href="structVODESC.html#b03faf288dc274be097a86a70590d38c" title="ratio of video stream">ratio</a>  = ratio;
<a name="l00121"></a>00121         vodesc-&gt;<a class="code" href="structVODESC.html#22136b2ff5a290acf7d97c08ff67ec14" title="width of video stream">width</a>  = width;
<a name="l00122"></a>00122         vodesc-&gt;<a class="code" href="structVODESC.html#73c83c4e56202abe52e864b5ff2f1801" title="height of video stream">height</a> = height;
<a name="l00123"></a>00123         <span class="comment">/* clear surface */</span>
<a name="l00124"></a>00124         vodesc-&gt;<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>();
<a name="l00125"></a>00125         vodesc-&gt;<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>();
<a name="l00126"></a>00126         vodesc-&gt;<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>();
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 
<a name="l00129"></a>00129     <span class="comment">/* return the current rect */</span>
<a name="l00130"></a>00130     *dest_rect=(DFBRectangle&amp;)vodesc-&gt;<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>;
<a name="l00131"></a>00131     <span class="comment">//DEBUGOUT("\nrect %d:%d:%d:%d",dest_rect-&gt;x,dest_rect-&gt;y,dest_rect-&gt;w,dest_rect-&gt;h);</span>
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 <span class="preprocessor">#endif</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="comment">/*static void printFrameFormat(int frame_format) {</span>
<a name="l00138"></a>00138 <span class="comment">    switch(frame_format) {</span>
<a name="l00139"></a>00139 <span class="comment">        case XINE_VORAW_YV12:</span>
<a name="l00140"></a>00140 <span class="comment">            printf("YV12 frame\n");</span>
<a name="l00141"></a>00141 <span class="comment">            break;</span>
<a name="l00142"></a>00142 <span class="comment">        case XINE_VORAW_YUY2:</span>
<a name="l00143"></a>00143 <span class="comment">            printf("YUY2 frame\n");</span>
<a name="l00144"></a>00144 <span class="comment">            break;</span>
<a name="l00145"></a>00145 <span class="comment">        case XINE_VORAW_RGB:</span>
<a name="l00146"></a>00146 <span class="comment">            printf("RGB frame\n");</span>
<a name="l00147"></a>00147 <span class="comment">            break;</span>
<a name="l00148"></a>00148 <span class="comment">        default:</span>
<a name="l00149"></a>00149 <span class="comment">            printf("unknown frame format\n");</span>
<a name="l00150"></a>00150 <span class="comment">    }</span>
<a name="l00151"></a>00151 <span class="comment">}*/</span>
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 
<a name="l00154"></a><a class="code" href="mmsav_8cpp.html#2fe7b4decbded68a3071d76ad51b1232">00154</a> <span class="keywordtype">void</span> <a class="code" href="mmsav_8cpp.html#2fe7b4decbded68a3071d76ad51b1232">raw_frame_cb</a>(<span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> frame_format, <span class="keywordtype">int</span> frame_width, <span class="keywordtype">int</span> frame_height, <span class="keywordtype">double</span> frame_aspect, <span class="keywordtype">void</span> *data0, <span class="keywordtype">void</span> *data1, <span class="keywordtype">void</span> *data2) {
<a name="l00155"></a>00155     <a class="code" href="structMMSRAW__USERDATA.html">MMSRAW_USERDATA</a> *userd =(<a class="code" href="structMMSRAW__USERDATA.html">MMSRAW_USERDATA</a> *)user_data;
<a name="l00156"></a>00156 <span class="comment">/*  printf("-------\nframe format: ");</span>
<a name="l00157"></a>00157 <span class="comment">    printFrameFormat(frame_format);</span>
<a name="l00158"></a>00158 <span class="comment">    printf("frame_width: %d\n", frame_width);</span>
<a name="l00159"></a>00159 <span class="comment">    printf("frame_height: %d\n", frame_height);</span>
<a name="l00160"></a>00160 <span class="comment">    printf("frame_height: %f\n", frame_aspect);</span>
<a name="l00161"></a>00161 <span class="comment">    printf("plane0: %p\n", data0);</span>
<a name="l00162"></a>00162 <span class="comment">    printf("plane1: %p\n", data1);</span>
<a name="l00163"></a>00163 <span class="comment">    printf("plane2: %p\n", data2);</span>
<a name="l00164"></a>00164 <span class="comment">    printf("-------\n");*/</span>
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <span class="keywordflow">if</span>(!userd) {
<a name="l00167"></a>00167         <span class="comment">//there is no window to draw on!</span>
<a name="l00168"></a>00168         <span class="keywordflow">return</span>;
<a name="l00169"></a>00169     }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     <span class="keywordflow">if</span> (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#0ea81a718de79f04fda44c15e03c455c">lastaspect</a> != frame_aspect) {
<a name="l00172"></a>00172         <span class="comment">// format changed</span>
<a name="l00173"></a>00173         printf(<span class="stringliteral">"format change %f\n"</span>, frame_aspect);
<a name="l00174"></a>00174         <span class="keywordtype">int</span> newW = (int)((<span class="keywordtype">double</span>)(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) * frame_aspect + 0.5);
<a name="l00175"></a>00175         <span class="keywordtype">int</span> newH = (int)((<span class="keywordtype">double</span>)(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) / frame_aspect + 0.5);
<a name="l00176"></a>00176 
<a name="l00177"></a>00177         <span class="comment">/* ratio has changed */</span>
<a name="l00178"></a>00178         <span class="keywordflow">if</span> (frame_aspect&lt;1.0) {
<a name="l00179"></a>00179             <span class="keywordflow">if</span>(newW &gt; userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) {
<a name="l00180"></a>00180                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>;
<a name="l00181"></a>00181                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = newH;
<a name="l00182"></a>00182             } <span class="keywordflow">else</span> {
<a name="l00183"></a>00183                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = newW;
<a name="l00184"></a>00184                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>;
<a name="l00185"></a>00185             }
<a name="l00186"></a>00186 
<a name="l00187"></a>00187             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) / 2;
<a name="l00188"></a>00188             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = 0;
<a name="l00189"></a>00189         } <span class="keywordflow">else</span> {
<a name="l00190"></a>00190             <span class="keywordflow">if</span>(newH &gt; userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) {
<a name="l00191"></a>00191                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>;
<a name="l00192"></a>00192                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = newW;
<a name="l00193"></a>00193             } <span class="keywordflow">else</span> {
<a name="l00194"></a>00194                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>;
<a name="l00195"></a>00195                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = newH;
<a name="l00196"></a>00196             }
<a name="l00197"></a>00197             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) / 2;;
<a name="l00198"></a>00198             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) / 2;
<a name="l00199"></a>00199         }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#0ea81a718de79f04fda44c15e03c455c">lastaspect</a>  = frame_aspect;
<a name="l00202"></a>00202         <span class="comment">/* clear surface */</span>
<a name="l00203"></a>00203         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>();
<a name="l00204"></a>00204         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>(NULL);
<a name="l00205"></a>00205         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>();
<a name="l00206"></a>00206 
<a name="l00207"></a>00207         <span class="comment">// printf("w,h,x,y: %d, %d, %d, %d\n", userd-&gt;dest.w,userd-&gt;dest.h,userd-&gt;dest.x,userd-&gt;dest.y);</span>
<a name="l00208"></a>00208         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>&amp;=~0x01;
<a name="l00209"></a>00209         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>&amp;=~0x01;
<a name="l00210"></a>00210         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>&amp;=~0x01;
<a name="l00211"></a>00211         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>&amp;=~0x01;
<a name="l00212"></a>00212         <span class="comment">// printf("w,h,x,y: %d, %d, %d, %d\n", userd-&gt;dest.w,userd-&gt;dest.h,userd-&gt;dest.x,userd-&gt;dest.y);</span>
<a name="l00213"></a>00213 
<a name="l00214"></a>00214         <span class="comment">// delete iterim surface</span>
<a name="l00215"></a>00215         <span class="keywordflow">if</span> (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>) {
<a name="l00216"></a>00216             <span class="keyword">delete</span> userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>;
<a name="l00217"></a>00217             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a> = NULL;
<a name="l00218"></a>00218         }
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="comment">/*</span><span class="comment"></span>
<a name="l00223"></a>00223 <span class="comment">////// TEST //////////////////////////////////////</span>
<a name="l00224"></a>00224 <span class="comment"></span>static unsigned char rrrrr_buf[2048*768];
<a name="l00225"></a>00225 static int rrrrr=0;
<a name="l00226"></a>00226 if(!rrrrr) {
<a name="l00227"></a>00227     rrrrr=1;
<a name="l00228"></a>00228     for (int i = 0; i &lt; sizeof(rrrrr_buf)/4; i++) {
<a name="l00229"></a>00229         rrrrr_buf[i*4] = 0xff;
<a name="l00230"></a>00230         rrrrr_buf[i*4+1] = 0x00;
<a name="l00231"></a>00231         rrrrr_buf[i*4+2] = 0x00;
<a name="l00232"></a>00232         rrrrr_buf[i*4+3] = 0x00;
<a name="l00233"></a>00233     }
<a name="l00234"></a>00234 }
<a name="l00235"></a>00235 data0 = rrrrr_buf;
<a name="l00236"></a>00236 frame_format = XINE_VORAW_YUY2;<span class="comment"></span>
<a name="l00237"></a>00237 <span class="comment">//////////////////////////////////////////////////</span>
<a name="l00238"></a>00238 <span class="comment"></span>*/
<a name="l00239"></a>00239 
<a name="l00240"></a>00240     <span class="keywordflow">if</span> (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#ae4437e973c3ef9766f5febcbe689ab8">surf_pixelformat</a> == <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bbcb1258114e9fdeb49914840e066124f6" title="12 bit YUV (8 bit Y plane followed by 8 bit quarter size V/U planes)">MMSFB_PF_YV12</a>) {
<a name="l00241"></a>00241         <span class="comment">// the destination has YV12 pixelformat</span>
<a name="l00242"></a>00242         <span class="keywordflow">if</span> ((frame_format != XINE_VORAW_YV12) &amp;&amp; (!userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>)) {
<a name="l00243"></a>00243             <span class="comment">// have to allocate iterim buffer</span>
<a name="l00244"></a>00244             <span class="keywordflow">switch</span> (frame_format) {
<a name="l00245"></a>00245             <span class="keywordflow">case</span> XINE_VORAW_YUY2:
<a name="l00246"></a>00246             <span class="keywordflow">case</span> XINE_VORAW_RGB:
<a name="l00247"></a>00247                 <span class="comment">// we get YUY2 or RGB24 data, allocate interim buffer for YV12 convertion</span>
<a name="l00248"></a>00248                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a> = <span class="keyword">new</span> <a class="code" href="classMMSFBSurface.html" title="This class describes a surface.">MMSFBSurface</a>(frame_width, frame_height, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bbcb1258114e9fdeb49914840e066124f6" title="12 bit YUV (8 bit Y plane followed by 8 bit quarter size V/U planes)">MMSFB_PF_YV12</a>);
<a name="l00249"></a>00249                 <span class="keywordflow">break</span>;
<a name="l00250"></a>00250             }
<a name="l00251"></a>00251         }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253         <span class="keywordflow">if</span> (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>) {
<a name="l00254"></a>00254             <span class="comment">// blit to interim and then stretch it</span>
<a name="l00255"></a>00255             <span class="keywordflow">switch</span> (frame_format) {
<a name="l00256"></a>00256             <span class="keywordflow">case</span> XINE_VORAW_YUY2:
<a name="l00257"></a>00257                 <span class="comment">// source is YUY2</span>
<a name="l00258"></a>00258                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>-&gt;<a class="code" href="classMMSFBSurface.html#d261cf33fd03869570ecd9c46aa5a4fd">blitBuffer</a>(data0, frame_width*2, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bbae1d0cbd4a145847d6541dd75cc47bdb" title="16 bit YUV (4 byte/2 pixel, macropixel contains CbYCrY [31:0])">MMSFB_PF_YUY2</a>,
<a name="l00259"></a>00259                                            frame_width, frame_height, NULL, 0, 0);
<a name="l00260"></a>00260                 <span class="keywordflow">break</span>;
<a name="l00261"></a>00261             <span class="keywordflow">case</span> XINE_VORAW_RGB:
<a name="l00262"></a>00262                 <span class="comment">// source is RGB24</span>
<a name="l00263"></a>00263                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>-&gt;<a class="code" href="classMMSFBSurface.html#d261cf33fd03869570ecd9c46aa5a4fd">blitBuffer</a>(data0, frame_width*3, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bbef503211e6a53fa32acc7cb3510725ff" title="24 bit RGB (3 byte, red 8@16, green 8@8, blue 8@0)">MMSFB_PF_RGB24</a>,
<a name="l00264"></a>00264                                            frame_width, frame_height, NULL, 0, 0);
<a name="l00265"></a>00265                 <span class="keywordflow">break</span>;
<a name="l00266"></a>00266             }
<a name="l00267"></a>00267             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#e90ff2f4b7a8f8f692dfdc0b35fac53c">stretchBlit</a>(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>, NULL, &amp;userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>);
<a name="l00268"></a>00268         } <span class="keywordflow">else</span> {
<a name="l00269"></a>00269             <span class="comment">// source is YV12</span>
<a name="l00270"></a>00270             <a class="code" href="mmstypes_8h.html#46e9b2f3021954195ef247cc356db155" title="for compatibility reason">MMSFBExternalSurfaceBuffer</a> buf;
<a name="l00271"></a>00271             buf.ptr = data0;
<a name="l00272"></a>00272             buf.pitch = frame_width;
<a name="l00273"></a>00273             buf.ptr2 = data1;
<a name="l00274"></a>00274             buf.pitch2 = frame_width / 2;
<a name="l00275"></a>00275             buf.ptr3 = data2;
<a name="l00276"></a>00276             buf.pitch3 = frame_width / 2;
<a name="l00277"></a>00277 
<a name="l00278"></a>00278             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#b41e98ebf6b5926636698a605573d245">stretchBlitBuffer</a>(&amp;buf, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bbcb1258114e9fdeb49914840e066124f6" title="12 bit YUV (8 bit Y plane followed by 8 bit quarter size V/U planes)">MMSFB_PF_YV12</a>,
<a name="l00279"></a>00279                                            frame_width, frame_height, NULL, &amp;userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>);
<a name="l00280"></a>00280         }
<a name="l00281"></a>00281     }
<a name="l00282"></a>00282     <span class="keywordflow">else</span> {
<a name="l00283"></a>00283         <span class="comment">// destination with any other pixelformat</span>
<a name="l00284"></a>00284         <span class="keywordflow">if</span> (frame_format == XINE_VORAW_YV12) {
<a name="l00285"></a>00285             <span class="comment">// we get YV12 data</span>
<a name="l00286"></a>00286             <span class="keywordflow">if</span> (!userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>) {
<a name="l00287"></a>00287                 <span class="comment">// allocate interim buffer for YV12 stretch blit</span>
<a name="l00288"></a>00288                 userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a> = <span class="keyword">new</span> <a class="code" href="classMMSFBSurface.html" title="This class describes a surface.">MMSFBSurface</a>(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bbcb1258114e9fdeb49914840e066124f6" title="12 bit YUV (8 bit Y plane followed by 8 bit quarter size V/U planes)">MMSFB_PF_YV12</a>);
<a name="l00289"></a>00289                 <span class="keywordflow">if</span> (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>) userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>(<a class="code" href="mmsfbbase_8h.html#d14482188739a2b3572dbd1185231117" title="surface blitting flag: antialiasing (stretchBlit(), not all pixelformats will be...">MMSFB_BLIT_ANTIALIASING</a>);
<a name="l00290"></a>00290             }
<a name="l00291"></a>00291         }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293         <span class="keywordflow">if</span> (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>) {
<a name="l00294"></a>00294             <span class="comment">// source is YV12</span>
<a name="l00295"></a>00295             <a class="code" href="mmstypes_8h.html#46e9b2f3021954195ef247cc356db155" title="for compatibility reason">MMSFBExternalSurfaceBuffer</a> buf;
<a name="l00296"></a>00296             buf.ptr = data0;
<a name="l00297"></a>00297             buf.pitch = frame_width;
<a name="l00298"></a>00298             buf.ptr2 = data1;
<a name="l00299"></a>00299             buf.pitch2 = frame_width / 2;
<a name="l00300"></a>00300             buf.ptr3 = data2;
<a name="l00301"></a>00301             buf.pitch3 = frame_width / 2;
<a name="l00302"></a>00302             <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> mydest = userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>;
<a name="l00303"></a>00303             mydest.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = 0;
<a name="l00304"></a>00304             mydest.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = 0;
<a name="l00305"></a>00305 
<a name="l00306"></a>00306             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>-&gt;<a class="code" href="classMMSFBSurface.html#b41e98ebf6b5926636698a605573d245">stretchBlitBuffer</a>(&amp;buf, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bbcb1258114e9fdeb49914840e066124f6" title="12 bit YUV (8 bit Y plane followed by 8 bit quarter size V/U planes)">MMSFB_PF_YV12</a>,
<a name="l00307"></a>00307                                        frame_width, frame_height, NULL, &amp;mydest);
<a name="l00308"></a>00308             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#ff470bc36b849405ccfbd746843f8726">blit</a>(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>, NULL, userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>, userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>);
<a name="l00309"></a>00309 
<a name="l00310"></a>00310         } <span class="keywordflow">else</span> {
<a name="l00311"></a>00311             <span class="comment">// source is RGB24</span>
<a name="l00312"></a>00312             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#b41e98ebf6b5926636698a605573d245">stretchBlitBuffer</a>(data0, frame_width*3, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bbef503211e6a53fa32acc7cb3510725ff" title="24 bit RGB (3 byte, red 8@16, green 8@8, blue 8@0)">MMSFB_PF_RGB24</a>,
<a name="l00313"></a>00313                                            frame_width, frame_height, NULL, &amp;userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>);
<a name="l00314"></a>00314         }
<a name="l00315"></a>00315     }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     <span class="keywordflow">if</span>(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#ecc7604d0d21163849598ebd82285e62" title="number of currently available overlays">numOverlays</a> &gt; 0) {
<a name="l00319"></a>00319         <span class="keywordtype">int</span> rw = (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> &lt;&lt; 10) / frame_width;
<a name="l00320"></a>00320         <span class="keywordtype">int</span> rh = (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> &lt;&lt; 10) / frame_height;
<a name="l00321"></a>00321 
<a name="l00322"></a>00322         <span class="comment">// save and set blitting flags</span>
<a name="l00323"></a>00323         <a class="code" href="mmsfbbase_8h.html#a9f425fccc767e2727282376f0169e1b" title="surface blitting flags">MMSFBBlittingFlags</a> saved_flags;
<a name="l00324"></a>00324         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#585187af62f1f2ab16e4c53989f78c01">getBlittingFlags</a>(&amp;saved_flags);
<a name="l00325"></a>00325         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>(<a class="code" href="mmsfbbase_8h.html#8a6166f8d7ba6e59b009f21c1f46d107" title="surface blitting flag: use alphachannel from source">MMSFB_BLIT_BLEND_ALPHACHANNEL</a> | <a class="code" href="mmsfbbase_8h.html#d14482188739a2b3572dbd1185231117" title="surface blitting flag: antialiasing (stretchBlit(), not all pixelformats will be...">MMSFB_BLIT_ANTIALIASING</a>);
<a name="l00326"></a>00326 
<a name="l00327"></a>00327         <span class="keywordflow">if</span> (!userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#54fec8a63eb461e5b5ea5fcb9408030f" title="interim overlay surface">overlayInterim</a>) {
<a name="l00328"></a>00328             <span class="comment">// create interim surface for stretching overlays</span>
<a name="l00329"></a>00329             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#54fec8a63eb461e5b5ea5fcb9408030f" title="interim overlay surface">overlayInterim</a> = <span class="keyword">new</span> <a class="code" href="classMMSFBSurface.html" title="This class describes a surface.">MMSFBSurface</a>(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>, userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bba716d7315027968d1f6f7db7e3ba9257" title="32 bit ARGB (4 byte, alpha 8@24, red 8@16, green 8@8, blue 8@0)">MMSFB_PF_ARGB</a>);
<a name="l00330"></a>00330         }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332         <span class="comment">// for all overlays</span>
<a name="l00333"></a>00333         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#ecc7604d0d21163849598ebd82285e62" title="number of currently available overlays">numOverlays</a>; ++i) {
<a name="l00334"></a>00334             <span class="comment">// get overlay infos</span>
<a name="l00335"></a>00335             raw_overlay_t *ovl = &amp;(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#422610afa3fdef398976b1dcdadefbcb" title="array of numOverlays overlays">overlays</a>[i]);
<a name="l00336"></a>00336 
<a name="l00337"></a>00337             <span class="comment">// calc x/y offsets</span>
<a name="l00338"></a>00338             <span class="keywordtype">int</span> x = (ovl-&gt;ovl_x * rw) &gt;&gt; 10;
<a name="l00339"></a>00339             <span class="keywordflow">if</span>(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> &gt; userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) {
<a name="l00340"></a>00340                 x += (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> - userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>) &gt;&gt; 1;
<a name="l00341"></a>00341             }
<a name="l00342"></a>00342             <span class="keywordtype">int</span> y = (ovl-&gt;ovl_y * rh) &gt;&gt; 10;
<a name="l00343"></a>00343             <span class="keywordflow">if</span>(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> &gt; userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) {
<a name="l00344"></a>00344                 y += (userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> - userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#bbaca26cab37413ea54b1e8acf616ebd">dest</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>) &gt;&gt; 1;
<a name="l00345"></a>00345             }
<a name="l00346"></a>00346 
<a name="l00347"></a>00347             <span class="comment">// stretch to interim</span>
<a name="l00348"></a>00348             <a class="code" href="classMMSFBRectangle.html" title="describes a rectangle">MMSFBRectangle</a> dest_rect;
<a name="l00349"></a>00349             dest_rect.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a> = 0;
<a name="l00350"></a>00350             dest_rect.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a> = 0;
<a name="l00351"></a>00351             dest_rect.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = (ovl-&gt;ovl_w * rw) &gt;&gt; 10;
<a name="l00352"></a>00352             dest_rect.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = (ovl-&gt;ovl_h * rh) &gt;&gt; 10;
<a name="l00353"></a>00353             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#54fec8a63eb461e5b5ea5fcb9408030f" title="interim overlay surface">overlayInterim</a>-&gt;<a class="code" href="classMMSFBSurface.html#b41e98ebf6b5926636698a605573d245">stretchBlitBuffer</a>(ovl-&gt;ovl_rgba, ovl-&gt;ovl_w * 4, <a class="code" href="mmstypes_8h.html#f8e305495dc796efb337f7a1e84692bba716d7315027968d1f6f7db7e3ba9257" title="32 bit ARGB (4 byte, alpha 8@24, red 8@16, green 8@8, blue 8@0)">MMSFB_PF_ARGB</a>, ovl-&gt;ovl_w, ovl-&gt;ovl_h, NULL, &amp;dest_rect);
<a name="l00354"></a>00354 
<a name="l00355"></a>00355             <span class="comment">// blit to target surface</span>
<a name="l00356"></a>00356             userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#ff470bc36b849405ccfbd746843f8726">blit</a>(userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#54fec8a63eb461e5b5ea5fcb9408030f" title="interim overlay surface">overlayInterim</a>, &amp;dest_rect, x, y);
<a name="l00357"></a>00357         }
<a name="l00358"></a>00358 
<a name="l00359"></a>00359         <span class="comment">// restore blitting flags</span>
<a name="l00360"></a>00360         userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>(saved_flags);
<a name="l00361"></a>00361     }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363     userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>(NULL);
<a name="l00364"></a>00364 }
<a name="l00365"></a>00365 <span class="comment"></span>
<a name="l00366"></a>00366 <span class="comment">/**</span>
<a name="l00367"></a>00367 <span class="comment"> * Callback, that will be called each time an overlay state changes @see: xine.h</span>
<a name="l00368"></a>00368 <span class="comment"> */</span>
<a name="l00369"></a><a class="code" href="mmsav_8cpp.html#c63be51aeee24c100f4b19cf650b67fe">00369</a> <span class="keywordtype">void</span> <a class="code" href="mmsav_8cpp.html#c63be51aeee24c100f4b19cf650b67fe" title="Callback, that will be called each time an overlay state changes.">raw_overlay_cb</a>(<span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> num_ovl, raw_overlay_t *overlays_array) {
<a name="l00370"></a>00370     <a class="code" href="structMMSRAW__USERDATA.html">MMSRAW_USERDATA</a> *userd =(<a class="code" href="structMMSRAW__USERDATA.html">MMSRAW_USERDATA</a> *)user_data;
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#ecc7604d0d21163849598ebd82285e62" title="number of currently available overlays">numOverlays</a> = num_ovl;
<a name="l00373"></a>00373     userd-&gt;<a class="code" href="structMMSRAW__USERDATA.html#422610afa3fdef398976b1dcdadefbcb" title="array of numOverlays overlays">overlays</a> = overlays_array;
<a name="l00374"></a>00374 }
<a name="l00375"></a>00375 
<a name="l00376"></a>00376 <span class="comment"></span>
<a name="l00377"></a>00377 <span class="comment">/**</span>
<a name="l00378"></a>00378 <span class="comment"> * Callback, that will be called after a frame is drawn.</span>
<a name="l00379"></a>00379 <span class="comment"> *</span>
<a name="l00380"></a>00380 <span class="comment"> * It sets clipping areas and does the flipping.</span>
<a name="l00381"></a>00381 <span class="comment"> *</span>
<a name="l00382"></a>00382 <span class="comment"> * @param   cdata       [in/out]    pointer to VODESC structure</span>
<a name="l00383"></a>00383 <span class="comment"> */</span>
<a name="l00384"></a>00384 <span class="preprocessor">#ifdef __HAVE_DIRECTFB__</span>
<a name="l00385"></a>00385 <span class="preprocessor"></span><span class="preprocessor">#if DIRECTFB_MAJOR_VERSION == 1</span>
<a name="l00386"></a>00386 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mmsav_8cpp.html#613a5098983de8fec05807151f0a97ec" title="Callback, that will be called after a frame is drawn.">dfb_frame_cb</a>(<span class="keywordtype">void</span> *cdata) {
<a name="l00387"></a>00387 <span class="preprocessor">#else</span>
<a name="l00388"></a><a class="code" href="mmsav_8cpp.html#613a5098983de8fec05807151f0a97ec">00388</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mmsav_8cpp.html#613a5098983de8fec05807151f0a97ec" title="Callback, that will be called after a frame is drawn.">dfb_frame_cb</a>(<span class="keywordtype">void</span> *cdata) {
<a name="l00389"></a>00389 <span class="preprocessor">#endif</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>    <a class="code" href="structVODESC.html" title="Video output description structure.">VODESC</a> *vodesc = (<a class="code" href="structVODESC.html" title="Video output description structure.">VODESC</a> *) cdata;
<a name="l00391"></a>00391 <span class="comment">/* this was for GUI optimization which is currently not active</span>
<a name="l00392"></a>00392 <span class="comment"></span>
<a name="l00393"></a>00393 <span class="comment">    if (vodesc-&gt;rect.y &gt; 0) {</span>
<a name="l00394"></a>00394 <span class="comment">        DFBRegion reg;</span>
<a name="l00395"></a>00395 <span class="comment">        reg.x1=0;</span>
<a name="l00396"></a>00396 <span class="comment">        reg.y1=0;</span>
<a name="l00397"></a>00397 <span class="comment">        reg.x2=vodesc-&gt;rect.w-1;</span>
<a name="l00398"></a>00398 <span class="comment">        reg.y2=vodesc-&gt;rect.y-1;</span>
<a name="l00399"></a>00399 <span class="comment">        vodesc-&gt;winsurface-&gt;setClip(&amp;reg);</span>
<a name="l00400"></a>00400 <span class="comment">        vodesc-&gt;winsurface-&gt;clear();</span>
<a name="l00401"></a>00401 <span class="comment">        vodesc-&gt;winsurface-&gt;setClip(NULL);</span>
<a name="l00402"></a>00402 <span class="comment">    }</span>
<a name="l00403"></a>00403 <span class="comment"></span>
<a name="l00404"></a>00404 <span class="comment">    if (vodesc-&gt;rect.h &lt; vodesc-&gt;windsc.height) {</span>
<a name="l00405"></a>00405 <span class="comment">        DFBRegion reg;</span>
<a name="l00406"></a>00406 <span class="comment">        reg.x1=0;</span>
<a name="l00407"></a>00407 <span class="comment">        reg.y1=vodesc-&gt;rect.y+vodesc-&gt;rect.h;</span>
<a name="l00408"></a>00408 <span class="comment">        reg.x2=vodesc-&gt;rect.w-1;</span>
<a name="l00409"></a>00409 <span class="comment">        reg.y2=vodesc-&gt;windsc.height-1;</span>
<a name="l00410"></a>00410 <span class="comment">        vodesc-&gt;winsurface-&gt;setClip(&amp;reg);</span>
<a name="l00411"></a>00411 <span class="comment">        vodesc-&gt;winsurface-&gt;clear();</span>
<a name="l00412"></a>00412 <span class="comment">        vodesc-&gt;winsurface-&gt;setClip(NULL);</span>
<a name="l00413"></a>00413 <span class="comment">    }</span>
<a name="l00414"></a>00414 <span class="comment"></span>
<a name="l00415"></a>00415 <span class="comment">    vodesc-&gt;winsurface-&gt;flip(NULL, (MMSFBSurfaceFlipFlags)(DSFLIP_ONSYNC));</span>
<a name="l00416"></a>00416 <span class="comment">*/</span>
<a name="l00417"></a>00417 
<a name="l00418"></a>00418     <span class="comment">/*DFBRegion reg;</span>
<a name="l00419"></a>00419 <span class="comment">    reg.x1=vodesc-&gt;rect.x;</span>
<a name="l00420"></a>00420 <span class="comment">    reg.y1=vodesc-&gt;rect.y;</span>
<a name="l00421"></a>00421 <span class="comment">    reg.x2=reg.x1 + vodesc-&gt;rect.w-1;</span>
<a name="l00422"></a>00422 <span class="comment">    reg.y2=reg.y1 + vodesc-&gt;rect.h-1;*/</span>
<a name="l00423"></a>00423 
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 <span class="comment">//    vodesc-&gt;winsurface-&gt;flip(NULL, (MMSFBSurfaceFlipFlags)(DSFLIP_WAITFORSYNC));</span>
<a name="l00426"></a>00426     vodesc-&gt;<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>();
<a name="l00427"></a>00427 
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     <span class="comment">//vodesc-&gt;winsurface-&gt;lock();</span>
<a name="l00430"></a>00430 
<a name="l00431"></a>00431     <span class="comment">/*          frame-&gt;surface-&gt;Unlock( frame-&gt;surface );</span>
<a name="l00432"></a>00432 <span class="comment"></span>
<a name="l00433"></a>00433 <span class="comment">          frame-&gt;surface-&gt;Lock( frame-&gt;surface, DSLF_WRITE,</span>
<a name="l00434"></a>00434 <span class="comment">                               (void*)&amp;frame-&gt;vo_frame.base[0],</span>
<a name="l00435"></a>00435 <span class="comment">                               (int *)&amp;frame-&gt;vo_frame.pitches[0] );</span>
<a name="l00436"></a>00436 <span class="comment">*/</span>
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     <span class="comment">//vodesc-&gt;winsurface-&gt;flip(NULL, (MMSFBSurfaceFlipFlags)(DSFLIP_ONSYNC));</span>
<a name="l00439"></a>00439     <span class="comment">//vodesc-&gt;winsurface-&gt;flip(NULL, (MMSFBSurfaceFlipFlags)DSFLIP_NONE);</span>
<a name="l00440"></a>00440 
<a name="l00441"></a>00441     <span class="comment">//vodesc-&gt;winsurface-&gt;unlock();</span>
<a name="l00442"></a>00442 
<a name="l00443"></a>00443 <span class="preprocessor">#if DIRECTFB_MAJOR_VERSION &lt; 1</span>
<a name="l00444"></a>00444 <span class="preprocessor"></span>    <span class="keywordflow">return</span> 0;
<a name="l00445"></a>00445 <span class="preprocessor">#endif</span>
<a name="l00446"></a>00446 <span class="preprocessor"></span>}
<a name="l00447"></a>00447 <span class="preprocessor">#endif</span>
<a name="l00448"></a>00448 <span class="preprocessor"></span>
<a name="l00449"></a><a class="code" href="structinternalStreamData.html">00449</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00450"></a><a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">00450</a>     xine_stream_t   *stream;
<a name="l00451"></a><a class="code" href="structinternalStreamData.html#934bd58eec33edf0ed5ea4c907bf3fd5">00451</a>     <span class="keywordtype">int</span>             pos;
<a name="l00452"></a><a class="code" href="structinternalStreamData.html#dac0835f504a0b7a8782de9338bd3990">00452</a>     <span class="keywordtype">short</span>           *status;
<a name="l00453"></a><a class="code" href="structinternalStreamData.html#98b8a3eba413b740e797f2ac52c65d03">00453</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>      *mrl;
<a name="l00454"></a><a class="code" href="structinternalStreamData.html#4a8f4a74912ea6268416a7da93b62709">00454</a>     pthread_mutex_t *lock;
<a name="l00455"></a>00455 } <a class="code" href="structinternalStreamData.html">internalStreamData</a>;
<a name="l00456"></a>00456 
<a name="l00457"></a><a class="code" href="mmsav_8cpp.html#2cf57420395d345b0cd58bd11ac5302c">00457</a> <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="mmsav_8cpp.html#2cf57420395d345b0cd58bd11ac5302c">xinePlayRoutine</a>(<span class="keywordtype">void</span> *data) {
<a name="l00458"></a>00458     <span class="keywordflow">if</span>(!data) <span class="keywordflow">return</span> NULL;
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     <a class="code" href="structinternalStreamData.html">internalStreamData</a> *streamData = (<a class="code" href="structinternalStreamData.html">internalStreamData</a>*)data;
<a name="l00461"></a>00461 
<a name="l00462"></a>00462     pthread_mutex_lock(streamData-&gt;<a class="code" href="structinternalStreamData.html#4a8f4a74912ea6268416a7da93b62709">lock</a>);
<a name="l00463"></a>00463     <span class="keywordflow">if</span>(*(streamData-&gt;<a class="code" href="structinternalStreamData.html#dac0835f504a0b7a8782de9338bd3990">status</a>) == <a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">MMSAV::STATUS_PLAYING</a>)
<a name="l00464"></a>00464         xine_stop(streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a>);
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     <span class="keywordflow">if</span>(*(streamData-&gt;<a class="code" href="structinternalStreamData.html#dac0835f504a0b7a8782de9338bd3990">status</a>) &gt; <a class="code" href="classMMSAV.html#d5d338283717c83cf20a90fdd7c8fc11" title="status not set">MMSAV::STATUS_NONE</a>)
<a name="l00467"></a>00467         xine_close(streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a>);
<a name="l00468"></a>00468 
<a name="l00469"></a>00469     <span class="keywordflow">if</span>(!xine_open(streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a>, streamData-&gt;<a class="code" href="structinternalStreamData.html#98b8a3eba413b740e797f2ac52c65d03">mrl</a>) || !xine_play(streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a>, streamData-&gt;<a class="code" href="structinternalStreamData.html#934bd58eec33edf0ed5ea4c907bf3fd5">pos</a>, 0)) {
<a name="l00470"></a>00470         <span class="keywordflow">switch</span>(xine_get_error(streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a>)) {
<a name="l00471"></a>00471             <span class="keywordflow">case</span> XINE_ERROR_NO_INPUT_PLUGIN :
<a name="l00472"></a>00472                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSAV"</span>, <span class="stringliteral">"Error while trying to play stream: No input plugin"</span>);
<a name="l00473"></a>00473                 <span class="keywordflow">break</span>;
<a name="l00474"></a>00474             <span class="keywordflow">case</span> XINE_ERROR_NO_DEMUX_PLUGIN :
<a name="l00475"></a>00475                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSAV"</span>, <span class="stringliteral">"Error while trying to play stream: No demux plugin"</span>);
<a name="l00476"></a>00476                 <span class="keywordflow">break</span>;
<a name="l00477"></a>00477             <span class="keywordflow">case</span> XINE_ERROR_DEMUX_FAILED :
<a name="l00478"></a>00478                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSAV"</span>, <span class="stringliteral">"Error while trying to play stream: Error in demux plugin"</span>);
<a name="l00479"></a>00479                 <span class="keywordflow">break</span>;
<a name="l00480"></a>00480             <span class="keywordflow">case</span> XINE_ERROR_INPUT_FAILED :
<a name="l00481"></a>00481                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSAV"</span>, <span class="stringliteral">"Error while trying to play stream: Error in input plugin"</span>);
<a name="l00482"></a>00482                 <span class="keywordflow">break</span>;
<a name="l00483"></a>00483             <span class="keywordflow">case</span> XINE_ERROR_MALFORMED_MRL :
<a name="l00484"></a>00484                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSAV"</span>, <span class="stringliteral">"Error while trying to play stream: Malformed MRL"</span>);
<a name="l00485"></a>00485                 <span class="keywordflow">break</span>;
<a name="l00486"></a>00486             <span class="keywordflow">default</span>:
<a name="l00487"></a>00487                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSAV"</span>, <span class="stringliteral">"Unknown error while trying to play stream"</span>);
<a name="l00488"></a>00488                 <span class="keywordflow">break</span>;
<a name="l00489"></a>00489         }
<a name="l00490"></a>00490         *(streamData-&gt;<a class="code" href="structinternalStreamData.html#dac0835f504a0b7a8782de9338bd3990">status</a>) = <a class="code" href="classMMSAV.html#d5d338283717c83cf20a90fdd7c8fc11" title="status not set">MMSAV::STATUS_NONE</a>;
<a name="l00491"></a>00491     }
<a name="l00492"></a>00492     <span class="keywordflow">else</span>
<a name="l00493"></a>00493         *(streamData-&gt;<a class="code" href="structinternalStreamData.html#dac0835f504a0b7a8782de9338bd3990">status</a>) = <a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">MMSAV::STATUS_PLAYING</a>;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     pthread_mutex_unlock(streamData-&gt;<a class="code" href="structinternalStreamData.html#4a8f4a74912ea6268416a7da93b62709">lock</a>);
<a name="l00496"></a>00496     <span class="keyword">delete</span> streamData;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     <span class="keywordflow">return</span> NULL;
<a name="l00499"></a>00499 }
<a name="l00500"></a>00500 
<a name="l00501"></a><a class="code" href="mmsav_8cpp.html#6d987dda3c4d30404e08d89ec93a3b91">00501</a> <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="mmsav_8cpp.html#6d987dda3c4d30404e08d89ec93a3b91">stopRoutine</a>(<span class="keywordtype">void</span> *data) {
<a name="l00502"></a>00502     <span class="keywordflow">if</span>(!data) <span class="keywordflow">return</span> NULL;
<a name="l00503"></a>00503 
<a name="l00504"></a>00504     <a class="code" href="structinternalStreamData.html">internalStreamData</a> *streamData = (<a class="code" href="structinternalStreamData.html">internalStreamData</a>*)data;
<a name="l00505"></a>00505     pthread_mutex_lock(streamData-&gt;<a class="code" href="structinternalStreamData.html#4a8f4a74912ea6268416a7da93b62709">lock</a>);
<a name="l00506"></a>00506     xine_stop(streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a>);
<a name="l00507"></a>00507     xine_set_param(streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a>, XINE_PARAM_AUDIO_CLOSE_DEVICE, 1);
<a name="l00508"></a>00508     xine_close(streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a>);
<a name="l00509"></a>00509     *(streamData-&gt;<a class="code" href="structinternalStreamData.html#dac0835f504a0b7a8782de9338bd3990">status</a>) = <a class="code" href="classMMSAV.html#a03de6e98491d302d9ec9b773c1486ee" title="stream was stopped">MMSAV::STATUS_STOPPED</a>;
<a name="l00510"></a>00510     pthread_mutex_unlock(streamData-&gt;<a class="code" href="structinternalStreamData.html#4a8f4a74912ea6268416a7da93b62709">lock</a>);
<a name="l00511"></a>00511     <span class="keyword">delete</span> streamData;
<a name="l00512"></a>00512 
<a name="l00513"></a>00513     <span class="keywordflow">return</span> NULL;
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 <span class="comment"></span>
<a name="l00516"></a>00516 <span class="comment">/**</span>
<a name="l00517"></a>00517 <span class="comment"> * Initializes some xine stuff.</span>
<a name="l00518"></a>00518 <span class="comment"> *</span>
<a name="l00519"></a>00519 <span class="comment"> * It creates the xine object that is used for</span>
<a name="l00520"></a>00520 <span class="comment"> * audio/video stream creation.</span>
<a name="l00521"></a>00521 <span class="comment"> * Then it loads the user's xine configuration and sets</span>
<a name="l00522"></a>00522 <span class="comment"> * the given verbosity.</span>
<a name="l00523"></a>00523 <span class="comment"> *</span>
<a name="l00524"></a>00524 <span class="comment"> * @exception   MMSAVError  cannot get a new xine object</span>
<a name="l00525"></a>00525 <span class="comment"> */</span>
<a name="l00526"></a><a class="code" href="classMMSAV.html#04d557122375ea32d412d039643ef21f">00526</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#04d557122375ea32d412d039643ef21f" title="Initializes some xine stuff.">MMSAV::xineInit</a>() {
<a name="l00527"></a>00527     <span class="comment">/* get a new xine object */</span>
<a name="l00528"></a>00528     <span class="keywordflow">if</span> (!(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a> = xine_new()))
<a name="l00529"></a>00529         <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"Cannot get a new xine object"</span>);
<a name="l00530"></a>00530 
<a name="l00531"></a>00531     <span class="comment">/* load xine config */</span>
<a name="l00532"></a>00532     <span class="keywordtype">string</span> cfg;
<a name="l00533"></a>00533     <span class="keywordflow">if</span>(getenv(<span class="stringliteral">"XINERC"</span>))
<a name="l00534"></a>00534         cfg = getenv(<span class="stringliteral">"XINERC"</span>);
<a name="l00535"></a>00535     <span class="keywordflow">else</span> {
<a name="l00536"></a>00536         <span class="keywordflow">if</span> (getenv(<span class="stringliteral">"HOME"</span>))
<a name="l00537"></a>00537             cfg = string(getenv(<span class="stringliteral">"HOME"</span>)) + <span class="stringliteral">"/.xine"</span>;
<a name="l00538"></a>00538         <span class="keywordflow">else</span>
<a name="l00539"></a>00539             cfg = <span class="stringliteral">"~/.xine"</span>;
<a name="l00540"></a>00540         mkdir(cfg.c_str(), 755);
<a name="l00541"></a>00541         cfg = cfg + <span class="stringliteral">"/config"</span>;
<a name="l00542"></a>00542     }
<a name="l00543"></a>00543     xine_config_load(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, cfg.c_str());
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     <span class="comment">/* init xine */</span>
<a name="l00546"></a>00546     xine_init(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548     <span class="comment">/* set verbosity */</span>
<a name="l00549"></a>00549     <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#9352e248d4cbcac13b9c204770517c28" title="should logging be verbose?">verbose</a>)
<a name="l00550"></a>00550         xine_engine_set_param(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, XINE_PARAM_VERBOSITY, XINE_VERBOSITY_DEBUG);
<a name="l00551"></a>00551     <span class="keywordflow">else</span>
<a name="l00552"></a>00552         xine_engine_set_param(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, XINE_PARAM_VERBOSITY, XINE_VERBOSITY_NONE);
<a name="l00553"></a>00553 }
<a name="l00554"></a>00554 
<a name="l00555"></a>00555 
<a name="l00556"></a>00556 <span class="preprocessor">#endif</span>
<a name="l00557"></a>00557 <span class="preprocessor"></span>
<a name="l00558"></a>00558 
<a name="l00559"></a><a class="code" href="classMMSAV.html#74c95fed09c4222144a01f89fb4c26df">00559</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#74c95fed09c4222144a01f89fb4c26df">MMSAV::onHandleInput</a>(<a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSAV.html#f87a6cb127445d55ad021b9d57438963" title="window which displays the stream">window</a>, <a class="code" href="structMMSInputEvent.html">MMSInputEvent</a> *input) {
<a name="l00560"></a>00560     <span class="comment">// send the input event to the media backend</span>
<a name="l00561"></a>00561     <span class="keywordflow">return</span> <a class="code" href="classMMSAV.html#ab87fd2897236c8d4a0f6c150dbf72d8" title="Send a xine event to the engine.">sendEvent</a>(input);
<a name="l00562"></a>00562 }
<a name="l00563"></a>00563 <span class="comment"></span>
<a name="l00564"></a>00564 <span class="comment">/**</span>
<a name="l00565"></a>00565 <span class="comment"> * Initializes everything that is needed my MMSAV.</span>
<a name="l00566"></a>00566 <span class="comment"> *</span>
<a name="l00567"></a>00567 <span class="comment"> * First it initializes xine.</span>
<a name="l00568"></a>00568 <span class="comment"> * Then it sets some internal variables and does some surface</span>
<a name="l00569"></a>00569 <span class="comment"> * flipping.</span>
<a name="l00570"></a>00570 <span class="comment"> *</span>
<a name="l00571"></a>00571 <span class="comment"> * @param   verbose [in]    if true the xine engine writes debug messages to stdout</span>
<a name="l00572"></a>00572 <span class="comment"> * @param   window  [in]    window that will be used for video output</span>
<a name="l00573"></a>00573 <span class="comment"> *</span>
<a name="l00574"></a>00574 <span class="comment"> * @see MMSAV::xineInit()</span>
<a name="l00575"></a>00575 <span class="comment"> *</span>
<a name="l00576"></a>00576 <span class="comment"> * @exception   MMSAVError  Cannot get a new xine object</span>
<a name="l00577"></a>00577 <span class="comment"> * @exception   MMSAVError  MMSFBSurface::clear() failed</span>
<a name="l00578"></a>00578 <span class="comment"> * @exception   MMSAVError  MMSFBSurface::flip() failed</span>
<a name="l00579"></a>00579 <span class="comment"> * @exception   MMSAVError  Cannot open the DFB video driver</span>
<a name="l00580"></a>00580 <span class="comment"> */</span>
<a name="l00581"></a><a class="code" href="classMMSAV.html#55f553b8283d16f43a2dc7649ab7700f">00581</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#55f553b8283d16f43a2dc7649ab7700f" title="Initializes everything that is needed my MMSAV.">MMSAV::initialize</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#9352e248d4cbcac13b9c204770517c28" title="should logging be verbose?">verbose</a>, <a class="code" href="classMMSWindow.html" title="This class is the base class for all windows.">MMSWindow</a> *<a class="code" href="classMMSAV.html#f87a6cb127445d55ad021b9d57438963" title="window which displays the stream">window</a>) {
<a name="l00582"></a>00582     this-&gt;verbose          = verbose;
<a name="l00583"></a>00583     this-&gt;window           = window;
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     <a class="code" href="classMMSAV.html#556f78804f9317844a1ce56a104b42e4">onHandleInputConnection</a>.disconnect();
<a name="l00586"></a>00586     <span class="keywordflow">if</span> (window)
<a name="l00587"></a>00587         <a class="code" href="classMMSAV.html#556f78804f9317844a1ce56a104b42e4">onHandleInputConnection</a> = window-&gt;<a class="code" href="classMMSWindow.html#bb8cd5850fce79d7ff780836d98c1787" title="Set one or more callbacks for the onHandleInput event.">onHandleInput</a>-&gt;connect(sigc::mem_fun(<span class="keyword">this</span>,&amp;<a class="code" href="classMMSAV.html#74c95fed09c4222144a01f89fb4c26df">MMSAV::onHandleInput</a>));
<a name="l00588"></a>00588 
<a name="l00589"></a>00589 
<a name="l00590"></a>00590     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a> == <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>) {
<a name="l00591"></a>00591 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l00592"></a>00592 <span class="preprocessor"></span>        <span class="comment">// nothing to do, because the pipe will be created when starting playback</span>
<a name="l00593"></a>00593         <span class="comment">// and then we have only to put keyboard, mouse, touchscreen events to the pipe</span>
<a name="l00594"></a>00594 <span class="preprocessor">#endif</span>
<a name="l00595"></a>00595 <span class="preprocessor"></span>    }
<a name="l00596"></a>00596     <span class="keywordflow">else</span> {
<a name="l00597"></a>00597 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l00598"></a>00598 <span class="preprocessor"></span>
<a name="l00599"></a>00599     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"xineInit()..."</span>);
<a name="l00600"></a>00600 
<a name="l00601"></a>00601     <span class="comment">/* initialize xine */</span>
<a name="l00602"></a>00602     <a class="code" href="classMMSAV.html#04d557122375ea32d412d039643ef21f" title="Initializes some xine stuff.">xineInit</a>();
<a name="l00603"></a>00603 
<a name="l00604"></a>00604 
<a name="l00605"></a>00605     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"xineInit() done."</span>);
<a name="l00606"></a>00606 
<a name="l00607"></a>00607     memset(&amp;this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>, 0, <span class="keyword">sizeof</span>(this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>));
<a name="l00608"></a>00608 
<a name="l00609"></a>00609     <span class="keywordflow">if</span> (<a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#a141eae19b4be0bde896f42f92507e52">getBackend</a>() != <a class="code" href="mmstypes_8h.html#b454e1dfe6bece1334978c43ff70f12f81c9bc2add3d80b2a362f2a86a6c0427" title="directfb backend">MMSFB_BE_DFB</a>) {
<a name="l00610"></a>00610         this-&gt;<a class="code" href="classMMSAV.html#0bd7c042b709ef3cf3c8d9942f3355ff">rawvisual</a>.raw_output_cb = <a class="code" href="mmsav_8cpp.html#2fe7b4decbded68a3071d76ad51b1232">raw_frame_cb</a>;
<a name="l00611"></a>00611         this-&gt;<a class="code" href="classMMSAV.html#0bd7c042b709ef3cf3c8d9942f3355ff">rawvisual</a>.supported_formats = XINE_VORAW_YV12;
<a name="l00612"></a>00612         <span class="keywordflow">if</span>(window) {
<a name="l00613"></a>00613             this-&gt;<a class="code" href="classMMSAV.html#0bd7c042b709ef3cf3c8d9942f3355ff">rawvisual</a>.user_data = (<span class="keywordtype">void</span> *)&amp;(this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>);
<a name="l00614"></a>00614             this-&gt;<a class="code" href="classMMSAV.html#0bd7c042b709ef3cf3c8d9942f3355ff">rawvisual</a>.raw_overlay_cb = <a class="code" href="mmsav_8cpp.html#c63be51aeee24c100f4b19cf650b67fe" title="Callback, that will be called each time an overlay state changes.">raw_overlay_cb</a>;
<a name="l00615"></a>00615         } <span class="keywordflow">else</span> {
<a name="l00616"></a>00616             this-&gt;<a class="code" href="classMMSAV.html#0bd7c042b709ef3cf3c8d9942f3355ff">rawvisual</a>.user_data = NULL;
<a name="l00617"></a>00617         }
<a name="l00618"></a>00618     }
<a name="l00619"></a>00619     <span class="keywordflow">else</span> {
<a name="l00620"></a>00620 <span class="preprocessor">#ifdef __HAVE_DIRECTFB__</span>
<a name="l00621"></a>00621 <span class="preprocessor"></span>        this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#5c2316b6a44add70d387059d20f913c6" title="pixel format of surface">format</a>    = DSPF_UNKNOWN;
<a name="l00622"></a>00622         this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#b03faf288dc274be097a86a70590d38c" title="ratio of video stream">ratio</a>     = 1.25;
<a name="l00623"></a>00623         this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#22136b2ff5a290acf7d97c08ff67ec14" title="width of video stream">width</a>     = 720;
<a name="l00624"></a>00624         this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#73c83c4e56202abe52e864b5ff2f1801" title="height of video stream">height</a>    = 576;
<a name="l00625"></a>00625         this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>    = 0;
<a name="l00626"></a>00626         this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>    = 0;
<a name="l00627"></a>00627 
<a name="l00628"></a>00628         <span class="keywordflow">if</span>(window) {
<a name="l00629"></a>00629             window-&gt;<a class="code" href="classMMSWindow.html#871979eb7faf0654d948c49d118d32db" title="Get access to the surface of the window needed to display video streams.">getSurface</a>()-&gt;<a class="code" href="classMMSFBSurface.html#dc103b0d7f992e7f1c6b60c5199f7ad1">getSize</a>(&amp;(this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.width), &amp;(this-&gt;vodesc.windsc.height));
<a name="l00630"></a>00630             this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a> = window-&gt;<a class="code" href="classMMSWindow.html#871979eb7faf0654d948c49d118d32db" title="Get access to the surface of the window needed to display video streams.">getSurface</a>();
<a name="l00631"></a>00631             <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a>-&gt;<a class="code" href="classMMSFBSurface.html#be76cdee9e5e691aad9d8d6154819321">clear</a>())
<a name="l00632"></a>00632                 <a class="code" href="mmsav_8cpp.html#292acb8b48ea711115d21237e493bd7a">THROW_DFB_ERROR</a>(<a class="code" href="mmsav_8cpp.html#29b9b7b7795ff47ef784f7ca98c23769">dfbres</a>, <span class="stringliteral">"MMSFBSurface::clear() failed"</span>);
<a name="l00633"></a>00633             <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a>-&gt;<a class="code" href="classMMSFBSurface.html#889898c1b1e19358d654b873e8ebba80">flip</a>())
<a name="l00634"></a>00634                 <a class="code" href="mmsav_8cpp.html#292acb8b48ea711115d21237e493bd7a">THROW_DFB_ERROR</a>(<a class="code" href="mmsav_8cpp.html#29b9b7b7795ff47ef784f7ca98c23769">dfbres</a>, <span class="stringliteral">"MMSFBSurface::flip() failed"</span>);
<a name="l00635"></a>00635         }
<a name="l00636"></a>00636         this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a> = this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.width;
<a name="l00637"></a>00637         this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#95745ed9e5a782cbe7829ecc8f0a169d" title="rectangle for video stream">rect</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a> = (int)((<span class="keywordtype">double</span>)(this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#fdb8e5fdc9c7614aee31969d792d40c6" title="description of window">windsc</a>.width) / this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#b03faf288dc274be097a86a70590d38c" title="ratio of video stream">ratio</a> + 0.5);
<a name="l00638"></a>00638 <span class="preprocessor">#endif</span>
<a name="l00639"></a>00639 <span class="preprocessor"></span>    }
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     <span class="comment">//this-&gt;vodesc.winsurface</span>
<a name="l00642"></a>00642     <span class="comment">/* clear surface */</span>
<a name="l00643"></a>00643 
<a name="l00644"></a>00644     <span class="keywordflow">if</span> (<a class="code" href="mmsfb_8h.html#a1513ce6000f5760ddd9613e0cdffb04">mmsfb</a>-&gt;<a class="code" href="classMMSFB.html#a141eae19b4be0bde896f42f92507e52">getBackend</a>() != <a class="code" href="mmstypes_8h.html#b454e1dfe6bece1334978c43ff70f12f81c9bc2add3d80b2a362f2a86a6c0427" title="directfb backend">MMSFB_BE_DFB</a>) {
<a name="l00645"></a>00645         <span class="keywordflow">if</span>(window) {
<a name="l00646"></a>00646             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>=window-&gt;<a class="code" href="classMMSWindow.html#871979eb7faf0654d948c49d118d32db" title="Get access to the surface of the window needed to display video streams.">getSurface</a>();
<a name="l00647"></a>00647             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#6e90fc59a79a1e62f055b2944924af35">setBlittingFlags</a>(<a class="code" href="mmsfbbase_8h.html#d14482188739a2b3572dbd1185231117" title="surface blitting flag: antialiasing (stretchBlit(), not all pixelformats will be...">MMSFB_BLIT_ANTIALIASING</a>);
<a name="l00648"></a>00648             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#8b3ca979b298cad06440b52fe4b3e78b">getPixelFormat</a>(&amp;this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#ae4437e973c3ef9766f5febcbe689ab8">surf_pixelformat</a>);
<a name="l00649"></a>00649             <span class="keywordtype">int</span> w,h;
<a name="l00650"></a>00650             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#93675524dee6a847086c89511c9e9269">surf</a>-&gt;<a class="code" href="classMMSFBSurface.html#dc103b0d7f992e7f1c6b60c5199f7ad1">getSize</a>(&amp;w,&amp;h);
<a name="l00651"></a>00651             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#c345c8ad27f43f4c0ca5585d67384d06" title="x">x</a>=0;
<a name="l00652"></a>00652             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#bfba72d526fef80beb66d41f9f8f0b3a" title="y">y</a>=0;
<a name="l00653"></a>00653             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#6d149724642ea0b33ce3152a5a5499a5" title="width">w</a>=w;
<a name="l00654"></a>00654             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#f4a2e4945705c303e22eeb9f3c3e777b">size</a>.<a class="code" href="classMMSFBRectangle.html#80e92abd0c1a7a9a67f5fde757a080ad" title="height">h</a>=h;
<a name="l00655"></a>00655             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#0ea81a718de79f04fda44c15e03c455c">lastaspect</a>=0.0;
<a name="l00656"></a>00656             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a> = NULL;
<a name="l00657"></a>00657             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#54fec8a63eb461e5b5ea5fcb9408030f" title="interim overlay surface">overlayInterim</a> = NULL;
<a name="l00658"></a>00658             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#ecc7604d0d21163849598ebd82285e62" title="number of currently available overlays">numOverlays</a> = 0;
<a name="l00659"></a>00659             this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#422610afa3fdef398976b1dcdadefbcb" title="array of numOverlays overlays">overlays</a> = NULL;
<a name="l00660"></a>00660         }
<a name="l00661"></a>00661         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"opening video driver..."</span>);
<a name="l00662"></a>00662         <span class="comment">/* open the video output driver */</span>
<a name="l00663"></a>00663         <span class="keywordflow">if</span> (!(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a> = xine_open_video_driver(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, <span class="stringliteral">"raw"</span>,
<a name="l00664"></a>00664                                     XINE_VISUAL_TYPE_RAW, (<span class="keywordtype">void</span>*) &amp;this-&gt;<a class="code" href="classMMSAV.html#0bd7c042b709ef3cf3c8d9942f3355ff">rawvisual</a>)))
<a name="l00665"></a>00665             <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"Cannot open the XINE RAW video driver"</span>);
<a name="l00666"></a>00666     }
<a name="l00667"></a>00667     <span class="keywordflow">else</span> {
<a name="l00668"></a>00668 <span class="preprocessor">#ifdef __HAVE_DIRECTFB__</span>
<a name="l00669"></a>00669 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(window) {
<a name="l00670"></a>00670                 <span class="keywordflow">if</span>(((IDirectFBSurface *)<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a>-&gt;<a class="code" href="classMMSFBSurface.html#5b448621ede596a99630d346d2f34e38">getDFBSurface</a>())-&gt;SetBlittingFlags((IDirectFBSurface *)<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a>-&gt;<a class="code" href="classMMSFBSurface.html#5b448621ede596a99630d346d2f34e38">getDFBSurface</a>(), DSBLIT_NOFX) != DFB_OK)
<a name="l00671"></a>00671                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"set blitting failed"</span>);
<a name="l00672"></a>00672                 <span class="comment">/* fill the visual structure for the video output driver */</span>
<a name="l00673"></a>00673                 this-&gt;<a class="code" href="classMMSAV.html#014653fe174eecc498cc293d9d6542c5" title="visual structure for video output">visual</a>.<a class="code" href="structdfb__visual__t.html#034b44891fa5c4b90acaa48eb2f9568c" title="destination surface">destination</a>  = (IDirectFBSurface *)<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>.<a class="code" href="structVODESC.html#5b3e2c942a4675144f4a66c4e9c1c147" title="surface of window">winsurface</a>-&gt;<a class="code" href="classMMSFBSurface.html#5b448621ede596a99630d346d2f34e38">getDFBSurface</a>();
<a name="l00674"></a>00674             }
<a name="l00675"></a>00675             <span class="keywordflow">else</span>
<a name="l00676"></a>00676                 this-&gt;<a class="code" href="classMMSAV.html#014653fe174eecc498cc293d9d6542c5" title="visual structure for video output">visual</a>.<a class="code" href="structdfb__visual__t.html#034b44891fa5c4b90acaa48eb2f9568c" title="destination surface">destination</a> = NULL;
<a name="l00677"></a>00677             this-&gt;<a class="code" href="classMMSAV.html#014653fe174eecc498cc293d9d6542c5" title="visual structure for video output">visual</a>.<a class="code" href="structdfb__visual__t.html#215fb6611eedf90d2691c557d88e4df2" title="subpicture surface">subpicture</a>   = NULL;
<a name="l00678"></a>00678             this-&gt;<a class="code" href="classMMSAV.html#014653fe174eecc498cc293d9d6542c5" title="visual structure for video output">visual</a>.<a class="code" href="structdfb__visual__t.html#fe358d46271b22a59f85b4342d5068fd" title="output callback for DirectFB&amp;#39;s xine video driver">output_cb</a>    = <a class="code" href="mmsav_8cpp.html#f83eb0e6551f60782f690cdb78b90da5" title="Callback, that will be called before a frame is drawn.">dfb_output_cb</a>;
<a name="l00679"></a>00679             this-&gt;<a class="code" href="classMMSAV.html#014653fe174eecc498cc293d9d6542c5" title="visual structure for video output">visual</a>.<a class="code" href="structdfb__visual__t.html#6ab675238551fc3be80ce40132b8de36" title="data given as an argument to output_cb">output_cdata</a> = (<span class="keywordtype">void</span>*) &amp;(this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>);
<a name="l00680"></a>00680             this-&gt;<a class="code" href="classMMSAV.html#014653fe174eecc498cc293d9d6542c5" title="visual structure for video output">visual</a>.<a class="code" href="structdfb__visual__t.html#b790bcab89bd0dcec24f8590269d868a" title="frame callback for DirectFB&amp;#39;s xine video driver">frame_cb</a>     = <a class="code" href="mmsav_8cpp.html#613a5098983de8fec05807151f0a97ec" title="Callback, that will be called after a frame is drawn.">dfb_frame_cb</a>;
<a name="l00681"></a>00681             this-&gt;<a class="code" href="classMMSAV.html#014653fe174eecc498cc293d9d6542c5" title="visual structure for video output">visual</a>.<a class="code" href="structdfb__visual__t.html#fcc7d32bf944c75c971f95330aa028ab" title="data given as an argument to frame_cb">frame_cdata</a>  = (<span class="keywordtype">void</span>*) &amp;(this-&gt;<a class="code" href="classMMSAV.html#dea9b99f38f512ef88a91f3ef3a4c791" title="video output settings">vodesc</a>);
<a name="l00682"></a>00682             <span class="comment">//this-&gt;visual.destination-&gt;SetField( this-&gt;visual.destination, 0 );</span>
<a name="l00683"></a>00683             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"opening video driver..."</span>);
<a name="l00684"></a>00684             <span class="keywordflow">if</span> (!(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a> = xine_open_video_driver(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, <span class="stringliteral">"DFB"</span>,
<a name="l00685"></a>00685                                         XINE_VISUAL_TYPE_DFB, (<span class="keywordtype">void</span>*) &amp;this-&gt;<a class="code" href="classMMSAV.html#014653fe174eecc498cc293d9d6542c5" title="visual structure for video output">visual</a>)))
<a name="l00686"></a>00686                         <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"Cannot open the DFB video driver, please install directfb extras!"</span>);
<a name="l00687"></a>00687 <span class="preprocessor">#endif</span>
<a name="l00688"></a>00688 <span class="preprocessor"></span>    }
<a name="l00689"></a>00689     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"opening video driver done."</span>);
<a name="l00690"></a>00690 
<a name="l00691"></a>00691 
<a name="l00692"></a>00692     <span class="comment">/* open the audio output driver */</span>
<a name="l00693"></a>00693     <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> *ao_list;
<a name="l00694"></a>00694     <span class="keywordtype">int</span> i = 0;
<a name="l00695"></a>00695     <span class="keywordflow">if</span>(!(ao_list = xine_list_audio_output_plugins(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>)) || !*ao_list) {
<a name="l00696"></a>00696         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"No audio output plugins found"</span>);
<a name="l00697"></a>00697         xine_engine_set_param(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, XINE_PARAM_IGNORE_AUDIO, 1);
<a name="l00698"></a>00698         this-&gt;<a class="code" href="classMMSAV.html#56de0a4832bf7a27adb442c32fc363ce" title="xine audio ports">ao</a>=NULL;
<a name="l00699"></a>00699         <span class="keywordflow">return</span>;
<a name="l00700"></a>00700     }
<a name="l00701"></a>00701     <span class="keywordflow">do</span> {
<a name="l00702"></a>00702         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"checking audio output '%s'..."</span>, ao_list[i]);
<a name="l00703"></a>00703 
<a name="l00704"></a>00704         <span class="comment">/* ignore file output */</span>
<a name="l00705"></a>00705         <span class="keywordflow">if</span>(strcmp(ao_list[i], <span class="stringliteral">"file"</span>) == 0) {
<a name="l00706"></a>00706             i++;
<a name="l00707"></a>00707             <span class="keywordflow">continue</span>;
<a name="l00708"></a>00708         }
<a name="l00709"></a>00709         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(ao_list[i], <span class="stringliteral">"none"</span>) == 0)
<a name="l00710"></a>00710         {
<a name="l00711"></a>00711             <span class="comment">/* disable audio */</span>
<a name="l00712"></a>00712             xine_engine_set_param(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, XINE_PARAM_IGNORE_AUDIO, 1);
<a name="l00713"></a>00713             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"Could not open audio driver, sound disabled!"</span>);
<a name="l00714"></a>00714             <span class="keywordflow">break</span>;
<a name="l00715"></a>00715         }
<a name="l00716"></a>00716 
<a name="l00717"></a>00717         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"opening audio output '%s'"</span>, ao_list[i]);
<a name="l00718"></a>00718     }
<a name="l00719"></a>00719     <span class="keywordflow">while</span>(!(this-&gt;<a class="code" href="classMMSAV.html#56de0a4832bf7a27adb442c32fc363ce" title="xine audio ports">ao</a> = xine_open_audio_driver(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, ao_list[i++], NULL)));
<a name="l00720"></a>00720 
<a name="l00721"></a>00721     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"Using audio driver '%s'"</span>, ao_list[i-1]);
<a name="l00722"></a>00722 
<a name="l00723"></a>00723 <span class="preprocessor">#endif</span>
<a name="l00724"></a>00724 <span class="preprocessor"></span>    }
<a name="l00725"></a>00725 }
<a name="l00726"></a>00726 
<a name="l00727"></a>00727 
<a name="l00728"></a>00728 <span class="comment"></span>
<a name="l00729"></a>00729 <span class="comment">/**</span>
<a name="l00730"></a>00730 <span class="comment"> * Constructor</span>
<a name="l00731"></a>00731 <span class="comment"> *</span>
<a name="l00732"></a>00732 <span class="comment"> * Initializes private variables</span>
<a name="l00733"></a>00733 <span class="comment"> *</span>
<a name="l00734"></a>00734 <span class="comment"> * @note    It checks the chosen backend against the</span>
<a name="l00735"></a>00735 <span class="comment"> *          supported ones. It simply switches the</span>
<a name="l00736"></a>00736 <span class="comment"> *          support, because one of the backends has</span>
<a name="l00737"></a>00737 <span class="comment"> *          to be implemented, otherwise mmsmedia</span>
<a name="l00738"></a>00738 <span class="comment"> *          isn't build.</span>
<a name="l00739"></a>00739 <span class="comment"> */</span>
<a name="l00740"></a><a class="code" href="classMMSAV.html#89af4d5d8c42ea2eb9bd8c6b300db49d">00740</a> <a class="code" href="classMMSAV.html#89af4d5d8c42ea2eb9bd8c6b300db49d" title="Constructor.">MMSAV::MMSAV</a>(<a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad" title="supported media backends">MMSMEDIABackend</a> _backend) :
<a name="l00741"></a>00741     <a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>(_backend),
<a name="l00742"></a>00742     <a class="code" href="classMMSAV.html#f87a6cb127445d55ad021b9d57438963" title="window which displays the stream">window</a>(NULL),
<a name="l00743"></a>00743     <a class="code" href="classMMSAV.html#97c8ac0d3aaedb0ac6f820d3274fd330" title="surface of the window">surface</a>(NULL),
<a name="l00744"></a>00744     <a class="code" href="classMMSAV.html#9352e248d4cbcac13b9c204770517c28" title="should logging be verbose?">verbose</a>(<a class="code" href="mmsfbfont_8cpp.html#5df37b7f02e5cdc7d9412b7f872b8e01">false</a>),
<a name="l00745"></a>00745     <a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a>(<a class="code" href="classMMSAV.html#d5d338283717c83cf20a90fdd7c8fc11" title="status not set">STATUS_NONE</a>),
<a name="l00746"></a>00746     <a class="code" href="classMMSAV.html#c0e477638485b2597388ad95d554f51b" title="remember position where the stream stopped last time">pos</a>(0)
<a name="l00747"></a>00747 #ifdef __HAVE_XINE__
<a name="l00748"></a>00748     , <a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>(NULL)
<a name="l00749"></a>00749     , <a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>(NULL)
<a name="l00750"></a>00750     , <a class="code" href="classMMSAV.html#56de0a4832bf7a27adb442c32fc363ce" title="xine audio ports">ao</a>(NULL)
<a name="l00751"></a>00751     , <a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>(NULL)
<a name="l00752"></a>00752     , <a class="code" href="classMMSAV.html#2b1c43ef2a6f1267d5943cdc0b5ff8fa" title="xine event queue">queue</a>(NULL)
<a name="l00753"></a>00753 #endif
<a name="l00754"></a>00754 {
<a name="l00755"></a>00755 
<a name="l00756"></a>00756     this-&gt;<a class="code" href="classMMSAV.html#16322cf136dd54ce705b9ec0e30b0212" title="Callback that is used to receive errors.">onError</a>          = <span class="keyword">new</span> sigc::signal&lt;void, string&gt;;
<a name="l00757"></a>00757     this-&gt;<a class="code" href="classMMSAV.html#22a2f4b19b8a4a14bc8e27eeb999e22b" title="Callback that is used to receive status changes.">onStatusChange</a>   = <span class="keyword">new</span> sigc::signal&lt;void, const unsigned short, const unsigned short&gt;;
<a name="l00758"></a>00758 
<a name="l00759"></a>00759     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l00760"></a>00760         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l00761"></a>00761 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l00762"></a>00762 <span class="preprocessor"></span>            <a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#4ee8bc7176312f3b0e3386f7a947606e" title="uri which is to play">uri</a> = <span class="stringliteral">""</span>;
<a name="l00763"></a>00763             <a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a> = NULL;
<a name="l00764"></a>00764             <span class="keywordflow">break</span>;
<a name="l00765"></a>00765 <span class="preprocessor">#else</span>
<a name="l00766"></a>00766 <span class="preprocessor"></span>            cerr &lt;&lt; <span class="stringliteral">"MMSAV: Disko was build without gstreamer support. Switching to xine."</span> &lt;&lt; endl;
<a name="l00767"></a>00767             this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a> = <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>;
<a name="l00768"></a>00768             <span class="keywordflow">break</span>;
<a name="l00769"></a>00769 <span class="preprocessor">#endif</span>
<a name="l00770"></a>00770 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l00771"></a>00771 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l00772"></a>00772 <span class="preprocessor"></span>            pthread_mutex_init(&amp;this-&gt;<a class="code" href="classMMSAV.html#d65293b3b61935e6456a5d5b964c1e55">lock</a>, NULL);
<a name="l00773"></a>00773 <span class="preprocessor">#else</span>
<a name="l00774"></a>00774 <span class="preprocessor"></span>            cerr &lt;&lt; <span class="stringliteral">"MMSAV: Disko was build without xine support. Switching to gstreamer."</span> &lt;&lt; endl;
<a name="l00775"></a>00775             this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a> = <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>;
<a name="l00776"></a>00776             <span class="keywordflow">break</span>;
<a name="l00777"></a>00777 <span class="preprocessor">#endif</span>
<a name="l00778"></a>00778 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
<a name="l00779"></a>00779             <span class="comment">// shouldn't be reached</span>
<a name="l00780"></a>00780             <span class="keywordflow">break</span>;
<a name="l00781"></a>00781     }
<a name="l00782"></a>00782 }
<a name="l00783"></a>00783 <span class="comment"></span>
<a name="l00784"></a>00784 <span class="comment">/**</span>
<a name="l00785"></a>00785 <span class="comment"> * Destructor</span>
<a name="l00786"></a>00786 <span class="comment"> *</span>
<a name="l00787"></a>00787 <span class="comment"> * Deletes sigc++-callbacks and closes all xine related</span>
<a name="l00788"></a>00788 <span class="comment"> * stuff.</span>
<a name="l00789"></a>00789 <span class="comment"> */</span>
<a name="l00790"></a><a class="code" href="classMMSAV.html#8208eb072f06794d963cbca4a624c0d7">00790</a> <a class="code" href="classMMSAV.html#8208eb072f06794d963cbca4a624c0d7" title="Destructor.">MMSAV::~MMSAV</a>() {
<a name="l00791"></a>00791     <a class="code" href="classMMSAV.html#556f78804f9317844a1ce56a104b42e4">onHandleInputConnection</a>.disconnect();
<a name="l00792"></a>00792 
<a name="l00793"></a>00793     <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#16322cf136dd54ce705b9ec0e30b0212" title="Callback that is used to receive errors.">onError</a>) {
<a name="l00794"></a>00794         this-&gt;<a class="code" href="classMMSAV.html#16322cf136dd54ce705b9ec0e30b0212" title="Callback that is used to receive errors.">onError</a>-&gt;clear();
<a name="l00795"></a>00795         <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSAV.html#16322cf136dd54ce705b9ec0e30b0212" title="Callback that is used to receive errors.">onError</a>;
<a name="l00796"></a>00796     }
<a name="l00797"></a>00797 
<a name="l00798"></a>00798     <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#22a2f4b19b8a4a14bc8e27eeb999e22b" title="Callback that is used to receive status changes.">onStatusChange</a>) {
<a name="l00799"></a>00799         this-&gt;<a class="code" href="classMMSAV.html#22a2f4b19b8a4a14bc8e27eeb999e22b" title="Callback that is used to receive status changes.">onStatusChange</a>-&gt;clear();
<a name="l00800"></a>00800         <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSAV.html#22a2f4b19b8a4a14bc8e27eeb999e22b" title="Callback that is used to receive status changes.">onStatusChange</a>;
<a name="l00801"></a>00801     }
<a name="l00802"></a>00802 
<a name="l00803"></a>00803     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a> == <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>) {
<a name="l00804"></a>00804 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l00805"></a>00805 <span class="preprocessor"></span>        <a class="code" href="group__mmsmedia.html#g5ec1c45a6b1f7348ed5241c8fb30b306" title="GStreamer input handling.">mmsGstFree</a>();
<a name="l00806"></a>00806 <span class="preprocessor">#endif</span>
<a name="l00807"></a>00807 <span class="preprocessor"></span>    }
<a name="l00808"></a>00808     <span class="keywordflow">else</span> {
<a name="l00809"></a>00809 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l00810"></a>00810 <span class="preprocessor"></span>        pthread_mutex_destroy(&amp;this-&gt;<a class="code" href="classMMSAV.html#d65293b3b61935e6456a5d5b964c1e55">lock</a>);
<a name="l00811"></a>00811 
<a name="l00812"></a>00812 
<a name="l00813"></a>00813         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#2b1c43ef2a6f1267d5943cdc0b5ff8fa" title="xine event queue">queue</a>)
<a name="l00814"></a>00814             xine_event_dispose_queue(this-&gt;<a class="code" href="classMMSAV.html#2b1c43ef2a6f1267d5943cdc0b5ff8fa" title="xine event queue">queue</a>);
<a name="l00815"></a>00815         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>)
<a name="l00816"></a>00816             xine_dispose(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>);
<a name="l00817"></a>00817         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#56de0a4832bf7a27adb442c32fc363ce" title="xine audio ports">ao</a>)
<a name="l00818"></a>00818             xine_close_audio_driver(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, this-&gt;<a class="code" href="classMMSAV.html#56de0a4832bf7a27adb442c32fc363ce" title="xine audio ports">ao</a>);
<a name="l00819"></a>00819         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>)
<a name="l00820"></a>00820             xine_close_video_driver(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>);
<a name="l00821"></a>00821 
<a name="l00822"></a>00822         <span class="comment">// dispose all registered post plugins</span>
<a name="l00823"></a>00823         map&lt;string, xine_post_t*&gt;::const_iterator i;
<a name="l00824"></a>00824         <span class="keywordflow">for</span>(i = <a class="code" href="classMMSAV.html#e5355e84e9f5ae552e8162fdef1832c2" title="map of registered audio post plugins">audioPostPlugins</a>.begin(); i != <a class="code" href="classMMSAV.html#e5355e84e9f5ae552e8162fdef1832c2" title="map of registered audio post plugins">audioPostPlugins</a>.end(); ++i)
<a name="l00825"></a>00825             xine_post_dispose(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, i-&gt;second);
<a name="l00826"></a>00826         <a class="code" href="classMMSAV.html#e5355e84e9f5ae552e8162fdef1832c2" title="map of registered audio post plugins">audioPostPlugins</a>.erase(<a class="code" href="classMMSAV.html#e5355e84e9f5ae552e8162fdef1832c2" title="map of registered audio post plugins">audioPostPlugins</a>.begin(), <a class="code" href="classMMSAV.html#e5355e84e9f5ae552e8162fdef1832c2" title="map of registered audio post plugins">audioPostPlugins</a>.end());
<a name="l00827"></a>00827 
<a name="l00828"></a>00828         <span class="keywordflow">for</span>(i = <a class="code" href="classMMSAV.html#bc3efb639d2eea18336e3ff764a8beae" title="map of registered video post plugins">videoPostPlugins</a>.begin(); i != <a class="code" href="classMMSAV.html#bc3efb639d2eea18336e3ff764a8beae" title="map of registered video post plugins">videoPostPlugins</a>.end(); ++i)
<a name="l00829"></a>00829             xine_post_dispose(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, i-&gt;second);
<a name="l00830"></a>00830         <a class="code" href="classMMSAV.html#bc3efb639d2eea18336e3ff764a8beae" title="map of registered video post plugins">videoPostPlugins</a>.erase(<a class="code" href="classMMSAV.html#bc3efb639d2eea18336e3ff764a8beae" title="map of registered video post plugins">videoPostPlugins</a>.begin(), <a class="code" href="classMMSAV.html#bc3efb639d2eea18336e3ff764a8beae" title="map of registered video post plugins">videoPostPlugins</a>.end());
<a name="l00831"></a>00831 
<a name="l00832"></a>00832         <span class="comment">// exit xine</span>
<a name="l00833"></a>00833         xine_exit(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>);
<a name="l00834"></a>00834 
<a name="l00835"></a>00835         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>) {
<a name="l00836"></a>00836             <span class="comment">// delete interim (used for xine raw callback)</span>
<a name="l00837"></a>00837             <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#1497b43a2ef0c32a0480c47ef4c3b063">interim</a>;
<a name="l00838"></a>00838         }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#54fec8a63eb461e5b5ea5fcb9408030f" title="interim overlay surface">overlayInterim</a>) {
<a name="l00841"></a>00841             <span class="comment">// delete overlay interim (used for xine raw callback)</span>
<a name="l00842"></a>00842             <span class="keyword">delete</span> this-&gt;<a class="code" href="classMMSAV.html#3e1a719d332a654229720b2bb7dc22d0">userd</a>.<a class="code" href="structMMSRAW__USERDATA.html#54fec8a63eb461e5b5ea5fcb9408030f" title="interim overlay surface">overlayInterim</a>;
<a name="l00843"></a>00843         }
<a name="l00844"></a>00844 <span class="preprocessor">#endif</span>
<a name="l00845"></a>00845 <span class="preprocessor"></span>    }
<a name="l00846"></a>00846 }
<a name="l00847"></a>00847 
<a name="l00848"></a>00848 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l00849"></a>00849 <span class="preprocessor"></span>
<a name="l00850"></a>00850 
<a name="l00851"></a>00851 <span class="comment"></span>
<a name="l00852"></a>00852 <span class="comment">/**</span>
<a name="l00853"></a>00853 <span class="comment"> * Opens an audio/video object.</span>
<a name="l00854"></a>00854 <span class="comment"> *</span>
<a name="l00855"></a>00855 <span class="comment"> * It creates the xine stream, wires all registered</span>
<a name="l00856"></a>00856 <span class="comment"> * audio/video post plugins, sets the verbosity and</span>
<a name="l00857"></a>00857 <span class="comment"> * registers the event queue if given.</span>
<a name="l00858"></a>00858 <span class="comment"> *</span>
<a name="l00859"></a>00859 <span class="comment"> * @note    You have to register post plugins before</span>
<a name="l00860"></a>00860 <span class="comment"> * calling open().</span>
<a name="l00861"></a>00861 <span class="comment"> *</span>
<a name="l00862"></a>00862 <span class="comment"> * @param   queue_cb    [in]    xine event queue callback</span>
<a name="l00863"></a>00863 <span class="comment"> * @param   userData    [in]    data to be used in xine event callbacks</span>
<a name="l00864"></a>00864 <span class="comment"> *</span>
<a name="l00865"></a>00865 <span class="comment"> * @see MMSAV::registerAudioPostPlugin</span>
<a name="l00866"></a>00866 <span class="comment"> * @see MMSAV::registerVideoPostPlugin</span>
<a name="l00867"></a>00867 <span class="comment"> *</span>
<a name="l00868"></a>00868 <span class="comment"> * @exception   MMSAVError  Cannot get a new stream</span>
<a name="l00869"></a>00869 <span class="comment"> */</span>
<a name="l00870"></a><a class="code" href="classMMSAV.html#408000d9d5c92bc2a849d0e1a56ffdd9">00870</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#408000d9d5c92bc2a849d0e1a56ffdd9" title="Opens an audio/video object.">MMSAV::xineOpen</a>(xine_event_listener_cb_t <a class="code" href="mmscda_8cpp.html#590da19dee7955b6830fc7a010e950f7" title="Callback, that will be called if xine sends event messages.">queue_cb</a>, <span class="keywordtype">void</span> *userData) {
<a name="l00871"></a>00871     <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>) {
<a name="l00872"></a>00872         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSAV"</span>, <span class="stringliteral">"xine stream already present, skipping xineOpen"</span>);
<a name="l00873"></a>00873         <span class="keywordflow">return</span>;
<a name="l00874"></a>00874     }
<a name="l00875"></a>00875 
<a name="l00876"></a>00876     <span class="comment">/* open stream */</span>
<a name="l00877"></a>00877     <span class="keywordflow">if</span> (!(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a> = xine_stream_new(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, this-&gt;<a class="code" href="classMMSAV.html#56de0a4832bf7a27adb442c32fc363ce" title="xine audio ports">ao</a>, this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>)))
<a name="l00878"></a>00878         <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"Cannot get a new stream"</span>);
<a name="l00879"></a>00879 
<a name="l00880"></a>00880     <span class="comment">/* wire all post plugins */</span>
<a name="l00881"></a>00881     <span class="keywordflow">for</span>(map&lt;string, xine_post_t*&gt;::const_iterator i = <a class="code" href="classMMSAV.html#bc3efb639d2eea18336e3ff764a8beae" title="map of registered video post plugins">videoPostPlugins</a>.begin(); i != <a class="code" href="classMMSAV.html#bc3efb639d2eea18336e3ff764a8beae" title="map of registered video post plugins">videoPostPlugins</a>.end(); ++i)
<a name="l00882"></a>00882         xine_post_wire_video_port(xine_get_video_source(<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>), i-&gt;second-&gt;video_input[0]);
<a name="l00883"></a>00883     <span class="keywordflow">for</span>(map&lt;string, xine_post_t*&gt;::const_iterator i = <a class="code" href="classMMSAV.html#e5355e84e9f5ae552e8162fdef1832c2" title="map of registered audio post plugins">audioPostPlugins</a>.begin(); i != <a class="code" href="classMMSAV.html#e5355e84e9f5ae552e8162fdef1832c2" title="map of registered audio post plugins">audioPostPlugins</a>.end(); ++i)
<a name="l00884"></a>00884         xine_post_wire_audio_port(xine_get_audio_source(<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>), i-&gt;second-&gt;audio_input[0]);
<a name="l00885"></a>00885 
<a name="l00886"></a>00886     <span class="comment">/* set verbosity */</span>
<a name="l00887"></a>00887     <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#9352e248d4cbcac13b9c204770517c28" title="should logging be verbose?">verbose</a>)
<a name="l00888"></a>00888         xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VERBOSITY, XINE_VERBOSITY_DEBUG);
<a name="l00889"></a>00889     <span class="keywordflow">else</span>
<a name="l00890"></a>00890         xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VERBOSITY, XINE_VERBOSITY_NONE);
<a name="l00891"></a>00891 
<a name="l00892"></a>00892     <span class="comment">/*if(this-&gt;vo)</span>
<a name="l00893"></a>00893 <span class="comment">         xine_set_param(this-&gt;stream, XINE_PARAM_VO_DEINTERLACE, false);</span>
<a name="l00894"></a>00894 <span class="comment">*/</span>
<a name="l00895"></a>00895     <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#56de0a4832bf7a27adb442c32fc363ce" title="xine audio ports">ao</a>) {
<a name="l00896"></a>00896         xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_AUDIO_MUTE, <span class="keyword">false</span>);
<a name="l00897"></a>00897         xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_AUDIO_CHANNEL_LOGICAL, -1);
<a name="l00898"></a>00898     }
<a name="l00899"></a>00899 
<a name="l00900"></a>00900     <span class="comment">/* create event listener thread */</span>
<a name="l00901"></a>00901     <span class="keywordflow">if</span>(queue_cb) {
<a name="l00902"></a>00902         this-&gt;<a class="code" href="classMMSAV.html#2b1c43ef2a6f1267d5943cdc0b5ff8fa" title="xine event queue">queue</a> = xine_event_new_queue(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>);
<a name="l00903"></a>00903         <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#2b1c43ef2a6f1267d5943cdc0b5ff8fa" title="xine event queue">queue</a>)
<a name="l00904"></a>00904             xine_event_create_listener_thread(this-&gt;<a class="code" href="classMMSAV.html#2b1c43ef2a6f1267d5943cdc0b5ff8fa" title="xine event queue">queue</a>, queue_cb, userData);
<a name="l00905"></a>00905         <span class="keywordflow">else</span>
<a name="l00906"></a>00906             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"Could not create event listener"</span>);
<a name="l00907"></a>00907     }
<a name="l00908"></a>00908 }
<a name="l00909"></a>00909 
<a name="l00910"></a>00910 <span class="preprocessor">#endif</span>
<a name="l00911"></a>00911 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00912"></a>00912 <span class="comment">/**</span>
<a name="l00913"></a>00913 <span class="comment"> * Registers a xine audio post plugin.</span>
<a name="l00914"></a>00914 <span class="comment"> *</span>
<a name="l00915"></a>00915 <span class="comment"> * Post plugin will be initialized.</span>
<a name="l00916"></a>00916 <span class="comment"> *</span>
<a name="l00917"></a>00917 <span class="comment"> * @param   name    [in]    name of the post plugin</span>
<a name="l00918"></a>00918 <span class="comment"> *</span>
<a name="l00919"></a>00919 <span class="comment"> * @return  true if plugin could be initialized correctly</span>
<a name="l00920"></a>00920 <span class="comment"> */</span>
<a name="l00921"></a><a class="code" href="classMMSAV.html#5c7401c1b6f05c428150579d7c0b7ad8">00921</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#5c7401c1b6f05c428150579d7c0b7ad8" title="Registers a xine audio post plugin.">MMSAV::registerAudioPostPlugin</a>(<span class="keywordtype">string</span> name) {
<a name="l00922"></a>00922     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a> == <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>) {
<a name="l00923"></a>00923 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l00924"></a>00924 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00925"></a>00925 <span class="preprocessor">#endif</span>
<a name="l00926"></a>00926 <span class="preprocessor"></span>    }
<a name="l00927"></a>00927     <span class="keywordflow">else</span> {
<a name="l00928"></a>00928 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l00929"></a>00929 <span class="preprocessor"></span>        xine_post_t *p;
<a name="l00930"></a>00930 
<a name="l00931"></a>00931         <span class="keywordflow">if</span>(!(p = xine_post_init(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, name.c_str(), 1, &amp;this-&gt;<a class="code" href="classMMSAV.html#56de0a4832bf7a27adb442c32fc363ce" title="xine audio ports">ao</a>, NULL)))
<a name="l00932"></a>00932             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"Could not initialize audio post plugin %s"</span>, name.c_str());
<a name="l00933"></a>00933         <span class="keywordflow">else</span> {
<a name="l00934"></a>00934             <a class="code" href="classMMSAV.html#e5355e84e9f5ae552e8162fdef1832c2" title="map of registered audio post plugins">audioPostPlugins</a>[name] = p;
<a name="l00935"></a>00935             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00936"></a>00936         }
<a name="l00937"></a>00937 
<a name="l00938"></a>00938         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00939"></a>00939 <span class="preprocessor">#endif</span>
<a name="l00940"></a>00940 <span class="preprocessor"></span>    }
<a name="l00941"></a>00941 
<a name="l00942"></a>00942     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::registerAudioPostPlugin() called but media backend does not match supported backends"</span>);
<a name="l00943"></a>00943 }
<a name="l00944"></a>00944 <span class="comment"></span>
<a name="l00945"></a>00945 <span class="comment">/**</span>
<a name="l00946"></a>00946 <span class="comment"> * Registers a xine video post plugin.</span>
<a name="l00947"></a>00947 <span class="comment"> *</span>
<a name="l00948"></a>00948 <span class="comment"> * Post plugin will be initialized.</span>
<a name="l00949"></a>00949 <span class="comment"> *</span>
<a name="l00950"></a>00950 <span class="comment"> * @param   name    [in]    name of the post plugin</span>
<a name="l00951"></a>00951 <span class="comment"> *</span>
<a name="l00952"></a>00952 <span class="comment"> * @return  true if plugin could be initialized correctly</span>
<a name="l00953"></a>00953 <span class="comment"> */</span>
<a name="l00954"></a><a class="code" href="classMMSAV.html#0c824e75e651b4181a449f4a0864bd24">00954</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#0c824e75e651b4181a449f4a0864bd24" title="Registers a xine video post plugin.">MMSAV::registerVideoPostPlugin</a>(<span class="keywordtype">string</span> name) {
<a name="l00955"></a>00955     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a> == <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>) {
<a name="l00956"></a>00956 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l00957"></a>00957 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00958"></a>00958 <span class="preprocessor">#endif</span>
<a name="l00959"></a>00959 <span class="preprocessor"></span>    }
<a name="l00960"></a>00960     <span class="keywordflow">else</span> {
<a name="l00961"></a>00961 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l00962"></a>00962 <span class="preprocessor"></span>        xine_post_t *p;
<a name="l00963"></a>00963 
<a name="l00964"></a>00964         <span class="keywordflow">if</span>(!(p = xine_post_init(this-&gt;<a class="code" href="classMMSAV.html#88f8ca290f7e49e0daa4e9a6b8d8f295" title="global xine structure">xine</a>, name.c_str(), 1, NULL, &amp;this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>)))
<a name="l00965"></a>00965             <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"Could not initialize video post plugin %s"</span>, name.c_str());
<a name="l00966"></a>00966         <span class="keywordflow">else</span> {
<a name="l00967"></a>00967             <a class="code" href="classMMSAV.html#bc3efb639d2eea18336e3ff764a8beae" title="map of registered video post plugins">videoPostPlugins</a>[name] = p;
<a name="l00968"></a>00968             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00969"></a>00969         }
<a name="l00970"></a>00970 
<a name="l00971"></a>00971         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00972"></a>00972 <span class="preprocessor">#endif</span>
<a name="l00973"></a>00973 <span class="preprocessor"></span>    }
<a name="l00974"></a>00974 
<a name="l00975"></a>00975     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::registerVideoPostPlugin() called but media backend does not match supported backends"</span>);
<a name="l00976"></a>00976 }
<a name="l00977"></a>00977 
<a name="l00978"></a>00978 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l00979"></a>00979 <span class="preprocessor"></span><span class="comment">/**</span>
<a name="l00980"></a>00980 <span class="comment"> * Sets post plugin parameter.</span>
<a name="l00981"></a>00981 <span class="comment"> *</span>
<a name="l00982"></a>00982 <span class="comment"> * @param   plugins     [in]    map of post plugins</span>
<a name="l00983"></a>00983 <span class="comment"> * @param   name        [in]    name of post plugin that will be affected</span>
<a name="l00984"></a>00984 <span class="comment"> * @param   parameter   [in]    parameter to set</span>
<a name="l00985"></a>00985 <span class="comment"> * @param   value       [in]    value for the parameter</span>
<a name="l00986"></a>00986 <span class="comment"> *</span>
<a name="l00987"></a>00987 <span class="comment"> * @return  true if the parameter could be set</span>
<a name="l00988"></a>00988 <span class="comment"> */</span>
<a name="l00989"></a><a class="code" href="classMMSAV.html#b317a2c30300f146e4e522bad43e31b2">00989</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#b317a2c30300f146e4e522bad43e31b2" title="Sets post plugin parameter.">MMSAV::setPostPluginParameter</a>(map&lt;string, xine_post_t*&gt; plugins, <span class="keywordtype">string</span> name, <span class="keywordtype">string</span> parameter, <span class="keywordtype">string</span> value) {
<a name="l00990"></a>00990     xine_post_in_t              *postIn;
<a name="l00991"></a>00991     xine_post_api_t             *postApi;
<a name="l00992"></a>00992     xine_post_api_descr_t       *postApiDesc;
<a name="l00993"></a>00993     xine_post_api_parameter_t   *postApiParam;
<a name="l00994"></a>00994     <span class="keywordtype">char</span>                        *data;
<a name="l00995"></a>00995 
<a name="l00996"></a>00996     <span class="comment">// search for plugin</span>
<a name="l00997"></a>00997     <span class="keywordflow">if</span>(!(postIn = (xine_post_in_t *)xine_post_input(plugins[name], <span class="stringliteral">"parameters"</span>))) {
<a name="l00998"></a>00998         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"Could not set parameter for post plugin %s: Plugin not registered"</span>, name.c_str());
<a name="l00999"></a>00999         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01000"></a>01000     }
<a name="l01001"></a>01001 
<a name="l01002"></a>01002     postApi      = (xine_post_api_t *)postIn-&gt;data;
<a name="l01003"></a>01003     postApiDesc  = postApi-&gt;get_param_descr();
<a name="l01004"></a>01004     postApiParam = postApiDesc-&gt;parameter;
<a name="l01005"></a>01005     data         = <span class="keyword">new</span> <span class="keywordtype">char</span>[postApiDesc-&gt;struct_size];
<a name="l01006"></a>01006     postApi-&gt;get_parameters(plugins[name], (<span class="keywordtype">void</span>*)data);
<a name="l01007"></a>01007 
<a name="l01008"></a>01008     <span class="keywordflow">while</span>(postApiParam-&gt;type != POST_PARAM_TYPE_LAST)
<a name="l01009"></a>01009     {
<a name="l01010"></a>01010         <span class="keywordflow">if</span>(<a class="code" href="tools_8h.html#9cc8f0cf29eba1975b26342af280a1ba">strToUpr</a>(<span class="keywordtype">string</span>(postApiParam-&gt;name)) == <a class="code" href="tools_8h.html#9cc8f0cf29eba1975b26342af280a1ba">strToUpr</a>(parameter)) {
<a name="l01011"></a>01011             <span class="keywordflow">if</span>(postApiParam-&gt;type == POST_PARAM_TYPE_INT) {
<a name="l01012"></a>01012                 <span class="keywordtype">int</span> iValue = atoi(value.c_str());
<a name="l01013"></a>01013 
<a name="l01014"></a>01014                 <span class="comment">// check if the name of an enumeration is used</span>
<a name="l01015"></a>01015                 <span class="keywordflow">if</span>(iValue == 0 &amp;&amp; value.at(0) != <span class="charliteral">'0'</span>) {
<a name="l01016"></a>01016                     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; postApiParam-&gt;enum_values[i]; i++) {
<a name="l01017"></a>01017                         <span class="keywordflow">if</span>(value == postApiParam-&gt;enum_values[i]) {
<a name="l01018"></a>01018                             iValue = i;
<a name="l01019"></a>01019                             <span class="keywordflow">break</span>;
<a name="l01020"></a>01020                         }
<a name="l01021"></a>01021                     }
<a name="l01022"></a>01022                 } <span class="keywordflow">else</span> {
<a name="l01023"></a>01023                     <span class="comment">// check if value is out of range</span>
<a name="l01024"></a>01024                     <span class="keywordflow">if</span>(iValue &lt; postApiParam-&gt;range_min || iValue &gt; postApiParam-&gt;range_max) {
<a name="l01025"></a>01025                         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"Could not set %s's %s to %s: Out of range"</span>, name.c_str(), parameter.c_str(), value.c_str());
<a name="l01026"></a>01026                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01027"></a>01027                     }
<a name="l01028"></a>01028                 }
<a name="l01029"></a>01029 
<a name="l01030"></a>01030                 <span class="comment">// set value</span>
<a name="l01031"></a>01031                 *(<span class="keywordtype">int</span> *)(data + postApiParam-&gt;offset) = iValue;
<a name="l01032"></a>01032                 <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"%s: %s = %s"</span>, name.c_str(), parameter.c_str(), postApiParam-&gt;enum_values[*(<span class="keywordtype">int</span> *)(data + postApiParam-&gt;offset)]);
<a name="l01033"></a>01033             }
<a name="l01034"></a>01034             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(postApiParam-&gt;type == POST_PARAM_TYPE_DOUBLE) {
<a name="l01035"></a>01035                 <span class="keywordtype">double</span> dValue = atof(value.c_str());
<a name="l01036"></a>01036 
<a name="l01037"></a>01037                 <span class="comment">// check if value is out of range</span>
<a name="l01038"></a>01038                 <span class="keywordflow">if</span>(dValue &lt; postApiParam-&gt;range_min || dValue &gt; postApiParam-&gt;range_max) {
<a name="l01039"></a>01039                     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"Could not set %s's %s to %s: Out of range"</span>, name.c_str(), parameter.c_str(), value.c_str());
<a name="l01040"></a>01040                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01041"></a>01041                 }
<a name="l01042"></a>01042 
<a name="l01043"></a>01043                 <span class="comment">// set value</span>
<a name="l01044"></a>01044                *(<span class="keywordtype">double</span> *)(data + postApiParam-&gt;offset) = dValue;
<a name="l01045"></a>01045                <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"%s: %s = %s"</span>, name.c_str(), parameter.c_str(), value.c_str());
<a name="l01046"></a>01046             }
<a name="l01047"></a>01047             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(postApiParam-&gt;type == POST_PARAM_TYPE_BOOL) {
<a name="l01048"></a>01048                 <span class="keywordtype">bool</span> bValue = <span class="keyword">false</span>;
<a name="l01049"></a>01049                 <span class="keywordflow">if</span>(value == <span class="stringliteral">"1"</span> || <a class="code" href="tools_8h.html#9cc8f0cf29eba1975b26342af280a1ba">strToUpr</a>(value) == <span class="stringliteral">"TRUE"</span>)
<a name="l01050"></a>01050                     bValue = <span class="keyword">true</span>;
<a name="l01051"></a>01051                *(<span class="keywordtype">bool</span> *)(data + postApiParam-&gt;offset) = bValue;
<a name="l01052"></a>01052                <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"%s: = %s"</span>, name.c_str(), parameter.c_str(), (bValue ? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span>));
<a name="l01053"></a>01053             }
<a name="l01054"></a>01054             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(postApiParam-&gt;type == POST_PARAM_TYPE_CHAR) {
<a name="l01055"></a>01055                 <span class="keywordtype">char</span> cValue = value.at(0);
<a name="l01056"></a>01056                *(<span class="keywordtype">char</span> *)(data + postApiParam-&gt;offset) = cValue;
<a name="l01057"></a>01057                <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"%s: %s = %c"</span>, name.c_str(), parameter.c_str(), cValue);
<a name="l01058"></a>01058             }
<a name="l01059"></a>01059             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(postApiParam-&gt;type == POST_PARAM_TYPE_STRING) {
<a name="l01060"></a>01060                 <span class="keywordtype">char</span> *sValue = (<span class="keywordtype">char</span>*)value.c_str();
<a name="l01061"></a>01061                *(<span class="keywordtype">char</span> **)(data + postApiParam-&gt;offset) = sValue;
<a name="l01062"></a>01062                <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"%s: %s = %s"</span>, name.c_str(), parameter.c_str(), sValue);
<a name="l01063"></a>01063             }
<a name="l01064"></a>01064             <span class="keywordflow">break</span>;
<a name="l01065"></a>01065         }
<a name="l01066"></a>01066         postApiParam++;
<a name="l01067"></a>01067     }
<a name="l01068"></a>01068 
<a name="l01069"></a>01069     <span class="keywordflow">if</span>(!postApi-&gt;set_parameters(plugins[name], (<span class="keywordtype">void</span> *)data))
<a name="l01070"></a>01070         <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSMedia"</span>, <span class="stringliteral">"Error setting post plugin parameter"</span>);
<a name="l01071"></a>01071 
<a name="l01072"></a>01072     <span class="keyword">delete</span>[] data;
<a name="l01073"></a>01073 
<a name="l01074"></a>01074     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01075"></a>01075 }
<a name="l01076"></a>01076 <span class="preprocessor">#endif</span>
<a name="l01077"></a>01077 <span class="preprocessor"></span><span class="comment"></span>
<a name="l01078"></a>01078 <span class="comment">/**</span>
<a name="l01079"></a>01079 <span class="comment"> * Sets audio post plugin parameter.</span>
<a name="l01080"></a>01080 <span class="comment"> *</span>
<a name="l01081"></a>01081 <span class="comment"> * @param   name        [in]    name of post plugin that will be affected</span>
<a name="l01082"></a>01082 <span class="comment"> * @param   parameter   [in]    parameter to set</span>
<a name="l01083"></a>01083 <span class="comment"> * @param   value       [in]    value for the parameter</span>
<a name="l01084"></a>01084 <span class="comment"> *</span>
<a name="l01085"></a>01085 <span class="comment"> * @return  true if the parameter could be set</span>
<a name="l01086"></a>01086 <span class="comment"> *</span>
<a name="l01087"></a>01087 <span class="comment"> * @see     MMSAV::setPostPluginParameter</span>
<a name="l01088"></a>01088 <span class="comment"> * @see     MMSAV::setVideoPostPluginParameter</span>
<a name="l01089"></a>01089 <span class="comment"> */</span>
<a name="l01090"></a><a class="code" href="classMMSAV.html#27ebbfa0661dd40b3465e61db64e046b">01090</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#27ebbfa0661dd40b3465e61db64e046b" title="Sets audio post plugin parameter.">MMSAV::setAudioPostPluginParameter</a>(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> parameter, <span class="keywordtype">string</span> value) {
<a name="l01091"></a>01091     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a> == <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>) {
<a name="l01092"></a>01092 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01093"></a>01093 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01094"></a>01094 <span class="preprocessor">#endif</span>
<a name="l01095"></a>01095 <span class="preprocessor"></span>    }
<a name="l01096"></a>01096     <span class="keywordflow">else</span> {
<a name="l01097"></a>01097 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01098"></a>01098 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="classMMSAV.html#b317a2c30300f146e4e522bad43e31b2" title="Sets post plugin parameter.">setPostPluginParameter</a>(this-&gt;<a class="code" href="classMMSAV.html#e5355e84e9f5ae552e8162fdef1832c2" title="map of registered audio post plugins">audioPostPlugins</a>, name, parameter, value);
<a name="l01099"></a>01099 <span class="preprocessor">#endif</span>
<a name="l01100"></a>01100 <span class="preprocessor"></span>    }
<a name="l01101"></a>01101 
<a name="l01102"></a>01102     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::setAudioPostPluginParameter() called but media backend does not match supported backends"</span>);
<a name="l01103"></a>01103 }
<a name="l01104"></a>01104 <span class="comment"></span>
<a name="l01105"></a>01105 <span class="comment">/**</span>
<a name="l01106"></a>01106 <span class="comment"> * Sets video post plugin parameter.</span>
<a name="l01107"></a>01107 <span class="comment"> *</span>
<a name="l01108"></a>01108 <span class="comment"> * @param   name        [in]    name of post plugin that will be affected</span>
<a name="l01109"></a>01109 <span class="comment"> * @param   parameter   [in]    parameter to set</span>
<a name="l01110"></a>01110 <span class="comment"> * @param   value       [in]    value for the parameter</span>
<a name="l01111"></a>01111 <span class="comment"> *</span>
<a name="l01112"></a>01112 <span class="comment"> * @return  true if the parameter could be set</span>
<a name="l01113"></a>01113 <span class="comment"> *</span>
<a name="l01114"></a>01114 <span class="comment"> * @see     MMSAV::setPostPluginParameter</span>
<a name="l01115"></a>01115 <span class="comment"> * @see     MMSAV::setAudioPostPluginParameter</span>
<a name="l01116"></a>01116 <span class="comment"> */</span>
<a name="l01117"></a><a class="code" href="classMMSAV.html#0dbb59e8c53ac346a37df42b48d6a9df">01117</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#0dbb59e8c53ac346a37df42b48d6a9df" title="Sets video post plugin parameter.">MMSAV::setVideoPostPluginParameter</a>(<span class="keywordtype">string</span> name, <span class="keywordtype">string</span> parameter, <span class="keywordtype">string</span> value) {
<a name="l01118"></a>01118     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a> == <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>) {
<a name="l01119"></a>01119 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01120"></a>01120 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01121"></a>01121 <span class="preprocessor">#endif</span>
<a name="l01122"></a>01122 <span class="preprocessor"></span>    }
<a name="l01123"></a>01123     <span class="keywordflow">else</span> {
<a name="l01124"></a>01124 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01125"></a>01125 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="classMMSAV.html#b317a2c30300f146e4e522bad43e31b2" title="Sets post plugin parameter.">setPostPluginParameter</a>(this-&gt;<a class="code" href="classMMSAV.html#bc3efb639d2eea18336e3ff764a8beae" title="map of registered video post plugins">videoPostPlugins</a>, name, parameter, value);
<a name="l01126"></a>01126 <span class="preprocessor">#endif</span>
<a name="l01127"></a>01127 <span class="preprocessor"></span>    }
<a name="l01128"></a>01128 
<a name="l01129"></a>01129     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::setVideoPostPluginParameter() called but media backend does not match supported backends"</span>);
<a name="l01130"></a>01130 }
<a name="l01131"></a>01131 
<a name="l01132"></a>01132 
<a name="l01133"></a>01133 <span class="comment"></span>
<a name="l01134"></a>01134 <span class="comment">/**</span>
<a name="l01135"></a>01135 <span class="comment"> * Sets internal status of sound/video playback.</span>
<a name="l01136"></a>01136 <span class="comment"> *</span>
<a name="l01137"></a>01137 <span class="comment"> * It also emits a signal, which can be handled using the</span>
<a name="l01138"></a>01138 <span class="comment"> * sigc++ connectors.</span>
<a name="l01139"></a>01139 <span class="comment"> *</span>
<a name="l01140"></a>01140 <span class="comment"> * @param   status  [in]    status to set</span>
<a name="l01141"></a>01141 <span class="comment"> *</span>
<a name="l01142"></a>01142 <span class="comment"> * @see MMSAV::onStatusChange</span>
<a name="l01143"></a>01143 <span class="comment"> */</span>
<a name="l01144"></a><a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0">01144</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">MMSAV::setStatus</a>(<span class="keywordtype">int</span> <a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a>) {
<a name="l01145"></a>01145     <span class="keywordflow">switch</span>(status) {
<a name="l01146"></a>01146         <span class="keywordflow">case</span> <a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a> :
<a name="l01147"></a>01147             <span class="keywordflow">if</span>(this-&gt;status != this-&gt;<a class="code" href="classMMSAV.html#d5d338283717c83cf20a90fdd7c8fc11" title="status not set">STATUS_NONE</a>)
<a name="l01148"></a>01148                 this-&gt;<a class="code" href="classMMSAV.html#22a2f4b19b8a4a14bc8e27eeb999e22b" title="Callback that is used to receive status changes.">onStatusChange</a>-&gt;emit(this-&gt;status, status);
<a name="l01149"></a>01149             this-&gt;status = status;
<a name="l01150"></a>01150             <span class="keywordflow">return</span>;
<a name="l01151"></a>01151         <span class="keywordflow">case</span> <a class="code" href="classMMSAV.html#9b4ec818af8ca5f18ac0928b8083a719" title="stream is being paused">STATUS_PAUSED</a>  :
<a name="l01152"></a>01152         <span class="keywordflow">case</span> <a class="code" href="classMMSAV.html#a03de6e98491d302d9ec9b773c1486ee" title="stream was stopped">STATUS_STOPPED</a> :
<a name="l01153"></a>01153         <span class="keywordflow">case</span> <a class="code" href="classMMSAV.html#5bf816e7ceae1afb23c2187dea1e07f1" title="stream is being fast forwarded (2x)">STATUS_FFWD</a>    :
<a name="l01154"></a>01154         <span class="keywordflow">case</span> <a class="code" href="classMMSAV.html#8b6561652a0ff63e872906dfe48e5a32" title="stream is being fast forwarded (4x)">STATUS_FFWD2</a>   :
<a name="l01155"></a>01155         <span class="keywordflow">case</span> <a class="code" href="classMMSAV.html#7d477d6ab7aa65a3dfb65e79f2db6c8f" title="stream is being played slowly (2x)">STATUS_SLOW</a>    :
<a name="l01156"></a>01156         <span class="keywordflow">case</span> <a class="code" href="classMMSAV.html#619c0d4bbf9718a883fef56e69f62960" title="stream is being played slowly (4x)">STATUS_SLOW2</a>   :
<a name="l01157"></a>01157             this-&gt;<a class="code" href="classMMSAV.html#22a2f4b19b8a4a14bc8e27eeb999e22b" title="Callback that is used to receive status changes.">onStatusChange</a>-&gt;emit(this-&gt;status, status);
<a name="l01158"></a>01158             this-&gt;status = status;
<a name="l01159"></a>01159             <span class="keywordflow">return</span>;
<a name="l01160"></a>01160         <span class="keywordflow">default</span>:
<a name="l01161"></a>01161             <span class="keywordflow">break</span>;
<a name="l01162"></a>01162     }
<a name="l01163"></a>01163 
<a name="l01164"></a>01164     this-&gt;<a class="code" href="classMMSAV.html#22a2f4b19b8a4a14bc8e27eeb999e22b" title="Callback that is used to receive status changes.">onStatusChange</a>-&gt;emit(status, status);
<a name="l01165"></a>01165 }
<a name="l01166"></a>01166 <span class="comment"></span>
<a name="l01167"></a>01167 <span class="comment">/**</span>
<a name="l01168"></a>01168 <span class="comment"> * Determines if a stream is currently being played.</span>
<a name="l01169"></a>01169 <span class="comment"> *</span>
<a name="l01170"></a>01170 <span class="comment"> * @return true if stream is being played</span>
<a name="l01171"></a>01171 <span class="comment"> */</span>
<a name="l01172"></a><a class="code" href="classMMSAV.html#4e65bc03691129ee6b8c1027be0ddf3c">01172</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#4e65bc03691129ee6b8c1027be0ddf3c" title="Determines if a stream is currently being played.">MMSAV::isPlaying</a>() {
<a name="l01173"></a>01173     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01174"></a>01174         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01175"></a>01175 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01176"></a>01176 <span class="preprocessor"></span>            <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == <a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a>);
<a name="l01177"></a>01177 <span class="preprocessor">#endif</span>
<a name="l01178"></a>01178 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01179"></a>01179         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01180"></a>01180 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01181"></a>01181 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == <a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a>) {
<a name="l01182"></a>01182                 <span class="keywordflow">if</span>(xine_get_status(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>)!=XINE_STATUS_PLAY) {
<a name="l01183"></a>01183                     this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(<a class="code" href="classMMSAV.html#a03de6e98491d302d9ec9b773c1486ee" title="stream was stopped">STATUS_STOPPED</a>);
<a name="l01184"></a>01184                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01185"></a>01185                 }
<a name="l01186"></a>01186                 <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01187"></a>01187             }
<a name="l01188"></a>01188             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01189"></a>01189 <span class="preprocessor">#endif</span>
<a name="l01190"></a>01190 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01191"></a>01191         <span class="keywordflow">default</span>:
<a name="l01192"></a>01192             <span class="comment">// shouldn't be reached</span>
<a name="l01193"></a>01193             <span class="keywordflow">break</span>;
<a name="l01194"></a>01194     }
<a name="l01195"></a>01195 
<a name="l01196"></a>01196     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::isPlaying() called but media backend does not match supported backends"</span>);
<a name="l01197"></a>01197 }
<a name="l01198"></a>01198 <span class="comment"></span>
<a name="l01199"></a>01199 <span class="comment">/**</span>
<a name="l01200"></a>01200 <span class="comment"> * Determines if a stream is currently being paused.</span>
<a name="l01201"></a>01201 <span class="comment"> *</span>
<a name="l01202"></a>01202 <span class="comment"> * @return true if stream is being paused</span>
<a name="l01203"></a>01203 <span class="comment"> */</span>
<a name="l01204"></a><a class="code" href="classMMSAV.html#782106a3b483df505c1ccbfbbfb7822c">01204</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#782106a3b483df505c1ccbfbbfb7822c" title="Determines if a stream is currently being paused.">MMSAV::isPaused</a>() {
<a name="l01205"></a>01205     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01206"></a>01206         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01207"></a>01207 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01208"></a>01208 <span class="preprocessor"></span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01209"></a>01209 <span class="preprocessor">#endif</span>
<a name="l01210"></a>01210 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01211"></a>01211         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01212"></a>01212 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01213"></a>01213 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == <a class="code" href="classMMSAV.html#9b4ec818af8ca5f18ac0928b8083a719" title="stream is being paused">STATUS_PAUSED</a>) {
<a name="l01214"></a>01214                 <span class="keywordflow">if</span>(xine_get_status(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>)!=XINE_STATUS_PLAY) {
<a name="l01215"></a>01215                     this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(<a class="code" href="classMMSAV.html#a03de6e98491d302d9ec9b773c1486ee" title="stream was stopped">STATUS_STOPPED</a>);
<a name="l01216"></a>01216                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01217"></a>01217                 }
<a name="l01218"></a>01218                 <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01219"></a>01219             }
<a name="l01220"></a>01220             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01221"></a>01221 <span class="preprocessor">#endif</span>
<a name="l01222"></a>01222 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01223"></a>01223         <span class="keywordflow">default</span>:
<a name="l01224"></a>01224             <span class="comment">// shouldn't be reached</span>
<a name="l01225"></a>01225             <span class="keywordflow">break</span>;
<a name="l01226"></a>01226     }
<a name="l01227"></a>01227 
<a name="l01228"></a>01228     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::isPaused() called but media backend does not match supported backends"</span>);
<a name="l01229"></a>01229 }
<a name="l01230"></a>01230 <span class="comment"></span>
<a name="l01231"></a>01231 <span class="comment">/**</span>
<a name="l01232"></a>01232 <span class="comment"> * Determines if a stream is in stopped status.</span>
<a name="l01233"></a>01233 <span class="comment"> *</span>
<a name="l01234"></a>01234 <span class="comment"> * @return true if stream is being stopped</span>
<a name="l01235"></a>01235 <span class="comment"> */</span>
<a name="l01236"></a><a class="code" href="classMMSAV.html#a8d9bf06597768c290379ea5811e5f91">01236</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#a8d9bf06597768c290379ea5811e5f91" title="Determines if a stream is in stopped status.">MMSAV::isStopped</a>() {
<a name="l01237"></a>01237     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == <a class="code" href="classMMSAV.html#a03de6e98491d302d9ec9b773c1486ee" title="stream was stopped">STATUS_STOPPED</a>);
<a name="l01238"></a>01238 }
<a name="l01239"></a>01239 <span class="comment"></span>
<a name="l01240"></a>01240 <span class="comment">/**</span>
<a name="l01241"></a>01241 <span class="comment"> * Starts playing.</span>
<a name="l01242"></a>01242 <span class="comment"> *</span>
<a name="l01243"></a>01243 <span class="comment"> * If the continue flag is set it tries to continue</span>
<a name="l01244"></a>01244 <span class="comment"> * at the position where it was stopped before.</span>
<a name="l01245"></a>01245 <span class="comment"> *</span>
<a name="l01246"></a>01246 <span class="comment"> * @param   mrl     [in]    mrl to play</span>
<a name="l01247"></a>01247 <span class="comment"> * @param   cont    [in]    if true it tries to continue at a position stopped before</span>
<a name="l01248"></a>01248 <span class="comment"> *</span>
<a name="l01249"></a>01249 <span class="comment"> * @exception   MMSAVError stream could not be opened</span>
<a name="l01250"></a>01250 <span class="comment"> */</span>
<a name="l01251"></a><a class="code" href="classMMSAV.html#a37dff6d5be57361b400d2eb54b288cb">01251</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#a37dff6d5be57361b400d2eb54b288cb" title="Starts playing.">MMSAV::startPlaying</a>(<span class="keyword">const</span> <span class="keywordtype">string</span> mrl, <span class="keyword">const</span> <span class="keywordtype">bool</span> cont) {
<a name="l01252"></a>01252     <a class="code" href="tools_8h.html#6662ba34e6d2be8c023dd6f0d0cfe717">DEBUGMSG</a>(<span class="stringliteral">"MMSAV"</span>, <span class="stringliteral">"currentMRL: %s mrl: %s status: %d"</span>, <a class="code" href="classMMSAV.html#d3d63cad68ede22c03c7797092d6482d" title="current mrl">currentMRL</a>.c_str(), mrl.c_str(), <a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a>);
<a name="l01253"></a>01253     <span class="keywordflow">if</span>((<a class="code" href="classMMSAV.html#d3d63cad68ede22c03c7797092d6482d" title="current mrl">currentMRL</a> == mrl) &amp;&amp; (this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a>)) <span class="keywordflow">return</span>;
<a name="l01254"></a>01254     this-&gt;<a class="code" href="classMMSAV.html#d3d63cad68ede22c03c7797092d6482d" title="current mrl">currentMRL</a> = mrl;
<a name="l01255"></a>01255 
<a name="l01256"></a>01256     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a> == <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>) {
<a name="l01257"></a>01257 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01258"></a>01258 <span class="preprocessor"></span>
<a name="l01259"></a>01259 
<a name="l01260"></a>01260 <span class="comment">//TODO:new version of MMSAV</span>
<a name="l01261"></a>01261 <span class="comment">//TODO:version with playbin without disko video sink and without GST://</span>
<a name="l01262"></a>01262 
<a name="l01263"></a>01263         <span class="comment">// disable VIDEO LAYER - only for test</span>
<a name="l01264"></a>01264         <a class="code" href="classMMSFBLayer.html" title="This class describes a display layer.">MMSFBLayer</a> *vl = <a class="code" href="mmsfbmanager_8h.html#f877077f9a7834955ae76f161e6471ef">mmsfbmanager</a>.<a class="code" href="classMMSFBManager.html#a14ee62238e0077aa337a8e1baa2648b">getVideoLayer</a>();
<a name="l01265"></a>01265         <span class="keywordflow">if</span> (vl != <a class="code" href="mmsfbmanager_8h.html#f877077f9a7834955ae76f161e6471ef">mmsfbmanager</a>.<a class="code" href="classMMSFBManager.html#f4b3d5214cb61bc8cd9f7b8fa4751825">getGraphicsLayer</a>())
<a name="l01266"></a>01266             vl-&gt;<a class="code" href="classMMSFBLayer.html#e80a03477f16001782864df3191884a5">releaseLayer</a>();
<a name="l01267"></a>01267 
<a name="l01268"></a>01268 
<a name="l01269"></a>01269 
<a name="l01270"></a>01270         <span class="comment">// init gst pipe</span>
<a name="l01271"></a>01271         this-&gt;<a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a> = <a class="code" href="mmsgst_8h.html#2fb1df1200bce60e0124216226835638" title="init a gstreamer pipeline with an uri and connect it to an surface">mmsGstInit</a>(<a class="code" href="classMMSAV.html#d3d63cad68ede22c03c7797092d6482d" title="current mrl">currentMRL</a>, this-&gt;<a class="code" href="classMMSAV.html#f87a6cb127445d55ad021b9d57438963" title="window which displays the stream">window</a>-&gt;<a class="code" href="classMMSWindow.html#871979eb7faf0654d948c49d118d32db" title="Get access to the surface of the window needed to display video streams.">getSurface</a>());
<a name="l01272"></a>01272         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a>)
<a name="l01273"></a>01273             <span class="keywordflow">return</span>;
<a name="l01274"></a>01274         this-&gt;<a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#4ee8bc7176312f3b0e3386f7a947606e" title="uri which is to play">uri</a> = <a class="code" href="classMMSAV.html#d3d63cad68ede22c03c7797092d6482d" title="current mrl">currentMRL</a>;
<a name="l01275"></a>01275 
<a name="l01276"></a>01276         <span class="comment">// play the pipe</span>
<a name="l01277"></a>01277         pthread_t thread;
<a name="l01278"></a>01278         <span class="keywordflow">if</span>(pthread_create(&amp;thread, NULL, (<span class="keywordtype">void</span>* (*)(<span class="keywordtype">void</span>*))<a class="code" href="mmsav_8cpp.html#9ac7c0412dd1ba277980d3f77a2c11d8">gstPlayRoutine</a>, &amp;this-&gt;<a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>) == 0)
<a name="l01279"></a>01279             pthread_detach(thread);
<a name="l01280"></a>01280 
<a name="l01281"></a>01281 <span class="preprocessor">#endif</span>
<a name="l01282"></a>01282 <span class="preprocessor"></span>    }
<a name="l01283"></a>01283     <span class="keywordflow">else</span> {
<a name="l01284"></a>01284 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01285"></a>01285 <span class="preprocessor"></span>
<a name="l01286"></a>01286         <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>) this-&gt;<a class="code" href="classMMSAV.html#408000d9d5c92bc2a849d0e1a56ffdd9" title="Opens an audio/video object.">xineOpen</a>();
<a name="l01287"></a>01287 
<a name="l01288"></a>01288         <span class="keywordflow">if</span>(!cont) this-&gt;<a class="code" href="classMMSAV.html#c0e477638485b2597388ad95d554f51b" title="remember position where the stream stopped last time">pos</a> = 0;
<a name="l01289"></a>01289 
<a name="l01290"></a>01290         <span class="comment">/* start playing in extra thread to avoid blocking the application */</span>
<a name="l01291"></a>01291         <span class="comment">//pthread_t thread;</span>
<a name="l01292"></a>01292         <a class="code" href="structinternalStreamData.html">internalStreamData</a> *streamData = <span class="keyword">new</span> <a class="code" href="structinternalStreamData.html">internalStreamData</a>;
<a name="l01293"></a>01293         streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a> = this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>;
<a name="l01294"></a>01294         streamData-&gt;<a class="code" href="structinternalStreamData.html#934bd58eec33edf0ed5ea4c907bf3fd5">pos</a>    = this-&gt;<a class="code" href="classMMSAV.html#c0e477638485b2597388ad95d554f51b" title="remember position where the stream stopped last time">pos</a>;
<a name="l01295"></a>01295         streamData-&gt;<a class="code" href="structinternalStreamData.html#dac0835f504a0b7a8782de9338bd3990">status</a> = &amp;(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a>);
<a name="l01296"></a>01296         streamData-&gt;<a class="code" href="structinternalStreamData.html#98b8a3eba413b740e797f2ac52c65d03">mrl</a>    = mrl.c_str();
<a name="l01297"></a>01297         streamData-&gt;<a class="code" href="structinternalStreamData.html#4a8f4a74912ea6268416a7da93b62709">lock</a>   = &amp;(this-&gt;<a class="code" href="classMMSAV.html#d65293b3b61935e6456a5d5b964c1e55">lock</a>);
<a name="l01298"></a>01298         <span class="comment">/*if(pthread_create(&amp;thread, NULL, xinePlayRoutine, streamData) == 0)</span>
<a name="l01299"></a>01299 <span class="comment">            pthread_detach(thread);</span>
<a name="l01300"></a>01300 <span class="comment">        else*/</span>
<a name="l01301"></a>01301             <a class="code" href="mmsav_8cpp.html#2cf57420395d345b0cd58bd11ac5302c">xinePlayRoutine</a>(streamData);
<a name="l01302"></a>01302 
<a name="l01303"></a>01303 <span class="preprocessor">#endif</span>
<a name="l01304"></a>01304 <span class="preprocessor"></span>    }
<a name="l01305"></a>01305 }
<a name="l01306"></a>01306 <span class="comment"></span>
<a name="l01307"></a>01307 <span class="comment">/**</span>
<a name="l01308"></a>01308 <span class="comment"> * Continues playing.</span>
<a name="l01309"></a>01309 <span class="comment"> *</span>
<a name="l01310"></a>01310 <span class="comment"> * It only works if playing was stopped or speed</span>
<a name="l01311"></a>01311 <span class="comment"> * changed to other than normal.</span>
<a name="l01312"></a>01312 <span class="comment"> */</span>
<a name="l01313"></a><a class="code" href="classMMSAV.html#40719749398a8549fc33bd5690cf32f3">01313</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#40719749398a8549fc33bd5690cf32f3" title="Continues playing.">MMSAV::play</a>() {
<a name="l01314"></a>01314     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01315"></a>01315         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01316"></a>01316 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01317"></a>01317 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01318"></a>01318 <span class="preprocessor">#endif</span>
<a name="l01319"></a>01319 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01320"></a>01320         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01321"></a>01321 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01322"></a>01322 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>) <span class="keywordflow">return</span>;
<a name="l01323"></a>01323 
<a name="l01324"></a>01324             <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#9b4ec818af8ca5f18ac0928b8083a719" title="stream is being paused">STATUS_PAUSED</a>  ||
<a name="l01325"></a>01325                this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#7d477d6ab7aa65a3dfb65e79f2db6c8f" title="stream is being played slowly (2x)">STATUS_SLOW</a>    ||
<a name="l01326"></a>01326                this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#619c0d4bbf9718a883fef56e69f62960" title="stream is being played slowly (4x)">STATUS_SLOW2</a>   ||
<a name="l01327"></a>01327                this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#5bf816e7ceae1afb23c2187dea1e07f1" title="stream is being fast forwarded (2x)">STATUS_FFWD</a>    ||
<a name="l01328"></a>01328                this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#8b6561652a0ff63e872906dfe48e5a32" title="stream is being fast forwarded (4x)">STATUS_FFWD2</a>) {
<a name="l01329"></a>01329                this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a>);
<a name="l01330"></a>01330                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_NORMAL);
<a name="l01331"></a>01331             }
<a name="l01332"></a>01332             <span class="keywordflow">return</span>;
<a name="l01333"></a>01333 <span class="preprocessor">#endif</span>
<a name="l01334"></a>01334 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01335"></a>01335         <span class="keywordflow">default</span>:
<a name="l01336"></a>01336             <span class="comment">// shouldn't be reached</span>
<a name="l01337"></a>01337             <span class="keywordflow">break</span>;
<a name="l01338"></a>01338     }
<a name="l01339"></a>01339 
<a name="l01340"></a>01340     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::play() called but media backend does not match supported backends"</span>);
<a name="l01341"></a>01341 }
<a name="l01342"></a>01342 <span class="comment"></span>
<a name="l01343"></a>01343 <span class="comment">/**</span>
<a name="l01344"></a>01344 <span class="comment"> * Stops playing.</span>
<a name="l01345"></a>01345 <span class="comment"> *</span>
<a name="l01346"></a>01346 <span class="comment"> * @param   savePosition    [in]    if true stream position will be saved for continuation</span>
<a name="l01347"></a>01347 <span class="comment"> *</span>
<a name="l01348"></a>01348 <span class="comment"> * It saves the position, so if you call MMSAV::play()</span>
<a name="l01349"></a>01349 <span class="comment"> * afterwards with the continue flag set, it will continue</span>
<a name="l01350"></a>01350 <span class="comment"> * at this position.</span>
<a name="l01351"></a>01351 <span class="comment"> */</span>
<a name="l01352"></a><a class="code" href="classMMSAV.html#af0aff9e562c0ec530cbf942455df167">01352</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#af0aff9e562c0ec530cbf942455df167" title="Stops playing.">MMSAV::stop</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> savePosition) {
<a name="l01353"></a>01353     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01354"></a>01354         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01355"></a>01355 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01356"></a>01356 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01357"></a>01357 <span class="preprocessor">#endif</span>
<a name="l01358"></a>01358 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01359"></a>01359         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>: {
<a name="l01360"></a>01360 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01361"></a>01361 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>) <span class="keywordflow">return</span>;
<a name="l01362"></a>01362 
<a name="l01363"></a>01363             <span class="comment">/* save position */</span>
<a name="l01364"></a>01364             <span class="keywordflow">if</span>(savePosition)
<a name="l01365"></a>01365                 xine_get_pos_length(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, &amp;this-&gt;<a class="code" href="classMMSAV.html#c0e477638485b2597388ad95d554f51b" title="remember position where the stream stopped last time">pos</a>, NULL, NULL);
<a name="l01366"></a>01366 
<a name="l01367"></a>01367             <span class="comment">/* stop xine in extra thread to avoid blocking the application */</span>
<a name="l01368"></a>01368             <span class="comment">//pthread_t thread;</span>
<a name="l01369"></a>01369             <a class="code" href="structinternalStreamData.html">internalStreamData</a> *streamData = <span class="keyword">new</span> <a class="code" href="structinternalStreamData.html">internalStreamData</a>;
<a name="l01370"></a>01370             streamData-&gt;<a class="code" href="structinternalStreamData.html#1f63a8ef100fb74af43664e284bbab13">stream</a> = this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>;
<a name="l01371"></a>01371             streamData-&gt;<a class="code" href="structinternalStreamData.html#dac0835f504a0b7a8782de9338bd3990">status</a> = &amp;(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a>);
<a name="l01372"></a>01372             streamData-&gt;<a class="code" href="structinternalStreamData.html#4a8f4a74912ea6268416a7da93b62709">lock</a>   = &amp;(this-&gt;<a class="code" href="classMMSAV.html#d65293b3b61935e6456a5d5b964c1e55">lock</a>);
<a name="l01373"></a>01373             <span class="comment">/*if(pthread_create(&amp;thread, NULL, stopRoutine, streamData) == 0)</span>
<a name="l01374"></a>01374 <span class="comment">                pthread_detach(thread);</span>
<a name="l01375"></a>01375 <span class="comment">            else*/</span>
<a name="l01376"></a>01376                 <a class="code" href="mmsav_8cpp.html#6d987dda3c4d30404e08d89ec93a3b91">stopRoutine</a>(streamData);
<a name="l01377"></a>01377             <span class="keywordflow">return</span>;
<a name="l01378"></a>01378 <span class="preprocessor">#endif</span>
<a name="l01379"></a>01379 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01380"></a>01380         }
<a name="l01381"></a>01381         <span class="keywordflow">default</span>:
<a name="l01382"></a>01382             <span class="comment">// shouldn't be reached</span>
<a name="l01383"></a>01383             <span class="keywordflow">break</span>;
<a name="l01384"></a>01384     }
<a name="l01385"></a>01385 
<a name="l01386"></a>01386     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::stop() called but media backend does not match supported backends"</span>);
<a name="l01387"></a>01387 }
<a name="l01388"></a>01388 <span class="comment"></span>
<a name="l01389"></a>01389 <span class="comment">/**</span>
<a name="l01390"></a>01390 <span class="comment"> * Pauses.</span>
<a name="l01391"></a>01391 <span class="comment"> *</span>
<a name="l01392"></a>01392 <span class="comment"> * It only works if stream is playing (can be slow,</span>
<a name="l01393"></a>01393 <span class="comment"> * ffwd etc.).</span>
<a name="l01394"></a>01394 <span class="comment"> */</span>
<a name="l01395"></a><a class="code" href="classMMSAV.html#f48948db5ee0b86f8c1c7d513957fb9d">01395</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#f48948db5ee0b86f8c1c7d513957fb9d" title="Pauses.">MMSAV::pause</a>() {
<a name="l01396"></a>01396     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01397"></a>01397         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01398"></a>01398 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01399"></a>01399 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01400"></a>01400 <span class="preprocessor">#endif</span>
<a name="l01401"></a>01401 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01402"></a>01402         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01403"></a>01403 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01404"></a>01404 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a> ||
<a name="l01405"></a>01405                this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#7d477d6ab7aa65a3dfb65e79f2db6c8f" title="stream is being played slowly (2x)">STATUS_SLOW</a>    ||
<a name="l01406"></a>01406                this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#619c0d4bbf9718a883fef56e69f62960" title="stream is being played slowly (4x)">STATUS_SLOW2</a>   ||
<a name="l01407"></a>01407                this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#5bf816e7ceae1afb23c2187dea1e07f1" title="stream is being fast forwarded (2x)">STATUS_FFWD</a>    ||
<a name="l01408"></a>01408                this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#8b6561652a0ff63e872906dfe48e5a32" title="stream is being fast forwarded (4x)">STATUS_FFWD2</a>) {
<a name="l01409"></a>01409                this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#9b4ec818af8ca5f18ac0928b8083a719" title="stream is being paused">STATUS_PAUSED</a>);
<a name="l01410"></a>01410                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_PAUSE);
<a name="l01411"></a>01411                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_AUDIO_CLOSE_DEVICE, 1);
<a name="l01412"></a>01412             }
<a name="l01413"></a>01413             <span class="keywordflow">return</span>;
<a name="l01414"></a>01414 <span class="preprocessor">#endif</span>
<a name="l01415"></a>01415 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01416"></a>01416         <span class="keywordflow">default</span>:
<a name="l01417"></a>01417             <span class="comment">// shouldn't be reached</span>
<a name="l01418"></a>01418             <span class="keywordflow">break</span>;
<a name="l01419"></a>01419     }
<a name="l01420"></a>01420 
<a name="l01421"></a>01421     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::pause() called but media backend does not match supported backends"</span>);
<a name="l01422"></a>01422 }
<a name="l01423"></a>01423 <span class="comment"></span>
<a name="l01424"></a>01424 <span class="comment">/**</span>
<a name="l01425"></a>01425 <span class="comment"> * Playback will be switched to slow motion.</span>
<a name="l01426"></a>01426 <span class="comment"> *</span>
<a name="l01427"></a>01427 <span class="comment"> * There are two different speed settings for slow motion.</span>
<a name="l01428"></a>01428 <span class="comment"> * Twice as slow and four times as slow.</span>
<a name="l01429"></a>01429 <span class="comment"> *</span>
<a name="l01430"></a>01430 <span class="comment"> * @see MMSAV::ffwd()</span>
<a name="l01431"></a>01431 <span class="comment"> * @see MMSAV::rewind()</span>
<a name="l01432"></a>01432 <span class="comment"> */</span>
<a name="l01433"></a><a class="code" href="classMMSAV.html#e3e5c81986278f1018486760c7486b43">01433</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#e3e5c81986278f1018486760c7486b43" title="Playback will be switched to slow motion.">MMSAV::slow</a>() {
<a name="l01434"></a>01434     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01435"></a>01435         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01436"></a>01436 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01437"></a>01437 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01438"></a>01438 <span class="preprocessor">#endif</span>
<a name="l01439"></a>01439 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01440"></a>01440         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01441"></a>01441 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01442"></a>01442 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a> || this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#9b4ec818af8ca5f18ac0928b8083a719" title="stream is being paused">STATUS_PAUSED</a>) {
<a name="l01443"></a>01443                 this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#7d477d6ab7aa65a3dfb65e79f2db6c8f" title="stream is being played slowly (2x)">STATUS_SLOW</a>);
<a name="l01444"></a>01444                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_SLOW_2);
<a name="l01445"></a>01445             }
<a name="l01446"></a>01446             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#7d477d6ab7aa65a3dfb65e79f2db6c8f" title="stream is being played slowly (2x)">STATUS_SLOW</a>) {
<a name="l01447"></a>01447                 this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#619c0d4bbf9718a883fef56e69f62960" title="stream is being played slowly (4x)">STATUS_SLOW2</a>);
<a name="l01448"></a>01448                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_SLOW_4);
<a name="l01449"></a>01449             }
<a name="l01450"></a>01450             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#5bf816e7ceae1afb23c2187dea1e07f1" title="stream is being fast forwarded (2x)">STATUS_FFWD</a>) {
<a name="l01451"></a>01451                 this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a>);
<a name="l01452"></a>01452                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_NORMAL);
<a name="l01453"></a>01453             }
<a name="l01454"></a>01454             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#8b6561652a0ff63e872906dfe48e5a32" title="stream is being fast forwarded (4x)">STATUS_FFWD2</a>) {
<a name="l01455"></a>01455                 this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#5bf816e7ceae1afb23c2187dea1e07f1" title="stream is being fast forwarded (2x)">STATUS_FFWD</a>);
<a name="l01456"></a>01456                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_FAST_2);
<a name="l01457"></a>01457             }
<a name="l01458"></a>01458             <span class="keywordflow">return</span>;
<a name="l01459"></a>01459 <span class="preprocessor">#endif</span>
<a name="l01460"></a>01460 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01461"></a>01461         <span class="keywordflow">default</span>:
<a name="l01462"></a>01462             <span class="comment">// shouldn't be reached</span>
<a name="l01463"></a>01463             <span class="keywordflow">break</span>;
<a name="l01464"></a>01464     }
<a name="l01465"></a>01465 
<a name="l01466"></a>01466     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::slow() called but media backend does not match supported backends"</span>);
<a name="l01467"></a>01467 }
<a name="l01468"></a>01468 <span class="comment"></span>
<a name="l01469"></a>01469 <span class="comment">/**</span>
<a name="l01470"></a>01470 <span class="comment"> * Playback will be switched to fast forward.</span>
<a name="l01471"></a>01471 <span class="comment"> *</span>
<a name="l01472"></a>01472 <span class="comment"> * There are two different speed settings for fast forward.</span>
<a name="l01473"></a>01473 <span class="comment"> * Twice as fast and four times as fast.</span>
<a name="l01474"></a>01474 <span class="comment"> *</span>
<a name="l01475"></a>01475 <span class="comment"> * @see MMSAV::slow()</span>
<a name="l01476"></a>01476 <span class="comment"> * @see MMSAV::rewind()</span>
<a name="l01477"></a>01477 <span class="comment"> */</span>
<a name="l01478"></a><a class="code" href="classMMSAV.html#d86ec46ccc32e7ca4fc51799f3261fb4">01478</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#d86ec46ccc32e7ca4fc51799f3261fb4" title="Playback will be switched to fast forward.">MMSAV::ffwd</a>() {
<a name="l01479"></a>01479     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01480"></a>01480         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01481"></a>01481 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01482"></a>01482 <span class="preprocessor"></span>
<a name="l01483"></a>01483 
<a name="l01484"></a>01484             printf(<span class="stringliteral">"ffwd-------------------------------------\n"</span>);
<a name="l01485"></a>01485 
<a name="l01486"></a>01486 
<a name="l01487"></a>01487 <span class="comment">/*</span>
<a name="l01488"></a>01488 <span class="comment">static void</span>
<a name="l01489"></a>01489 <span class="comment">seek_to_time (GstElement *pipeline,</span>
<a name="l01490"></a>01490 <span class="comment">          gint64      time_nanoseconds)</span>
<a name="l01491"></a>01491 <span class="comment">{</span>
<a name="l01492"></a>01492 <span class="comment">  if (!gst_element_seek (pipeline, 1.0, GST_FORMAT_TIME, GST_SEEK_FLAG_FLUSH,</span>
<a name="l01493"></a>01493 <span class="comment">                         GST_SEEK_TYPE_SET, time_nanoseconds,</span>
<a name="l01494"></a>01494 <span class="comment">                         GST_SEEK_TYPE_NONE, GST_CLOCK_TIME_NONE)) {</span>
<a name="l01495"></a>01495 <span class="comment">    g_print ("Seek failed!\n");</span>
<a name="l01496"></a>01496 <span class="comment">  }</span>
<a name="l01497"></a>01497 <span class="comment">}</span>
<a name="l01498"></a>01498 <span class="comment"></span>
<a name="l01499"></a>01499 <span class="comment"> */</span>
<a name="l01500"></a>01500 <span class="comment">/*</span>
<a name="l01501"></a>01501 <span class="comment">            gst_element_seek(this-&gt;gst_diskovideosink_data.player,</span>
<a name="l01502"></a>01502 <span class="comment">                    1.0,</span>
<a name="l01503"></a>01503 <span class="comment">                    GST_FORMAT_TIME,</span>
<a name="l01504"></a>01504 <span class="comment">                    GST_SEEK_FLAG_FLUSH,</span>
<a name="l01505"></a>01505 <span class="comment">                    GST_SEEK_TYPE_SET,</span>
<a name="l01506"></a>01506 <span class="comment">                    1000*1000*1000,</span>
<a name="l01507"></a>01507 <span class="comment">                    GST_SEEK_TYPE_NONE,</span>
<a name="l01508"></a>01508 <span class="comment">                    GST_CLOCK_TIME_NONE);*/</span>
<a name="l01509"></a>01509                              <span class="comment">/*</span>
<a name="l01510"></a>01510 <span class="comment">                                                                     gdouble rate,</span>
<a name="l01511"></a>01511 <span class="comment">                                                                     GstFormat format,</span>
<a name="l01512"></a>01512 <span class="comment">                                                                     GstSeekFlags flags,</span>
<a name="l01513"></a>01513 <span class="comment">                                                                     GstSeekType cur_type,</span>
<a name="l01514"></a>01514 <span class="comment">                                                                     gint64 cur,</span>
<a name="l01515"></a>01515 <span class="comment">                                                                     GstSeekType stop_type,</span>
<a name="l01516"></a>01516 <span class="comment">                                                                     gint64 stop);*/</span>
<a name="l01517"></a>01517 
<a name="l01518"></a>01518             <span class="keywordflow">return</span>;
<a name="l01519"></a>01519 <span class="preprocessor">#endif</span>
<a name="l01520"></a>01520 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01521"></a>01521         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01522"></a>01522 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01523"></a>01523 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a> || this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#9b4ec818af8ca5f18ac0928b8083a719" title="stream is being paused">STATUS_PAUSED</a>) {
<a name="l01524"></a>01524                 this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#5bf816e7ceae1afb23c2187dea1e07f1" title="stream is being fast forwarded (2x)">STATUS_FFWD</a>);
<a name="l01525"></a>01525                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_FAST_2);
<a name="l01526"></a>01526             }
<a name="l01527"></a>01527             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#5bf816e7ceae1afb23c2187dea1e07f1" title="stream is being fast forwarded (2x)">STATUS_FFWD</a>) {
<a name="l01528"></a>01528                 this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#8b6561652a0ff63e872906dfe48e5a32" title="stream is being fast forwarded (4x)">STATUS_FFWD2</a>);
<a name="l01529"></a>01529                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_FAST_4);
<a name="l01530"></a>01530             }
<a name="l01531"></a>01531             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#7d477d6ab7aa65a3dfb65e79f2db6c8f" title="stream is being played slowly (2x)">STATUS_SLOW</a>) {
<a name="l01532"></a>01532                 this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#a5332cdd0af4cd8b2622e31fdd377819" title="stream is being played">STATUS_PLAYING</a>);
<a name="l01533"></a>01533                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_NORMAL);
<a name="l01534"></a>01534             }
<a name="l01535"></a>01535             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#b91dd448bfae668496f8ba46dc026e63" title="current playback status">status</a> == this-&gt;<a class="code" href="classMMSAV.html#619c0d4bbf9718a883fef56e69f62960" title="stream is being played slowly (4x)">STATUS_SLOW2</a>) {
<a name="l01536"></a>01536                 this-&gt;<a class="code" href="classMMSAV.html#f4ef6580c6e14c4a787e561f6b9a08c0" title="Sets internal status of sound/video playback.">setStatus</a>(this-&gt;<a class="code" href="classMMSAV.html#7d477d6ab7aa65a3dfb65e79f2db6c8f" title="stream is being played slowly (2x)">STATUS_SLOW</a>);
<a name="l01537"></a>01537                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_SPEED, XINE_SPEED_SLOW_2);
<a name="l01538"></a>01538             }
<a name="l01539"></a>01539             <span class="keywordflow">return</span>;
<a name="l01540"></a>01540 <span class="preprocessor">#endif</span>
<a name="l01541"></a>01541 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01542"></a>01542         <span class="keywordflow">default</span>:
<a name="l01543"></a>01543             <span class="comment">// shouldn't be reached</span>
<a name="l01544"></a>01544             <span class="keywordflow">break</span>;
<a name="l01545"></a>01545     }
<a name="l01546"></a>01546 
<a name="l01547"></a>01547     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::ffwd() called but media backend does not match supported backends"</span>);
<a name="l01548"></a>01548 }
<a name="l01549"></a>01549 <span class="comment"></span>
<a name="l01550"></a>01550 <span class="comment">/**</span>
<a name="l01551"></a>01551 <span class="comment"> * Gets information about the length of the actual title</span>
<a name="l01552"></a>01552 <span class="comment"> * and the time of the current position in seconds.</span>
<a name="l01553"></a>01553 <span class="comment"> *</span>
<a name="l01554"></a>01554 <span class="comment"> * @param   pos     [out]   time in seconds of current position</span>
<a name="l01555"></a>01555 <span class="comment"> * @param   length  [out]   time in seconds of title length</span>
<a name="l01556"></a>01556 <span class="comment"> */</span>
<a name="l01557"></a><a class="code" href="classMMSAV.html#bacf4c903181c5aa15b2197b89a5d459">01557</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#bacf4c903181c5aa15b2197b89a5d459" title="Gets information about the length of the actual title and the time of the current...">MMSAV::getTimes</a>(<span class="keywordtype">int</span> *<a class="code" href="classMMSAV.html#c0e477638485b2597388ad95d554f51b" title="remember position where the stream stopped last time">pos</a>, <span class="keywordtype">int</span> *length) {
<a name="l01558"></a>01558     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01559"></a>01559         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01560"></a>01560 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01561"></a>01561 <span class="preprocessor"></span>            <span class="keywordflow">return</span> 0;
<a name="l01562"></a>01562 <span class="preprocessor">#endif</span>
<a name="l01563"></a>01563 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01564"></a>01564         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01565"></a>01565 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01566"></a>01566 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(!this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a> || !xine_get_pos_length(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, NULL, pos, length)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01567"></a>01567 
<a name="l01568"></a>01568             <span class="keywordflow">if</span>(pos)    (*pos)    /= 1000;
<a name="l01569"></a>01569             <span class="keywordflow">if</span>(length) (*length) /= 1000;
<a name="l01570"></a>01570             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01571"></a>01571 <span class="preprocessor">#endif</span>
<a name="l01572"></a>01572 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01573"></a>01573         <span class="keywordflow">default</span>:
<a name="l01574"></a>01574             <span class="comment">// shouldn't be reached</span>
<a name="l01575"></a>01575             <span class="keywordflow">break</span>;
<a name="l01576"></a>01576     }
<a name="l01577"></a>01577 
<a name="l01578"></a>01578     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::getTimes() called but media backend does not match supported backends"</span>);
<a name="l01579"></a>01579 }
<a name="l01580"></a>01580 <span class="comment"></span>
<a name="l01581"></a>01581 <span class="comment">/**</span>
<a name="l01582"></a>01582 <span class="comment"> * Sets the brightness if video output is done.</span>
<a name="l01583"></a>01583 <span class="comment"> *</span>
<a name="l01584"></a>01584 <span class="comment"> * @param   count   [in]    amount of brightness</span>
<a name="l01585"></a>01585 <span class="comment"> *</span>
<a name="l01586"></a>01586 <span class="comment"> * @see     MMSAV::brightnessUp()</span>
<a name="l01587"></a>01587 <span class="comment"> * @see     MMSAV::brightnessDown()</span>
<a name="l01588"></a>01588 <span class="comment"> */</span>
<a name="l01589"></a><a class="code" href="classMMSAV.html#01918af6ecdf5dafc3369510fb390eae">01589</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#01918af6ecdf5dafc3369510fb390eae" title="Sets the brightness if video output is done.">MMSAV::setBrightness</a>(<span class="keywordtype">int</span> count) {
<a name="l01590"></a>01590     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01591"></a>01591         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01592"></a>01592 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01593"></a>01593 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01594"></a>01594 <span class="preprocessor">#endif</span>
<a name="l01595"></a>01595 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01596"></a>01596         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01597"></a>01597 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01598"></a>01598 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>)
<a name="l01599"></a>01599                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_BRIGHTNESS, count);
<a name="l01600"></a>01600             <span class="keywordflow">return</span>;
<a name="l01601"></a>01601 <span class="preprocessor">#endif</span>
<a name="l01602"></a>01602 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01603"></a>01603         <span class="keywordflow">default</span>:
<a name="l01604"></a>01604             <span class="comment">// shouldn't be reached</span>
<a name="l01605"></a>01605             <span class="keywordflow">break</span>;
<a name="l01606"></a>01606     }
<a name="l01607"></a>01607 
<a name="l01608"></a>01608     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::setBrightness() called but media backend does not match supported backends"</span>);
<a name="l01609"></a>01609 }
<a name="l01610"></a>01610 <span class="comment"></span>
<a name="l01611"></a>01611 <span class="comment">/**</span>
<a name="l01612"></a>01612 <span class="comment"> * Increases the brightness if video output is done.</span>
<a name="l01613"></a>01613 <span class="comment"> *</span>
<a name="l01614"></a>01614 <span class="comment"> * @param   count   [in]    amount of brightness to increase</span>
<a name="l01615"></a>01615 <span class="comment"> *</span>
<a name="l01616"></a>01616 <span class="comment"> * @see     MMSAV::setBrightness()</span>
<a name="l01617"></a>01617 <span class="comment"> * @see     MMSAV::brightnessDown()</span>
<a name="l01618"></a>01618 <span class="comment"> */</span>
<a name="l01619"></a><a class="code" href="classMMSAV.html#e42829436bda1889f4b524a0ba7227ba">01619</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#e42829436bda1889f4b524a0ba7227ba" title="Increases the brightness if video output is done.">MMSAV::brightnessUp</a>(<span class="keywordtype">int</span> count) {
<a name="l01620"></a>01620     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01621"></a>01621         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01622"></a>01622 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01623"></a>01623 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01624"></a>01624 <span class="preprocessor">#endif</span>
<a name="l01625"></a>01625 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01626"></a>01626         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01627"></a>01627 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01628"></a>01628 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>) {
<a name="l01629"></a>01629                 <span class="keywordtype">int</span> value = xine_get_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_BRIGHTNESS);
<a name="l01630"></a>01630                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_BRIGHTNESS, value + count*500);
<a name="l01631"></a>01631             }
<a name="l01632"></a>01632             <span class="keywordflow">return</span>;
<a name="l01633"></a>01633 <span class="preprocessor">#endif</span>
<a name="l01634"></a>01634 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01635"></a>01635         <span class="keywordflow">default</span>:
<a name="l01636"></a>01636             <span class="comment">// shouldn't be reached</span>
<a name="l01637"></a>01637             <span class="keywordflow">break</span>;
<a name="l01638"></a>01638     }
<a name="l01639"></a>01639 
<a name="l01640"></a>01640     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::brightnessUp() called but media backend does not match supported backends"</span>);
<a name="l01641"></a>01641 }
<a name="l01642"></a>01642 <span class="comment"></span>
<a name="l01643"></a>01643 <span class="comment">/**</span>
<a name="l01644"></a>01644 <span class="comment"> * Decreases the brightness if video output is done.</span>
<a name="l01645"></a>01645 <span class="comment"> *</span>
<a name="l01646"></a>01646 <span class="comment"> * @param   count   [in]    amount of brightness to decrease</span>
<a name="l01647"></a>01647 <span class="comment"> *</span>
<a name="l01648"></a>01648 <span class="comment"> * @see     MMSAV::setBrightness()</span>
<a name="l01649"></a>01649 <span class="comment"> * @see     MMSAV::brightnessUp()</span>
<a name="l01650"></a>01650 <span class="comment"> */</span>
<a name="l01651"></a><a class="code" href="classMMSAV.html#8b7b6ce617ed64a647f26e6db620fe73">01651</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#8b7b6ce617ed64a647f26e6db620fe73" title="Decreases the brightness if video output is done.">MMSAV::brightnessDown</a>(<span class="keywordtype">int</span> count) {
<a name="l01652"></a>01652     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01653"></a>01653         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01654"></a>01654 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01655"></a>01655 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01656"></a>01656 <span class="preprocessor">#endif</span>
<a name="l01657"></a>01657 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01658"></a>01658         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01659"></a>01659 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01660"></a>01660 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>) {
<a name="l01661"></a>01661                 <span class="keywordtype">int</span> value = xine_get_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_BRIGHTNESS);
<a name="l01662"></a>01662                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_BRIGHTNESS, value - count*500);
<a name="l01663"></a>01663             }
<a name="l01664"></a>01664             <span class="keywordflow">return</span>;
<a name="l01665"></a>01665 <span class="preprocessor">#endif</span>
<a name="l01666"></a>01666 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01667"></a>01667         <span class="keywordflow">default</span>:
<a name="l01668"></a>01668             <span class="comment">// shouldn't be reached</span>
<a name="l01669"></a>01669             <span class="keywordflow">break</span>;
<a name="l01670"></a>01670     }
<a name="l01671"></a>01671 
<a name="l01672"></a>01672     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::brightnessDown() called but media backend does not match supported backends"</span>);
<a name="l01673"></a>01673 }
<a name="l01674"></a>01674 <span class="comment"></span>
<a name="l01675"></a>01675 <span class="comment">/**</span>
<a name="l01676"></a>01676 <span class="comment"> * Sets the contrast if video output is done.</span>
<a name="l01677"></a>01677 <span class="comment"> *</span>
<a name="l01678"></a>01678 <span class="comment"> * @param   count   [in]    amount of contrast</span>
<a name="l01679"></a>01679 <span class="comment"> *</span>
<a name="l01680"></a>01680 <span class="comment"> * @see     MMSAV::contrastUp()</span>
<a name="l01681"></a>01681 <span class="comment"> * @see     MMSAV::contrastDown()</span>
<a name="l01682"></a>01682 <span class="comment"> */</span>
<a name="l01683"></a><a class="code" href="classMMSAV.html#47994634c51302b2c3c837dd23b71521">01683</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#47994634c51302b2c3c837dd23b71521" title="Sets the contrast if video output is done.">MMSAV::setContrast</a>(<span class="keywordtype">int</span> count) {
<a name="l01684"></a>01684     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01685"></a>01685         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01686"></a>01686 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01687"></a>01687 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01688"></a>01688 <span class="preprocessor">#endif</span>
<a name="l01689"></a>01689 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01690"></a>01690         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01691"></a>01691 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01692"></a>01692 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>)
<a name="l01693"></a>01693                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_CONTRAST, count);
<a name="l01694"></a>01694             <span class="keywordflow">return</span>;
<a name="l01695"></a>01695 <span class="preprocessor">#endif</span>
<a name="l01696"></a>01696 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01697"></a>01697         <span class="keywordflow">default</span>:
<a name="l01698"></a>01698             <span class="comment">// shouldn't be reached</span>
<a name="l01699"></a>01699             <span class="keywordflow">break</span>;
<a name="l01700"></a>01700     }
<a name="l01701"></a>01701 
<a name="l01702"></a>01702     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::setContrast() called but media backend does not match supported backends"</span>);
<a name="l01703"></a>01703 }
<a name="l01704"></a>01704 <span class="comment"></span>
<a name="l01705"></a>01705 <span class="comment">/**</span>
<a name="l01706"></a>01706 <span class="comment"> * Increases the contrast if video output is done.</span>
<a name="l01707"></a>01707 <span class="comment"> *</span>
<a name="l01708"></a>01708 <span class="comment"> * @param   count   [in]    amount of contrast to increase</span>
<a name="l01709"></a>01709 <span class="comment"> *</span>
<a name="l01710"></a>01710 <span class="comment"> * @see     MMSAV::setContrast()</span>
<a name="l01711"></a>01711 <span class="comment"> * @see     MMSAV::contrastDown()</span>
<a name="l01712"></a>01712 <span class="comment"> */</span>
<a name="l01713"></a><a class="code" href="classMMSAV.html#5463b702deb95c67b20e449ae129b931">01713</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#5463b702deb95c67b20e449ae129b931" title="Increases the contrast if video output is done.">MMSAV::contrastUp</a>(<span class="keywordtype">int</span> count) {
<a name="l01714"></a>01714     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01715"></a>01715         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01716"></a>01716 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01717"></a>01717 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01718"></a>01718 <span class="preprocessor">#endif</span>
<a name="l01719"></a>01719 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01720"></a>01720         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01721"></a>01721 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01722"></a>01722 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>) {
<a name="l01723"></a>01723                 <span class="keywordtype">int</span> value = xine_get_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_CONTRAST);
<a name="l01724"></a>01724                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_CONTRAST, value + count*500);
<a name="l01725"></a>01725             }
<a name="l01726"></a>01726             <span class="keywordflow">return</span>;
<a name="l01727"></a>01727 <span class="preprocessor">#endif</span>
<a name="l01728"></a>01728 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01729"></a>01729         <span class="keywordflow">default</span>:
<a name="l01730"></a>01730             <span class="comment">// shouldn't be reached</span>
<a name="l01731"></a>01731             <span class="keywordflow">break</span>;
<a name="l01732"></a>01732     }
<a name="l01733"></a>01733 
<a name="l01734"></a>01734     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::contrastUp() called but media backend does not match supported backends"</span>);
<a name="l01735"></a>01735 }
<a name="l01736"></a>01736 <span class="comment"></span>
<a name="l01737"></a>01737 <span class="comment">/**</span>
<a name="l01738"></a>01738 <span class="comment"> * Decreases the contrast if video output is done.</span>
<a name="l01739"></a>01739 <span class="comment"> *</span>
<a name="l01740"></a>01740 <span class="comment"> * @param   count   [in]    amount of contrast to decrease</span>
<a name="l01741"></a>01741 <span class="comment"> *</span>
<a name="l01742"></a>01742 <span class="comment"> * @see     MMSAV::setContrast()</span>
<a name="l01743"></a>01743 <span class="comment"> * @see     MMSAV::contrastUp()</span>
<a name="l01744"></a>01744 <span class="comment"> */</span>
<a name="l01745"></a><a class="code" href="classMMSAV.html#7f14a0b469b43ace8a627d45602f7f8c">01745</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#7f14a0b469b43ace8a627d45602f7f8c" title="Decreases the contrast if video output is done.">MMSAV::contrastDown</a>(<span class="keywordtype">int</span> count) {
<a name="l01746"></a>01746     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01747"></a>01747         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01748"></a>01748 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01749"></a>01749 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01750"></a>01750 <span class="preprocessor">#endif</span>
<a name="l01751"></a>01751 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01752"></a>01752         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01753"></a>01753 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01754"></a>01754 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>) {
<a name="l01755"></a>01755                 <span class="keywordtype">int</span> value = xine_get_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_CONTRAST);
<a name="l01756"></a>01756                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_CONTRAST, value - count*500);
<a name="l01757"></a>01757             }
<a name="l01758"></a>01758             <span class="keywordflow">return</span>;
<a name="l01759"></a>01759 <span class="preprocessor">#endif</span>
<a name="l01760"></a>01760 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01761"></a>01761         <span class="keywordflow">default</span>:
<a name="l01762"></a>01762             <span class="comment">// shouldn't be reached</span>
<a name="l01763"></a>01763             <span class="keywordflow">break</span>;
<a name="l01764"></a>01764     }
<a name="l01765"></a>01765 
<a name="l01766"></a>01766     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::contrastDown() called but media backend does not match supported backends"</span>);
<a name="l01767"></a>01767 }
<a name="l01768"></a>01768 <span class="comment"></span>
<a name="l01769"></a>01769 <span class="comment">/**</span>
<a name="l01770"></a>01770 <span class="comment"> * Sets the saturation if video output is done.</span>
<a name="l01771"></a>01771 <span class="comment"> *</span>
<a name="l01772"></a>01772 <span class="comment"> * @param   count   [in]    amount of saturation</span>
<a name="l01773"></a>01773 <span class="comment"> *</span>
<a name="l01774"></a>01774 <span class="comment"> * @see     MMSAV::saturationUp()</span>
<a name="l01775"></a>01775 <span class="comment"> * @see     MMSAV::saturationDown()</span>
<a name="l01776"></a>01776 <span class="comment"> */</span>
<a name="l01777"></a><a class="code" href="classMMSAV.html#1b8251ba8173e9b06baae0ba4eea58b7">01777</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#1b8251ba8173e9b06baae0ba4eea58b7" title="Sets the saturation if video output is done.">MMSAV::setSaturation</a>(<span class="keywordtype">int</span> count) {
<a name="l01778"></a>01778     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01779"></a>01779         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01780"></a>01780 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01781"></a>01781 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01782"></a>01782 <span class="preprocessor">#endif</span>
<a name="l01783"></a>01783 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01784"></a>01784         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01785"></a>01785 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01786"></a>01786 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>)
<a name="l01787"></a>01787                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_SATURATION, count);
<a name="l01788"></a>01788             <span class="keywordflow">return</span>;
<a name="l01789"></a>01789 <span class="preprocessor">#endif</span>
<a name="l01790"></a>01790 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01791"></a>01791         <span class="keywordflow">default</span>:
<a name="l01792"></a>01792             <span class="comment">// shouldn't be reached</span>
<a name="l01793"></a>01793             <span class="keywordflow">break</span>;
<a name="l01794"></a>01794     }
<a name="l01795"></a>01795 
<a name="l01796"></a>01796     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::setSaturation() called but media backend does not match supported backends"</span>);
<a name="l01797"></a>01797 }
<a name="l01798"></a>01798 <span class="comment"></span>
<a name="l01799"></a>01799 <span class="comment">/**</span>
<a name="l01800"></a>01800 <span class="comment"> * Increases the saturation if video output is done.</span>
<a name="l01801"></a>01801 <span class="comment"> *</span>
<a name="l01802"></a>01802 <span class="comment"> * @param   count   [in]    amount of saturation to increase</span>
<a name="l01803"></a>01803 <span class="comment"> *</span>
<a name="l01804"></a>01804 <span class="comment"> * @see     MMSAV::setSaturation()</span>
<a name="l01805"></a>01805 <span class="comment"> * @see     MMSAV::saturationDown()</span>
<a name="l01806"></a>01806 <span class="comment"> */</span>
<a name="l01807"></a><a class="code" href="classMMSAV.html#e810e8f4cd40589825e077e0d7762ceb">01807</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#e810e8f4cd40589825e077e0d7762ceb" title="Increases the saturation if video output is done.">MMSAV::saturationUp</a>(<span class="keywordtype">int</span> count) {
<a name="l01808"></a>01808     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01809"></a>01809         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01810"></a>01810 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01811"></a>01811 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01812"></a>01812 <span class="preprocessor">#endif</span>
<a name="l01813"></a>01813 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01814"></a>01814         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01815"></a>01815 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01816"></a>01816 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>) {
<a name="l01817"></a>01817                 <span class="keywordtype">int</span> value = xine_get_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_SATURATION);
<a name="l01818"></a>01818                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_SATURATION, value + count*500);
<a name="l01819"></a>01819             }
<a name="l01820"></a>01820             <span class="keywordflow">return</span>;
<a name="l01821"></a>01821 <span class="preprocessor">#endif</span>
<a name="l01822"></a>01822 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01823"></a>01823         <span class="keywordflow">default</span>:
<a name="l01824"></a>01824             <span class="comment">// shouldn't be reached</span>
<a name="l01825"></a>01825             <span class="keywordflow">break</span>;
<a name="l01826"></a>01826     }
<a name="l01827"></a>01827 
<a name="l01828"></a>01828     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::saturationUp() called but media backend does not match supported backends"</span>);
<a name="l01829"></a>01829 }
<a name="l01830"></a>01830 <span class="comment"></span>
<a name="l01831"></a>01831 <span class="comment">/**</span>
<a name="l01832"></a>01832 <span class="comment"> * Decreases the saturation if video output is done.</span>
<a name="l01833"></a>01833 <span class="comment"> *</span>
<a name="l01834"></a>01834 <span class="comment"> * @param   count   [in]    amount of saturation to decrease</span>
<a name="l01835"></a>01835 <span class="comment"> *</span>
<a name="l01836"></a>01836 <span class="comment"> * @see     MMSAV::setSaturation()</span>
<a name="l01837"></a>01837 <span class="comment"> * @see     MMSAV::saturationUp()</span>
<a name="l01838"></a>01838 <span class="comment"> */</span>
<a name="l01839"></a><a class="code" href="classMMSAV.html#7974d50783c3cceb6f5f89c174891e15">01839</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#7974d50783c3cceb6f5f89c174891e15" title="Decreases the saturation if video output is done.">MMSAV::saturationDown</a>(<span class="keywordtype">int</span> count) {
<a name="l01840"></a>01840     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01841"></a>01841         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01842"></a>01842 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01843"></a>01843 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01844"></a>01844 <span class="preprocessor">#endif</span>
<a name="l01845"></a>01845 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01846"></a>01846         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01847"></a>01847 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01848"></a>01848 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>) {
<a name="l01849"></a>01849                 <span class="keywordtype">int</span> value = xine_get_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_SATURATION);
<a name="l01850"></a>01850                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_SATURATION, value - count*500);
<a name="l01851"></a>01851             }
<a name="l01852"></a>01852             <span class="keywordflow">return</span>;
<a name="l01853"></a>01853 <span class="preprocessor">#endif</span>
<a name="l01854"></a>01854 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01855"></a>01855         <span class="keywordflow">default</span>:
<a name="l01856"></a>01856             <span class="comment">// shouldn't be reached</span>
<a name="l01857"></a>01857             <span class="keywordflow">break</span>;
<a name="l01858"></a>01858     }
<a name="l01859"></a>01859 
<a name="l01860"></a>01860     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::saturationDown() called but media backend does not match supported backends"</span>);
<a name="l01861"></a>01861 }
<a name="l01862"></a>01862 <span class="comment"></span>
<a name="l01863"></a>01863 <span class="comment">/**</span>
<a name="l01864"></a>01864 <span class="comment"> * Sets the hue if video output is done.</span>
<a name="l01865"></a>01865 <span class="comment"> *</span>
<a name="l01866"></a>01866 <span class="comment"> * @param   count   [in]    amount of hue</span>
<a name="l01867"></a>01867 <span class="comment"> *</span>
<a name="l01868"></a>01868 <span class="comment"> * @see     MMSAV::hueUp()</span>
<a name="l01869"></a>01869 <span class="comment"> * @see     MMSAV::hueDown()</span>
<a name="l01870"></a>01870 <span class="comment"> */</span>
<a name="l01871"></a><a class="code" href="classMMSAV.html#3101f4cd5a098f19b663d9a7e7aa6216">01871</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#3101f4cd5a098f19b663d9a7e7aa6216" title="Sets the hue if video output is done.">MMSAV::setHue</a>(<span class="keywordtype">int</span> count) {
<a name="l01872"></a>01872     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01873"></a>01873         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01874"></a>01874 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01875"></a>01875 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01876"></a>01876 <span class="preprocessor">#endif</span>
<a name="l01877"></a>01877 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01878"></a>01878         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01879"></a>01879 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01880"></a>01880 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>)
<a name="l01881"></a>01881                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_HUE, count);
<a name="l01882"></a>01882             <span class="keywordflow">return</span>;
<a name="l01883"></a>01883 <span class="preprocessor">#endif</span>
<a name="l01884"></a>01884 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01885"></a>01885         <span class="keywordflow">default</span>:
<a name="l01886"></a>01886             <span class="comment">// shouldn't be reached</span>
<a name="l01887"></a>01887             <span class="keywordflow">break</span>;
<a name="l01888"></a>01888     }
<a name="l01889"></a>01889 
<a name="l01890"></a>01890     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::setHue() called but media backend does not match supported backends"</span>);
<a name="l01891"></a>01891 }
<a name="l01892"></a>01892 <span class="comment"></span>
<a name="l01893"></a>01893 <span class="comment">/**</span>
<a name="l01894"></a>01894 <span class="comment"> * Increases the hue if video output is done.</span>
<a name="l01895"></a>01895 <span class="comment"> *</span>
<a name="l01896"></a>01896 <span class="comment"> * @param   count   [in]    amount of hue to increase</span>
<a name="l01897"></a>01897 <span class="comment"> *</span>
<a name="l01898"></a>01898 <span class="comment"> * @see     MMSAV::setHue()</span>
<a name="l01899"></a>01899 <span class="comment"> * @see     MMSAV::hueDown()</span>
<a name="l01900"></a>01900 <span class="comment"> */</span>
<a name="l01901"></a><a class="code" href="classMMSAV.html#67581dcd1f3fca784062ad819b559462">01901</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#67581dcd1f3fca784062ad819b559462" title="Increases the hue if video output is done.">MMSAV::hueUp</a>(<span class="keywordtype">int</span> count) {
<a name="l01902"></a>01902     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01903"></a>01903         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01904"></a>01904 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01905"></a>01905 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01906"></a>01906 <span class="preprocessor">#endif</span>
<a name="l01907"></a>01907 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01908"></a>01908         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01909"></a>01909 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01910"></a>01910 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>) {
<a name="l01911"></a>01911                 <span class="keywordtype">int</span> value = xine_get_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_HUE);
<a name="l01912"></a>01912                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_HUE, value + count*500);
<a name="l01913"></a>01913             }
<a name="l01914"></a>01914             <span class="keywordflow">return</span>;
<a name="l01915"></a>01915 <span class="preprocessor">#endif</span>
<a name="l01916"></a>01916 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01917"></a>01917         <span class="keywordflow">default</span>:
<a name="l01918"></a>01918             <span class="comment">// shouldn't be reached</span>
<a name="l01919"></a>01919             <span class="keywordflow">break</span>;
<a name="l01920"></a>01920     }
<a name="l01921"></a>01921 
<a name="l01922"></a>01922     <span class="keywordflow">throw</span> MMSAVError(0,<span class="stringliteral">"MMSAV::hueUp() called but media backend does not match supported backends"</span>);
<a name="l01923"></a>01923 }
<a name="l01924"></a>01924 <span class="comment"></span>
<a name="l01925"></a>01925 <span class="comment">/**</span>
<a name="l01926"></a>01926 <span class="comment"> * Decreases the hue if video output is done.</span>
<a name="l01927"></a>01927 <span class="comment"> *</span>
<a name="l01928"></a>01928 <span class="comment"> * @param   count   [in]    amount of hue to decrease</span>
<a name="l01929"></a>01929 <span class="comment"> *</span>
<a name="l01930"></a>01930 <span class="comment"> * @see     MMSAV::setHue()</span>
<a name="l01931"></a>01931 <span class="comment"> * @see     MMSAV::hueUp()</span>
<a name="l01932"></a>01932 <span class="comment"> */</span>
<a name="l01933"></a><a class="code" href="classMMSAV.html#daf2be9b9bf0e0e12dea85bb1e1e8c56">01933</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#daf2be9b9bf0e0e12dea85bb1e1e8c56" title="Decreases the hue if video output is done.">MMSAV::hueDown</a>(<span class="keywordtype">int</span> count) {
<a name="l01934"></a>01934     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01935"></a>01935         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01936"></a>01936 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01937"></a>01937 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01938"></a>01938 <span class="preprocessor">#endif</span>
<a name="l01939"></a>01939 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01940"></a>01940         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01941"></a>01941 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01942"></a>01942 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#78a946a5cb5da9a66d7054a4d61b294a" title="xine video ports">vo</a>) {
<a name="l01943"></a>01943                 <span class="keywordtype">int</span> value = xine_get_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_HUE);
<a name="l01944"></a>01944                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_VO_HUE, value - count*500);
<a name="l01945"></a>01945             }
<a name="l01946"></a>01946             <span class="keywordflow">return</span>;
<a name="l01947"></a>01947 <span class="preprocessor">#endif</span>
<a name="l01948"></a>01948 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01949"></a>01949         <span class="keywordflow">default</span>:
<a name="l01950"></a>01950             <span class="comment">// shouldn't be reached</span>
<a name="l01951"></a>01951             <span class="keywordflow">break</span>;
<a name="l01952"></a>01952     }
<a name="l01953"></a>01953 
<a name="l01954"></a>01954     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::hueDown() called but media backend does not match supported backends"</span>);
<a name="l01955"></a>01955 }
<a name="l01956"></a>01956 <span class="comment"></span>
<a name="l01957"></a>01957 <span class="comment">/**</span>
<a name="l01958"></a>01958 <span class="comment"> * Sets the volume of the audio output.</span>
<a name="l01959"></a>01959 <span class="comment"> *</span>
<a name="l01960"></a>01960 <span class="comment"> * @param   percent [in]    volume in percent</span>
<a name="l01961"></a>01961 <span class="comment"> */</span>
<a name="l01962"></a><a class="code" href="classMMSAV.html#b6a22b3a8fa54a67e96f114311bf646b">01962</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#b6a22b3a8fa54a67e96f114311bf646b" title="Sets the volume of the audio output.">MMSAV::setVolume</a>(<span class="keywordtype">int</span> percent) {
<a name="l01963"></a>01963     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01964"></a>01964         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01965"></a>01965 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01966"></a>01966 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01967"></a>01967 <span class="preprocessor">#endif</span>
<a name="l01968"></a>01968 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01969"></a>01969         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01970"></a>01970 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l01971"></a>01971 <span class="preprocessor"></span>            <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classMMSAV.html#56de0a4832bf7a27adb442c32fc363ce" title="xine audio ports">ao</a>)
<a name="l01972"></a>01972                 xine_set_param(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_PARAM_AUDIO_VOLUME, percent);
<a name="l01973"></a>01973             <span class="keywordflow">return</span>;
<a name="l01974"></a>01974 <span class="preprocessor">#endif</span>
<a name="l01975"></a>01975 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01976"></a>01976         <span class="keywordflow">default</span>:
<a name="l01977"></a>01977             <span class="comment">// shouldn't be reached</span>
<a name="l01978"></a>01978             <span class="keywordflow">break</span>;
<a name="l01979"></a>01979     }
<a name="l01980"></a>01980 
<a name="l01981"></a>01981     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::setVolume() called but media backend does not match supported backends"</span>);
<a name="l01982"></a>01982 }
<a name="l01983"></a>01983 <span class="comment"></span>
<a name="l01984"></a>01984 <span class="comment">/**</span>
<a name="l01985"></a>01985 <span class="comment"> * Send a xine event to the engine</span>
<a name="l01986"></a>01986 <span class="comment"> *</span>
<a name="l01987"></a>01987 <span class="comment"> * @param   type    [in]    type of event</span>
<a name="l01988"></a>01988 <span class="comment"> * @param   data    [in]    event specific data</span>
<a name="l01989"></a>01989 <span class="comment"> * @param   datalen [in]    length of data</span>
<a name="l01990"></a>01990 <span class="comment"> */</span>
<a name="l01991"></a><a class="code" href="classMMSAV.html#ab87fd2897236c8d4a0f6c150dbf72d8">01991</a> <span class="keywordtype">void</span> <a class="code" href="classMMSAV.html#ab87fd2897236c8d4a0f6c150dbf72d8" title="Send a xine event to the engine.">MMSAV::sendEvent</a>(<span class="keywordtype">int</span> type, <span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> datalen) {
<a name="l01992"></a>01992     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l01993"></a>01993         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l01994"></a>01994 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l01995"></a>01995 <span class="preprocessor"></span>            <span class="keywordflow">return</span>;
<a name="l01996"></a>01996 <span class="preprocessor">#endif</span>
<a name="l01997"></a>01997 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l01998"></a>01998         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l01999"></a>01999 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l02000"></a>02000 <span class="preprocessor"></span>            xine_event_t evt;
<a name="l02001"></a>02001 
<a name="l02002"></a>02002             evt.stream      = this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>;
<a name="l02003"></a>02003             evt.data        = data;
<a name="l02004"></a>02004             evt.data_length = datalen;
<a name="l02005"></a>02005             evt.type        = type;
<a name="l02006"></a>02006             xine_event_send(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, &amp;evt);
<a name="l02007"></a>02007             <span class="keywordflow">return</span>;
<a name="l02008"></a>02008 <span class="preprocessor">#endif</span>
<a name="l02009"></a>02009 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l02010"></a>02010         <span class="keywordflow">default</span>:
<a name="l02011"></a>02011             <span class="comment">// shouldn't be reached</span>
<a name="l02012"></a>02012             <span class="keywordflow">break</span>;
<a name="l02013"></a>02013     }
<a name="l02014"></a>02014 
<a name="l02015"></a>02015     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::sendEvent() called but media backend does not match supported backends"</span>);
<a name="l02016"></a>02016 }
<a name="l02017"></a>02017 
<a name="l02018"></a>02018 
<a name="l02019"></a><a class="code" href="classMMSAV.html#a6f05796cf7324b9b4428a3e028b839b">02019</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#a6f05796cf7324b9b4428a3e028b839b">MMSAV::sendKeyPress</a>(<a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043" title="supported keys">MMSKeySymbol</a> key) {
<a name="l02020"></a>02020     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l02021"></a>02021     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>: {
<a name="l02022"></a>02022 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l02023"></a>02023 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="mmsgst_8h.html#a5118061e67288132ab6b72fa294ad3f" title="send key press event to a pipeline">mmsGstSendKeyPress</a>(<a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a>, key);
<a name="l02024"></a>02024 <span class="preprocessor">#endif</span>
<a name="l02025"></a>02025 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02026"></a>02026     }
<a name="l02027"></a>02027     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l02028"></a>02028 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l02029"></a>02029 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02030"></a>02030 <span class="preprocessor">#endif</span>
<a name="l02031"></a>02031 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02032"></a>02032     <span class="keywordflow">default</span>:
<a name="l02033"></a>02033         <span class="comment">// shouldn't be reached</span>
<a name="l02034"></a>02034         <span class="keywordflow">break</span>;
<a name="l02035"></a>02035     }
<a name="l02036"></a>02036 
<a name="l02037"></a>02037     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::sendKeyPress() called but media backend does not match supported backends"</span>);
<a name="l02038"></a>02038 
<a name="l02039"></a>02039     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02040"></a>02040 }
<a name="l02041"></a>02041 
<a name="l02042"></a><a class="code" href="classMMSAV.html#260c442d349d811e55fcc0519071ede2">02042</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#260c442d349d811e55fcc0519071ede2">MMSAV::sendKeyRelease</a>(<a class="code" href="mmstypes_8h.html#7fe90201339002ff488a00e26293b043" title="supported keys">MMSKeySymbol</a> key) {
<a name="l02043"></a>02043     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l02044"></a>02044     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>: {
<a name="l02045"></a>02045 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l02046"></a>02046 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="mmsgst_8h.html#50e9615a9c1690f53cd051282fb1bf6d" title="send key release event to a pipeline">mmsGstSendKeyRelease</a>(<a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a>, key);
<a name="l02047"></a>02047 <span class="preprocessor">#endif</span>
<a name="l02048"></a>02048 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02049"></a>02049     }
<a name="l02050"></a>02050     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l02051"></a>02051 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l02052"></a>02052 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02053"></a>02053 <span class="preprocessor">#endif</span>
<a name="l02054"></a>02054 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02055"></a>02055     <span class="keywordflow">default</span>:
<a name="l02056"></a>02056         <span class="comment">// shouldn't be reached</span>
<a name="l02057"></a>02057         <span class="keywordflow">break</span>;
<a name="l02058"></a>02058     }
<a name="l02059"></a>02059 
<a name="l02060"></a>02060     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::sendKeyRelease() called but media backend does not match supported backends"</span>);
<a name="l02061"></a>02061 
<a name="l02062"></a>02062     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02063"></a>02063 }
<a name="l02064"></a>02064 
<a name="l02065"></a><a class="code" href="classMMSAV.html#ae28c43de05ba20ffa3182793187682a">02065</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#ae28c43de05ba20ffa3182793187682a">MMSAV::sendButtonPress</a>(<span class="keywordtype">int</span> posx, <span class="keywordtype">int</span> posy) {
<a name="l02066"></a>02066     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l02067"></a>02067     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>: {
<a name="l02068"></a>02068 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l02069"></a>02069 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="mmsgst_8h.html#047a5505f63fa3f3f9007d537f370568" title="send button press event to a pipeline">mmsGstSendButtonPress</a>(<a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a>, posx, posy);
<a name="l02070"></a>02070 <span class="preprocessor">#endif</span>
<a name="l02071"></a>02071 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02072"></a>02072     }
<a name="l02073"></a>02073     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l02074"></a>02074 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l02075"></a>02075 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02076"></a>02076 <span class="preprocessor">#endif</span>
<a name="l02077"></a>02077 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02078"></a>02078     <span class="keywordflow">default</span>:
<a name="l02079"></a>02079         <span class="comment">// shouldn't be reached</span>
<a name="l02080"></a>02080         <span class="keywordflow">break</span>;
<a name="l02081"></a>02081     }
<a name="l02082"></a>02082 
<a name="l02083"></a>02083     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::sendButtonPress() called but media backend does not match supported backends"</span>);
<a name="l02084"></a>02084 
<a name="l02085"></a>02085     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02086"></a>02086 }
<a name="l02087"></a>02087 
<a name="l02088"></a><a class="code" href="classMMSAV.html#bccfd74215a0833f2a6c0e94c30c00a6">02088</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#bccfd74215a0833f2a6c0e94c30c00a6">MMSAV::sendButtonRelease</a>(<span class="keywordtype">int</span> posx, <span class="keywordtype">int</span> posy) {
<a name="l02089"></a>02089     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l02090"></a>02090     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>: {
<a name="l02091"></a>02091 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l02092"></a>02092 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="mmsgst_8h.html#67ce32d30fc839ca8502f501a3885fb2" title="send button release event to a pipeline">mmsGstSendButtonRelease</a>(<a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a>, posx, posy);
<a name="l02093"></a>02093 <span class="preprocessor">#endif</span>
<a name="l02094"></a>02094 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02095"></a>02095     }
<a name="l02096"></a>02096     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l02097"></a>02097 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l02098"></a>02098 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02099"></a>02099 <span class="preprocessor">#endif</span>
<a name="l02100"></a>02100 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02101"></a>02101     <span class="keywordflow">default</span>:
<a name="l02102"></a>02102         <span class="comment">// shouldn't be reached</span>
<a name="l02103"></a>02103         <span class="keywordflow">break</span>;
<a name="l02104"></a>02104     }
<a name="l02105"></a>02105 
<a name="l02106"></a>02106     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::sendButtonRelease() called but media backend does not match supported backends"</span>);
<a name="l02107"></a>02107 
<a name="l02108"></a>02108     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02109"></a>02109 }
<a name="l02110"></a>02110 
<a name="l02111"></a><a class="code" href="classMMSAV.html#80f0ffd93d743912dc2b1e3f23c2127c">02111</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#80f0ffd93d743912dc2b1e3f23c2127c">MMSAV::sendAxisMotion</a>(<span class="keywordtype">int</span> posx, <span class="keywordtype">int</span> posy) {
<a name="l02112"></a>02112     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l02113"></a>02113     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>: {
<a name="l02114"></a>02114 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l02115"></a>02115 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="mmsgst_8h.html#cf07ef9e721d4e821efad72ad0ff9941" title="send axis motion event to a pipeline">mmsGstSendAxisMotion</a>(<a class="code" href="classMMSAV.html#7495f5f06c5e91ee24b79cc50f3252da">gst_diskovideosink_data</a>.<a class="code" href="structGST__DISKOVIDEOSINK__DATA.html#c016ce27d3937d61d904ad5be64a97cf" title="top-level gst element">pipeline</a>, posx, posy);
<a name="l02116"></a>02116 <span class="preprocessor">#endif</span>
<a name="l02117"></a>02117 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02118"></a>02118     }
<a name="l02119"></a>02119     <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l02120"></a>02120 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l02121"></a>02121 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02122"></a>02122 <span class="preprocessor">#endif</span>
<a name="l02123"></a>02123 <span class="preprocessor"></span>        <span class="keywordflow">break</span>;
<a name="l02124"></a>02124     <span class="keywordflow">default</span>:
<a name="l02125"></a>02125         <span class="comment">// shouldn't be reached</span>
<a name="l02126"></a>02126         <span class="keywordflow">break</span>;
<a name="l02127"></a>02127     }
<a name="l02128"></a>02128 
<a name="l02129"></a>02129     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::sendAxisMotion() called but media backend does not match supported backends"</span>);
<a name="l02130"></a>02130 
<a name="l02131"></a>02131     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02132"></a>02132 }
<a name="l02133"></a>02133 
<a name="l02134"></a><a class="code" href="classMMSAV.html#ea6cf11f766634f09d2c1cdc2383a854">02134</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#ab87fd2897236c8d4a0f6c150dbf72d8" title="Send a xine event to the engine.">MMSAV::sendEvent</a>(<a class="code" href="structMMSInputEvent.html">MMSInputEvent</a> *input) {
<a name="l02135"></a>02135     <span class="comment">// fire input events to the media backend</span>
<a name="l02136"></a>02136     <span class="keywordflow">switch</span> (input-&gt;<a class="code" href="structMMSInputEvent.html#65b815e5f6b6af3a2350e2528a9aef3d">type</a>) {
<a name="l02137"></a>02137     <span class="keywordflow">case</span> <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc2609318c7f66765835a326411f9bcc8370a1">MMSINPUTEVENTTYPE_KEYPRESS</a>:
<a name="l02138"></a>02138         <span class="keywordflow">return</span> <a class="code" href="classMMSAV.html#a6f05796cf7324b9b4428a3e028b839b">sendKeyPress</a>(input-&gt;<a class="code" href="structMMSInputEvent.html#39baa7bb431c0c28bc7b2d0bf155e16e">key</a>);
<a name="l02139"></a>02139     <span class="keywordflow">case</span> <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc26098d3f245a0c04fb9eb066261e2b733b4c">MMSINPUTEVENTTYPE_KEYRELEASE</a>:
<a name="l02140"></a>02140         <span class="keywordflow">return</span> <a class="code" href="classMMSAV.html#260c442d349d811e55fcc0519071ede2">sendKeyRelease</a>(input-&gt;<a class="code" href="structMMSInputEvent.html#39baa7bb431c0c28bc7b2d0bf155e16e">key</a>);
<a name="l02141"></a>02141     <span class="keywordflow">case</span> <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc260983e8ebed2fd26ad4ef5aac63aea397b7">MMSINPUTEVENTTYPE_BUTTONPRESS</a>:
<a name="l02142"></a>02142         <span class="keywordflow">return</span> <a class="code" href="classMMSAV.html#ae28c43de05ba20ffa3182793187682a">sendButtonPress</a>(input-&gt;<a class="code" href="structMMSInputEvent.html#e48730a401f49586f2d40296858b5cb0">posx</a>, input-&gt;<a class="code" href="structMMSInputEvent.html#4af0096d9331829d0dc64edfa1134133">posy</a>);
<a name="l02143"></a>02143     <span class="keywordflow">case</span> <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc260995bc9431d848e49872c7642fb080071a">MMSINPUTEVENTTYPE_BUTTONRELEASE</a>:
<a name="l02144"></a>02144         <span class="keywordflow">return</span> <a class="code" href="classMMSAV.html#bccfd74215a0833f2a6c0e94c30c00a6">sendButtonRelease</a>(input-&gt;<a class="code" href="structMMSInputEvent.html#e48730a401f49586f2d40296858b5cb0">posx</a>, input-&gt;<a class="code" href="structMMSInputEvent.html#4af0096d9331829d0dc64edfa1134133">posy</a>);
<a name="l02145"></a>02145     <span class="keywordflow">case</span> <a class="code" href="mmsguitools_8h.html#55e132832af5e96a6df7554451bc26096fefdc4442ed8e471f9af0b326f737f5">MMSINPUTEVENTTYPE_AXISMOTION</a>:
<a name="l02146"></a>02146         <span class="keywordflow">return</span> <a class="code" href="classMMSAV.html#80f0ffd93d743912dc2b1e3f23c2127c">sendAxisMotion</a>(input-&gt;<a class="code" href="structMMSInputEvent.html#e48730a401f49586f2d40296858b5cb0">posx</a>, input-&gt;<a class="code" href="structMMSInputEvent.html#4af0096d9331829d0dc64edfa1134133">posy</a>);
<a name="l02147"></a>02147     <span class="keywordflow">default</span>:
<a name="l02148"></a>02148         <span class="keywordflow">break</span>;
<a name="l02149"></a>02149     }
<a name="l02150"></a>02150 
<a name="l02151"></a>02151     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02152"></a>02152 }
<a name="l02153"></a>02153 <span class="comment"></span>
<a name="l02154"></a>02154 <span class="comment">/**</span>
<a name="l02155"></a>02155 <span class="comment"> * Returns true if stream contains a video stream.</span>
<a name="l02156"></a>02156 <span class="comment"> *</span>
<a name="l02157"></a>02157 <span class="comment"> * @return true if video stream</span>
<a name="l02158"></a>02158 <span class="comment"> */</span>
<a name="l02159"></a><a class="code" href="classMMSAV.html#5ea25d088dd55bae5cbf986f67b4a2d8">02159</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#5ea25d088dd55bae5cbf986f67b4a2d8" title="Returns true if stream contains a video stream.">MMSAV::hasVideo</a>() {
<a name="l02160"></a>02160     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l02161"></a>02161         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l02162"></a>02162 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l02163"></a>02163 <span class="preprocessor"></span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02164"></a>02164 <span class="preprocessor">#endif</span>
<a name="l02165"></a>02165 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l02166"></a>02166         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l02167"></a>02167 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l02168"></a>02168 <span class="preprocessor"></span>            <span class="keywordflow">return</span> (xine_get_stream_info(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_STREAM_INFO_HAS_VIDEO) == 1);
<a name="l02169"></a>02169 <span class="preprocessor">#endif</span>
<a name="l02170"></a>02170 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l02171"></a>02171         <span class="keywordflow">default</span>:
<a name="l02172"></a>02172             <span class="comment">// shouldn't be reached</span>
<a name="l02173"></a>02173             <span class="keywordflow">break</span>;
<a name="l02174"></a>02174     }
<a name="l02175"></a>02175 
<a name="l02176"></a>02176     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::hasVideo() called but media backend does not match supported backends"</span>);
<a name="l02177"></a>02177 }
<a name="l02178"></a>02178 <span class="comment"></span>
<a name="l02179"></a>02179 <span class="comment">/**</span>
<a name="l02180"></a>02180 <span class="comment"> * Returns true if stream contains an audio stream.</span>
<a name="l02181"></a>02181 <span class="comment"> *</span>
<a name="l02182"></a>02182 <span class="comment"> * @return true if audio stream</span>
<a name="l02183"></a>02183 <span class="comment"> */</span>
<a name="l02184"></a><a class="code" href="classMMSAV.html#5474b9451eb542d862d891692d0dae71">02184</a> <span class="keywordtype">bool</span> <a class="code" href="classMMSAV.html#5474b9451eb542d862d891692d0dae71" title="Returns true if stream contains an audio stream.">MMSAV::hasAudio</a>() {
<a name="l02185"></a>02185     <span class="keywordflow">switch</span>(this-&gt;<a class="code" href="classMMSAV.html#24588862d3d88118b6f85d3929cdd1af" title="backend which is used to stream any sources">backend</a>) {
<a name="l02186"></a>02186         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad67840559bcb484c907c4f56e223da74a" title="gstreamer">MMSMEDIA_BE_GST</a>:
<a name="l02187"></a>02187 <span class="preprocessor">#ifdef __HAVE_GSTREAMER__</span>
<a name="l02188"></a>02188 <span class="preprocessor"></span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02189"></a>02189 <span class="preprocessor">#endif</span>
<a name="l02190"></a>02190 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l02191"></a>02191         <span class="keywordflow">case</span> <a class="code" href="mmstypes_8h.html#fa6d018baf5bd8933663cb83170d3fad5882523e60b8de3dc8e41589701eee0e" title="xine">MMSMEDIA_BE_XINE</a>:
<a name="l02192"></a>02192 <span class="preprocessor">#ifdef __HAVE_XINE__</span>
<a name="l02193"></a>02193 <span class="preprocessor"></span>            <span class="keywordflow">return</span> (xine_get_stream_info(this-&gt;<a class="code" href="classMMSAV.html#e8e638ea284672710c95063d8fa9a012" title="xine stream">stream</a>, XINE_STREAM_INFO_HAS_AUDIO) == 1);
<a name="l02194"></a>02194 <span class="preprocessor">#endif</span>
<a name="l02195"></a>02195 <span class="preprocessor"></span>            <span class="keywordflow">break</span>;
<a name="l02196"></a>02196         <span class="keywordflow">default</span>:
<a name="l02197"></a>02197             <span class="comment">// shouldn't be reached</span>
<a name="l02198"></a>02198             <span class="keywordflow">break</span>;
<a name="l02199"></a>02199     }
<a name="l02200"></a>02200 
<a name="l02201"></a>02201     <span class="keywordflow">throw</span> MMSAVError(0, <span class="stringliteral">"MMSAV::hasAudio() called but media backend does not match supported backends"</span>);
<a name="l02202"></a>02202 }
</pre></div></div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1675780-3");
pageTracker._trackPageview();
</script>

<hr class="footer"/><address class="footer" style="text-align:right;"><small>Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a></small></address>
</body>
</html>
